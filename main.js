/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);

// core/services/FileService.ts
var import_obsidian2, FileService;
var init_FileService = __esm({
  "core/services/FileService.ts"() {
    import_obsidian2 = require("obsidian");
    FileService = class {
      constructor(app) {
        __publicField(this, "app");
        this.app = app;
      }
      getFiles(dataSource) {
        if (dataSource.type === "file" && dataSource.filePath) {
          const file = this.app.vault.getAbstractFileByPath(dataSource.filePath);
          return file instanceof import_obsidian2.TFile ? [file] : [];
        }
        const allFiles = this.app.vault.getMarkdownFiles();
        return allFiles.filter((file) => {
          if (file.extension !== "md") return false;
          if (dataSource.folderPath && dataSource.folderPath !== "/" && !file.path.startsWith(dataSource.folderPath)) return false;
          if (dataSource.filter.tags.length > 0) {
            const cache = this.app.metadataCache.getFileCache(file);
            const tags = (0, import_obsidian2.getAllTags)(cache);
            if (!tags) return false;
            const hasMatch = dataSource.filter.tags.some((reqTag) => {
              const search = reqTag.startsWith("#") ? reqTag.toLowerCase() : "#" + reqTag.toLowerCase();
              return tags.some((t) => t.toLowerCase() === search || t.toLowerCase().startsWith(search + "/"));
            });
            if (!hasMatch) return false;
          }
          return true;
        });
      }
      getAvailableProperties(folderPath) {
        const files = this.app.vault.getMarkdownFiles().filter((f) => f.extension === "md" && (folderPath === "/" || f.path.startsWith(folderPath)));
        const keys = /* @__PURE__ */ new Set();
        files.forEach((file) => {
          const c = this.app.metadataCache.getFileCache(file);
          if (c == null ? void 0 : c.frontmatter) Object.keys(c.frontmatter).forEach((k) => keys.add(k));
        });
        return Array.from(keys);
      }
      getAvailableTags(folderPath) {
        const files = this.app.vault.getMarkdownFiles().filter((f) => f.extension === "md" && (folderPath === "/" || f.path.startsWith(folderPath)));
        const tagSet = /* @__PURE__ */ new Set();
        files.forEach((file) => {
          const c = this.app.metadataCache.getFileCache(file);
          const tags = (0, import_obsidian2.getAllTags)(c);
          if (tags) tags.forEach((t) => tagSet.add(t));
        });
        return Array.from(tagSet).sort();
      }
      // ÂÖºÂÆπÊé•Âè£ÔºöËé∑ÂèñÂèåÈìæÂ±ûÊÄß (ÂÆûÁé∞Áï•ÔºåÂèØÂü∫‰∫é MetadataService ÈÄªËæëÊâ©Â±ï)
      getAvailableLinkedProperties(folderPath, linkPropertyNames) {
        return [];
      }
    };
  }
});

// core/services/TableService.ts
var TableService;
var init_TableService = __esm({
  "core/services/TableService.ts"() {
    TableService = class {
      constructor(app) {
        __publicField(this, "app");
        this.app = app;
      }
      async getMarkdownTableData(file) {
        const content = await this.app.vault.read(file);
        const lines = content.split("\n");
        let headerLine = null;
        let separatorLineIndex = -1;
        for (let i = 0; i < lines.length; i++) {
          const line = lines[i].trim();
          if (line.startsWith("|") && line.endsWith("|")) {
            if (i + 1 < lines.length && lines[i + 1].trim().match(/^\|(\s*:?-+:?\s*\|)+$/)) {
              headerLine = line;
              separatorLineIndex = i + 1;
              break;
            }
          }
        }
        if (!headerLine || separatorLineIndex === -1) return { headers: [], rows: [] };
        const parseRow = (line) => line.split("|").slice(1, -1).map((c) => c.trim());
        const headers = parseRow(headerLine);
        const rows = [];
        for (let i = separatorLineIndex + 1; i < lines.length; i++) {
          const line = lines[i].trim();
          if (!line.startsWith("|")) break;
          const cells = parseRow(line);
          if (cells.length !== headers.length) continue;
          const rowData = {};
          headers.forEach((h, idx) => {
            rowData[h] = cells[idx];
          });
          rows.push(rowData);
        }
        return { headers, rows };
      }
      async getColumnValues(file, columnName) {
        const { rows } = await this.getMarkdownTableData(file);
        const values = /* @__PURE__ */ new Set();
        rows.forEach((r) => {
          if (r[columnName]) values.add(r[columnName]);
        });
        return Array.from(values).sort();
      }
    };
  }
});

// core/utils/NumberUtils.ts
var NumberUtils;
var init_NumberUtils = __esm({
  "core/utils/NumberUtils.ts"() {
    NumberUtils = class {
      static parse(val) {
        if (typeof val === "number") return isNaN(val) ? null : val;
        if (typeof val === "string") {
          const parsed = parseFloat(val);
          return isNaN(parsed) ? null : parsed;
        }
        return null;
      }
    };
  }
});

// core/services/ValueService.ts
var ValueService;
var init_ValueService = __esm({
  "core/services/ValueService.ts"() {
    init_NumberUtils();
    ValueService = class {
      constructor(app, linkResolver, tagService) {
        __publicField(this, "app");
        __publicField(this, "linkResolver");
        __publicField(this, "tagService");
        this.app = app;
        this.linkResolver = linkResolver;
        this.tagService = tagService;
      }
      async resolveValue(file, propertyName, linkSourceProperties) {
        if (propertyName.startsWith("#")) {
          return this.tagService.hasTag(file, propertyName) ? 1 : 0;
        }
        const cache = this.app.metadataCache.getFileCache(file);
        if (!cache || !cache.frontmatter) return null;
        const fm = cache.frontmatter;
        if (!linkSourceProperties || linkSourceProperties.length === 0) {
          return NumberUtils.parse(fm[propertyName]);
        }
        let totalValue = 0;
        let hasValidValue = false;
        for (const linkPropName of linkSourceProperties) {
          if (!linkPropName) continue;
          const linkRaw = fm[linkPropName];
          if (!linkRaw) continue;
          const linkTexts = Array.isArray(linkRaw) ? linkRaw.filter((x) => typeof x === "string") : [linkRaw];
          for (const linkText of linkTexts) {
            const targetFile = this.linkResolver.resolve(linkText, file.path);
            if (!targetFile) continue;
            const targetCache = this.app.metadataCache.getFileCache(targetFile);
            if (!(targetCache == null ? void 0 : targetCache.frontmatter)) continue;
            const targetVal = NumberUtils.parse(targetCache.frontmatter[propertyName]);
            if (targetVal !== null) {
              totalValue += targetVal;
              hasValidValue = true;
            }
          }
        }
        return hasValidValue ? totalValue : null;
      }
      async resolveNumericArray(file, propertyName) {
        const cache = this.app.metadataCache.getFileCache(file);
        if (!cache || !cache.frontmatter) return [];
        const raw = cache.frontmatter[propertyName];
        if (raw === void 0 || raw === null) return [];
        const inputs = Array.isArray(raw) ? raw : [raw];
        const results = [];
        for (const item of inputs) {
          const val = NumberUtils.parse(item);
          if (val !== null) results.push(val);
        }
        return results;
      }
      // Áî®‰∫éËß£ÊûêÁî®‰∫éÊòæÁ§∫ÊàñÂàÜÁªÑÁöÑËΩ¥ÂÄº
      async resolveAxisValue(file, mode, propName) {
        var _a;
        if (mode === "filename") return file.basename;
        if (mode === "created") return new Date(file.stat.ctime).toISOString().split("T")[0];
        if (mode === "modified") return new Date(file.stat.mtime).toISOString().split("T")[0];
        if (mode === "tags") {
          const tags = this.tagService.getTags(file);
          return tags.length > 0 ? tags[0] : "No Tag";
        }
        if (mode === "frontmatter" && propName) {
          const cache = this.app.metadataCache.getFileCache(file);
          const val = (_a = cache == null ? void 0 : cache.frontmatter) == null ? void 0 : _a[propName];
          if (typeof val === "number") return val;
          return val !== void 0 && val !== null ? String(val) : "Unknown";
        }
        return "Unknown";
      }
    };
  }
});

// core/services/GroupingService.ts
var GroupingService;
var init_GroupingService = __esm({
  "core/services/GroupingService.ts"() {
    GroupingService = class {
      constructor(tagService, valueService) {
        __publicField(this, "tagService");
        __publicField(this, "valueService");
        this.tagService = tagService;
        this.valueService = valueService;
      }
      async resolveGroupKeys(file, widget) {
        if (widget.xAxisMode === "tags") {
          const matchedKeys = [];
          widget.xAxisProperty.forEach((configTag) => {
            if (configTag && this.tagService.hasTag(file, configTag)) {
              matchedKeys.push(configTag);
            }
          });
          return matchedKeys;
        }
        if (widget.xAxisMode === "frontmatter") {
          const values = [];
          for (const prop of widget.xAxisProperty) {
            if (!prop) continue;
            const val2 = await this.valueService.resolveAxisValue(file, "frontmatter", prop);
            values.push(String(val2));
          }
          return [values.join("-") || "Unknown"];
        }
        const val = await this.valueService.resolveAxisValue(file, widget.xAxisMode);
        return [String(val)];
      }
    };
  }
});

// core/services/TagService.ts
var import_obsidian3, TagService;
var init_TagService = __esm({
  "core/services/TagService.ts"() {
    import_obsidian3 = require("obsidian");
    TagService = class {
      constructor(app) {
        __publicField(this, "app");
        this.app = app;
      }
      getTags(file) {
        const cache = this.app.metadataCache.getFileCache(file);
        return (0, import_obsidian3.getAllTags)(cache) || [];
      }
      hasTag(file, tagName) {
        if (!tagName) return false;
        const tags = this.getTags(file);
        if (tags.length === 0) return false;
        let search = tagName.trim();
        if (!search.startsWith("#")) search = "#" + search;
        search = search.toLowerCase();
        return tags.some((t) => {
          const lowerT = t.toLowerCase();
          return lowerT === search || lowerT.startsWith(search + "/");
        });
      }
    };
  }
});

// core/services/TaskParser.ts
var TaskParser;
var init_TaskParser = __esm({
  "core/services/TaskParser.ts"() {
    TaskParser = class {
      static parseLine(text, file, lineNumber) {
        const match = text.match(/^\s*[-*]\s*\[([ xX])\]\s*(.*)$/);
        if (!match) return null;
        const isCompleted = match[1] !== " ";
        let content = match[2].trim();
        let priority;
        if (content.includes("\u{1F53A}")) {
          priority = "high";
          content = content.replace("\u{1F53A}", "");
        } else if (content.includes("\u23EB")) {
          priority = "medium";
          content = content.replace("\u23EB", "");
        } else if (content.includes("\u{1F53D}")) {
          priority = "low";
          content = content.replace("\u{1F53D}", "");
        }
        let dueDate;
        const dateMatch = content.match(/üìÖ\s*(\d{4}-\d{2}-\d{2})/);
        if (dateMatch) {
          dueDate = dateMatch[1];
          content = content.replace(dateMatch[0], "");
        }
        content = content.trim();
        return {
          id: `${file.path}-${lineNumber}`,
          text: content,
          completed: isCompleted,
          file,
          line: lineNumber,
          priority,
          dueDate,
          isTaskNote: false
        };
      }
      static parseTaskNote(file, fm) {
        const isCompleted = fm.status === "done" || fm.completed === true;
        let priority;
        if (fm.priority === "high" || fm.priority === "High") priority = "high";
        else if (fm.priority === "medium") priority = "medium";
        else if (fm.priority === "low") priority = "low";
        return {
          id: file.path,
          text: file.basename,
          completed: isCompleted,
          file,
          line: -1,
          priority,
          dueDate: fm.due_date || fm.dueDate,
          isTaskNote: true
        };
      }
    };
  }
});

// core/services/TaskFetcher.ts
var import_obsidian4, TaskFetcher;
var init_TaskFetcher = __esm({
  "core/services/TaskFetcher.ts"() {
    import_obsidian4 = require("obsidian");
    init_TaskParser();
    TaskFetcher = class {
      constructor(app, settingsManager) {
        __publicField(this, "app");
        __publicField(this, "settingsManager");
        this.app = app;
        this.settingsManager = settingsManager;
      }
      getGlobalSettings() {
        return this.settingsManager.getSettings().taskManagement;
      }
      async getTasks(config) {
        const items = [];
        const globalSettings = this.getGlobalSettings();
        const taskAttribute = globalSettings.taskNoteAttribute;
        let files = [];
        if (config.sourceType === "file" && config.filePath) {
          const f = this.app.vault.getAbstractFileByPath(config.filePath);
          if (f instanceof import_obsidian4.TFile) files.push(f);
        } else {
          const allFiles = this.app.vault.getMarkdownFiles();
          if (config.folderPath && config.folderPath !== "/") {
            files = allFiles.filter((f) => f.path.startsWith(config.folderPath));
          } else {
            files = allFiles;
          }
          if (globalSettings.captureInboxPath && config.sourceType !== "file") {
            const inboxFile = this.app.vault.getAbstractFileByPath(globalSettings.captureInboxPath);
            if (inboxFile instanceof import_obsidian4.TFile && !files.includes(inboxFile)) files.push(inboxFile);
          }
        }
        if (globalSettings.archivePath) {
          files = files.filter((f) => f.path !== globalSettings.archivePath || f.path === config.filePath);
        }
        for (const file of files) {
          const cache = this.app.metadataCache.getFileCache(file);
          let isTaskNote = false;
          if (taskAttribute && (cache == null ? void 0 : cache.frontmatter)) {
            const [key, val] = taskAttribute.split("=").map((s) => s.trim());
            const fmVal = cache.frontmatter[key];
            if (fmVal !== void 0 && (!val || String(fmVal) === val)) isTaskNote = true;
          }
          if (isTaskNote && config.sourceType !== "file") {
            const taskNoteItem = TaskParser.parseTaskNote(file, cache.frontmatter);
            if (!config.hideCompleted || !taskNoteItem.completed) {
              items.push(taskNoteItem);
            }
          }
          const content = await this.app.vault.cachedRead(file);
          const lines = content.split("\n");
          lines.forEach((line, index) => {
            const task = TaskParser.parseLine(line, file, index);
            if (task) {
              if (config.hideCompleted && task.completed) return;
              task.isTaskNoteSubtask = isTaskNote;
              const indentMatch = line.match(/^(\s*)/);
              task.indentation = indentMatch ? indentMatch[1].length : 0;
              items.push(task);
            }
          });
        }
        if (config.sortBy === "priority") {
          const pMap = { "high": 3, "medium": 2, "low": 1, undefined: 0 };
          items.sort((a, b) => pMap[b.priority || "undefined"] - pMap[a.priority || "undefined"]);
        } else if (config.sortBy === "date") {
          items.sort((a, b) => (a.dueDate || "9999").localeCompare(b.dueDate || "9999"));
        }
        return items;
      }
    };
  }
});

// core/services/TaskCapturer.ts
var import_obsidian5, TaskCapturer;
var init_TaskCapturer = __esm({
  "core/services/TaskCapturer.ts"() {
    import_obsidian5 = require("obsidian");
    TaskCapturer = class {
      constructor(app, settingsManager) {
        __publicField(this, "app");
        __publicField(this, "settingsManager");
        this.app = app;
        this.settingsManager = settingsManager;
      }
      getGlobalSettings() {
        return this.settingsManager.getSettings().taskManagement;
      }
      async captureTasks(config) {
        const globalSettings = this.getGlobalSettings();
        if (!globalSettings.captureInboxPath) return;
        const inboxFile = this.app.vault.getAbstractFileByPath(globalSettings.captureInboxPath);
        if (!(inboxFile instanceof import_obsidian5.TFile)) return;
        let captureCount = 0;
        let filesToScan = this.app.vault.getMarkdownFiles();
        if (config && config.folderPath && config.folderPath !== "/") {
          filesToScan = filesToScan.filter((f) => f.path.startsWith(config.folderPath));
        }
        let inboxContent = await this.app.vault.read(inboxFile);
        let inboxModified = false;
        for (const file of filesToScan) {
          if (file.path === globalSettings.captureInboxPath || file.path === globalSettings.archivePath) continue;
          const cache = this.app.metadataCache.getFileCache(file);
          if (globalSettings.taskNoteAttribute && (cache == null ? void 0 : cache.frontmatter)) {
            const [key, val] = globalSettings.taskNoteAttribute.split("=").map((s) => s.trim());
            if (cache.frontmatter[key] !== void 0) continue;
          }
          let content = await this.app.vault.read(file);
          const lines = content.split("\n");
          const linesToKeep = [];
          const blocksToMove = [];
          let skipIndex = -1;
          for (let i = 0; i < lines.length; i++) {
            if (i <= skipIndex) continue;
            const line = lines[i];
            const match = line.match(/^(\s*)-\s*\[ \]\s*(.*)$/);
            if (match) {
              const blockBuffer = [line];
              const currentIndent = match[1].length;
              let j = i + 1;
              while (j < lines.length) {
                const nextLine = lines[j];
                const nextIndentMatch = nextLine.match(/^(\s*)/);
                const nextIndent = nextIndentMatch ? nextIndentMatch[1].length : 0;
                if (nextLine.trim().length === 0 || nextIndent > currentIndent) {
                  blockBuffer.push(nextLine);
                  j++;
                } else break;
              }
              blocksToMove.push(blockBuffer.join("\n"));
              captureCount++;
              skipIndex = j - 1;
            } else linesToKeep.push(line);
          }
          if (blocksToMove.length > 0) {
            await this.app.vault.modify(file, linesToKeep.join("\n"));
            const linkHeader = `#### [[${file.basename}]]`;
            const contentToAppend = blocksToMove.join("\n");
            if (inboxContent.includes(linkHeader)) {
              inboxContent = inboxContent.replace(linkHeader, `${linkHeader}
${contentToAppend}`);
            } else {
              if (!inboxContent.endsWith("\n") && inboxContent.length > 0) inboxContent += "\n";
              inboxContent += `
${linkHeader}
${contentToAppend}
`;
            }
            inboxModified = true;
          }
        }
        if (inboxModified) {
          await this.app.vault.modify(inboxFile, inboxContent);
          if (config) new import_obsidian5.Notice(`\u5DF2\u667A\u80FD\u6355\u83B7 ${captureCount} \u6761\u4EFB\u52A1`);
        }
      }
    };
  }
});

// core/services/TaskToggler.ts
var TaskToggler;
var init_TaskToggler = __esm({
  "core/services/TaskToggler.ts"() {
    TaskToggler = class {
      constructor(app) {
        __publicField(this, "app");
        this.app = app;
      }
      async toggleTask(task) {
        if (task.isTaskNote) {
          await this.app.fileManager.processFrontMatter(task.file, (fm) => {
            fm.status = task.completed ? "todo" : "done";
          });
        } else {
          const content = await this.app.vault.read(task.file);
          const lines = content.split("\n");
          let targetLineIndex = task.line;
          if (targetLineIndex >= lines.length || !lines[targetLineIndex].includes(task.text)) {
            targetLineIndex = lines.findIndex((l) => l.includes(task.text));
          }
          if (targetLineIndex !== -1) {
            const line = lines[targetLineIndex];
            const newLine = line.replace(/([-*]\s*)\[([ x])\]/, (match, prefix, state) => {
              return `${prefix}[${state === " " ? "x" : " "}]`;
            });
            lines[targetLineIndex] = newLine;
            await this.app.vault.modify(task.file, lines.join("\n"));
          }
        }
      }
    };
  }
});

// core/services/TaskArchiver.ts
var import_obsidian6, TaskArchiver;
var init_TaskArchiver = __esm({
  "core/services/TaskArchiver.ts"() {
    import_obsidian6 = require("obsidian");
    TaskArchiver = class {
      constructor(app, settingsManager) {
        __publicField(this, "app");
        __publicField(this, "settingsManager");
        this.app = app;
        this.settingsManager = settingsManager;
      }
      getGlobalSettings() {
        return this.settingsManager.getSettings().taskManagement;
      }
      // [Ê†∏ÂøÉ‰øÆÂ§ç] ÂΩíÊ°£ÈÄªËæëÂàÜÊµÅ
      async archiveCompletedTasks(config) {
        var _a;
        const globalSettings = this.getGlobalSettings();
        if (!globalSettings.archivePath) return;
        const archiveFile = this.app.vault.getAbstractFileByPath(globalSettings.archivePath);
        if (!(archiveFile instanceof import_obsidian6.TFile)) return;
        const archiveFolder = ((_a = archiveFile.parent) == null ? void 0 : _a.path) || "/";
        let filesToScan = [];
        const inboxFile = this.app.vault.getAbstractFileByPath(globalSettings.captureInboxPath || "");
        if (inboxFile instanceof import_obsidian6.TFile) filesToScan.push(inboxFile);
        if (config.sourceType === "file" && config.filePath) {
          const f = this.app.vault.getAbstractFileByPath(config.filePath);
          if (f instanceof import_obsidian6.TFile && f !== inboxFile) filesToScan.push(f);
        } else {
          this.app.vault.getMarkdownFiles().forEach((f) => {
            if ((config.folderPath === "/" || f.path.startsWith(config.folderPath)) && f !== inboxFile) filesToScan.push(f);
          });
        }
        let archiveCount = 0;
        const tableRows = [];
        for (const file of filesToScan) {
          if (file.path === globalSettings.archivePath) continue;
          const cache = this.app.metadataCache.getFileCache(file);
          let isTaskNote = false;
          if (globalSettings.taskNoteAttribute && (cache == null ? void 0 : cache.frontmatter)) {
            const [key, val] = globalSettings.taskNoteAttribute.split("=").map((s) => s.trim());
            const fmVal = cache.frontmatter[key];
            if (fmVal !== void 0 && (!val || String(fmVal) === val)) {
              isTaskNote = true;
            }
          }
          if (isTaskNote) {
            const fm = cache.frontmatter;
            const isCompleted = fm.status === "done" || fm.completed === true;
            if (isCompleted) {
              const targetPath = `${archiveFolder}/${file.name}`;
              if (this.app.vault.getAbstractFileByPath(targetPath)) {
                new import_obsidian6.Notice(`\u5F52\u6863\u5931\u8D25\uFF1A${targetPath} \u5DF2\u5B58\u5728`);
              } else {
                await this.app.fileManager.renameFile(file, targetPath);
                new import_obsidian6.Notice(`\u5DF2\u5F52\u6863\u4EFB\u52A1\u7B14\u8BB0\uFF1A${file.basename}`);
              }
            }
            continue;
          }
          let content = await this.app.vault.read(file);
          const lines = content.split("\n");
          const linesToKeep = [];
          let skipIndex = -1;
          for (let i = 0; i < lines.length; i++) {
            if (i <= skipIndex) continue;
            const line = lines[i];
            const match = line.match(/^(\s*)[-*]\s*\[x\]\s*(.*)$/i);
            if (match) {
              const currentIndent = match[1].length;
              let taskText = match[2].trim();
              const subLines = [];
              let j = i + 1;
              while (j < lines.length) {
                const nextLine = lines[j];
                const nextIndentMatch = nextLine.match(/^(\s*)/);
                const nextIndent = nextIndentMatch ? nextIndentMatch[1].length : 0;
                if (nextLine.trim().length === 0 || nextIndent > currentIndent) {
                  const cleanSub = nextLine.trim().replace(/^[-*]\s+/, "");
                  if (cleanSub) subLines.push(cleanSub);
                  j++;
                } else break;
              }
              skipIndex = j - 1;
              let priority = "\u65E0";
              if (taskText.includes("\u{1F53A}")) {
                priority = "\u9AD8";
                taskText = taskText.replace("\u{1F53A}", "");
              } else if (taskText.includes("\u23EB")) {
                priority = "\u4E2D";
                taskText = taskText.replace("\u23EB", "");
              } else if (taskText.includes("\u{1F53D}")) {
                priority = "\u4F4E";
                taskText = taskText.replace("\u{1F53D}", "");
              }
              taskText = taskText.replace(/üìÖ\s*\d{4}-\d{2}-\d{2}/, "").trim();
              let cellContent = taskText;
              if (subLines.length > 0) cellContent += `<br><span style="color:var(--text-muted);font-size:0.9em">- ${subLines.join("<br>- ")}</span>`;
              cellContent = cellContent.replace(/\|/g, "\\|");
              const timeStr = (0, import_obsidian6.moment)().format("YYYY-MM-DD HH:mm");
              const sourceLink = `[[${file.basename}]]`;
              tableRows.push(`| ${timeStr} | ${cellContent} | ${sourceLink} | ${priority} |`);
              archiveCount++;
            } else linesToKeep.push(line);
          }
          if (archiveCount > 0 && tableRows.length > 0) {
            await this.app.vault.modify(file, linesToKeep.join("\n"));
          }
        }
        if (tableRows.length > 0) {
          let archiveContent = await this.app.vault.read(archiveFile);
          let appendText = "";
          if (!/\|\s*ÂÆåÊàêÊó∂Èó¥/.test(archiveContent)) appendText += `
| \u5B8C\u6210\u65F6\u95F4 | \u4EFB\u52A1\u5185\u5BB9 | \u6765\u6E90 | \u4F18\u5148\u7EA7 |
|---|---|---|---|
`;
          else if (!archiveContent.endsWith("\n")) appendText += "\n";
          appendText += tableRows.join("\n") + "\n";
          await this.app.vault.append(archiveFile, appendText);
          new import_obsidian6.Notice(`\u5DF2\u5F52\u6863 ${archiveCount} \u6761\u4EFB\u52A1\u9879`);
        }
      }
    };
  }
});

// core/services/TaskService.ts
var import_obsidian7, TaskService;
var init_TaskService = __esm({
  "core/services/TaskService.ts"() {
    import_obsidian7 = require("obsidian");
    init_TaskFetcher();
    init_TaskCapturer();
    init_TaskToggler();
    init_TaskArchiver();
    TaskService = class {
      constructor(app, settingsManager) {
        __publicField(this, "app");
        __publicField(this, "settingsManager");
        __publicField(this, "taskFetcher");
        __publicField(this, "taskCapturer");
        __publicField(this, "taskToggler");
        __publicField(this, "taskArchiver");
        this.app = app;
        this.settingsManager = settingsManager;
        this.taskFetcher = new TaskFetcher(app, settingsManager);
        this.taskCapturer = new TaskCapturer(app, settingsManager);
        this.taskToggler = new TaskToggler(app);
        this.taskArchiver = new TaskArchiver(app, settingsManager);
      }
      getGlobalSettings() {
        return this.settingsManager.getSettings().taskManagement;
      }
      async getTasks(config) {
        return this.taskFetcher.getTasks(config);
      }
      async quickAddTask(taskLine) {
        const globalSettings = this.getGlobalSettings();
        if (!globalSettings.captureInboxPath) {
          new import_obsidian7.Notice("\u8BF7\u5148\u914D\u7F6E\u6536\u96C6\u7BB1");
          return;
        }
        const inboxFile = this.app.vault.getAbstractFileByPath(globalSettings.captureInboxPath);
        if (!(inboxFile instanceof import_obsidian7.TFile)) {
          new import_obsidian7.Notice("\u6536\u96C6\u7BB1\u6587\u4EF6\u4E0D\u5B58\u5728");
          return;
        }
        await this.app.vault.append(inboxFile, `
${taskLine}`);
        new import_obsidian7.Notice("\u4EFB\u52A1\u5DF2\u6DFB\u52A0");
      }
      async captureTasks(config) {
        return this.taskCapturer.captureTasks(config);
      }
      async archiveCompletedTasks(config) {
        return this.taskArchiver.archiveCompletedTasks(config);
      }
      async toggleTask(task) {
        return this.taskToggler.toggleTask(task);
      }
    };
  }
});

// core/services/LinkResolver.ts
var import_obsidian8, LinkResolver;
var init_LinkResolver = __esm({
  "core/services/LinkResolver.ts"() {
    import_obsidian8 = require("obsidian");
    LinkResolver = class {
      constructor(app) {
        __publicField(this, "app");
        this.app = app;
      }
      resolve(linkText, sourcePath) {
        if (!linkText || typeof linkText !== "string") return null;
        const cleanLink = linkText.replace(/[\[\]"]/g, "").split("|")[0];
        const file = this.app.metadataCache.getFirstLinkpathDest(cleanLink, sourcePath);
        return file instanceof import_obsidian8.TFile && file.extension === "md" ? file : null;
      }
    };
  }
});

// core/services/Aggregator.ts
var Aggregator;
var init_Aggregator = __esm({
  "core/services/Aggregator.ts"() {
    Aggregator = class {
      static aggregate(values, type) {
        if (values.length === 0) return 0;
        switch (type) {
          case "sum":
            return values.reduce((a, b) => a + b, 0);
          case "avg":
            return values.reduce((a, b) => a + b, 0) / values.length;
          case "max":
            return Math.max(...values);
          case "min":
            return Math.min(...values);
          case "count":
            return values.length;
          case "raw":
            return values.length > 0 ? values[0] : 0;
          default:
            return values.reduce((a, b) => a + b, 0);
        }
      }
    };
  }
});

// core/utils/FilterMatcher.ts
var FilterMatcher;
var init_FilterMatcher = __esm({
  "core/utils/FilterMatcher.ts"() {
    FilterMatcher = class {
      /**
       * Âà§Êñ≠Êüê‰∏ÄË°åÊï∞ÊçÆÊòØÂê¶Á¨¶ÂêàËøáÊª§ÈÖçÁΩÆ
       * @param row Êï∞ÊçÆË°å (Key: ÂàóÂêç, Value: ÂçïÂÖÉÊ†ºÂÄº)
       * @param config ËøáÊª§ÈÖçÁΩÆÂØπË±°
       * @returns true: ‰øùÁïôËØ•Ë°å; false: ËøáÊª§Êéâ
       */
      static match(row, config) {
        if (!config || !config.conditions || config.conditions.length === 0) return true;
        const activeConditions = config.conditions.filter((c) => c.enabled);
        if (activeConditions.length === 0) return true;
        const results = activeConditions.map((condition) => this.checkCondition(row, condition));
        if (config.logic === "AND") {
          return results.every((r) => r === true);
        } else {
          return results.some((r) => r === true);
        }
      }
      static checkCondition(row, condition) {
        const colName = condition.column.trim();
        let cellVal = row[colName];
        if (cellVal === void 0) {
          const matchedKey = Object.keys(row).find((k) => k.trim() === colName);
          if (matchedKey) cellVal = row[matchedKey];
        }
        const valStr = (cellVal || "").toString().trim();
        const targetStr = condition.value.trim();
        const op = condition.operator;
        const numVal = parseFloat(valStr);
        const numTarget = parseFloat(targetStr);
        const isNumComp = !isNaN(numVal) && !isNaN(numTarget) && targetStr !== "";
        switch (op) {
          case "eq":
            return valStr === targetStr;
          case "neq":
            return valStr !== targetStr;
          case "contains":
            return valStr.toLowerCase().includes(targetStr.toLowerCase());
          case "not_contains":
            return !valStr.toLowerCase().includes(targetStr.toLowerCase());
          case "gt":
            return isNumComp ? numVal > numTarget : valStr > targetStr;
          case "lt":
            return isNumComp ? numVal < numTarget : valStr < targetStr;
          case "gte":
            return isNumComp ? numVal >= numTarget : valStr >= targetStr;
          case "lte":
            return isNumComp ? numVal <= numTarget : valStr <= targetStr;
          default:
            return true;
        }
      }
    };
  }
});

// core/utils/ColorUtils.ts
var ColorUtils;
var init_ColorUtils = __esm({
  "core/utils/ColorUtils.ts"() {
    ColorUtils = class {
      /** ËÆæÁΩÆËá™ÂÆö‰πâËâ≤ÊùøÔºåË¶ÜÁõñÈªòËÆ§ */
      static setCustomPalette(palette) {
        this.customPalette = palette.slice();
      }
      /** Ëé∑ÂèñÂΩìÂâçËâ≤ÊùøÔºà‰ºòÂÖàËá™ÂÆö‰πâËâ≤ÊùøÔºâ */
      static getPalette() {
        return this.customPalette.length > 0 ? this.customPalette : this.defaultPalette;
      }
      /** Ê†πÊçÆÁ¥¢ÂºïËé∑ÂèñÈ¢úËâ≤ */
      static getColor(index) {
        const palette = this.getPalette();
        return palette[index % palette.length];
      }
      /** ÁîüÊàêÂØπÊØîËâ≤ÔºàÈ´ò‰∫Æ/ËæÖÂä©Ëâ≤Ôºâ */
      static getContrastColor(hex) {
        const rgb = this.hexToRgb(hex);
        if (!rgb) return "#000000";
        const brightness = (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1e3;
        return brightness > 128 ? "#000000" : "#ffffff";
      }
      /** ÁîüÊàêËæÖÂä©Ëâ≤ÔºàÊµÖËâ≤ÊàñÈÄèÊòéÈ´ò‰∫ÆÔºâ */
      static getAccentColor(hex, opacity = 0.2) {
        return this.hexToRgba(hex, opacity);
      }
      /** HEX ËΩ¨ RGB */
      static hexToRgb(hex) {
        const sanitized = hex.replace("#", "");
        const bigint = parseInt(sanitized, 16);
        if (sanitized.length === 6) {
          const r = bigint >> 16 & 255;
          const g = bigint >> 8 & 255;
          const b = bigint & 255;
          return { r, g, b };
        } else if (sanitized.length === 3) {
          const r = bigint >> 8 & 15;
          const g = bigint >> 4 & 15;
          const b = bigint & 15;
          return { r: r * 17, g: g * 17, b: b * 17 };
        }
        return null;
      }
      /** HEX ËΩ¨ RGBA */
      static hexToRgba(hex, alpha = 1) {
        const rgb = this.hexToRgb(hex);
        if (!rgb) return `rgba(0,0,0,${alpha})`;
        return `rgba(${rgb.r},${rgb.g},${rgb.b},${alpha})`;
      }
    };
    // ÈªòËÆ§Ëâ≤Êùø
    __publicField(ColorUtils, "defaultPalette", [
      "#1f77b4",
      "#ff7f0e",
      "#2ca02c",
      "#d62728",
      "#9467bd",
      "#8c564b",
      "#e377c2",
      "#7f7f7f",
      "#bcbd22",
      "#17becf"
    ]);
    __publicField(ColorUtils, "customPalette", []);
  }
});

// core/processors/TableProcessor.ts
var TableProcessor;
var init_TableProcessor = __esm({
  "core/processors/TableProcessor.ts"() {
    init_Aggregator();
    init_FilterMatcher();
    init_ColorUtils();
    init_NumberUtils();
    TableProcessor = class {
      constructor(fileService, tableService) {
        __publicField(this, "fileService");
        __publicField(this, "tableService");
        this.fileService = fileService;
        this.tableService = tableService;
      }
      async process(widget) {
        const source = widget.dataSources[0];
        const files = this.fileService.getFiles(source);
        if (files.length === 0) return { labels: [], datasets: [] };
        const { headers, rows: rawRows } = await this.tableService.getMarkdownTableData(files[0]);
        if (rawRows.length === 0) return { labels: [], datasets: [] };
        let xColKey = widget.xAxisProperty[0] || headers[0];
        const firstRow = rawRows[0] || {};
        const realXColKey = Object.keys(firstRow).find((k) => k.trim() === xColKey.trim()) || xColKey;
        if (source.filterConfig && source.filterConfig.enableSplitSeries) {
          return this.processSplitSeries(widget, rawRows, realXColKey, source.filterConfig.conditions);
        }
        let rows = rawRows;
        if (source.filterConfig) {
          rows = rows.filter((r) => FilterMatcher.match(r, source.filterConfig));
        } else if (source.tableFilterColumn && source.tableFilterValue) {
          const targetCol = source.tableFilterColumn.trim();
          const targetVal = source.tableFilterValue.trim();
          if (targetCol) {
            rows = rows.filter((r) => {
              let cellVal = r[targetCol];
              if (cellVal === void 0) {
                const k = Object.keys(r).find((key) => key.trim() === targetCol);
                if (k) cellVal = r[k];
              }
              return (cellVal || "").toString().trim() === targetVal;
            });
          }
        }
        const { labels, groupedRows } = this.groupRows(rows, realXColKey);
        const datasets = this.generateDatasets(widget, labels, groupedRows);
        return { labels, datasets };
      }
      // ... processSplitSeries, groupRows, generateDatasets ÈÄªËæë‰øùÊåÅ‰∏çÂèò ...
      // ... ÂîØ‰∏ÄÈúÄË¶Å‰øÆÊîπÁöÑÊòØ parseNumber Ë∞ÉÁî®Êîπ‰∏∫ NumberUtils.parse ...
      processSplitSeries(widget, allRows, xKey, conditions) {
        const activeConditions = conditions.filter((c) => c.enabled);
        if (activeConditions.length === 0) return { labels: [], datasets: [] };
        const unionLabelsSet = /* @__PURE__ */ new Set();
        activeConditions.forEach((cond) => {
          const filtered = allRows.filter((r) => FilterMatcher.match(r, { logic: "AND", conditions: [cond] }));
          filtered.forEach((row) => {
            let groupKey = row[xKey] || "Unknown";
            const dateMatch = groupKey.match(/^(\d{4}[-/]\d{1,2}[-/]\d{1,2})/);
            if (dateMatch) groupKey = dateMatch[1];
            unionLabelsSet.add(groupKey);
          });
        });
        const sortedLabels = Array.from(unionLabelsSet).sort();
        const datasets = [];
        activeConditions.forEach((cond, index) => {
          const subRows = allRows.filter((r) => FilterMatcher.match(r, { logic: "AND", conditions: [cond] }));
          const { groupedRows } = this.groupRows(subRows, xKey);
          widget.yAxisProperties.forEach((yConf) => {
            const data = sortedLabels.map((label2) => {
              const currentGroupRows = groupedRows.get(label2) || [];
              let finalRows = currentGroupRows;
              if (yConf.filterConfig) finalRows = finalRows.filter((r) => FilterMatcher.match(r, yConf.filterConfig));
              const values = [];
              const colName = yConf.name.trim();
              finalRows.forEach((row) => {
                let rawVal = row[yConf.name];
                if (rawVal === void 0) {
                  const k = Object.keys(row).find((key) => key.trim() === colName);
                  if (k) rawVal = row[k];
                }
                const num = NumberUtils.parse(rawVal);
                if (num !== null) values.push(num);
                else if (!widget.ignoreEmpty) values.push(0);
              });
              return Aggregator.aggregate(values, yConf.aggregation || "sum");
            });
            const opMap = { "eq": "=", "neq": "!=", "gt": ">", "lt": "<", "contains": "\u542B" };
            const opStr = opMap[cond.operator] || cond.operator;
            const condLabel = `${cond.column} ${opStr} ${cond.value}`;
            const label = widget.yAxisProperties.length > 1 ? `${yConf.name} (${condLabel})` : condLabel;
            datasets.push({ label, data, enablePercentage: yConf.enablePercentage, color: ColorUtils.getColor(index) });
          });
        });
        this.applyPostProcessing(widget, datasets);
        return { labels: sortedLabels, datasets };
      }
      groupRows(rows, xKey) {
        const groupedRows = /* @__PURE__ */ new Map();
        const labelsSet = /* @__PURE__ */ new Set();
        rows.forEach((row) => {
          let groupKey = row[xKey] || "Unknown";
          const dateMatch = groupKey.match(/^(\d{4}[-/]\d{1,2}[-/]\d{1,2})/);
          if (dateMatch) groupKey = dateMatch[1];
          labelsSet.add(groupKey);
          if (!groupedRows.has(groupKey)) groupedRows.set(groupKey, []);
          groupedRows.get(groupKey).push(row);
        });
        return { labels: Array.from(labelsSet).sort(), groupedRows };
      }
      generateDatasets(widget, labels, groupedRows) {
        const datasets = widget.yAxisProperties.map((yConf) => {
          const data = labels.map((label) => {
            let currentGroupRows = groupedRows.get(label) || [];
            if (yConf.filterConfig) currentGroupRows = currentGroupRows.filter((r) => FilterMatcher.match(r, yConf.filterConfig));
            const values = [];
            const colName = yConf.name.trim();
            currentGroupRows.forEach((row) => {
              let rawVal = row[yConf.name];
              if (rawVal === void 0) {
                const k = Object.keys(row).find((key) => key.trim() === colName);
                if (k) rawVal = row[k];
              }
              const num = NumberUtils.parse(rawVal);
              if (num !== null) values.push(num);
              else if (!widget.ignoreEmpty) values.push(0);
            });
            return Aggregator.aggregate(values, yConf.aggregation || "sum");
          });
          return { label: yConf.name, data, enablePercentage: yConf.enablePercentage, color: yConf.color || "#4361ee" };
        });
        this.applyPostProcessing(widget, datasets);
        return datasets;
      }
      applyPostProcessing(widget, datasets) {
        if (widget.isCumulative) {
          datasets.forEach((ds) => {
            let runningTotal = 0;
            ds.data = ds.data.map((val) => {
              const current = val === null ? 0 : val;
              runningTotal += current;
              return runningTotal;
            });
          });
        }
      }
    };
  }
});

// core/processors/FolderProcessor.ts
var FolderProcessor;
var init_FolderProcessor = __esm({
  "core/processors/FolderProcessor.ts"() {
    init_Aggregator();
    FolderProcessor = class {
      constructor(fileService, valueService, groupingService, tagService) {
        __publicField(this, "fileService");
        __publicField(this, "valueService");
        __publicField(this, "groupingService");
        __publicField(this, "tagService");
        this.fileService = fileService;
        this.valueService = valueService;
        this.groupingService = groupingService;
        this.tagService = tagService;
      }
      async process(widget) {
        const source = widget.dataSources[0];
        const files = this.fileService.getFiles(source);
        const groupedData = /* @__PURE__ */ new Map();
        const labelsSet = /* @__PURE__ */ new Set();
        if (widget.xAxisMode === "tags") {
          widget.xAxisProperty.forEach((tag) => {
            if (tag) labelsSet.add(tag);
          });
        }
        for (const file of files) {
          const groupKeys = await this.groupingService.resolveGroupKeys(file, widget);
          for (const groupKey of groupKeys) {
            labelsSet.add(groupKey);
            if (!groupedData.has(groupKey)) {
              const bucketCount = widget.isTotalCount ? 1 : widget.yAxisProperties.length;
              groupedData.set(groupKey, Array(bucketCount).fill(null).map(() => []));
            }
            const groupValues = groupedData.get(groupKey);
            if (widget.isTotalCount) {
              groupValues[0].push(1);
            } else {
              for (let i = 0; i < widget.yAxisProperties.length; i++) {
                const prop = widget.yAxisProperties[i];
                if (prop.type === "tag") {
                  const hasTag = this.tagService.hasTag(file, prop.name);
                  groupValues[i].push(hasTag ? 1 : 0);
                  continue;
                }
                const linkProps = widget.enableLinkPenetration && widget.xAxisProperty.length > 0 ? widget.xAxisProperty : void 0;
                const val = await this.valueService.resolveValue(file, prop.name, linkProps);
                if (val !== null && val !== void 0 && !isNaN(val)) {
                  groupValues[i].push(val);
                } else if (!widget.ignoreEmpty) {
                  groupValues[i].push(0);
                }
              }
            }
          }
        }
        const sortedLabels = Array.from(labelsSet).sort();
        let datasets = [];
        if (widget.isTotalCount) {
          datasets = [{ label: "\u6587\u6863\u603B\u6570", data: [], enablePercentage: false }];
        } else {
          datasets = widget.yAxisProperties.map((p) => ({
            label: p.name || (p.type === "tag" ? `\u6807\u7B7E: ${p.name}` : "\u672A\u547D\u540D"),
            data: [],
            enablePercentage: p.enablePercentage
          }));
        }
        for (const label of sortedLabels) {
          const groupValues = groupedData.get(label) || (widget.isTotalCount ? [[]] : widget.yAxisProperties.map(() => []));
          for (let i = 0; i < datasets.length; i++) {
            const rawValues = groupValues[i];
            if (rawValues.length === 0) {
              if (widget.ignoreEmpty && !widget.isTotalCount) datasets[i].data.push(null);
              else datasets[i].data.push(0);
            } else {
              let aggregation = widget.isTotalCount ? "sum" : widget.yAxisProperties[i].aggregation;
              if (!widget.isTotalCount && widget.yAxisProperties[i].type === "tag") aggregation = "sum";
              const finalVal = Aggregator.aggregate(rawValues, aggregation);
              datasets[i].data.push(finalVal);
            }
          }
        }
        if (widget.isCumulative) {
          datasets.forEach((ds) => {
            let runningTotal = 0;
            ds.data = ds.data.map((val) => {
              const current = val === null ? 0 : val;
              runningTotal += current;
              return runningTotal;
            });
          });
        }
        return { labels: sortedLabels, datasets };
      }
    };
  }
});

// core/processors/MultiColumnProcessor.ts
var MultiColumnProcessor;
var init_MultiColumnProcessor = __esm({
  "core/processors/MultiColumnProcessor.ts"() {
    init_Aggregator();
    MultiColumnProcessor = class {
      constructor(fileService, valueService) {
        __publicField(this, "fileService");
        __publicField(this, "valueService");
        this.fileService = fileService;
        this.valueService = valueService;
      }
      async process(files, widget) {
        var _a;
        const labels = widget.xAxisProperty.filter((p) => !!p);
        const buckets = /* @__PURE__ */ new Map();
        labels.forEach((l) => buckets.set(l, []));
        const yConfig = widget.yAxisProperties[0];
        const targetPropName = yConfig ? yConfig.name : "";
        const aggType = yConfig ? yConfig.aggregation : widget.chartType === "radar" ? "avg" : "sum";
        for (const file of files) {
          for (const xProp of labels) {
            let val = null;
            if (widget.enableLinkPenetration && targetPropName) {
              val = await this.valueService.resolveValue(file, targetPropName, [xProp]);
            } else {
              val = await this.valueService.resolveValue(file, xProp);
            }
            if (val !== null && val !== void 0 && !isNaN(val)) (_a = buckets.get(xProp)) == null ? void 0 : _a.push(val);
          }
        }
        const data = [];
        for (const label of labels) {
          const values = buckets.get(label) || [];
          data.push(Aggregator.aggregate(values, aggType));
        }
        const datasets = [{
          label: widget.chartType === "radar" ? "\u6570\u503C\u5206\u5E03" : targetPropName || "\u6570\u503C",
          data,
          enablePercentage: false,
          color: "#4361ee"
        }];
        return { labels, datasets };
      }
    };
  }
});

// core/processors/HistogramProcessor.ts
var HistogramProcessor;
var init_HistogramProcessor = __esm({
  "core/processors/HistogramProcessor.ts"() {
    HistogramProcessor = class {
      constructor(fileService, valueService) {
        __publicField(this, "fileService");
        __publicField(this, "valueService");
        this.fileService = fileService;
        this.valueService = valueService;
      }
      async process(widget) {
        const source = widget.dataSources[0];
        const files = this.fileService.getFiles(source);
        const propName = widget.xAxisProperty[0];
        if (!propName) return { labels: [], datasets: [] };
        const values = [];
        for (const file of files) {
          const fileValues = await this.valueService.resolveNumericArray(file, propName);
          values.push(...fileValues);
        }
        if (values.length === 0) return { labels: [], datasets: [] };
        const min = Math.min(...values);
        const max = Math.max(...values);
        let binSize = widget.binSize;
        if (!binSize || binSize <= 0) {
          const k = Math.ceil(Math.log2(values.length) + 1);
          binSize = (max - min) / k;
          if (binSize === 0) binSize = 1;
        }
        const start = Math.floor(min / binSize) * binSize;
        const bucketCount = Math.floor((max - start) / binSize) + 1;
        const buckets = new Array(bucketCount).fill(0);
        const labels = [];
        for (let i = 0; i < bucketCount; i++) {
          const bStart = start + i * binSize;
          const bEnd = bStart + binSize;
          const l1 = Number.isInteger(bStart) ? bStart : bStart.toFixed(1);
          const l2 = Number.isInteger(bEnd) ? bEnd : bEnd.toFixed(1);
          labels.push(`${l1}-${l2}`);
        }
        values.forEach((v) => {
          let idx = Math.floor((v - start) / binSize);
          if (idx >= bucketCount) idx = bucketCount - 1;
          if (idx < 0) idx = 0;
          buckets[idx]++;
        });
        return { labels, datasets: [{ label: "\u9891\u6B21", data: buckets, enablePercentage: false, color: "#4361ee" }] };
      }
    };
  }
});

// core/processors/StandardProcessor.ts
var StandardProcessor;
var init_StandardProcessor = __esm({
  "core/processors/StandardProcessor.ts"() {
    init_TableProcessor();
    init_FolderProcessor();
    init_MultiColumnProcessor();
    init_HistogramProcessor();
    StandardProcessor = class {
      constructor(fileService, tableService, valueService, groupingService, tagService) {
        __publicField(this, "tableProcessor");
        __publicField(this, "folderProcessor");
        __publicField(this, "multiColumnProcessor");
        __publicField(this, "histogramProcessor");
        __publicField(this, "fileService");
        this.fileService = fileService;
        this.tableProcessor = new TableProcessor(fileService, tableService);
        this.folderProcessor = new FolderProcessor(fileService, valueService, groupingService, tagService);
        this.multiColumnProcessor = new MultiColumnProcessor(fileService, valueService);
        this.histogramProcessor = new HistogramProcessor(fileService, valueService);
      }
      async process(widget) {
        const source = widget.dataSources[0];
        if (source.type === "file" && source.filePath) {
          return this.tableProcessor.process(widget);
        }
        if (widget.chartType === "histogram") {
          return this.histogramProcessor.process(widget);
        }
        const isMultiColumnMode = widget.enableTranspose && widget.xAxisMode === "frontmatter" && widget.xAxisProperty.length > 0 || widget.chartType === "radar";
        if (isMultiColumnMode) {
          const files = this.fileService.getFiles(source);
          return this.multiColumnProcessor.process(files, widget);
        }
        return this.folderProcessor.process(widget);
      }
    };
  }
});

// core/processors/BubbleProcessor.ts
var BubbleProcessor;
var init_BubbleProcessor = __esm({
  "core/processors/BubbleProcessor.ts"() {
    BubbleProcessor = class {
      constructor(fileService, valueService) {
        __publicField(this, "fileService");
        __publicField(this, "valueService");
        this.fileService = fileService;
        this.valueService = valueService;
      }
      async process(widget) {
        if (widget.dataSources.length === 0) return { points: [] };
        const source = widget.dataSources[0];
        const files = this.fileService.getFiles(source);
        const points = [];
        const xMap = /* @__PURE__ */ new Map();
        const yMap = /* @__PURE__ */ new Map();
        let xCounter = 0;
        let yCounter = 0;
        for (const file of files) {
          let xRaw = "Unknown";
          if (widget.xAxisMode === "frontmatter" && widget.xAxisProperty.length > 0) {
            const val = await this.valueService.resolveValue(file, widget.xAxisProperty[0]);
            if (typeof val === "number") xRaw = val;
            else {
              const str = await this.valueService.resolveAxisValue(file, "frontmatter", widget.xAxisProperty[0]);
              xRaw = String(str);
            }
          } else {
            xRaw = String(await this.valueService.resolveAxisValue(file, widget.xAxisMode));
          }
          let yRaw = 0;
          if (widget.yAxisMode === "frontmatter" && widget.yAxisProperty) {
            const val = await this.valueService.resolveValue(file, widget.yAxisProperty);
            if (typeof val === "number") yRaw = val;
            else {
              const str = await this.valueService.resolveAxisValue(file, "frontmatter", widget.yAxisProperty);
              yRaw = String(str);
            }
          } else if (widget.yAxisMode) {
            yRaw = String(await this.valueService.resolveAxisValue(file, widget.yAxisMode));
          }
          let rVal = 1;
          if (widget.bubbleSizeProperty) {
            const v = await this.valueService.resolveValue(file, widget.bubbleSizeProperty);
            rVal = v !== null ? v : 1;
          }
          let label = file.basename;
          if (widget.bubbleLabelProperty) {
            const v = await this.valueService.resolveAxisValue(file, "frontmatter", widget.bubbleLabelProperty);
            if (v && v !== "Unknown") label = String(v);
          }
          let xNum;
          if (typeof xRaw === "number") {
            xNum = xRaw;
          } else {
            if (!xMap.has(String(xRaw))) xMap.set(String(xRaw), xCounter++);
            xNum = xMap.get(String(xRaw));
          }
          let yNum;
          if (typeof yRaw === "number") {
            yNum = yRaw;
          } else {
            if (!yMap.has(String(yRaw))) yMap.set(String(yRaw), yCounter++);
            yNum = yMap.get(String(yRaw));
          }
          points.push({ x: xNum, y: yNum, r: rVal, label, rawX: String(xRaw), rawY: String(yRaw) });
        }
        return { points, xLabels: xMap.size > 0 ? Array.from(xMap.keys()) : void 0, yLabels: yMap.size > 0 ? Array.from(yMap.keys()) : void 0 };
      }
    };
  }
});

// core/processors/HeatmapProcessor.ts
var HeatmapProcessor;
var init_HeatmapProcessor = __esm({
  "core/processors/HeatmapProcessor.ts"() {
    init_Aggregator();
    HeatmapProcessor = class {
      constructor(fileService, valueService) {
        __publicField(this, "fileService");
        __publicField(this, "valueService");
        this.fileService = fileService;
        this.valueService = valueService;
      }
      async process(widget) {
        var _a;
        const source = widget.dataSources[0];
        const files = this.fileService.getFiles(source);
        const grid = /* @__PURE__ */ new Map();
        const xSet = /* @__PURE__ */ new Set();
        const ySet = /* @__PURE__ */ new Set();
        for (const file of files) {
          const xKey = await this.valueService.resolveAxisValue(file, widget.xAxisMode, widget.xAxisProperty[0]);
          const yKey = await this.valueService.resolveAxisValue(file, widget.yAxisMode || "frontmatter", widget.yAxisProperty);
          const val = await this.valueService.resolveValue(file, widget.bubbleSizeProperty || "value");
          if (val === null) continue;
          const xStr = String(xKey);
          const yStr = String(yKey);
          xSet.add(xStr);
          ySet.add(yStr);
          if (!grid.has(xStr)) grid.set(xStr, /* @__PURE__ */ new Map());
          if (!grid.get(xStr).has(yStr)) grid.get(xStr).set(yStr, []);
          grid.get(xStr).get(yStr).push(val);
        }
        const xLabels = Array.from(xSet).sort();
        const yLabels = Array.from(ySet).sort();
        const matrix = [];
        let min = Infinity;
        let max = -Infinity;
        for (let i = 0; i < yLabels.length; i++) {
          const row = [];
          for (let j = 0; j < xLabels.length; j++) {
            const values = ((_a = grid.get(xLabels[j])) == null ? void 0 : _a.get(yLabels[i])) || [];
            const finalVal = values.length > 0 ? Aggregator.aggregate(values, "sum") : 0;
            row.push(finalVal);
            if (finalVal < min) min = finalVal;
            if (finalVal > max) max = finalVal;
          }
          matrix.push(row);
        }
        return { matrix, xLabels, yLabels, min: min === Infinity ? 0 : min, max: max === -Infinity ? 0 : max };
      }
    };
  }
});

// core/processors/GitLineProcessor.ts
var GitLineProcessor;
var init_GitLineProcessor = __esm({
  "core/processors/GitLineProcessor.ts"() {
    GitLineProcessor = class {
      constructor(taskService) {
        __publicField(this, "taskService");
        this.taskService = taskService;
      }
      async process(widget) {
        const source = widget.dataSources[0];
        const todoConfig = {
          sourceType: source.type,
          folderPath: source.folderPath,
          filePath: source.filePath,
          hideCompleted: false,
          // GitLine ÈúÄË¶ÅÂéÜÂè≤Êï∞ÊçÆ
          sortBy: "default"
        };
        const tasks = await this.taskService.getTasks(todoConfig);
        tasks.forEach((task) => {
          if (task.indentation === void 0) task.indentation = 0;
          if (task.isTaskNoteSubtask) {
            task.indentation += 1;
          }
        });
        tasks.sort((a, b) => {
          if (a.file.path !== b.file.path) {
            return a.file.path.localeCompare(b.file.path);
          }
          return a.line - b.line;
        });
        return tasks;
      }
    };
  }
});

// core/DataEngine.ts
var DataEngine;
var init_DataEngine = __esm({
  "core/DataEngine.ts"() {
    init_FileService();
    init_TableService();
    init_ValueService();
    init_GroupingService();
    init_TagService();
    init_TaskService();
    init_LinkResolver();
    init_StandardProcessor();
    init_BubbleProcessor();
    init_HeatmapProcessor();
    init_GitLineProcessor();
    DataEngine = class {
      constructor(app, settingsManager) {
        __publicField(this, "fileService");
        __publicField(this, "tableService");
        __publicField(this, "valueService");
        __publicField(this, "groupingService");
        __publicField(this, "tagService");
        __publicField(this, "linkResolver");
        __publicField(this, "taskService");
        __publicField(this, "standardProcessor");
        __publicField(this, "bubbleProcessor");
        __publicField(this, "heatmapProcessor");
        __publicField(this, "gitLineProcessor");
        __publicField(this, "app");
        this.app = app;
        this.fileService = new FileService(app);
        this.tableService = new TableService(app);
        this.tagService = new TagService(app);
        this.linkResolver = new LinkResolver(app);
        if (settingsManager) {
          this.taskService = new TaskService(app, settingsManager);
          this.gitLineProcessor = new GitLineProcessor(this.taskService);
        }
        this.valueService = new ValueService(app, this.linkResolver, this.tagService);
        this.groupingService = new GroupingService(this.tagService, this.valueService);
        this.standardProcessor = new StandardProcessor(this.fileService, this.tableService, this.valueService, this.groupingService, this.tagService);
        this.bubbleProcessor = new BubbleProcessor(this.fileService, this.valueService);
        this.heatmapProcessor = new HeatmapProcessor(this.fileService, this.valueService);
      }
      async getGitLineData(widget) {
        if (this.gitLineProcessor) return this.gitLineProcessor.process(widget);
        return [];
      }
      async getChartData(w) {
        return this.standardProcessor.process(w);
      }
      async getBubbleData(w) {
        return this.bubbleProcessor.process(w);
      }
      async getHeatmapData(w) {
        return this.heatmapProcessor.process(w);
      }
      async getMarkdownTableData(f) {
        return this.tableService.getMarkdownTableData(f);
      }
      getAvailableProperties(p) {
        return this.fileService.getAvailableProperties(p);
      }
      getAvailableTags(p) {
        return this.fileService.getAvailableTags(p);
      }
      getAvailableLinkedProperties(p, l) {
        return this.fileService.getAvailableLinkedProperties(p, l);
      }
    };
  }
});

// core/constants.ts
var WIDGET_DEFAULTS;
var init_constants = __esm({
  "core/constants.ts"() {
    init_ColorUtils();
    WIDGET_DEFAULTS = {
      chart: () => ({
        type: "chart",
        chartType: "bar",
        title: "\u65B0\u5EFA\u7EDF\u8BA1\u56FE\u8868",
        dataSources: [{
          id: crypto.randomUUID(),
          folderPath: "/",
          filter: { tags: [] },
          filterConfig: { logic: "AND", conditions: [] }
        }],
        xAxisMode: "created",
        xAxisProperty: [""],
        yAxisProperties: [{ name: "", aggregation: "sum", type: "field", color: ColorUtils.getDefaultColor() }],
        refLines: [],
        enableTooltip: true,
        showLegend: true,
        showDataLabels: true,
        isDonut: false,
        enableLinkPenetration: false
      }),
      list: () => ({
        type: "list",
        title: "\u65B0\u5EFA\u6587\u4EF6\u5217\u8868",
        folderPath: "/",
        filterTags: [],
        sortBy: "modified",
        sortOrder: "desc",
        limit: 10
      }),
      todo: () => ({
        type: "todo",
        title: "\u65B0\u5EFA\u5F85\u529E\u6E05\u5355",
        folderPath: "/",
        includeSubfolders: true,
        hideCompleted: false
      }),
      markdown: () => ({
        type: "markdown",
        title: "\u65B0\u5EFA Markdown \u9762\u677F",
        filePath: "",
        mode: "preview"
      })
    };
  }
});

// ui/components/Suggesters.ts
var import_obsidian13, FolderSuggest, FileSuggest, TagSuggest, PropertySuggest;
var init_Suggesters = __esm({
  "ui/components/Suggesters.ts"() {
    import_obsidian13 = require("obsidian");
    FolderSuggest = class extends import_obsidian13.AbstractInputSuggest {
      constructor(app, inputEl) {
        super(app, inputEl);
        __publicField(this, "inputEl");
        this.inputEl = inputEl;
      }
      getSuggestions(query) {
        const abstractFiles = this.app.vault.getAllLoadedFiles();
        const folders = [];
        const lowerQuery = query.toLowerCase();
        for (const file of abstractFiles) {
          if (file instanceof import_obsidian13.TFolder) {
            if (file.path.toLowerCase().contains(lowerQuery)) {
              folders.push(file);
            }
          }
        }
        return folders;
      }
      renderSuggestion(file, el) {
        el.setText(file.path);
      }
      selectSuggestion(file) {
        this.inputEl.value = file.path;
        this.inputEl.trigger("input");
        this.close();
      }
    };
    FileSuggest = class extends import_obsidian13.AbstractInputSuggest {
      constructor(app, inputEl) {
        super(app, inputEl);
        __publicField(this, "inputEl");
        this.inputEl = inputEl;
      }
      getSuggestions(query) {
        const allFiles = this.app.vault.getMarkdownFiles();
        const lowerQuery = query.toLowerCase();
        return allFiles.filter((f) => f.path.toLowerCase().contains(lowerQuery)).slice(0, 20);
      }
      renderSuggestion(file, el) {
        var _a;
        el.setText(file.path);
        el.createDiv({
          text: (_a = file.parent) == null ? void 0 : _a.path,
          style: "font-size: 0.8em; color: var(--text-muted);"
        });
      }
      selectSuggestion(file) {
        this.inputEl.value = file.path;
        this.inputEl.trigger("input");
        this.close();
      }
    };
    TagSuggest = class extends import_obsidian13.AbstractInputSuggest {
      // [Êñ∞Â¢û] ÊîØÊåÅËá™ÂÆö‰πâÊï∞ÊçÆÊ∫ê
      constructor(app, inputEl) {
        super(app, inputEl);
        __publicField(this, "inputEl");
        __publicField(this, "customTags", null);
        this.inputEl = inputEl;
      }
      // [Êñ∞Â¢û] ÂÖÅËÆ∏Â§ñÈÉ®Êõ¥Êñ∞Âª∫ËÆÆÂàóË°®
      setSuggestions(tags) {
        this.customTags = tags;
      }
      getSuggestions(query) {
        let allTags = [];
        if (this.customTags) {
          allTags = this.customTags;
        } else {
          const tags = this.app.metadataCache.getTags();
          allTags = Object.keys(tags);
        }
        const lowerQuery = query.toLowerCase();
        const currentVal = this.inputEl.value;
        const lastCommaIndex = currentVal.lastIndexOf(",");
        const currentSegment = lastCommaIndex >= 0 ? currentVal.substring(lastCommaIndex + 1).trim() : currentVal.trim();
        if (!currentSegment) return allTags.slice(0, 20);
        return allTags.filter((t) => t.toLowerCase().contains(currentSegment.toLowerCase())).slice(0, 20);
      }
      renderSuggestion(tag, el) {
        el.setText(tag);
      }
      selectSuggestion(tag) {
        const currentVal = this.inputEl.value;
        const lastCommaIndex = currentVal.lastIndexOf(",");
        if (lastCommaIndex >= 0) {
          this.inputEl.value = currentVal.substring(0, lastCommaIndex + 1) + " " + tag;
        } else {
          this.inputEl.value = tag;
        }
        this.inputEl.trigger("input");
        this.close();
      }
    };
    PropertySuggest = class extends import_obsidian13.AbstractInputSuggest {
      constructor(app, inputEl, properties) {
        super(app, inputEl);
        __publicField(this, "inputEl");
        __publicField(this, "properties");
        this.inputEl = inputEl;
        this.properties = properties;
      }
      setSuggestions(properties) {
        this.properties = properties;
      }
      getSuggestions(query) {
        const lowerQuery = query.toLowerCase();
        return this.properties.filter((p) => p.toLowerCase().contains(lowerQuery));
      }
      renderSuggestion(prop, el) {
        el.setText(prop);
      }
      selectSuggestion(prop) {
        this.inputEl.value = prop;
        this.inputEl.trigger("input");
        this.close();
      }
    };
  }
});

// ui/modals/FilterConfigModal.ts
var import_obsidian14, FilterConfigModal;
var init_FilterConfigModal = __esm({
  "ui/modals/FilterConfigModal.ts"() {
    import_obsidian14 = require("obsidian");
    init_Suggesters();
    FilterConfigModal = class extends import_obsidian14.Modal {
      constructor(app, dataEngine, initialConfig, filePath, onSave) {
        super(app);
        __publicField(this, "config");
        __publicField(this, "onSave");
        __publicField(this, "dataEngine");
        __publicField(this, "filePath");
        this.dataEngine = dataEngine;
        this.filePath = filePath;
        this.onSave = onSave;
        this.config = initialConfig ? JSON.parse(JSON.stringify(initialConfig)) : { logic: "AND", conditions: [] };
        if (!this.config.conditions) this.config.conditions = [];
        if (!this.config.logic) this.config.logic = "AND";
      }
      onOpen() {
        this.render();
      }
      onClose() {
        this.contentEl.empty();
      }
      render() {
        const { contentEl } = this;
        contentEl.empty();
        contentEl.createEl("h2", { text: "\u914D\u7F6E\u8FC7\u6EE4\u6761\u4EF6" });
        new import_obsidian14.Setting(contentEl).setName("\u591A\u7EF4\u5BF9\u6BD4\u6A21\u5F0F (Split Series)").setDesc("\u5F00\u542F\u540E\uFF0C\u6BCF\u4E00\u6761\u8FC7\u6EE4\u89C4\u5219\u5C06\u751F\u6210\u4E00\u6761\u72EC\u7ACB\u7684\u66F2\u7EBF/\u67F1\u72B6\u56FE\uFF0C\u7528\u4E8E\u6570\u636E\u5BF9\u6BD4\u3002").addToggle((t) => t.setValue(this.config.enableSplitSeries || false).onChange((v) => {
          this.config.enableSplitSeries = v;
          this.render();
        }));
        if (!this.config.enableSplitSeries) {
          new import_obsidian14.Setting(contentEl).setName("\u7EC4\u5408\u903B\u8F91").setDesc("\u591A\u6761\u89C4\u5219\u4E4B\u95F4\u7684\u5173\u7CFB").addDropdown((d) => d.addOption("AND", "\u6EE1\u8DB3\u6240\u6709\u6761\u4EF6 (AND)").addOption("OR", "\u6EE1\u8DB3\u4EFB\u4E00\u6761\u4EF6 (OR)").setValue(this.config.logic).onChange((v) => {
            this.config.logic = v;
          }));
        }
        const listContainer = contentEl.createDiv("dl-filter-list");
        listContainer.style.maxHeight = "400px";
        listContainer.style.overflowY = "auto";
        listContainer.style.margin = "10px 0";
        listContainer.style.border = "1px solid var(--background-modifier-border)";
        listContainer.style.borderRadius = "4px";
        listContainer.style.padding = "10px";
        if (this.config.conditions.length === 0) {
          listContainer.createDiv({ text: "\u6682\u65E0\u8FC7\u6EE4\u6761\u4EF6", style: "text-align: center; color: var(--text-muted); padding: 20px;" });
        } else {
          this.config.conditions.forEach((cond, index) => {
            this.renderConditionRow(listContainer, cond, index);
          });
        }
        const footer = contentEl.createDiv("dl-modal-footer");
        footer.style.display = "flex";
        footer.style.justifyContent = "space-between";
        footer.style.marginTop = "20px";
        new import_obsidian14.ButtonComponent(footer).setButtonText("+ \u6DFB\u52A0\u6761\u4EF6").onClick(() => {
          this.config.conditions.push({
            id: crypto.randomUUID(),
            column: "",
            operator: "eq",
            value: "",
            enabled: true
          });
          this.render();
        });
        const actionGroup = footer.createDiv({ style: "display: flex; gap: 10px;" });
        new import_obsidian14.ButtonComponent(actionGroup).setButtonText("\u53D6\u6D88").onClick(() => this.close());
        new import_obsidian14.ButtonComponent(actionGroup).setButtonText("\u4FDD\u5B58").setCta().onClick(() => {
          this.onSave(this.config);
          this.close();
        });
      }
      renderConditionRow(container, cond, index) {
        const row = container.createDiv("dl-filter-row");
        row.style.display = "flex";
        row.style.gap = "8px";
        row.style.alignItems = "center";
        row.style.marginBottom = "8px";
        row.style.background = "var(--background-primary)";
        row.style.padding = "8px";
        row.style.borderRadius = "4px";
        row.style.border = "1px solid var(--background-modifier-border)";
        const toggle = row.createEl("input", { type: "checkbox" });
        toggle.checked = cond.enabled;
        toggle.onchange = (e) => cond.enabled = e.target.checked;
        const colInput = row.createEl("input", { type: "text" });
        colInput.placeholder = "\u5217\u540D";
        colInput.value = cond.column;
        colInput.style.flex = "2";
        colInput.oninput = (e) => cond.column = e.target.value;
        try {
          const colSuggest = new PropertySuggest(this.app, colInput, []);
          if (this.filePath) {
            this.dataEngine.getTableHeadersByPath(this.filePath).then((headers) => colSuggest.setSuggestions(headers)).catch((e) => console.error(e));
          }
        } catch (e) {
        }
        const opSelect = row.createEl("select");
        opSelect.style.width = "110px";
        const ops = {
          "eq": "\u7B49\u4E8E (=)",
          "neq": "\u4E0D\u7B49\u4E8E (!=)",
          "contains": "\u5305\u542B",
          "not_contains": "\u4E0D\u5305\u542B",
          "gt": "\u5927\u4E8E (>)",
          "gte": "\u5927\u4E8E\u7B49\u4E8E (>=)",
          "lt": "\u5C0F\u4E8E (<)",
          "lte": "\u5C0F\u4E8E\u7B49\u4E8E (<=)"
        };
        Object.entries(ops).forEach(([k, v]) => {
          const o = opSelect.createEl("option", { value: k, text: v });
          if (k === cond.operator) o.selected = true;
        });
        opSelect.onchange = (e) => cond.operator = e.target.value;
        const valInput = row.createEl("input", { type: "text" });
        valInput.placeholder = "\u503C";
        valInput.value = cond.value;
        valInput.style.flex = "2";
        valInput.oninput = (e) => cond.value = e.target.value;
        try {
          const valSuggest = new PropertySuggest(this.app, valInput, []);
          colInput.addEventListener("blur", () => {
            if (this.filePath && colInput.value) {
              this.dataEngine.getTableColumnValuesByPath(this.filePath, colInput.value).then((vals) => valSuggest.setSuggestions(vals)).catch((e) => console.error(e));
            }
          });
        } catch (e) {
        }
        const delBtn = row.createSpan("dl-icon-btn");
        (0, import_obsidian14.setIcon)(delBtn, "trash");
        delBtn.style.cursor = "pointer";
        delBtn.onclick = () => {
          this.config.conditions.splice(index, 1);
          this.render();
        };
      }
    };
  }
});

// ui/modals/config/BaseConfig.ts
var import_obsidian15, BaseConfig;
var init_BaseConfig = __esm({
  "ui/modals/config/BaseConfig.ts"() {
    import_obsidian15 = require("obsidian");
    init_Suggesters();
    init_FilterConfigModal();
    BaseConfig = class {
      constructor(app, dataEngine, onUpdate) {
        __publicField(this, "app");
        __publicField(this, "dataEngine");
        __publicField(this, "onUpdate");
        __publicField(this, "filterColumnSuggestions", []);
        this.app = app;
        this.dataEngine = dataEngine;
        this.onUpdate = onUpdate;
      }
      updateFilterColumnSuggestions(props) {
        this.filterColumnSuggestions = props;
      }
      render(el, w, onSourceChange) {
        el.createEl("h3", { text: "\u57FA\u7840\u914D\u7F6E" });
        new import_obsidian15.Setting(el).setName("\u56FE\u8868\u7C7B\u578B").addDropdown((d) => d.addOption("bar", "\u67F1\u72B6\u56FE (Bar)").addOption("line", "\u6298\u7EBF\u56FE (Line)").addOption("pie", "\u997C\u56FE (Pie)").addOption("scatter", "\u6563\u70B9\u56FE (Scatter)").addOption("radar", "\u96F7\u8FBE\u56FE (Radar)").addOption("heatmap", "\u70ED\u529B\u56FE (Heatmap)").addOption("bubble", "\u6C14\u6CE1\u56FE (Bubble)").addOption("histogram", "\u76F4\u65B9\u56FE (Histogram)").addOption("gitline", "\u4EFB\u52A1\u5206\u652F\u56FE (GitLine)").setValue(w.chartType).onChange((v) => {
          w.chartType = v;
          this.onUpdate();
        }));
        if (w.chartType === "bar" || w.chartType === "gitline") {
          const dirSetting = new import_obsidian15.Setting(el).setName("\u5E03\u5C40\u65B9\u5411");
          if (w.chartType === "bar") dirSetting.setDesc("\u6C34\u5E73\u6761\u5F62\u56FE");
          if (w.chartType === "gitline") dirSetting.setDesc("\u5F00\u542F\u540E\u4E3A\u6C34\u5E73\u65F6\u95F4\u8F74\u6A21\u5F0F");
          dirSetting.addToggle((t) => t.setValue(w.isHorizontal || false).onChange((v) => {
            w.isHorizontal = v;
            this.onUpdate();
          }));
        }
        if (w.chartType === "bar") {
          new import_obsidian15.Setting(el).setName("\u5806\u53E0\u6A21\u5F0F").addToggle((t) => t.setValue(w.isStacked || false).onChange((v) => {
            w.isStacked = v;
            this.onUpdate();
          }));
        }
        el.createEl("h3", { text: "\u6570\u636E\u6E90\u914D\u7F6E" });
        if (!w.dataSources || w.dataSources.length === 0) {
          w.dataSources = [{ id: crypto.randomUUID(), folderPath: "/", filter: { tags: [] } }];
        }
        const source = w.dataSources[0];
        new import_obsidian15.Setting(el).setName("\u6570\u636E\u6E90\u7C7B\u578B").addDropdown((d) => d.addOption("folder", "\u6587\u4EF6\u5939\u805A\u5408").addOption("file", "\u5355\u6587\u4EF6\u8868\u683C").setValue(source.type || "folder").onChange((v) => {
          source.type = v;
          w.xAxisMode = source.type === "file" ? "frontmatter" : "created";
          w.xAxisProperty = [""];
          this.onUpdate();
          onSourceChange();
        }));
        if (source.type === "file") {
          new import_obsidian15.Setting(el).setName("\u6587\u4EF6\u8DEF\u5F84").addText((t) => {
            t.setValue(source.filePath || "");
            try {
              new FileSuggest(this.app, t.inputEl);
            } catch (e) {
            }
            t.onChange((v) => {
              source.filePath = v;
              onSourceChange();
            });
          });
        } else {
          new import_obsidian15.Setting(el).setName("\u6570\u636E\u6E90\u6587\u4EF6\u5939").addText((t) => {
            t.setValue(source.folderPath || "/");
            try {
              new FolderSuggest(this.app, t.inputEl);
            } catch (e) {
            }
            t.onChange((v) => {
              source.folderPath = v;
              onSourceChange();
            });
          });
          new import_obsidian15.Setting(el).setName("\u6807\u7B7E\u8FC7\u6EE4").addText((t) => {
            if (!source.filter) source.filter = { tags: [] };
            t.setValue(source.filter.tags.join(", "));
            try {
              new TagSuggest(this.app, t.inputEl);
            } catch (e) {
            }
            t.onChange((v) => {
              source.filter.tags = v.split(/[,Ôºå]/).map((s) => s.trim()).filter(Boolean);
            });
          });
        }
        const filterContainer = el.createDiv({ style: "margin-top: 10px; padding: 10px; background: var(--background-secondary); border-radius: 4px;" });
        const infoText = source.filterConfig && source.filterConfig.conditions.length > 0 ? `\u5DF2\u542F\u7528 ${source.filterConfig.conditions.length} \u6761\u89C4\u5219` : "\u672A\u914D\u7F6E\u8FC7\u6EE4\u89C4\u5219";
        const btnRow = filterContainer.createDiv({ style: "display: flex; justify-content: space-between; align-items: center;" });
        btnRow.createSpan({ text: infoText, style: "color: var(--text-muted); font-size: 0.9em;" });
        const editBtn = btnRow.createEl("button", { text: "\u914D\u7F6E\u8FC7\u6EE4\u6761\u4EF6" });
        editBtn.onclick = () => {
          new FilterConfigModal(this.app, this.dataEngine, source.filterConfig, source.type === "file" ? source.filePath : void 0, (newConfig) => {
            source.filterConfig = newConfig;
            this.onUpdate();
          }).open();
        };
      }
    };
  }
});

// ui/modals/config/components/YAxisConfig.ts
var import_obsidian16, YAxisConfig;
var init_YAxisConfig = __esm({
  "ui/modals/config/components/YAxisConfig.ts"() {
    import_obsidian16 = require("obsidian");
    init_Suggesters();
    init_ColorUtils();
    YAxisConfig = class {
      constructor(app, onUpdate) {
        __publicField(this, "app");
        __publicField(this, "onUpdate");
        __publicField(this, "propSuggesters", []);
        __publicField(this, "tagSuggesters", []);
        this.app = app;
        this.onUpdate = onUpdate;
      }
      getSuggesters() {
        return this.propSuggesters;
      }
      updateSuggesters(props) {
        this.propSuggesters.forEach((s) => s.setSuggestions(props));
      }
      render(el, w) {
        this.propSuggesters = [];
        this.tagSuggesters = [];
        const source = w.dataSources[0];
        const isFileMode = (source == null ? void 0 : source.type) === "file";
        el.createEl("h3", { text: "Y \u8F74 / \u6307\u6807\u914D\u7F6E", style: "margin-bottom: 10px;" });
        const controls = el.createDiv({ cls: "dl-y-axis-switches" });
        if (!isFileMode) {
          const totalContainer = controls.createDiv({ style: "display: flex; align-items: center;" });
          const totalToggle = new import_obsidian16.Setting(totalContainer).addToggle((t) => t.setValue(w.isTotalCount || false).onChange((v) => {
            w.isTotalCount = v;
            this.onUpdate();
          }));
          this.addIcon(totalToggle, "sigma", "\u603B\u6570\u7EDF\u8BA1\u6A21\u5F0F");
          totalToggle.settingEl.style.border = "none";
          totalToggle.settingEl.style.padding = "0";
          totalToggle.nameEl.style.marginRight = "8px";
        }
        const cumContainer = controls.createDiv({ style: "display: flex; align-items: center;" });
        const cumToggle = new import_obsidian16.Setting(cumContainer).addToggle((t) => t.setValue(w.isCumulative || false).onChange((v) => {
          w.isCumulative = v;
          this.onUpdate();
        }));
        this.addIcon(cumToggle, "trending-up", "\u7D2F\u52A0\u6A21\u5F0F");
        cumToggle.settingEl.style.border = "none";
        cumToggle.settingEl.style.padding = "0";
        cumToggle.nameEl.style.marginRight = "8px";
        if (w.isTotalCount && !isFileMode) {
          el.createDiv({ text: "\u24D8 \u5F53\u524D\u6A21\u5F0F\u5C06\u5FFD\u7565\u5177\u4F53\u5C5E\u6027\u914D\u7F6E\uFF0C\u76F4\u63A5\u7EDF\u8BA1 X \u8F74\u5206\u7EC4\u4E0B\u7684\u6587\u6863\u6570\u91CF\u3002", style: "color: var(--text-muted); font-style: italic; margin-bottom: 20px; padding: 10px; background-color: var(--background-secondary); border-radius: 4px;" });
        } else {
          this.renderPropertyMetrics(el, w, isFileMode);
        }
      }
      renderPropertyMetrics(el, w, isFileMode) {
        const yContainer = el.createDiv({ style: "margin-bottom: 20px;" });
        let labelText = isFileMode ? "\u8868\u683C\u5217\u540D (\u6570\u503C\u5217)" : w.enableLinkPenetration ? "\u76EE\u6807\u7B14\u8BB0\u5C5E\u6027\u540D (\u7A7F\u900F)" : "\u5F53\u524D\u7B14\u8BB0\u5C5E\u6027\u540D";
        yContainer.createDiv({ text: labelText, style: "color: var(--text-muted); font-size: 0.8em; margin-bottom: 8px;" });
        w.yAxisProperties.forEach((yProp, index) => {
          if (!yProp.type) yProp.type = "field";
          const row = yContainer.createDiv();
          row.style.display = "grid";
          const isLine = w.chartType === "line";
          const gridCols = isFileMode ? isLine ? "1fr 70px 30px 40px 30px" : "1fr 70px 30px 30px" : isLine ? "80px 1fr 70px 30px 40px 30px" : "80px 1fr 70px 30px 30px";
          row.style.gridTemplateColumns = gridCols;
          row.style.gap = "6px";
          row.style.marginBottom = "8px";
          row.style.alignItems = "center";
          row.style.backgroundColor = "var(--background-secondary)";
          row.style.padding = "6px";
          row.style.borderRadius = "4px";
          if (!isFileMode) {
            const typeSel = row.createEl("select");
            typeSel.style.width = "100%";
            typeSel.createEl("option", { value: "field", text: "\u5C5E\u6027" }).selected = yProp.type === "field";
            typeSel.createEl("option", { value: "tag", text: "\u6807\u7B7E" }).selected = yProp.type === "tag";
            typeSel.onchange = (e) => {
              yProp.type = e.target.value;
              yProp.name = "";
              this.onUpdate();
            };
          }
          const input = row.createEl("input", { type: "text" });
          input.value = yProp.name;
          input.style.width = "100%";
          if (!isFileMode && yProp.type === "tag") {
            input.placeholder = "#\u6807\u7B7E";
            const ts = new TagSuggest(this.app, input);
            this.tagSuggesters.push(ts);
          } else {
            input.placeholder = isFileMode ? "\u5217\u540D" : "\u5C5E\u6027\u540D";
            const ps = new PropertySuggest(this.app, input, []);
            this.propSuggesters.push(ps);
          }
          input.oninput = (e) => yProp.name = e.target.value;
          const sel = row.createEl("select");
          sel.style.width = "100%";
          const aggMap = { "sum": "\u6C42\u548C", "count": "\u8BA1\u6570", "avg": "\u5E73\u5747", "max": "\u6700\u5927", "min": "\u6700\u5C0F" };
          Object.keys(aggMap).forEach((key) => {
            const o = sel.createEl("option", { value: key, text: aggMap[key] });
            if (key === yProp.aggregation) o.selected = true;
          });
          sel.onchange = (e) => yProp.aggregation = e.target.value;
          if (!isFileMode && yProp.type === "tag") {
            sel.disabled = true;
            sel.value = "sum";
          }
          const colContainer = row.createDiv({ style: "display: flex; justify-content: center;" });
          const col = colContainer.createEl("input", { type: "color" });
          col.value = yProp.color || ColorUtils.getDefaultColor();
          col.style.width = "25px";
          col.style.height = "25px";
          col.style.padding = "0";
          col.style.border = "none";
          col.style.cursor = "pointer";
          col.onchange = (e) => yProp.color = e.target.value;
          if (isLine) {
            const toggleContainer = row.createDiv({ style: "display: flex; align-items: center; justify-content: center; height: 100%; margin-top: 0;" });
            const s = new import_obsidian16.Setting(toggleContainer).addToggle((t) => {
              t.setValue(yProp.enablePercentage || false);
              t.setTooltip("\u662F\u5426\u767E\u5206\u6BD4\u663E\u793A");
              t.onChange((v) => {
                yProp.enablePercentage = v;
                this.onUpdate();
              });
            });
            s.setName("");
            s.infoEl.remove();
            s.settingEl.style.border = "none";
            s.settingEl.style.padding = "0";
            s.settingEl.style.minHeight = "auto";
            const toggleEl = s.controlEl.querySelector(".checkbox-container");
            if (toggleEl) toggleEl.style.margin = "0";
          }
          const rm = row.createSpan("dl-icon-btn");
          (0, import_obsidian16.setIcon)(rm, "trash");
          rm.style.display = "flex";
          rm.style.justifyContent = "center";
          rm.style.cursor = "pointer";
          rm.onclick = () => {
            w.yAxisProperties.splice(index, 1);
            this.onUpdate();
          };
        });
        const addY = yContainer.createEl("button", { text: "+ \u6DFB\u52A0\u6307\u6807\u5217" });
        addY.onclick = () => {
          w.yAxisProperties.push({ name: "", aggregation: "sum", type: "field", color: ColorUtils.getDefaultColor() });
          this.onUpdate();
        };
      }
      addIcon(setting, icon, name) {
        const frag = document.createDocumentFragment();
        const container = frag.createDiv();
        container.style.display = "flex";
        container.style.alignItems = "center";
        const iconSpan = container.createSpan();
        (0, import_obsidian16.setIcon)(iconSpan, icon);
        iconSpan.style.display = "flex";
        iconSpan.style.marginRight = "5px";
        container.createSpan({ text: name });
        setting.setName(frag);
      }
    };
  }
});

// ui/modals/config/components/XAxisConfig.ts
var import_obsidian17, XAxisConfig;
var init_XAxisConfig = __esm({
  "ui/modals/config/components/XAxisConfig.ts"() {
    import_obsidian17 = require("obsidian");
    init_Suggesters();
    XAxisConfig = class {
      constructor(app, dataEngine, onUpdate) {
        __publicField(this, "app");
        __publicField(this, "dataEngine");
        __publicField(this, "onUpdate");
        __publicField(this, "suggesters", []);
        this.app = app;
        this.dataEngine = dataEngine;
        this.onUpdate = onUpdate;
      }
      getSuggesters() {
        return this.suggesters;
      }
      updateSuggesters(props) {
        this.suggesters.forEach((s) => s.setSuggestions(props));
      }
      render(el, w, onPropChange) {
        this.suggesters = [];
        el.createEl("h3", { text: "X \u8F74 / \u5206\u7EC4\u914D\u7F6E" });
        const source = w.dataSources[0];
        const isFileMode = (source == null ? void 0 : source.type) === "file";
        if (isFileMode) {
          this.renderFileModeSettings(el, w, onPropChange);
        } else {
          this.renderFolderModeSettings(el, w, onPropChange);
        }
      }
      renderFileModeSettings(el, w, onPropChange) {
        const container = el.createDiv({ style: "margin-bottom: 5px;" });
        if (!Array.isArray(w.xAxisProperty) || w.xAxisProperty.length === 0) w.xAxisProperty = [""];
        w.xAxisProperty.forEach((prop, index) => {
          const row = container.createDiv();
          row.style.display = "grid";
          row.style.gridTemplateColumns = "1fr 30px";
          row.style.gap = "8px";
          row.style.marginBottom = "8px";
          row.style.alignItems = "center";
          const input = row.createEl("input", { type: "text" });
          input.value = prop;
          input.style.width = "100%";
          input.placeholder = "\u8F93\u5165\u8868\u5934\u5217\u540D";
          const ps = new PropertySuggest(this.app, input, []);
          this.suggesters.push(ps);
          input.oninput = (e) => w.xAxisProperty[index] = e.target.value;
          input.onblur = () => {
            if (onPropChange) onPropChange();
          };
          const rm = row.createSpan("dl-icon-btn");
          (0, import_obsidian17.setIcon)(rm, "trash");
          rm.style.display = "flex";
          rm.style.justifyContent = "center";
          rm.style.cursor = "pointer";
          rm.onclick = () => {
            if (w.xAxisProperty.length > 1) {
              w.xAxisProperty.splice(index, 1);
              this.onUpdate();
            } else {
              w.xAxisProperty[0] = "";
              this.onUpdate();
            }
          };
        });
        const s = new import_obsidian17.Setting(el).setDesc("\u63D0\u793A\uFF1A\u8BF7\u8F93\u5165 Markdown \u8868\u683C\u7684\u7B2C\u4E00\u884C\u8868\u5934\u540D\u79F0\u4F5C\u4E3A X \u8F74\u3002");
        s.settingEl.style.paddingTop = "0";
      }
      renderFolderModeSettings(el, w, onPropChange) {
        var _a, _b;
        const modeSetting = new import_obsidian17.Setting(el).setDesc("\u9009\u62E9\u7528\u4E8E\u5206\u7EC4\u7684\u7EF4\u5EA6");
        this.addIcon(modeSetting, "arrow-right-circle", "X \u8F74\u6A21\u5F0F");
        modeSetting.addDropdown((d) => d.addOption("created", "\u521B\u5EFA\u65E5\u671F").addOption("modified", "\u4FEE\u6539\u65F6\u95F4").addOption("filename", "\u6587\u4EF6\u540D").addOption("frontmatter", "\u5C5E\u6027\u503C").addOption("tags", "\u6807\u7B7E").setValue(w.xAxisMode).onChange((v) => {
          w.xAxisMode = v;
          this.onUpdate();
        }));
        if (w.xAxisMode === "frontmatter" || w.xAxisMode === "tags") {
          const container = el.createDiv({ style: "margin-bottom: 5px;" });
          if (!Array.isArray(w.xAxisProperty) || w.xAxisProperty.length === 0) w.xAxisProperty = [""];
          let availableProps = [];
          try {
            const folderPath = ((_b = (_a = w.dataSources) == null ? void 0 : _a[0]) == null ? void 0 : _b.folderPath) || "/";
            availableProps = this.dataEngine.getAvailableProperties(folderPath);
          } catch (e) {
            console.error("[DigitalLife] Failed to load available properties:", e);
          }
          w.xAxisProperty.forEach((prop, index) => {
            const row = container.createDiv();
            row.style.display = "grid";
            row.style.gridTemplateColumns = "1fr 30px";
            row.style.gap = "8px";
            row.style.marginBottom = "8px";
            row.style.alignItems = "center";
            const input = row.createEl("input", { type: "text" });
            input.value = prop;
            input.style.width = "100%";
            if (w.xAxisMode === "tags") {
              input.placeholder = "\u8F93\u5165\u6807\u7B7E (#tag)";
              new TagSuggest(this.app, input);
            } else {
              input.placeholder = "\u8F93\u5165\u5C5E\u6027\u540D";
              const ps = new PropertySuggest(this.app, input, availableProps);
              this.suggesters.push(ps);
            }
            input.oninput = (e) => w.xAxisProperty[index] = e.target.value;
            input.onblur = () => {
              if (onPropChange) onPropChange();
            };
            const rm = row.createSpan("dl-icon-btn");
            (0, import_obsidian17.setIcon)(rm, "trash");
            rm.style.display = "flex";
            rm.style.justifyContent = "center";
            rm.style.cursor = "pointer";
            rm.onclick = () => {
              w.xAxisProperty.splice(index, 1);
              this.onUpdate();
            };
          });
          const btnText = w.xAxisMode === "tags" ? "+ \u6807\u7B7E" : "+ \u7EF4\u5EA6";
          const addBtn = container.createEl("button", { text: btnText });
          addBtn.onclick = () => {
            w.xAxisProperty.push("");
            this.onUpdate();
          };
          if (w.xAxisMode === "frontmatter") {
            const linkSetting = new import_obsidian17.Setting(el).setDesc("\u662F\u5426\u8FFD\u8E2A\u53CC\u94FE\u7B14\u8BB0\u4E2D\u7684\u5C5E\u6027\u503C");
            this.addIcon(linkSetting, "link", "\u53CC\u94FE\u7A7F\u900F");
            linkSetting.addToggle((t) => t.setValue(w.enableLinkPenetration || false).onChange((v) => {
              w.enableLinkPenetration = v;
              this.onUpdate();
            }));
            linkSetting.settingEl.style.borderTop = "none";
            linkSetting.settingEl.style.borderBottom = "none";
            if (w.xAxisProperty.length > 1) {
              const transSetting = new import_obsidian17.Setting(el).setDesc("\u5C06\u6BCF\u4E2A\u5C5E\u6027\u4F5C\u4E3A\u4E00\u4E2A\u72EC\u7ACB\u7684\u5206\u7EC4\u8FDB\u884C\u6A2A\u5411\u5BF9\u6BD4");
              this.addIcon(transSetting, "columns", "\u8F6C\u7F6E X \u8F74\u5C5E\u6027");
              transSetting.addToggle((t) => t.setValue(w.enableTranspose || false).onChange((v) => {
                w.enableTranspose = v;
                this.onUpdate();
              }));
            }
          }
        }
      }
      addIcon(setting, icon, name) {
        const frag = document.createDocumentFragment();
        const container = frag.createDiv();
        container.style.display = "flex";
        container.style.alignItems = "center";
        const iconSpan = container.createSpan();
        (0, import_obsidian17.setIcon)(iconSpan, icon);
        iconSpan.style.display = "flex";
        iconSpan.style.marginRight = "5px";
        container.createSpan({ text: name });
        setting.setName(frag);
      }
    };
  }
});

// ui/modals/config/components/RefLineConfig.ts
var import_obsidian18, RefLineConfig;
var init_RefLineConfig = __esm({
  "ui/modals/config/components/RefLineConfig.ts"() {
    import_obsidian18 = require("obsidian");
    RefLineConfig = class {
      render(el, w, onUpdate) {
        el.createEl("h3", { text: "\u53C2\u8003\u7EBF (Reference Lines)" });
        const container = el.createDiv({ style: "margin-bottom: 20px;" });
        if (!w.refLines) w.refLines = [];
        w.refLines.forEach((line, index) => {
          const row = container.createDiv();
          row.style.display = "grid";
          row.style.gridTemplateColumns = "80px 1fr 40px 30px";
          row.style.gap = "8px";
          row.style.marginBottom = "8px";
          row.style.alignItems = "center";
          row.style.background = "var(--background-secondary)";
          row.style.padding = "5px";
          row.style.borderRadius = "4px";
          const valInput = row.createEl("input", { type: "number" });
          valInput.placeholder = "\u503C";
          valInput.value = String(line.value);
          valInput.style.width = "100%";
          valInput.oninput = (e) => {
            line.value = Number(e.target.value);
            onUpdate();
          };
          const labelInput = row.createEl("input", { type: "text" });
          labelInput.placeholder = "\u6807\u7B7E (\u53EF\u9009)";
          labelInput.value = line.label || "";
          labelInput.style.width = "100%";
          labelInput.oninput = (e) => {
            line.label = e.target.value;
            onUpdate();
          };
          const colContainer = row.createDiv();
          const col = colContainer.createEl("input", { type: "color" });
          col.value = line.color || "#ff0000";
          col.style.width = "25px";
          col.style.height = "25px";
          col.style.border = "none";
          col.style.padding = "0";
          col.style.cursor = "pointer";
          col.onchange = (e) => {
            line.color = e.target.value;
            onUpdate();
          };
          const rm = row.createSpan("dl-icon-btn");
          (0, import_obsidian18.setIcon)(rm, "trash");
          rm.style.cursor = "pointer";
          rm.onclick = () => {
            w.refLines.splice(index, 1);
            onUpdate();
          };
        });
        const addBtn = container.createEl("button", { text: "+ \u6DFB\u52A0\u53C2\u8003\u7EBF" });
        addBtn.onclick = () => {
          w.refLines.push({ value: 0, label: "Target", color: "#ff0000" });
          onUpdate();
        };
        if (w.chartType === "line" || w.chartType === "bar") {
          const zoneSetting = new import_obsidian18.Setting(el).setName("\u542F\u7528\u53C2\u8003\u7EBF\u533A\u57DF\u7740\u8272").setDesc("\u5728\u53C2\u8003\u7EBF\u4E4B\u95F4\u586B\u5145\u989C\u8272");
          zoneSetting.addToggle((t) => t.setValue(w.enableRefLineZones || false).onChange((v) => {
            w.enableRefLineZones = v;
            onUpdate();
          }));
          zoneSetting.settingEl.style.padding = "0";
          zoneSetting.settingEl.style.border = "none";
        }
      }
    };
  }
});

// ui/modals/config/StandardConfig.ts
var StandardConfig;
var init_StandardConfig = __esm({
  "ui/modals/config/StandardConfig.ts"() {
    init_YAxisConfig();
    init_XAxisConfig();
    init_RefLineConfig();
    StandardConfig = class {
      // [Êñ∞Â¢û]
      constructor(app, dataEngine, onUpdate) {
        __publicField(this, "app");
        __publicField(this, "dataEngine");
        __publicField(this, "onUpdate");
        __publicField(this, "xAxisConfig");
        __publicField(this, "yAxisConfig");
        __publicField(this, "refLineConfig");
        this.app = app;
        this.dataEngine = dataEngine;
        this.onUpdate = onUpdate;
        this.xAxisConfig = new XAxisConfig(app, dataEngine, onUpdate);
        this.yAxisConfig = new YAxisConfig(app, onUpdate);
        this.refLineConfig = new RefLineConfig();
      }
      getSuggesters() {
        return {
          x: this.xAxisConfig.getSuggesters(),
          y: this.yAxisConfig.getSuggesters()
        };
      }
      render(el, w) {
        if (!w.xAxisProperty) w.xAxisProperty = [""];
        if (!w.yAxisProperties) w.yAxisProperties = [];
        try {
          this.xAxisConfig.render(el, w);
        } catch (e) {
          console.error(e);
        }
        el.createEl("hr");
        try {
          this.yAxisConfig.render(el, w);
        } catch (e) {
          console.error(e);
        }
        el.createEl("hr");
        try {
          this.refLineConfig.render(el, w, this.onUpdate);
        } catch (e) {
          console.error(e);
        }
      }
    };
  }
});

// ui/modals/config/components/BubbleSettings.ts
var import_obsidian19, BubbleSettings;
var init_BubbleSettings = __esm({
  "ui/modals/config/components/BubbleSettings.ts"() {
    import_obsidian19 = require("obsidian");
    init_Suggesters();
    BubbleSettings = class {
      constructor(app, onUpdate) {
        __publicField(this, "app");
        __publicField(this, "onUpdate");
        __publicField(this, "suggesters", []);
        this.app = app;
        this.onUpdate = onUpdate;
      }
      getSuggesters() {
        return this.suggesters;
      }
      updateSuggesters(props) {
        this.suggesters.forEach((s) => s.setSuggestions(props));
      }
      render(el, w) {
        this.suggesters = [];
        el.createEl("h3", { text: "\u6C14\u6CE1\u56FE\u914D\u7F6E" });
        const addAxisOptions = (d) => d.addOption("frontmatter", "\u5C5E\u6027\u503C").addOption("created", "\u521B\u5EFA\u65F6\u95F4").addOption("modified", "\u4FEE\u6539\u65F6\u95F4").addOption("filename", "\u6587\u4EF6\u540D").addOption("tags", "\u6807\u7B7E");
        const zSetting = new import_obsidian19.Setting(el).setDesc("\u6307\u5B9A\u4E00\u4E2A\u6570\u503C\u5C5E\u6027\uFF0C\u7528\u4E8E\u51B3\u5B9A\u6C14\u6CE1\u7684\u5927\u5C0F\uFF08\u534A\u5F84\uFF09");
        this.addIcon(zSetting, "maximize", "\u6C14\u6CE1\u5927\u5C0F (Z\u8F74)");
        zSetting.addText((t) => {
          t.setValue(w.bubbleSizeProperty || "");
          this.addSuggest(t.inputEl);
          t.onChange((v) => w.bubbleSizeProperty = v);
        });
        const ySetting = new import_obsidian19.Setting(el).setDesc("\u9009\u62E9 Y \u8F74\u7684\u6570\u636E\u6765\u6E90");
        this.addIcon(ySetting, "arrow-up-circle", "Y \u8F74\u6A21\u5F0F");
        ySetting.addDropdown((d) => {
          addAxisOptions(d);
          d.setValue(w.yAxisMode || "frontmatter");
          d.onChange((v) => {
            w.yAxisMode = v;
            this.onUpdate();
          });
        });
        if (w.yAxisMode === "frontmatter" || !w.yAxisMode) {
          new import_obsidian19.Setting(el).setName("   \u21B3 Y \u5C5E\u6027\u540D").addText((t) => {
            t.setValue(w.yAxisProperty || "");
            this.addSuggest(t.inputEl);
            t.onChange((v) => w.yAxisProperty = v);
          });
        }
        const xSetting = new import_obsidian19.Setting(el).setDesc("\u9009\u62E9 X \u8F74\u7684\u6570\u636E\u6765\u6E90");
        this.addIcon(xSetting, "arrow-right-circle", "X \u8F74\u6A21\u5F0F");
        xSetting.addDropdown((d) => {
          addAxisOptions(d);
          d.setValue(w.xAxisMode || "created");
          d.onChange((v) => {
            w.xAxisMode = v;
            this.onUpdate();
          });
        });
        if (w.xAxisMode === "frontmatter") {
          new import_obsidian19.Setting(el).setName("   \u21B3 X \u5C5E\u6027\u540D").addText((t) => {
            t.setValue(w.xAxisProperty[0] || "");
            this.addSuggest(t.inputEl);
            t.onChange((v) => w.xAxisProperty = [v]);
          });
        }
        const lblSetting = new import_obsidian19.Setting(el).setDesc("\u9F20\u6807\u60AC\u505C\u6C14\u6CE1\u65F6\u663E\u793A\u7684\u6807\u9898\uFF08\u9ED8\u8BA4\u663E\u793A\u6587\u4EF6\u540D\uFF09");
        this.addIcon(lblSetting, "tag", "\u6807\u6CE8\u5B57\u6BB5");
        lblSetting.addText((t) => {
          t.setValue(w.bubbleLabelProperty || "");
          this.addSuggest(t.inputEl);
          t.onChange((v) => w.bubbleLabelProperty = v);
        });
        el.createEl("hr");
        const colSetting = new import_obsidian19.Setting(el);
        this.addIcon(colSetting, "palette", "\u6C14\u6CE1\u989C\u8272");
        colSetting.addColorPicker((c) => c.setValue(w.bubbleColor || "#4361ee").onChange((v) => w.bubbleColor = v));
      }
      addSuggest(el) {
        this.suggesters.push(new PropertySuggest(this.app, el, []));
      }
      // [‰øÆÂ§ç] Flexbox ÂØπÈΩê
      addIcon(setting, icon, name) {
        const frag = document.createDocumentFragment();
        const container = frag.createDiv();
        container.style.display = "flex";
        container.style.alignItems = "center";
        const iconSpan = container.createSpan();
        (0, import_obsidian19.setIcon)(iconSpan, icon);
        iconSpan.style.display = "flex";
        iconSpan.style.marginRight = "5px";
        container.createSpan({ text: name });
        setting.setName(frag);
      }
    };
  }
});

// ui/modals/config/BubbleConfig.ts
var BubbleConfig;
var init_BubbleConfig = __esm({
  "ui/modals/config/BubbleConfig.ts"() {
    init_BubbleSettings();
    BubbleConfig = class {
      constructor(app, onUpdate) {
        __publicField(this, "app");
        __publicField(this, "onUpdate");
        __publicField(this, "settings");
        this.app = app;
        this.onUpdate = onUpdate;
        this.settings = new BubbleSettings(app, onUpdate);
      }
      updateSuggesters(props) {
        this.settings.updateSuggesters(props);
      }
      render(el, w) {
        this.settings.render(el, w);
      }
    };
  }
});

// ui/modals/config/components/AdvancedSettings.ts
var import_obsidian20, RadarSettings, HeatmapSettings, HistogramSettings;
var init_AdvancedSettings = __esm({
  "ui/modals/config/components/AdvancedSettings.ts"() {
    import_obsidian20 = require("obsidian");
    init_Suggesters();
    RadarSettings = class {
      constructor(app, onUpdate) {
        __publicField(this, "app");
        __publicField(this, "onUpdate");
        __publicField(this, "propSuggesters", []);
        __publicField(this, "tagSuggesters", []);
        this.app = app;
        this.onUpdate = onUpdate;
      }
      updateSuggesters(props, tags) {
        this.propSuggesters.forEach((s) => s.setSuggestions(props));
        this.tagSuggesters.forEach((s) => s.setSuggestions(tags));
      }
      render(el, w) {
        this.propSuggesters = [];
        this.tagSuggesters = [];
        el.createEl("h3", { text: "\u96F7\u8FBE\u7EF4\u5EA6\u914D\u7F6E" });
        const container = el.createDiv({ style: "margin-bottom: 10px;" });
        if (!Array.isArray(w.xAxisProperty)) w.xAxisProperty = [];
        w.xAxisProperty.forEach((prop, index) => {
          const row = container.createDiv();
          row.style.display = "grid";
          row.style.gridTemplateColumns = "80px 1fr 30px";
          row.style.gap = "8px";
          row.style.marginBottom = "8px";
          row.style.alignItems = "center";
          const isTag = prop.startsWith("#");
          const typeSel = row.createEl("select");
          typeSel.style.width = "100%";
          typeSel.createEl("option", { value: "field", text: "\u5C5E\u6027" }).selected = !isTag;
          typeSel.createEl("option", { value: "tag", text: "\u6807\u7B7E" }).selected = isTag;
          const input = row.createEl("input", { type: "text" });
          input.value = prop;
          input.style.width = "100%";
          const bindSuggester = (type) => {
            if (type === "tag") {
              input.placeholder = "#\u6807\u7B7E";
              const ts = new TagSuggest(this.app, input);
              this.tagSuggesters.push(ts);
            } else {
              input.placeholder = "\u5C5E\u6027\u540D";
              const ps = new PropertySuggest(this.app, input, []);
              this.propSuggesters.push(ps);
            }
          };
          bindSuggester(isTag ? "tag" : "field");
          typeSel.onchange = (e) => {
            const newType = e.target.value;
            input.value = newType === "tag" ? "#" : "";
            w.xAxisProperty[index] = input.value;
            this.onUpdate();
          };
          input.oninput = (e) => {
            let val = e.target.value;
            if (typeSel.value === "tag" && !val.startsWith("#")) {
              val = "#" + val.replace(/^#+/, "");
            }
            w.xAxisProperty[index] = val;
          };
          const rm = row.createSpan("dl-icon-btn");
          (0, import_obsidian20.setIcon)(rm, "trash");
          rm.style.display = "flex";
          rm.style.justifyContent = "center";
          rm.style.cursor = "pointer";
          rm.onclick = () => {
            w.xAxisProperty.splice(index, 1);
            this.onUpdate();
          };
        });
        const addBtn = container.createEl("button", { text: "+ \u6DFB\u52A0\u7EF4\u5EA6" });
        addBtn.onclick = () => {
          w.xAxisProperty.push("");
          this.onUpdate();
        };
      }
    };
    HeatmapSettings = class {
      constructor(app, onUpdate) {
        __publicField(this, "app");
        __publicField(this, "onUpdate");
        __publicField(this, "suggesters", []);
        this.app = app;
        this.onUpdate = onUpdate;
      }
      getSuggesters() {
        return this.suggesters;
      }
      updateSuggesters(props) {
        this.suggesters.forEach((s) => s.setSuggestions(props));
      }
      render(el, w) {
        this.suggesters = [];
        const addAxisOptions = (d) => d.addOption("created", "\u521B\u5EFA\u65E5\u671F").addOption("modified", "\u4FEE\u6539\u65F6\u95F4").addOption("frontmatter", "\u5C5E\u6027\u503C").addOption("filename", "\u6587\u4EF6\u540D").addOption("tags", "\u6807\u7B7E");
        const xSetting = new import_obsidian20.Setting(el).setDesc("\u9009\u62E9 X \u8F74\u7EF4\u5EA6");
        this.addIcon(xSetting, "arrow-right-circle", "X \u8F74");
        xSetting.addDropdown((d) => {
          addAxisOptions(d);
          d.setValue(w.xAxisMode || "created");
          d.onChange((v) => {
            w.xAxisMode = v;
            this.onUpdate();
          });
        });
        if (w.xAxisMode === "frontmatter") {
          new import_obsidian20.Setting(el).setName("   \u21B3 X \u5C5E\u6027\u540D").addText((t) => {
            t.setValue(w.xAxisProperty[0] || "");
            this.addSuggest(t.inputEl);
            t.onChange((v) => w.xAxisProperty = [v]);
          });
        }
        const ySetting = new import_obsidian20.Setting(el).setDesc("\u9009\u62E9 Y \u8F74\u7EF4\u5EA6");
        this.addIcon(ySetting, "arrow-up-circle", "Y \u8F74");
        ySetting.addDropdown((d) => {
          addAxisOptions(d);
          d.setValue(w.yAxisMode || "frontmatter");
          d.onChange((v) => {
            w.yAxisMode = v;
            this.onUpdate();
          });
        });
        if (w.yAxisMode === "frontmatter") {
          new import_obsidian20.Setting(el).setName("   \u21B3 Y \u5C5E\u6027\u540D").addText((t) => {
            t.setValue(w.yAxisProperty || "");
            this.addSuggest(t.inputEl);
            t.onChange((v) => w.yAxisProperty = v);
          });
        }
        const vSetting = new import_obsidian20.Setting(el).setDesc("\u51B3\u5B9A\u989C\u8272\u7684\u6570\u503C\u5C5E\u6027");
        this.addIcon(vSetting, "thermometer", "\u70ED\u529B\u503C");
        vSetting.addText((t) => {
          t.setValue(w.bubbleSizeProperty || "");
          this.addSuggest(t.inputEl);
          t.onChange((v) => w.bubbleSizeProperty = v);
        });
      }
      addSuggest(el) {
        this.suggesters.push(new PropertySuggest(this.app, el, []));
      }
      // [‰øÆÂ§ç] Flexbox ÂØπÈΩê
      addIcon(setting, icon, name) {
        const frag = document.createDocumentFragment();
        const container = frag.createDiv();
        container.style.display = "flex";
        container.style.alignItems = "center";
        const iconSpan = container.createSpan();
        (0, import_obsidian20.setIcon)(iconSpan, icon);
        iconSpan.style.display = "flex";
        iconSpan.style.marginRight = "5px";
        container.createSpan({ text: name });
        setting.setName(frag);
      }
    };
    HistogramSettings = class {
      constructor(app, onUpdate) {
        __publicField(this, "app");
        __publicField(this, "onUpdate");
        __publicField(this, "suggesters", []);
        this.app = app;
        this.onUpdate = onUpdate;
      }
      getSuggesters() {
        return this.suggesters;
      }
      updateSuggesters(props) {
        this.suggesters.forEach((s) => s.setSuggestions(props));
      }
      render(el, w) {
        this.suggesters = [];
        el.createEl("h3", { text: "\u76F4\u65B9\u56FE\u914D\u7F6E" });
        const stSetting = new import_obsidian20.Setting(el).setDesc("\u9009\u62E9\u8981\u7EDF\u8BA1\u5206\u5E03\u7684\u6570\u503C\u5C5E\u6027\uFF08\u652F\u6301\u5355\u4E2A\u6570\u503C\u6216\u6570\u7EC4\uFF09");
        this.addIcon(stSetting, "bar-chart-2", "\u7EDF\u8BA1\u5B57\u6BB5");
        stSetting.addText((t) => {
          t.setValue(w.xAxisProperty[0] || "");
          this.addSuggest(t.inputEl);
          t.onChange((v) => w.xAxisProperty = [v]);
        });
      }
      addSuggest(el) {
        this.suggesters.push(new PropertySuggest(this.app, el, []));
      }
      // [‰øÆÂ§ç] Flexbox ÂØπÈΩê
      addIcon(setting, icon, name) {
        const frag = document.createDocumentFragment();
        const container = frag.createDiv();
        container.style.display = "flex";
        container.style.alignItems = "center";
        const iconSpan = container.createSpan();
        (0, import_obsidian20.setIcon)(iconSpan, icon);
        iconSpan.style.display = "flex";
        iconSpan.style.marginRight = "5px";
        container.createSpan({ text: name });
        setting.setName(frag);
      }
    };
  }
});

// ui/modals/config/AdvancedConfig.ts
var AdvancedConfig;
var init_AdvancedConfig = __esm({
  "ui/modals/config/AdvancedConfig.ts"() {
    init_AdvancedSettings();
    AdvancedConfig = class {
      constructor(app, onUpdate) {
        __publicField(this, "app");
        __publicField(this, "onUpdate");
        __publicField(this, "radarSettings");
        __publicField(this, "heatmapSettings");
        __publicField(this, "histogramSettings");
        this.app = app;
        this.onUpdate = onUpdate;
        this.radarSettings = new RadarSettings(app, onUpdate);
        this.heatmapSettings = new HeatmapSettings(app, onUpdate);
        this.histogramSettings = new HistogramSettings(app, onUpdate);
      }
      // [Ê†∏ÂøÉ] Êé•Êî∂ tags ÂèÇÊï∞
      updateSuggesters(props, tags = []) {
        this.radarSettings.updateSuggesters(props, tags);
        this.heatmapSettings.updateSuggesters(props);
        this.histogramSettings.updateSuggesters(props);
      }
      // Ëé∑ÂèñÈô§Èõ∑ËææÂõæ‰ª•Â§ñÁöÑÂª∫ËÆÆÂô®ÔºàÈõ∑ËææÂõæËá™Â∑±ÁÆ°ÁêÜÊõ¥Êñ∞‰∫ÜÔºâ
      getSuggesters() {
        return [
          ...this.heatmapSettings.getSuggesters(),
          ...this.histogramSettings.getSuggesters()
        ];
      }
      render(el, w) {
        if (w.chartType === "heatmap") this.heatmapSettings.render(el, w);
        else if (w.chartType === "radar") this.radarSettings.render(el, w);
        else if (w.chartType === "histogram") this.histogramSettings.render(el, w);
      }
    };
  }
});

// ui/configs/ChartConfigView.ts
var import_obsidian21, ChartConfigView;
var init_ChartConfigView = __esm({
  "ui/configs/ChartConfigView.ts"() {
    import_obsidian21 = require("obsidian");
    init_BaseConfig();
    init_StandardConfig();
    init_BubbleConfig();
    init_AdvancedConfig();
    ChartConfigView = class {
      constructor(app, dataEngine, onUpdate) {
        __publicField(this, "app");
        __publicField(this, "dataEngine");
        __publicField(this, "onUpdate");
        __publicField(this, "baseConfig");
        __publicField(this, "standardConfig");
        __publicField(this, "bubbleConfig");
        __publicField(this, "advancedConfig");
        this.app = app;
        this.dataEngine = dataEngine;
        this.onUpdate = onUpdate;
        this.baseConfig = new BaseConfig(app, dataEngine, onUpdate);
        this.standardConfig = new StandardConfig(app, dataEngine, onUpdate);
        this.bubbleConfig = new BubbleConfig(app, onUpdate);
        this.advancedConfig = new AdvancedConfig(app, onUpdate);
      }
      render(el, w) {
        if (!w.dataSources || w.dataSources.length === 0) {
          w.dataSources = [{ id: crypto.randomUUID(), folderPath: "/", filter: { tags: [] } }];
        }
        if (!w.yAxisProperties) w.yAxisProperties = [];
        try {
          this.baseConfig.render(el, w, () => this.updateAllSuggesters(w));
          el.createEl("hr");
          if (w.chartType === "bubble") {
            this.bubbleConfig.render(el, w);
          } else if (["heatmap", "radar", "histogram"].includes(w.chartType)) {
            this.advancedConfig.render(el, w);
          } else if (w.chartType === "gitline") {
            el.createDiv({
              text: "GitLine \u6A21\u5F0F\uFF1A\u81EA\u52A8\u6839\u636E\u4EFB\u52A1\u7F29\u8FDB\u548C\u6765\u6E90\u6784\u5EFA\u5206\u652F\u56FE\u3002\u4E3B\u7EBF\u4E3A\u672A\u7F29\u8FDB\u4EFB\u52A1\u6216\u4EFB\u52A1\u7B14\u8BB0\u672C\u8EAB\u3002",
              style: "color: var(--text-muted); font-size: 0.9em; padding: 10px; background: var(--background-secondary); border-radius: 4px;"
            });
          } else {
            this.standardConfig.render(el, w);
          }
          el.createEl("hr");
          el.createEl("h3", { text: "\u663E\u793A\u8BBE\u7F6E" });
          if (w.chartType !== "gitline") {
            new import_obsidian21.Setting(el).setName("\u663E\u793A\u56FE\u4F8B").addToggle((t) => t.setValue(w.showLegend).onChange((v) => w.showLegend = v));
            new import_obsidian21.Setting(el).setName("\u663E\u793A\u6570\u503C").addToggle((t) => t.setValue(w.showDataLabels).onChange((v) => w.showDataLabels = v));
          } else {
          }
          if (!["bubble", "heatmap", "radar", "gitline"].includes(w.chartType)) {
            new import_obsidian21.Setting(el).setName("\u5FFD\u7565\u7A7A\u503C").addToggle((t) => t.setValue(w.ignoreEmpty).onChange((v) => w.ignoreEmpty = v));
            new import_obsidian21.Setting(el).setName("Y\u8F74\u8303\u56F4").setDesc("Min / Max").addText((t) => t.setPlaceholder("Min").setValue(w.yAxisMin !== void 0 ? String(w.yAxisMin) : "").onChange((v) => w.yAxisMin = v ? Number(v) : void 0)).addText((t) => t.setPlaceholder("Max").setValue(w.yAxisMax !== void 0 ? String(w.yAxisMax) : "").onChange((v) => w.yAxisMax = v ? Number(v) : void 0));
          }
          setTimeout(() => this.updateAllSuggesters(w), 100);
        } catch (e) {
          console.error("Critical Config Error", e);
          el.createDiv({ text: "\u914D\u7F6E\u9762\u677F\u6E32\u67D3\u9519\u8BEF", style: "color: red" });
        }
      }
      async updateAllSuggesters(w) {
        try {
          if (!w.dataSources || !w.dataSources[0]) return;
          const source = w.dataSources[0];
          let props = [];
          let tags = [];
          if (source.type === "file" && source.filePath) {
            const file = this.app.vault.getAbstractFileByPath(source.filePath);
            if (file instanceof import_obsidian21.TFile) {
              const tableData = await this.dataEngine.getMarkdownTableData(file);
              props = tableData.headers;
            }
          } else {
            const path = source.folderPath || "/";
            props = this.dataEngine.getAvailableProperties(path);
            tags = this.dataEngine.getAvailableTags(path);
          }
          this.baseConfig.updateFilterColumnSuggestions(props);
          if (!["bubble", "heatmap", "radar", "histogram", "gitline"].includes(w.chartType)) {
            const { x, y } = this.standardConfig.getSuggesters();
            x.forEach((s) => s.setSuggestions(props));
            let targetProps = props;
            if (source.type !== "file" && w.enableLinkPenetration && w.xAxisProperty.length > 0) {
              targetProps = this.dataEngine.getAvailableLinkedProperties(source.folderPath, w.xAxisProperty);
            }
            y.forEach((s) => s.setSuggestions(targetProps));
          }
          if (w.chartType === "bubble") this.bubbleConfig.updateSuggesters(props);
          if (["heatmap", "radar", "histogram"].includes(w.chartType)) this.advancedConfig.updateSuggesters(props, tags);
        } catch (e) {
          console.warn("Suggester update failed", e);
        }
      }
    };
  }
});

// ui/configs/ListConfigView.ts
var import_obsidian22, ListConfigView;
var init_ListConfigView = __esm({
  "ui/configs/ListConfigView.ts"() {
    import_obsidian22 = require("obsidian");
    init_Suggesters();
    ListConfigView = class {
      constructor(app) {
        __publicField(this, "app");
        this.app = app;
      }
      render(el, w) {
        const folderSetting = new import_obsidian22.Setting(el).setName("\u6587\u4EF6\u5939\u8DEF\u5F84");
        folderSetting.addText((t) => {
          t.setValue(w.folderPath);
          new FolderSuggest(this.app, t.inputEl);
          t.onChange((v) => w.folderPath = v);
        });
        new import_obsidian22.Setting(el).setName("\u6807\u7B7E\u8FC7\u6EE4").setDesc("\u53EA\u663E\u793A\u5305\u542B\u7279\u5B9A\u6807\u7B7E\u7684\u7B14\u8BB0").addText((t) => {
          t.setValue(w.filterTags ? w.filterTags.join(", ") : "");
          new TagSuggest(this.app, t.inputEl);
          t.onChange((v) => w.filterTags = v.split(/[,Ôºå]/).map((s) => s.trim()).filter(Boolean));
        });
        new import_obsidian22.Setting(el).setName("\u6392\u5E8F\u4F9D\u636E").addDropdown((d) => d.addOption("modified", "\u4FEE\u6539\u65F6\u95F4").addOption("created", "\u521B\u5EFA\u65F6\u95F4").addOption("name", "\u6587\u4EF6\u540D").setValue(w.sortBy).onChange((v) => w.sortBy = v));
        new import_obsidian22.Setting(el).setName("\u6392\u5E8F\u65B9\u5F0F").addDropdown((d) => d.addOption("desc", "\u964D\u5E8F (\u6700\u65B0/Z-A)").addOption("asc", "\u5347\u5E8F (\u6700\u65E9/A-Z)").setValue(w.sortOrder).onChange((v) => w.sortOrder = v));
        new import_obsidian22.Setting(el).setName("\u663E\u793A\u6570\u91CF").addText((t) => t.setValue(String(w.limit)).onChange((v) => w.limit = Number(v)));
      }
    };
  }
});

// ui/configs/TodoConfigView.ts
var import_obsidian23, TodoConfigView;
var init_TodoConfigView = __esm({
  "ui/configs/TodoConfigView.ts"() {
    import_obsidian23 = require("obsidian");
    init_Suggesters();
    TodoConfigView = class {
      constructor(app) {
        __publicField(this, "app");
        this.app = app;
      }
      render(el, w) {
        el.createEl("h4", { text: "\u6570\u636E\u6E90" });
        new import_obsidian23.Setting(el).setName("\u6570\u636E\u6E90\u7C7B\u578B").addDropdown((d) => d.addOption("folder", "\u6587\u4EF6\u5939").addOption("file", "\u5355\u6587\u4EF6").setValue(w.sourceType || "folder").onChange((v) => {
          w.sourceType = v;
          this.refresh(el, w);
        }));
        if (w.sourceType === "file") {
          new import_obsidian23.Setting(el).setName("\u9009\u62E9\u6587\u4EF6").addText((t) => {
            t.setValue(w.filePath || "");
            new FileSuggest(this.app, t.inputEl);
            t.onChange((v) => w.filePath = v);
          });
        } else {
          new import_obsidian23.Setting(el).setName("\u626B\u63CF\u6587\u4EF6\u5939").addText((t) => {
            t.setValue(w.folderPath);
            new FolderSuggest(this.app, t.inputEl);
            t.onChange((v) => w.folderPath = v);
          });
        }
        el.createEl("h4", { text: "\u663E\u793A\u8BBE\u7F6E" });
        new import_obsidian23.Setting(el).setName("\u5206\u7EC4\u65B9\u5F0F").addDropdown((d) => d.addOption("none", "\u4E0D\u5206\u7EC4").addOption("file", "\u6309\u6587\u4EF6\u5206\u7EC4").setValue(w.groupBy || "none").onChange((v) => w.groupBy = v));
        new import_obsidian23.Setting(el).setName("\u6392\u5E8F\u65B9\u5F0F").addDropdown((d) => d.addOption("default", "\u9ED8\u8BA4").addOption("priority", "\u6309\u4F18\u5148\u7EA7").addOption("date", "\u6309\u622A\u6B62\u65E5\u671F").setValue(w.sortBy || "default").onChange((v) => w.sortBy = v));
        new import_obsidian23.Setting(el).setName("\u9690\u85CF\u5DF2\u5B8C\u6210").addToggle((t) => t.setValue(w.hideCompleted).onChange((v) => w.hideCompleted = v));
      }
      refresh(el, w) {
        el.empty();
        this.render(el, w);
      }
    };
  }
});

// ui/configs/MarkdownConfigView.ts
var import_obsidian24, MarkdownConfigView;
var init_MarkdownConfigView = __esm({
  "ui/configs/MarkdownConfigView.ts"() {
    import_obsidian24 = require("obsidian");
    init_Suggesters();
    MarkdownConfigView = class {
      constructor(app) {
        __publicField(this, "app");
        this.app = app;
      }
      render(el, w) {
        const fileSetting = new import_obsidian24.Setting(el).setName("\u6587\u4EF6\u8DEF\u5F84");
        fileSetting.addText((t) => {
          t.setValue(w.filePath);
          new FileSuggest(this.app, t.inputEl);
          t.onChange((v) => w.filePath = v);
        });
        new import_obsidian24.Setting(el).setName("\u9ED8\u8BA4\u6A21\u5F0F").addDropdown((d) => d.addOption("preview", "\u9884\u89C8").addOption("edit", "\u7F16\u8F91").setValue(w.mode).onChange((v) => w.mode = v));
      }
    };
  }
});

// ui/modals/WidgetConfigModal.ts
var WidgetConfigModal_exports = {};
__export(WidgetConfigModal_exports, {
  WidgetConfigModal: () => WidgetConfigModal
});
var import_obsidian25, WidgetConfigModal;
var init_WidgetConfigModal = __esm({
  "ui/modals/WidgetConfigModal.ts"() {
    import_obsidian25 = require("obsidian");
    init_DataEngine();
    init_constants();
    init_ChartConfigView();
    init_ListConfigView();
    init_TodoConfigView();
    init_MarkdownConfigView();
    WidgetConfigModal = class extends import_obsidian25.Modal {
      // [‰øÆÊîπ] ÊûÑÈÄ†ÂáΩÊï∞Á≠æÂêçÔºåÂ¢ûÂä† settingsManager
      constructor(app, dashboardId, settingsManager, onSubmit, existingWidget) {
        super(app);
        __publicField(this, "widget");
        __publicField(this, "dashboardId");
        __publicField(this, "onSubmit");
        __publicField(this, "dataEngine");
        __publicField(this, "settingsManager");
        // [Êñ∞Â¢û]
        __publicField(this, "isCreationMode");
        __publicField(this, "chartConfig");
        __publicField(this, "listConfig");
        __publicField(this, "todoConfig");
        __publicField(this, "markdownConfig");
        this.dashboardId = dashboardId;
        this.settingsManager = settingsManager;
        this.onSubmit = onSubmit;
        this.dataEngine = new DataEngine(app, settingsManager);
        const refresh = () => this.onOpen();
        this.chartConfig = new ChartConfigView(app, this.dataEngine, refresh);
        this.listConfig = new ListConfigView(app);
        this.todoConfig = new TodoConfigView(app);
        this.markdownConfig = new MarkdownConfigView(app);
        if (existingWidget) {
          this.isCreationMode = false;
          this.widget = JSON.parse(JSON.stringify(existingWidget));
          this.ensureDefaults();
        } else {
          this.isCreationMode = true;
          this.widget = {
            id: crypto.randomUUID(),
            dashboardId,
            ...WIDGET_DEFAULTS["chart"]()
          };
        }
      }
      ensureDefaults() {
        if (this.widget.type === "chart") {
          if (!this.widget.dataSources || this.widget.dataSources.length === 0) {
            this.widget.dataSources = WIDGET_DEFAULTS["chart"]().dataSources;
          }
          if (!this.widget.yAxisProperties) this.widget.yAxisProperties = [];
        }
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.empty();
        contentEl.style.display = "flex";
        contentEl.style.flexDirection = "column";
        contentEl.style.height = "100%";
        contentEl.style.maxHeight = "80vh";
        const headerDiv = contentEl.createDiv();
        const titleText = this.isCreationMode ? "\u6DFB\u52A0\u7EC4\u4EF6" : `\u7F16\u8F91: ${this.widget.title}`;
        headerDiv.createEl("h2", { text: titleText });
        new import_obsidian25.Setting(headerDiv).setName("\u6807\u9898").addText((text) => text.setValue(this.widget.title || "").onChange((value) => this.widget.title = value));
        if (this.isCreationMode) {
          new import_obsidian25.Setting(headerDiv).setName("\u7C7B\u578B").addDropdown((drop) => drop.addOption("chart", "\u7EDF\u8BA1\u56FE\u8868").addOption("list", "\u6587\u4EF6\u5217\u8868").addOption("todo", "\u5F85\u529E\u6E05\u5355").addOption("markdown", "Markdown \u7B14\u8BB0").setValue(this.widget.type || "chart").onChange((value) => {
            this.widget = {
              id: this.widget.id,
              dashboardId: this.dashboardId,
              title: this.widget.title,
              ...WIDGET_DEFAULTS[value]()
            };
            this.onOpen();
          }));
        }
        const configContainer = contentEl.createDiv("dl-config-container");
        configContainer.style.flex = "1";
        configContainer.style.overflowY = "auto";
        configContainer.style.padding = "10px 0";
        configContainer.style.borderTop = "1px solid var(--background-modifier-border)";
        configContainer.style.borderBottom = "1px solid var(--background-modifier-border)";
        configContainer.style.margin = "10px 0";
        this.renderSpecificConfig(configContainer);
        const footer = contentEl.createDiv("dl-modal-footer");
        footer.style.flexShrink = "0";
        footer.style.borderTop = "none";
        const saveBtn = footer.createEl("button", { text: "\u4FDD\u5B58", cls: "mod-cta" });
        saveBtn.onclick = () => {
          if (!this.widget.title) {
            new import_obsidian25.Notice("\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A");
            return;
          }
          this.onSubmit(this.widget);
          this.close();
        };
      }
      renderSpecificConfig(container) {
        if (!this.widget.type) return;
        try {
          switch (this.widget.type) {
            case "chart":
              this.chartConfig.render(container, this.widget);
              break;
            case "list":
              this.listConfig.render(container, this.widget);
              break;
            case "todo":
              this.todoConfig.render(container, this.widget);
              break;
            case "markdown":
              this.markdownConfig.render(container, this.widget);
              break;
          }
        } catch (e) {
          console.error("Config Render Error", e);
          container.createDiv({ text: "\u914D\u7F6E\u9762\u677F\u6E32\u67D3\u51FA\u9519\uFF0C\u8BF7\u67E5\u770B\u63A7\u5236\u53F0\u3002", style: "color: var(--text-error)" });
        }
      }
      onClose() {
        this.contentEl.empty();
      }
    };
  }
});

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => DigitalLifePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian40 = require("obsidian");

// core/types.ts
var DEFAULT_SETTINGS = {
  dashboards: [],
  widgets: [],
  activeDashboardId: null,
  noteCreator: { templatePath: "", savePath: "" },
  formula: { hiddenProperties: [], isHidingEnabled: true, enableRounding: true, roundingPrecision: 2 },
  taskManagement: { captureInboxPath: "", archivePath: "", taskNoteAttribute: "", autoArchive: false, autoCapture: false }
};

// core/SettingsManager.ts
var SettingsManager = class {
  constructor(plugin) {
    __publicField(this, "plugin");
    __publicField(this, "settings");
    this.plugin = plugin;
    this.settings = DEFAULT_SETTINGS;
  }
  async loadSettings() {
    const loadedData = await this.plugin.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, loadedData);
    if (!this.settings.formula) this.settings.formula = { ...DEFAULT_SETTINGS.formula };
    if (!this.settings.taskManagement) this.settings.taskManagement = { ...DEFAULT_SETTINGS.taskManagement };
    if (loadedData == null ? void 0 : loadedData.formula) this.settings.formula = { ...DEFAULT_SETTINGS.formula, ...loadedData.formula };
    if (loadedData == null ? void 0 : loadedData.taskManagement) this.settings.taskManagement = { ...DEFAULT_SETTINGS.taskManagement, ...loadedData.taskManagement };
  }
  async saveSettings() {
    await this.plugin.saveData(this.settings);
  }
  getSettings() {
    return this.settings;
  }
  getDashboards() {
    return this.settings.dashboards;
  }
  getDashboard(id) {
    return this.settings.dashboards.find((d) => d.id === id);
  }
  getWidget(id) {
    return this.settings.widgets.find((w) => w.id === id);
  }
  // ... (Add/Remove Dashboard/Widget/Layout ÊñπÊ≥ï‰øùÊåÅ‰∏çÂèòÔºåÁúÅÁï•‰ª•ËäÇÁúÅÁ©∫Èó¥) ...
  async addDashboard(name) {
    const newDashboard = { id: crypto.randomUUID(), name, layout: [], createdAt: Date.now(), updatedAt: Date.now(), isPinned: false };
    this.settings.dashboards.push(newDashboard);
    if (!this.settings.activeDashboardId) this.settings.activeDashboardId = newDashboard.id;
    await this.saveSettings();
    return newDashboard;
  }
  async renameDashboard(id, newName) {
    const d = this.getDashboard(id);
    if (d) {
      d.name = newName;
      d.updatedAt = Date.now();
      await this.saveSettings();
    }
  }
  async togglePinDashboard(id) {
    const d = this.getDashboard(id);
    if (d) {
      d.isPinned = !d.isPinned;
      this.sortDashboardsByPinStatus();
      await this.saveSettings();
    }
  }
  async updateDashboardProperties(id, props) {
    const d = this.getDashboard(id);
    if (d) {
      Object.assign(d, props);
      d.updatedAt = Date.now();
      await this.saveSettings();
    }
  }
  sortDashboardsByPinStatus() {
    this.settings.dashboards.sort((a, b) => {
      if (a.isPinned === b.isPinned) return 0;
      return a.isPinned ? -1 : 1;
    });
  }
  async reorderDashboards(newOrderIds) {
    const currentMap = new Map(this.settings.dashboards.map((d) => [d.id, d]));
    const newDashboards = [];
    newOrderIds.forEach((id) => {
      const d = currentMap.get(id);
      if (d) newDashboards.push(d);
    });
    this.settings.dashboards.forEach((d) => {
      if (!newDashboards.includes(d)) newDashboards.push(d);
    });
    this.settings.dashboards = newDashboards;
    await this.saveSettings();
  }
  async removeDashboard(id) {
    this.settings.dashboards = this.settings.dashboards.filter((d) => d.id !== id);
    if (this.settings.activeDashboardId === id) this.settings.activeDashboardId = this.settings.dashboards.length > 0 ? this.settings.dashboards[0].id : null;
    await this.saveSettings();
  }
  async setActiveDashboard(id) {
    if (this.settings.dashboards.some((d) => d.id === id)) {
      this.settings.activeDashboardId = id;
      await this.saveSettings();
    }
  }
  async saveWidget(widget) {
    const index = this.settings.widgets.findIndex((w) => w.id === widget.id);
    if (index >= 0) this.settings.widgets[index] = widget;
    else this.settings.widgets.push(widget);
    await this.saveSettings();
  }
  async removeWidget(id) {
    this.settings.widgets = this.settings.widgets.filter((w) => w.id !== id);
    await this.saveSettings();
  }
  async addLayoutItem(dashboardId, item) {
    const d = this.getDashboard(dashboardId);
    if (d) {
      d.layout.push(item);
      await this.saveSettings();
    }
  }
  async updateLayout(dashboardId, layout) {
    const d = this.getDashboard(dashboardId);
    if (d) {
      d.layout = layout;
      await this.saveSettings();
    }
  }
  async moveWidgetToDashboard(widgetId, targetDashboardId) {
    const widget = this.getWidget(widgetId);
    if (!widget) return;
    const sourceDashboardId = widget.dashboardId;
    if (sourceDashboardId === targetDashboardId) return;
    const sourceDashboard = this.getDashboard(sourceDashboardId);
    const targetDashboard = this.getDashboard(targetDashboardId);
    if (sourceDashboard && targetDashboard) {
      sourceDashboard.layout = sourceDashboard.layout.filter((i) => i.widgetId !== widgetId);
      const y = targetDashboard.layout.reduce((max, item) => Math.max(max, item.y + item.h), 0);
      const newLayoutItem = { i: crypto.randomUUID(), x: 0, y, w: 12, h: 6, widgetId };
      targetDashboard.layout.push(newLayoutItem);
      widget.dashboardId = targetDashboardId;
      await this.saveSettings();
    }
  }
};

// core/FormulaManager.ts
var import_obsidian = require("obsidian");
var FormulaManager = class {
  constructor(app, settingsManager) {
    __publicField(this, "app");
    __publicField(this, "settingsManager");
    this.app = app;
    this.settingsManager = settingsManager;
  }
  updateHiddenPropertiesCSS() {
    const ghostStyle = document.getElementById("yaml-formula-hidden-props");
    if (ghostStyle) ghostStyle.remove();
    const settings = this.settingsManager.getSettings().formula;
    const styleId = "dl-hidden-props";
    let styleEl = document.getElementById(styleId);
    if (!styleEl) {
      styleEl = document.createElement("style");
      styleEl.id = styleId;
      document.head.appendChild(styleEl);
    }
    if (!settings.isHidingEnabled || !Array.isArray(settings.hiddenProperties)) {
      styleEl.textContent = "";
      return;
    }
    styleEl.textContent = settings.hiddenProperties.map((key) => `.metadata-property[data-property-key="${key.toLowerCase()}"] { display: none !important; }`).join("\n");
  }
  async calculateFormulas(targetFile, manual = false) {
    if (!targetFile || targetFile.extension !== "md") return;
    const cache = this.app.metadataCache.getFileCache(targetFile);
    if (!(cache == null ? void 0 : cache.frontmatter)) return;
    let sourceLinks = cache.frontmatter.formula_src || cache.frontmatter.formula_source;
    if (!sourceLinks) {
      if (manual) new import_obsidian.Notice("\u672A\u8BBE\u7F6E formula_src");
      return;
    }
    if (!Array.isArray(sourceLinks)) sourceLinks = [sourceLinks];
    let combinedFormulas = {};
    let foundAny = false;
    for (const linkText of sourceLinks) {
      const sourceFile = this.resolveFile(linkText, targetFile.path);
      if (sourceFile) {
        const formulas = await this.getFormulasFromNote(sourceFile);
        if (formulas) {
          Object.assign(combinedFormulas, formulas);
          foundAny = true;
        }
      } else if (manual) console.warn(`\u65E0\u6CD5\u89E3\u6790\u516C\u5F0F\u6E90: ${linkText}`);
    }
    if (!foundAny) {
      if (manual) new import_obsidian.Notice(`\u672A\u627E\u5230\u6709\u6548\u7684\u516C\u5F0F\u5B9A\u4E49`);
      return;
    }
    let hasChange = false;
    const settings = this.settingsManager.getSettings().formula;
    await this.app.fileManager.processFrontMatter(targetFile, (data) => {
      const contextData = { ...data };
      delete contextData.formula_src;
      delete contextData.formula_source;
      delete contextData.position;
      for (const targetKey of Object.keys(combinedFormulas)) {
        const expression = combinedFormulas[targetKey];
        try {
          let rawResult = this.evaluateFormula(expression, contextData, targetFile.path);
          if (typeof rawResult === "number" && settings.enableRounding) {
            const factor = Math.pow(10, settings.roundingPrecision);
            rawResult = Math.round(rawResult * factor) / factor;
          }
          if (JSON.stringify(data[targetKey]) !== JSON.stringify(rawResult)) {
            data[targetKey] = rawResult;
            hasChange = true;
            contextData[targetKey] = rawResult;
          }
        } catch (error) {
          console.error(`\u8BA1\u7B97\u9519\u8BEF [${targetKey}]:`, error);
          if (manual) new import_obsidian.Notice(`\u8BA1\u7B97\u9519\u8BEF [${targetKey}]: ${error.message}`);
        }
      }
    });
    if (manual) new import_obsidian.Notice(hasChange ? "\u2705 \u8BA1\u7B97\u5B8C\u6210" : "\u6570\u503C\u65E0\u53D8\u5316");
  }
  resolveFile(linkText, sourcePath) {
    if (!linkText) return null;
    let cleanName = String(linkText).replace(/[\[\]"]/g, "").split("|")[0];
    return this.app.metadataCache.getFirstLinkpathDest(cleanName, sourcePath);
  }
  async getFormulasFromNote(file) {
    try {
      const content = await this.app.vault.read(file);
      const match = content.match(/```(?:formulas|yaml)\s*\n([\s\S]*?)\n\s*```/i);
      return match && match[1] ? (0, import_obsidian.parseYaml)(match[1]) : null;
    } catch (e) {
      return null;
    }
  }
  evaluateFormula(expression, context, sourcePath) {
    Object.keys(context).forEach((key) => {
      const lowerKey = key.toLowerCase();
      if (lowerKey !== key && context[lowerKey] === void 0) context[lowerKey] = context[key];
    });
    const getSingleLinkValue = (linkText, targetPropName) => {
      var _a;
      if (!linkText) return 0;
      const targetFile = this.resolveFile(linkText, sourcePath);
      if (!targetFile) return 0;
      const targetCache = this.app.metadataCache.getFileCache(targetFile);
      const val = (_a = targetCache == null ? void 0 : targetCache.frontmatter) == null ? void 0 : _a[targetPropName];
      const num = parseFloat(val);
      return isNaN(num) ? 0 : num;
    };
    const link = (field, targetProp) => {
      const val = context[field] || context[field.toLowerCase()];
      if (Array.isArray(val)) return getSingleLinkValue(val[0], targetProp);
      return getSingleLinkValue(val, targetProp);
    };
    const sum = (field, targetProp) => {
      const val = context[field] || context[field.toLowerCase()];
      if (!val) return 0;
      if (Array.isArray(val)) return val.reduce((acc, currLink) => acc + getSingleLinkValue(currLink, targetProp), 0);
      return getSingleLinkValue(val, targetProp);
    };
    const prop = (key) => context[key];
    const round = (num, decimals) => {
      if (typeof num !== "number") return num;
      const d = decimals !== void 0 ? decimals : this.settingsManager.getSettings().formula.roundingPrecision;
      const factor = Math.pow(10, d);
      return Math.round(num * factor) / factor;
    };
    const isValidVarName = (name) => /^[\p{L}_$][\p{L}0-9_$]*$/u.test(name);
    const validKeys = Object.keys(context).filter(isValidVarName);
    const validValues = validKeys.map((k) => context[k]);
    try {
      const func = new Function(...validKeys, "Math", "moment", "prop", "round", "link", "sum", "ctx", `"use strict"; return (${expression});`);
      return func(...validValues, Math, window.moment, prop, round, link, sum, context);
    } catch (e) {
      throw e;
    }
  }
};

// ui/MainView.ts
var import_obsidian33 = require("obsidian");
init_DataEngine();

// ui/components/Sidebar.ts
var import_obsidian10 = require("obsidian");

// ui/modals/RenameModal.ts
var import_obsidian9 = require("obsidian");
var RenameModal = class extends import_obsidian9.Modal {
  constructor(app, currentName, onSubmit) {
    super(app);
    __publicField(this, "currentName");
    __publicField(this, "onSubmit");
    this.currentName = currentName;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "\u91CD\u547D\u540D\u770B\u677F" });
    let nameValue = this.currentName;
    new import_obsidian9.Setting(contentEl).setName("\u540D\u79F0").addText((text) => text.setValue(nameValue).onChange((value) => nameValue = value).inputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") this.submit(nameValue);
    }));
    const footer = contentEl.createDiv("dl-modal-footer");
    const btn = footer.createEl("button", { text: "\u786E\u8BA4", cls: "mod-cta" });
    btn.onclick = () => this.submit(nameValue);
  }
  submit(name) {
    if (name.trim()) {
      this.onSubmit(name);
      this.close();
    }
  }
  onClose() {
    this.contentEl.empty();
  }
};

// ui/components/Sidebar.ts
var Sidebar = class {
  constructor(container, app, settingsManager, onDashboardSwitch) {
    __publicField(this, "container");
    __publicField(this, "app");
    __publicField(this, "settingsManager");
    __publicField(this, "pinnedContainer");
    __publicField(this, "standardContainer");
    __publicField(this, "onDashboardSwitch");
    // Drag state
    __publicField(this, "draggedId", null);
    this.container = container;
    this.app = app;
    this.settingsManager = settingsManager;
    this.onDashboardSwitch = onDashboardSwitch;
  }
  render() {
    this.container.addClass("dl-sidebar");
    const header = this.container.createDiv("dl-sidebar-header");
    header.createSpan({ text: "\u770B\u677F\u5217\u8868" });
    const addBtn = header.createSpan("dl-icon-btn");
    (0, import_obsidian10.setIcon)(addBtn, "plus");
    addBtn.onclick = () => this.handleCreateDashboard();
    addBtn.title = "\u65B0\u5EFA\u770B\u677F";
    const content = this.container.createDiv("dl-sidebar-content");
    this.pinnedContainer = content.createDiv("dl-dashboard-list dl-pinned-list");
    this.pinnedContainer.setAttribute("data-section", "pinned");
    content.createDiv("dl-list-separator");
    this.standardContainer = content.createDiv("dl-dashboard-list dl-standard-list");
    this.standardContainer.setAttribute("data-section", "standard");
    this.setupDragDrop(this.pinnedContainer);
    this.setupDragDrop(this.standardContainer);
    this.refreshList();
  }
  async refreshList() {
    this.pinnedContainer.empty();
    this.standardContainer.empty();
    const dashboards = this.settingsManager.getDashboards();
    const activeId = this.settingsManager.getSettings().activeDashboardId;
    const pinned = dashboards.filter((d) => d.isPinned);
    const standard = dashboards.filter((d) => !d.isPinned);
    if (pinned.length > 0) {
      this.pinnedContainer.createDiv({ text: "\u7F6E\u9876", cls: "dl-list-header" });
      pinned.forEach((d) => this.renderItem(this.pinnedContainer, d, activeId));
      this.pinnedContainer.style.display = "block";
    } else {
      this.pinnedContainer.style.display = "none";
    }
    if (standard.length > 0) {
      if (pinned.length > 0) this.standardContainer.createDiv({ text: "\u5168\u90E8", cls: "dl-list-header" });
      standard.forEach((d) => this.renderItem(this.standardContainer, d, activeId));
    }
  }
  renderItem(container, dashboard, activeId) {
    const item = container.createDiv("dl-dashboard-item");
    item.setAttribute("draggable", "true");
    item.setAttribute("data-id", dashboard.id);
    if (dashboard.id === activeId) item.addClass("is-active");
    const icon = item.createSpan("dl-item-icon");
    (0, import_obsidian10.setIcon)(icon, dashboard.isPinned ? "pin" : "layout-dashboard");
    const nameSpan = item.createSpan({ text: dashboard.name, cls: "dl-item-name" });
    item.onclick = () => {
      if (dashboard.id !== activeId) {
        this.settingsManager.setActiveDashboard(dashboard.id).then(() => {
          this.onDashboardSwitch(dashboard.id);
          this.refreshList();
        });
      }
    };
    item.oncontextmenu = (evt) => {
      this.showContextMenu(evt, dashboard);
    };
    item.addEventListener("dragstart", (e) => {
      this.draggedId = dashboard.id;
      item.addClass("is-dragging");
      if (e.dataTransfer) {
        e.dataTransfer.effectAllowed = "move";
        e.dataTransfer.setData("text/plain", dashboard.id);
      }
    });
    item.addEventListener("dragend", () => {
      item.removeClass("is-dragging");
      this.draggedId = null;
      this.container.querySelectorAll(".dl-drop-target").forEach((el) => el.removeClass("dl-drop-target"));
    });
  }
  setupDragDrop(container) {
    container.addEventListener("dragover", (e) => {
      e.preventDefault();
      if (e.dataTransfer) e.dataTransfer.dropEffect = "move";
      const target = e.target.closest(".dl-dashboard-item");
      if (target && target !== container) {
      }
    });
    container.addEventListener("drop", async (e) => {
      var _a;
      e.preventDefault();
      const draggedId = (_a = e.dataTransfer) == null ? void 0 : _a.getData("text/plain");
      if (!draggedId) return;
      const targetSection = container.getAttribute("data-section");
      const targetItem = e.target.closest(".dl-dashboard-item");
      const dashboards = this.settingsManager.getDashboards();
      let newOrder = [...dashboards];
      const draggedDashboard = newOrder.find((d) => d.id === draggedId);
      if (!draggedDashboard) return;
      newOrder = newOrder.filter((d) => d.id !== draggedId);
      let insertIndex = -1;
      if (targetItem) {
        const targetId = targetItem.getAttribute("data-id");
        const targetIndex = newOrder.findIndex((d) => d.id === targetId);
        insertIndex = targetIndex;
      } else {
        if (targetSection === "pinned") {
          const lastPinnedIndex = newOrder.findLastIndex((d) => d.isPinned);
          insertIndex = lastPinnedIndex + 1;
        } else {
          insertIndex = newOrder.length;
        }
      }
      if (insertIndex === -1) insertIndex = 0;
      const isNowPinned = targetSection === "pinned";
      draggedDashboard.isPinned = isNowPinned;
      newOrder.splice(insertIndex, 0, draggedDashboard);
      await this.settingsManager.updateDashboardProperties(draggedId, { isPinned: isNowPinned });
      await this.settingsManager.reorderDashboards(newOrder.map((d) => d.id));
      this.refreshList();
    });
  }
  async handleCreateDashboard() {
    const name = `\u770B\u677F ${this.settingsManager.getDashboards().length + 1}`;
    const newDash = await this.settingsManager.addDashboard(name);
    this.onDashboardSwitch(newDash.id);
    this.refreshList();
  }
  showContextMenu(evt, dashboard) {
    const menu = new import_obsidian10.Menu();
    menu.addItem((item) => {
      item.setTitle(dashboard.isPinned ? "\u53D6\u6D88\u7F6E\u9876" : "\u7F6E\u9876").setIcon("pin").onClick(async () => {
        await this.settingsManager.togglePinDashboard(dashboard.id);
        this.refreshList();
      });
    });
    menu.addSeparator();
    menu.addItem((item) => {
      item.setTitle("\u91CD\u547D\u540D").setIcon("pencil").onClick(() => {
        new RenameModal(this.app, dashboard.name, async (newName) => {
          await this.settingsManager.renameDashboard(dashboard.id, newName);
          this.refreshList();
        }).open();
      });
    });
    menu.addItem((item) => {
      item.setTitle("\u5220\u9664").setIcon("trash").setWarning(true).onClick(async () => {
        await this.settingsManager.removeDashboard(dashboard.id);
        this.refreshList();
        const activeId = this.settingsManager.getSettings().activeDashboardId;
        if (activeId) this.onDashboardSwitch(activeId);
      });
    });
    menu.showAtPosition({ x: evt.clientX, y: evt.clientY });
  }
  toggleCollapse(collapsed) {
    this.container.toggleClass("is-collapsed", collapsed);
  }
  destroy() {
    if (this.container) {
      this.container.empty();
      this.container.remove();
    }
  }
};

// ui/components/Header.ts
var import_obsidian12 = require("obsidian");

// ui/modals/NoteCreatorModal.ts
var import_obsidian11 = require("obsidian");
var NoteCreatorModal = class extends import_obsidian11.Modal {
  constructor(app, settingsManager) {
    super(app);
    __publicField(this, "settingsManager");
    __publicField(this, "templates", []);
    __publicField(this, "selectedTemplate", null);
    __publicField(this, "newFileName", "");
    this.settingsManager = settingsManager;
  }
  async onOpen() {
    await this.loadTemplates();
    this.render();
  }
  async loadTemplates() {
    const path = this.settingsManager.getSettings().noteCreator.templatePath;
    if (!path) return;
    const folder = this.app.vault.getAbstractFileByPath(path);
    if (folder) {
      if ("children" in folder) {
        this.templates = folder.children.filter((f) => f instanceof import_obsidian11.TFile && f.extension === "md");
      }
    }
  }
  render() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "\u521B\u5EFA\u65B0\u7B14\u8BB0" });
    new import_obsidian11.Setting(contentEl).setName("\u6587\u4EF6\u540D").addText((text) => {
      text.setPlaceholder("\u8BF7\u8F93\u5165\u7B14\u8BB0\u540D\u79F0").onChange((val) => this.newFileName = val);
      setTimeout(() => text.inputEl.focus(), 50);
    });
    if (this.templates.length > 0) {
      new import_obsidian11.Setting(contentEl).setName("\u9009\u62E9\u6A21\u677F").setDesc("\u652F\u6301\u641C\u7D22").addText((text) => {
        text.setPlaceholder("\u8F93\u5165\u6A21\u677F\u540D\u79F0...").onChange((val) => {
          if (!val) this.selectedTemplate = null;
        });
        new TemplateSuggest(this.app, text.inputEl, this.templates, (file) => {
          this.selectedTemplate = file;
          text.setValue(file.basename);
        });
      });
    } else {
      contentEl.createDiv({
        text: "\u672A\u627E\u5230\u6A21\u677F\uFF0C\u8BF7\u5148\u5728\u8BBE\u7F6E\u4E2D\u914D\u7F6E\u6A21\u677F\u8DEF\u5F84\u3002",
        cls: "dl-error-msg"
      });
    }
    const footer = contentEl.createDiv("dl-modal-footer");
    const btn = footer.createEl("button", { text: "\u521B\u5EFA", cls: "mod-cta" });
    btn.onclick = () => this.handleCreate();
    contentEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && this.newFileName) {
        this.handleCreate();
      }
    });
  }
  async handleCreate() {
    if (!this.newFileName) {
      new import_obsidian11.Notice("\u8BF7\u8F93\u5165\u6587\u4EF6\u540D");
      return;
    }
    const savePath = this.settingsManager.getSettings().noteCreator.savePath || "";
    const fullPath = (0, import_obsidian11.normalizePath)(`${savePath}/${this.newFileName}.md`);
    if (this.app.vault.getAbstractFileByPath(fullPath)) {
      new import_obsidian11.Notice("\u6587\u4EF6\u5DF2\u5B58\u5728");
      return;
    }
    let content = "";
    if (this.selectedTemplate) {
      content = await this.app.vault.read(this.selectedTemplate);
    }
    try {
      const file = await this.app.vault.create(fullPath, content);
      this.app.workspace.getLeaf(false).openFile(file);
      this.close();
    } catch (err) {
      new import_obsidian11.Notice("\u521B\u5EFA\u6587\u4EF6\u5931\u8D25");
      console.error(err);
    }
  }
  onClose() {
    this.contentEl.empty();
  }
};
var TemplateSuggest = class extends import_obsidian11.AbstractInputSuggest {
  constructor(app, inputEl, files, onSelect) {
    super(app, inputEl);
    __publicField(this, "files");
    __publicField(this, "onSelect");
    this.files = files;
    this.onSelect = onSelect;
  }
  getSuggestions(query) {
    const lower = query.toLowerCase();
    return this.files.filter(
      (f) => f.basename.toLowerCase().includes(lower) || f.path.toLowerCase().includes(lower)
    );
  }
  renderSuggestion(file, el) {
    el.createDiv({ text: file.basename, style: "font-weight: 500;" });
    el.createDiv({ text: file.path, style: "font-size: 0.8em; color: var(--text-muted);" });
  }
  selectSuggestion(file) {
    this.onSelect(file);
    this.close();
  }
};

// ui/components/Header.ts
var Header = class {
  constructor(container, app, settingsManager, onToggleSidebar, onEditLayout, onAddWidget) {
    __publicField(this, "container");
    __publicField(this, "app");
    __publicField(this, "settingsManager");
    __publicField(this, "onToggleSidebar");
    __publicField(this, "onEditLayout");
    __publicField(this, "onAddWidget");
    // Internal State
    __publicField(this, "isEditing", false);
    __publicField(this, "isSidebarVisible", true);
    __publicField(this, "editBtnText", null);
    __publicField(this, "sidebarBtnText", null);
    __publicField(this, "searchInput");
    __publicField(this, "searchResultsContainer");
    __publicField(this, "selectedIndex", -1);
    __publicField(this, "matchedFiles", []);
    this.container = container;
    this.app = app;
    this.settingsManager = settingsManager;
    this.onToggleSidebar = onToggleSidebar;
    this.onEditLayout = onEditLayout;
    this.onAddWidget = onAddWidget;
  }
  render() {
    this.container.empty();
    this.container.addClass("dl-header");
    const left = this.container.createDiv("dl-header-left");
    const sidebarBtn = left.createSpan("dl-header-btn");
    (0, import_obsidian12.setIcon)(sidebarBtn.createSpan("dl-icon"), "panel-left");
    this.sidebarBtnText = sidebarBtn.createSpan({ text: "\u6536\u8D77\u4FA7\u8FB9\u680F" });
    sidebarBtn.onclick = () => {
      var _a;
      this.isSidebarVisible = !this.isSidebarVisible;
      (_a = this.sidebarBtnText) == null ? void 0 : _a.setText(this.isSidebarVisible ? "\u6536\u8D77\u4FA7\u8FB9\u680F" : "\u5C55\u5F00\u4FA7\u8FB9\u680F");
      this.onToggleSidebar();
    };
    const right = this.container.createDiv("dl-header-right");
    const btnGroup = right.createDiv("dl-btn-group");
    const createNoteBtn = btnGroup.createDiv("dl-header-btn");
    (0, import_obsidian12.setIcon)(createNoteBtn.createSpan("dl-icon"), "file-plus");
    createNoteBtn.createSpan({ text: "\u65B0\u5EFA\u7B14\u8BB0" });
    createNoteBtn.onclick = () => new NoteCreatorModal(this.app, this.settingsManager).open();
    const addWidgetBtn = btnGroup.createDiv({ cls: "dl-header-btn", attr: { title: "\u6DFB\u52A0\u7EC4\u4EF6" } });
    (0, import_obsidian12.setIcon)(addWidgetBtn.createSpan("dl-icon"), "plus-square");
    addWidgetBtn.createSpan({ text: "\u6DFB\u52A0\u7EC4\u4EF6" });
    addWidgetBtn.onclick = () => this.onAddWidget();
    const editBtn = btnGroup.createDiv("dl-header-btn");
    (0, import_obsidian12.setIcon)(editBtn.createSpan("dl-icon"), "edit");
    this.editBtnText = editBtn.createSpan({ text: "\u7F16\u8F91\u5E03\u5C40" });
    editBtn.onclick = () => {
      this.isEditing = !this.isEditing;
      this.container.toggleClass("is-editing", this.isEditing);
      this.editBtnText.setText(this.isEditing ? "\u4FDD\u5B58\u5E03\u5C40" : "\u7F16\u8F91\u5E03\u5C40");
      if (this.isEditing) editBtn.addClass("is-active");
      else editBtn.removeClass("is-active");
      this.onEditLayout();
    };
    const searchWrapper = right.createDiv("dl-search-wrapper");
    searchWrapper.style.position = "relative";
    this.searchInput = searchWrapper.createEl("input", { type: "text", cls: "dl-search-box", placeholder: "\u641C\u7D22\u6587\u4EF6..." });
    this.searchResultsContainer = searchWrapper.createDiv("dl-search-results");
    this.searchResultsContainer.style.display = "none";
    this.searchResultsContainer.style.position = "absolute";
    this.searchResultsContainer.style.top = "100%";
    this.searchResultsContainer.style.left = "0";
    this.searchResultsContainer.style.width = "100%";
    this.searchResultsContainer.style.background = "var(--background-primary)";
    this.searchResultsContainer.style.zIndex = "1000";
    this.searchResultsContainer.style.maxHeight = "300px";
    this.searchResultsContainer.style.overflowY = "auto";
    this.attachSearchListeners();
  }
  attachSearchListeners() {
    this.searchInput.addEventListener("input", () => this.handleSearch());
    this.searchInput.addEventListener("keydown", (e) => {
      if (e.key === "ArrowDown") {
        e.preventDefault();
        this.selectedIndex = Math.min(this.selectedIndex + 1, this.matchedFiles.length - 1);
        this.updateSelection();
      } else if (e.key === "ArrowUp") {
        e.preventDefault();
        this.selectedIndex = Math.max(this.selectedIndex - 1, 0);
        this.updateSelection();
      } else if (e.key === "Enter") {
        e.preventDefault();
        this.openSelectedFile();
      } else if (e.key === "Escape") {
        this.clearSearch();
      }
    });
    document.addEventListener("click", (e) => {
      if (!this.searchInput.contains(e.target) && !this.searchResultsContainer.contains(e.target)) {
        this.clearSearch();
      }
    });
  }
  handleSearch() {
    const query = this.searchInput.value.toLowerCase();
    if (query.length < 2) {
      this.clearSearch();
      return;
    }
    const allFiles = this.app.vault.getMarkdownFiles();
    this.matchedFiles = allFiles.filter((f) => f.basename.toLowerCase().includes(query) || f.path.toLowerCase().includes(query)).slice(0, 10);
    this.selectedIndex = 0;
    this.renderSearchResults();
  }
  renderSearchResults() {
    this.searchResultsContainer.empty();
    if (this.matchedFiles.length > 0) {
      this.searchResultsContainer.style.display = "block";
      this.matchedFiles.forEach((file, index) => {
        const item = this.searchResultsContainer.createDiv("dl-search-item");
        if (index === this.selectedIndex) item.style.backgroundColor = "var(--background-modifier-hover)";
        item.createDiv({ text: file.basename, style: "font-weight: bold" });
        item.createDiv({ text: file.path, style: "font-size: 0.8em; color: var(--text-muted)" });
        item.addEventListener("mouseenter", () => {
          this.selectedIndex = index;
          this.updateSelection();
        });
        item.addEventListener("click", () => {
          this.openSelectedFile();
        });
      });
    } else {
      this.searchResultsContainer.style.display = "none";
    }
  }
  updateSelection() {
    const items = this.searchResultsContainer.children;
    for (let i = 0; i < items.length; i++) {
      items[i].style.backgroundColor = i === this.selectedIndex ? "var(--background-modifier-hover)" : "transparent";
    }
  }
  openSelectedFile() {
    if (this.selectedIndex >= 0 && this.selectedIndex < this.matchedFiles.length) {
      const file = this.matchedFiles[this.selectedIndex];
      this.app.workspace.getLeaf(false).openFile(file);
      this.clearSearch();
    }
  }
  clearSearch() {
    this.matchedFiles = [];
    this.searchResultsContainer.empty();
    this.searchResultsContainer.style.display = "none";
    this.selectedIndex = -1;
  }
};

// ui/components/GridCanvas.ts
var import_obsidian26 = require("obsidian");
init_WidgetConfigModal();
var GridCanvas = class {
  constructor(container, app, settingsManager, widgetFactory) {
    __publicField(this, "container");
    __publicField(this, "app");
    __publicField(this, "settingsManager");
    __publicField(this, "widgetFactory");
    __publicField(this, "isEditMode", false);
    __publicField(this, "currentDashboardId", null);
    __publicField(this, "dragState", null);
    __publicField(this, "resizeState", null);
    // Grid Constants
    __publicField(this, "CELL_HEIGHT", 50);
    __publicField(this, "GAP", 16);
    __publicField(this, "COLS", 24);
    this.container = container;
    this.app = app;
    this.settingsManager = settingsManager;
    this.widgetFactory = widgetFactory;
    document.addEventListener("mousemove", this.handleMouseMove.bind(this));
    document.addEventListener("mouseup", this.handleMouseUp.bind(this));
  }
  render() {
    this.container.empty();
    this.container.addClass("dl-grid-canvas-container");
    const canvas = this.container.createDiv("dl-grid-canvas");
    if (this.isEditMode) canvas.addClass("is-editing");
  }
  setEditMode(enabled) {
    this.isEditMode = enabled;
    const canvas = this.container.querySelector(".dl-grid-canvas");
    if (canvas) canvas.toggleClass("is-editing", enabled);
    if (this.currentDashboardId) this.loadDashboard(this.currentDashboardId);
  }
  async loadDashboard(id) {
    this.currentDashboardId = id;
    this.settingsManager.setActiveDashboard(id);
    const dashboard = this.settingsManager.getDashboard(id);
    const canvas = this.container.querySelector(".dl-grid-canvas");
    if (!canvas || !dashboard) return;
    canvas.empty();
    dashboard.layout.forEach((item) => {
      const widget = this.settingsManager.getWidget(item.widgetId);
      if (!widget) return;
      const wrapper = canvas.createDiv("dl-grid-item-wrapper");
      wrapper.setAttribute("data-id", item.i);
      wrapper.style.gridColumnStart = String(item.x + 1);
      wrapper.style.gridColumnEnd = String(item.x + item.w + 1);
      wrapper.style.gridRowStart = String(item.y + 1);
      wrapper.style.gridRowEnd = String(item.y + item.h + 1);
      const component = this.widgetFactory.create(widget);
      if (component && typeof component.render === "function") {
        component.render(wrapper);
        if (typeof component.renderContent === "function") component.renderContent();
      }
      if (this.isEditMode && !import_obsidian26.Platform.isMobile) {
        const resizeHandle = wrapper.createDiv("dl-resize-handle");
        resizeHandle.addEventListener("mousedown", (e) => this.initResize(e, wrapper, item));
        wrapper.addEventListener("mousedown", (e) => this.initDrag(e, wrapper, item));
      }
    });
  }
  async openAddWidgetModal() {
    if (!this.currentDashboardId) {
      new import_obsidian26.Notice("\u8BF7\u5148\u9009\u62E9\u6216\u521B\u5EFA\u4E00\u4E2A\u770B\u677F");
      return;
    }
    new WidgetConfigModal(
      this.app,
      this.currentDashboardId,
      this.settingsManager,
      async (widget) => {
        await this.settingsManager.saveWidget(widget);
        await this.addWidgetToLayout(widget.id);
      }
    ).open();
  }
  async addWidgetToLayout(widgetId) {
    const dashboard = this.settingsManager.getDashboard(this.currentDashboardId);
    if (!dashboard) return;
    let y = 0;
    if (dashboard.layout.length > 0) y = Math.max(...dashboard.layout.map((i) => i.y + i.h));
    const newItem = { i: crypto.randomUUID(), x: 0, y, w: 12, h: 6, widgetId };
    await this.settingsManager.addLayoutItem(this.currentDashboardId, newItem);
    this.loadDashboard(this.currentDashboardId);
  }
  // --- Interaction Logic ---
  initResize(e, item, layoutItem) {
    e.stopPropagation();
    e.preventDefault();
    this.resizeState = {
      isResizing: true,
      startX: e.clientX,
      startY: e.clientY,
      initialW: item.clientWidth,
      initialH: item.clientHeight,
      item,
      layoutItem
    };
    item.style.zIndex = "100";
  }
  initDrag(e, item, layoutItem) {
    if (e.target.closest("button, input, select, .dl-resize-handle, .dl-list-item")) return;
    e.preventDefault();
    this.dragState = {
      isDragging: true,
      startX: e.clientX,
      startY: e.clientY,
      initialX: item.offsetLeft,
      initialY: item.offsetTop,
      item,
      layoutItem
    };
    item.style.zIndex = "100";
  }
  handleMouseMove(e) {
    if (this.resizeState && this.resizeState.isResizing) {
      const dx = e.clientX - this.resizeState.startX;
      const dy = e.clientY - this.resizeState.startY;
      this.resizeState.item.style.width = `${this.resizeState.initialW + dx}px`;
      this.resizeState.item.style.height = `${this.resizeState.initialH + dy}px`;
    } else if (this.dragState && this.dragState.isDragging) {
      const dx = e.clientX - this.dragState.startX;
      const dy = e.clientY - this.dragState.startY;
      this.dragState.item.style.transform = `translate(${dx}px, ${dy}px)`;
    }
  }
  async handleMouseUp(e) {
    if (!this.currentDashboardId) return;
    const dashboard = this.settingsManager.getDashboard(this.currentDashboardId);
    if (!dashboard) return;
    const canvas = this.container.querySelector(".dl-grid-canvas");
    if (!canvas) return;
    const canvasRect = canvas.getBoundingClientRect();
    const colWidth = (canvasRect.width - (this.COLS - 1) * this.GAP) / this.COLS;
    if (this.resizeState && this.resizeState.isResizing) {
      const { item, layoutItem } = this.resizeState;
      item.style.zIndex = "";
      const newPixelW = item.clientWidth;
      const newPixelH = item.clientHeight;
      let w = Math.round((newPixelW + this.GAP) / (colWidth + this.GAP));
      let h = Math.round((newPixelH + this.GAP) / (this.CELL_HEIGHT + this.GAP));
      w = Math.max(2, Math.min(w, this.COLS - layoutItem.x));
      h = Math.max(2, h);
      layoutItem.w = w;
      layoutItem.h = h;
      item.style.width = "";
      item.style.height = "";
      await this.resolveOverlaps(dashboard, layoutItem);
      await this.settingsManager.saveSettings();
      this.loadDashboard(this.currentDashboardId);
      this.resizeState = null;
    } else if (this.dragState && this.dragState.isDragging) {
      const { item, layoutItem, startX, startY } = this.dragState;
      item.style.zIndex = "";
      item.style.transform = "";
      const dx = e.clientX - startX;
      const dy = e.clientY - startY;
      const dCol = Math.round(dx / (colWidth + this.GAP));
      const dRow = Math.round(dy / (this.CELL_HEIGHT + this.GAP));
      let newX = layoutItem.x + dCol;
      let newY = layoutItem.y + dRow;
      newX = Math.max(0, Math.min(newX, this.COLS - layoutItem.w));
      newY = Math.max(0, newY);
      layoutItem.x = newX;
      layoutItem.y = newY;
      await this.resolveOverlaps(dashboard, layoutItem);
      await this.settingsManager.saveSettings();
      this.loadDashboard(this.currentDashboardId);
      this.dragState = null;
    }
  }
  async resolveOverlaps(dashboard, activeItem) {
    const layout = [...dashboard.layout];
    const updated = /* @__PURE__ */ new Set();
    updated.add(activeItem.i);
    let hasOverlap = true;
    let iterations = 0;
    const maxIterations = 100;
    while (hasOverlap && iterations < maxIterations) {
      hasOverlap = false;
      iterations++;
      const sorted = [...layout].sort((a, b) => a.y - b.y);
      for (let i = 0; i < sorted.length; i++) {
        const A = sorted[i];
        for (let j = i + 1; j < sorted.length; j++) {
          const B = sorted[j];
          const overlaps = A.x < B.x + B.w && A.x + A.w > B.x && A.y < B.y + B.h && A.y + A.h > B.y;
          if (overlaps) {
            hasOverlap = true;
            let pusher, pushee;
            if (A.i === activeItem.i) {
              pusher = A;
              pushee = B;
            } else if (B.i === activeItem.i) {
              pusher = B;
              pushee = A;
            } else if (A.y < B.y) {
              pusher = A;
              pushee = B;
            } else if (A.y === B.y && A.x < B.x) {
              pusher = A;
              pushee = B;
            } else {
              continue;
            }
            pushee.y = pusher.y + pusher.h;
            updated.add(pushee.i);
          }
        }
      }
    }
    for (const item of dashboard.layout) {
      const temp = layout.find((i) => i.i === item.i);
      if (temp) {
        item.x = temp.x;
        item.y = temp.y;
      }
      item.x = Math.max(0, Math.min(item.x, this.COLS - item.w));
      item.y = Math.max(0, item.y);
    }
  }
};

// ui/widgets/BaseWidget.ts
var import_obsidian27 = require("obsidian");
var BaseWidget = class {
  // [Êñ∞Â¢û]
  constructor(widget, onDelete, onEdit, onMove) {
    __publicField(this, "container");
    __publicField(this, "widget");
    __publicField(this, "contentEl");
    __publicField(this, "onDelete");
    __publicField(this, "onEdit");
    __publicField(this, "onMove");
    this.widget = widget;
    this.onDelete = onDelete;
    this.onEdit = onEdit;
    this.onMove = onMove;
  }
  render(parent) {
    this.container = parent.createDiv("dl-widget-card");
    this.container.setAttribute("data-id", this.widget.id);
    this.renderHeader();
    this.contentEl = this.container.createDiv("dl-widget-content");
    this.renderContent();
  }
  renderHeader() {
    const header = this.container.createDiv("dl-widget-header");
    header.createSpan({ cls: "dl-widget-title", text: this.widget.title });
    const controls = header.createDiv("dl-widget-controls");
    const menuBtn = controls.createSpan("dl-icon-btn");
    (0, import_obsidian27.setIcon)(menuBtn, "more-vertical");
    menuBtn.onclick = (e) => {
      e.stopPropagation();
      const menu = new import_obsidian27.Menu();
      menu.addItem((item) => {
        item.setTitle("\u7F16\u8F91\u7EC4\u4EF6").setIcon("pencil").onClick(() => this.onEdit());
      });
      menu.addItem((item) => {
        item.setTitle("\u79FB\u52A8\u5230\u5176\u4ED6\u770B\u677F").setIcon("arrow-right-circle").onClick(() => this.onMove());
      });
      menu.addSeparator();
      menu.addItem((item) => {
        item.setTitle("\u5220\u9664").setIcon("trash").setWarning(true).onClick(() => this.onDelete());
      });
      menu.showAtPosition({ x: e.clientX, y: e.clientY });
    };
  }
  update(widget) {
    this.widget = widget;
    this.container.querySelector(".dl-widget-title").setText(widget.title);
    this.contentEl.empty();
    this.renderContent();
  }
};

// ui/widgets/ChartWidget.ts
var import_obsidian28 = require("obsidian");
init_ColorUtils();

// ui/widgets/ChartLegendManager.ts
var ChartLegendManager = class {
  constructor(container) {
    __publicField(this, "container", null);
    if (container) {
      this.container = container;
    }
  }
  setContainer(container) {
    this.container = container;
  }
  removeExistingLegend() {
    if (!this.container) return;
    const old = this.container.querySelector(".dl-chart-legend-container");
    if (old) old.remove();
  }
  renderLegend(labels, colors) {
    if (!this.container) return;
    const legendEl = this.container.createDiv("dl-chart-legend-container");
    legendEl.style.display = "flex";
    legendEl.style.flexWrap = "wrap";
    legendEl.style.gap = "15px";
    legendEl.style.fontSize = "0.8em";
    legendEl.style.color = "var(--text-muted)";
    legendEl.style.justifyContent = "center";
    legendEl.style.padding = "8px";
    legendEl.style.borderTop = "1px solid var(--background-modifier-border)";
    labels.forEach((label, i) => {
      const item = legendEl.createDiv({ cls: "dl-legend-item" });
      item.style.display = "flex";
      item.style.alignItems = "center";
      item.style.gap = "5px";
      const dot = item.createDiv();
      dot.style.width = "8px";
      dot.style.height = "8px";
      dot.style.borderRadius = "50%";
      dot.style.backgroundColor = colors[i] || "#ccc";
      item.createSpan({ text: label });
    });
  }
};

// ui/widgets/ChartTooltipManager.ts
var ChartTooltipManager = class {
  constructor() {
    __publicField(this, "tooltip", null);
  }
  attachTooltip(svg) {
    svg.addEventListener("mousemove", (e) => {
      const target = e.target;
      const val = target.getAttribute("data-tooltip-value");
      const label = target.getAttribute("data-tooltip-label");
      if (val && label) {
        if (!this.tooltip) {
          this.tooltip = document.body.createDiv("dl-tooltip");
        }
        this.tooltip.style.display = "block";
        this.tooltip.style.left = `${e.clientX + 10}px`;
        this.tooltip.style.top = `${e.clientY + 10}px`;
        this.tooltip.innerHTML = `<strong>${label}</strong><br/>${val}`;
      } else if (this.tooltip) {
        this.tooltip.style.display = "none";
      }
    });
    svg.addEventListener("mouseleave", () => {
      if (this.tooltip) this.tooltip.style.display = "none";
    });
  }
  cleanup() {
    if (this.tooltip) {
      this.tooltip.remove();
      this.tooltip = null;
    }
  }
};

// ui/renderers/helpers/AxisGenerator.ts
var AxisGenerator = class {
  constructor() {
    __publicField(this, "ns", "http://www.w3.org/2000/svg");
  }
  drawAxes(svg, labels, max, min, w, h, pad, isHorizontal = false) {
    const xAxisY = h - pad;
    const yAxisX = pad;
    const chartW = w - pad * 2;
    const chartH = h - pad * 2;
    this.drawLine(svg, pad, xAxisY, w - pad, xAxisY);
    this.drawLine(svg, yAxisX, pad, yAxisX, xAxisY);
    if (isHorizontal) {
      if (labels.length > 0) {
        const stepH = chartH / labels.length;
        labels.forEach((label, i) => {
          const y = pad + i * stepH + stepH / 2;
          this.drawText(svg, yAxisX - 5, y + 4, label, "end");
        });
      }
      const steps = 5;
      for (let i = 0; i <= steps; i++) {
        const val = min + (max - min) * (i / steps);
        const x = pad + i / steps * chartW;
        this.drawText(svg, x, xAxisY + 15, Math.round(val).toString(), "middle");
      }
    } else {
      if (labels.length > 0) {
        const maxLabelLen = labels.reduce((max2, l) => Math.max(max2, (l || "").length), 0);
        const estLabelWidth = Math.max(30, maxLabelLen * 7);
        const maxVisibleLabels = Math.max(1, Math.floor(chartW / (estLabelWidth + 15)));
        const step = Math.ceil(labels.length / maxVisibleLabels);
        labels.forEach((label, i) => {
          if (i % step === 0) {
            const x = pad + i / (labels.length - 1 || 1) * chartW;
            this.drawText(svg, x, xAxisY + 15, label, "middle");
          }
        });
      }
      const steps = 5;
      for (let i = 0; i <= steps; i++) {
        const val = min + (max - min) * (i / steps);
        const y = xAxisY - i / steps * chartH;
        this.drawText(svg, yAxisX - 5, y + 4, Math.round(val).toString(), "end");
      }
    }
  }
  drawLine(svg, x1, y1, x2, y2) {
    const el = document.createElementNS(this.ns, "line");
    el.setAttribute("x1", x1.toString());
    el.setAttribute("y1", y1.toString());
    el.setAttribute("x2", x2.toString());
    el.setAttribute("y2", y2.toString());
    el.setAttribute("class", "dl-axis-line");
    svg.appendChild(el);
  }
  drawText(svg, x, y, text, anchor) {
    const el = document.createElementNS(this.ns, "text");
    el.setAttribute("x", x.toString());
    el.setAttribute("y", y.toString());
    el.setAttribute("text-anchor", anchor);
    el.setAttribute("class", "dl-axis-text");
    el.textContent = text;
    svg.appendChild(el);
  }
};

// ui/renderers/BaseChartRenderer.ts
var BaseChartRenderer = class {
  constructor() {
    __publicField(this, "ns", "http://www.w3.org/2000/svg");
    __publicField(this, "axisGenerator");
    this.axisGenerator = new AxisGenerator();
  }
  createSvg(width, height) {
    const svg = document.createElementNS(this.ns, "svg");
    svg.setAttribute("width", "100%");
    svg.setAttribute("height", "100%");
    svg.setAttribute("viewBox", `0 0 ${width} ${height}`);
    svg.setAttribute("preserveAspectRatio", "xMidYMid meet");
    return svg;
  }
  // ‰ª£ÁêÜÁªòÂà∂ÊñπÊ≥ïÔºå‰øùÊåÅÂéüÊúâÂ≠êÁ±ªÂÖºÂÆπÊÄß
  drawAxes(svg, labels, max, min, w, h, pad, yLabels, isHorizontal = false) {
    this.axisGenerator.drawAxes(svg, labels, max, min, w, h, pad, isHorizontal);
  }
  drawText(svg, x, y, text, anchor, cls = "dl-chart-text", fill) {
    const el = document.createElementNS(this.ns, "text");
    el.setAttribute("x", x.toString());
    el.setAttribute("y", y.toString());
    el.setAttribute("text-anchor", anchor);
    el.setAttribute("class", cls);
    if (fill) el.style.fill = fill;
    el.textContent = text;
    svg.appendChild(el);
  }
  getRange(datasets, refLines, userMin, userMax) {
    const isAllPercent = datasets.every((d) => d.enablePercentage);
    if (isAllPercent) return { max: 100, min: 0 };
    let allValues = [];
    datasets.forEach((d) => {
      if (!d.enablePercentage) {
        d.data.forEach((v) => {
          if (v !== null) allValues.push(v);
        });
      }
    });
    refLines.forEach((r) => allValues.push(r.value));
    let max = userMax !== void 0 ? userMax : allValues.length ? Math.max(...allValues) : 100;
    let min = userMin !== void 0 ? userMin : allValues.length ? Math.min(...allValues) : 0;
    if (max === min) {
      max += 5;
      min -= 5;
    }
    return { max, min };
  }
  drawRefLines(svg, refLines, max, min, w, h, pad) {
    const chartH = h - pad * 2;
    const range = max - min || 1;
    refLines.forEach((line) => {
      const y = h - pad - (line.value - min) / range * chartH;
      const el = document.createElementNS(this.ns, "line");
      el.setAttribute("x1", pad.toString());
      el.setAttribute("y1", y.toString());
      el.setAttribute("x2", (w - pad).toString());
      el.setAttribute("y2", y.toString());
      el.style.stroke = line.color || "var(--text-error)";
      el.style.strokeWidth = "1";
      el.style.strokeDasharray = "4 2";
      svg.appendChild(el);
    });
  }
};

// ui/renderers/BarChartRenderer.ts
var BarChartRenderer = class extends BaseChartRenderer {
  // [‰øÆÊîπ] Â¢ûÂä† isHistogram ÂèÇÊï∞
  render(datasets, labels, width, height, refLines, showLabels = false, userMin, userMax, isStacked = false, isHorizontal = false, isHistogram = false) {
    const svg = this.createSvg(width, height);
    const padding = 40;
    const chartW = width - padding * 2;
    const chartH = height - padding * 2;
    let max, min;
    if (isStacked) {
      const sums = labels.map((_, i) => datasets.reduce((acc, d) => acc + (d.data[i] || 0), 0));
      max = userMax !== void 0 ? userMax : Math.max(...sums, 0);
      min = userMin !== void 0 ? userMin : 0;
    } else {
      const r = this.getRange(datasets, refLines, userMin, userMax);
      max = r.max;
      min = r.min;
    }
    this.drawAxes(svg, labels, max, min, width, height, padding, void 0, isHorizontal);
    if (!isHorizontal) this.drawRefLines(svg, refLines, max, min, width, height, padding);
    const itemCount = labels.length || 1;
    if (isHorizontal) {
      const groupHeight = chartH / itemCount;
      const barHeight = isStacked ? groupHeight * 0.6 : groupHeight * 0.8 / datasets.length;
      datasets.forEach((dataset, setIndex) => {
        dataset.data.forEach((val, i) => {
          if (val === null) return;
          let leftVal = 0;
          if (isStacked) {
            for (let k = 0; k < setIndex; k++) leftVal += datasets[k].data[i] || 0;
          }
          const rightVal = leftVal + val;
          if (rightVal < min || leftVal > max) return;
          const visibleLeft = Math.max(min, Math.min(max, leftVal));
          const visibleRight = Math.max(min, Math.min(max, rightVal));
          const wTotal = (visibleRight - min) / (max - min || 1) * chartW;
          const wStart = (visibleLeft - min) / (max - min || 1) * chartW;
          let barW = Math.abs(wTotal - wStart);
          if (val !== 0 && barW < 5) barW = 5;
          const yGroup = padding + i * groupHeight + groupHeight * 0.1;
          const y = isStacked ? yGroup + groupHeight * 0.2 : yGroup + setIndex * barHeight;
          const x = padding + wStart;
          const rect = document.createElementNS(this.ns, "rect");
          rect.setAttribute("x", x.toString());
          rect.setAttribute("y", y.toString());
          rect.setAttribute("width", Math.max(0, barW).toString());
          rect.setAttribute("height", barHeight.toString());
          rect.setAttribute("class", "dl-chart-bar");
          rect.style.fill = dataset.color;
          rect.setAttribute("data-tooltip-value", val.toString());
          rect.setAttribute("data-tooltip-label", `${labels[i]} - ${dataset.label}`);
          svg.appendChild(rect);
          if (showLabels) {
            const labelX = x + barW;
            if (labelX >= padding && labelX <= width - padding) {
              this.drawText(svg, labelX + 5, y + barHeight / 2 + 4, val.toString(), "start", "dl-chart-text", "var(--text-normal)");
            }
          }
        });
      });
    } else {
      const groupWidth = chartW / itemCount;
      let barWidth;
      let groupPadding = 0;
      if (isHistogram) {
        barWidth = groupWidth;
        groupPadding = 0;
      } else {
        barWidth = isStacked ? groupWidth * 0.6 : groupWidth * 0.8 / datasets.length;
        groupPadding = groupWidth * 0.1;
      }
      datasets.forEach((dataset, setIndex) => {
        dataset.data.forEach((val, i) => {
          if (val === null) return;
          let bottomVal = 0;
          if (isStacked) {
            for (let k = 0; k < setIndex; k++) bottomVal += datasets[k].data[i] || 0;
          }
          const topVal = bottomVal + val;
          if (topVal < min || bottomVal > max) return;
          const visibleBottom = Math.max(min, Math.min(max, bottomVal));
          const visibleTop = Math.max(min, Math.min(max, topVal));
          const barTopH = (visibleTop - min) / (max - min || 1) * chartH;
          const barBottomH = (visibleBottom - min) / (max - min || 1) * chartH;
          let barH = barTopH - barBottomH;
          if (val !== 0 && barH < 5) barH = 5;
          const groupX = padding + i * groupWidth + groupPadding;
          const x = isStacked || isHistogram ? groupX : groupX + setIndex * barWidth;
          const y = height - padding - barBottomH - barH;
          const rect = document.createElementNS(this.ns, "rect");
          rect.setAttribute("x", x.toString());
          rect.setAttribute("y", y.toString());
          rect.setAttribute("width", barWidth.toString());
          rect.setAttribute("height", Math.max(0, barH).toString());
          rect.setAttribute("class", "dl-chart-bar");
          rect.style.fill = dataset.color;
          if (isHistogram) {
            rect.style.stroke = "var(--background-primary)";
            rect.style.strokeWidth = "1";
          }
          rect.setAttribute("data-tooltip-value", val.toString());
          rect.setAttribute("data-tooltip-label", `${labels[i]} - ${dataset.label}`);
          svg.appendChild(rect);
          if (showLabels) {
            this.drawText(svg, x + barWidth / 2, y - 5, val.toString(), "middle", "dl-chart-text", "var(--text-normal)");
          }
        });
      });
    }
    return svg;
  }
};

// ui/renderers/LineChartRenderer.ts
var LineChartRenderer = class extends BaseChartRenderer {
  constructor() {
    super(...arguments);
    // Soft Macaroon Palette (Low -> High)
    __publicField(this, "zoneColors", [
      "rgba(155, 246, 255, 0.4)",
      // Cyan
      "rgba(202, 255, 191, 0.4)",
      // Green
      "rgba(253, 255, 182, 0.4)",
      // Yellow
      "rgba(255, 214, 165, 0.4)",
      // Orange
      "rgba(255, 173, 173, 0.4)",
      // Red
      "rgba(189, 178, 255, 0.4)",
      // Purple
      "rgba(255, 198, 255, 0.4)"
      // Pink
    ]);
  }
  getY(val, max, min, height, padding) {
    const range = max - min || 1;
    return height - padding - (val - min) / range * (height - padding * 2);
  }
  render(datasets, labels, width, height, refLines, showLabels = false, smooth = false, userMin, userMax, enableZones = false) {
    const svg = this.createSvg(width, height);
    const padding = 30;
    const chartW = width - padding * 2;
    const { max, min } = this.getRange(datasets, refLines, userMin, userMax);
    this.drawAxes(svg, labels, max, min, width, height, padding);
    if (enableZones && refLines.length > 0) {
      const bounds = [min, ...refLines.map((r) => r.value), max].sort((a, b) => a - b);
      const uniqueBounds = [...new Set(bounds)];
      const defs = document.createElementNS(this.ns, "defs");
      svg.appendChild(defs);
      for (let i = 0; i < uniqueBounds.length - 1; i++) {
        const bBottom = uniqueBounds[i];
        const bTop = uniqueBounds[i + 1];
        if (bTop <= bBottom) continue;
        const yBottomPx = this.getY(bBottom, max, min, height, padding);
        const yTopPx = this.getY(bTop, max, min, height, padding);
        const clipId = `zone-strip-${i}-${Math.random().toString(36).substr(2, 5)}`;
        const clipPath = document.createElementNS(this.ns, "clipPath");
        clipPath.setAttribute("id", clipId);
        const rect = document.createElementNS(this.ns, "rect");
        rect.setAttribute("x", padding.toString());
        rect.setAttribute("width", chartW.toString());
        rect.setAttribute("y", yTopPx.toString());
        rect.setAttribute("height", Math.max(0, yBottomPx - yTopPx).toString());
        clipPath.appendChild(rect);
        defs.appendChild(clipPath);
        datasets.forEach((ds) => {
          const yBase = this.getY(min, max, min, height, padding);
          const d = this.generateAreaPath(ds, labels.length, chartW, height, padding, max, min, smooth, yBase);
          if (d) {
            const path = document.createElementNS(this.ns, "path");
            path.setAttribute("d", d);
            path.style.fill = this.zoneColors[i % this.zoneColors.length];
            path.style.stroke = "none";
            path.setAttribute("clip-path", `url(#${clipId})`);
            svg.appendChild(path);
          }
        });
      }
    }
    refLines.forEach((line) => {
      const y = this.getY(line.value, max, min, height, padding);
      if (y > height - padding || y < padding) return;
      const el = document.createElementNS(this.ns, "line");
      el.setAttribute("x1", padding.toString());
      el.setAttribute("y1", y.toString());
      el.setAttribute("x2", (width - padding).toString());
      el.setAttribute("y2", y.toString());
      el.style.stroke = line.color || "#ff0000";
      el.style.strokeWidth = "1.5";
      el.style.strokeDasharray = "4 2";
      svg.appendChild(el);
      if (line.label) {
        this.drawText(svg, width - padding + 5, y + 3, line.label, "start", "dl-axis-text", line.color);
      }
    });
    datasets.forEach((dataset) => {
      let dsMax = max, dsMin = min;
      if (dataset.enablePercentage) {
        const valid = dataset.data.filter((v) => v !== null);
        dsMax = valid.length ? Math.max(...valid) : 100;
        dsMin = valid.length ? Math.min(...valid) : 0;
        if (dsMax === dsMin) dsMax += 1;
      }
      const points = [];
      dataset.data.forEach((val, i) => {
        if (val === null) return;
        let normVal = val;
        let currentMax = max, currentMin = min;
        if (dataset.enablePercentage) {
          const range = dsMax - dsMin || 1;
          normVal = (val - dsMin) / range * 100;
          currentMax = 100;
          currentMin = 0;
        }
        const div = labels.length > 1 ? labels.length - 1 : 1;
        const x = padding + i / div * chartW;
        const y = this.getY(normVal, currentMax, currentMin, height, padding);
        points.push({ x, y, val, label: labels[i] || "" });
      });
      if (points.length > 1) {
        let d = "";
        if (smooth) {
          d = `M ${points[0].x} ${points[0].y}`;
          for (let i = 0; i < points.length - 1; i++) {
            const p0 = points[i];
            const p1 = points[i + 1];
            const cp1x = p0.x + (p1.x - p0.x) * 0.5;
            const cp2x = p1.x - (p1.x - p0.x) * 0.5;
            d += ` C ${cp1x} ${p0.y}, ${cp2x} ${p1.y}, ${p1.x} ${p1.y}`;
          }
        } else {
          d = points.map((p, i) => `${i === 0 ? "M" : "L"} ${p.x} ${p.y}`).join(" ");
        }
        const path = document.createElementNS(this.ns, "path");
        path.setAttribute("d", d);
        path.setAttribute("class", "dl-chart-line");
        path.style.fill = "none";
        path.style.stroke = dataset.color;
        path.style.strokeWidth = "2";
        svg.appendChild(path);
      }
      points.forEach((p) => {
        const circle = document.createElementNS(this.ns, "circle");
        circle.setAttribute("cx", p.x.toString());
        circle.setAttribute("cy", p.y.toString());
        circle.setAttribute("r", "3");
        circle.setAttribute("class", "dl-chart-point");
        circle.style.fill = "var(--background-primary)";
        circle.style.stroke = dataset.color;
        circle.style.strokeWidth = "2";
        circle.setAttribute("data-tooltip-value", p.val.toString());
        circle.setAttribute("data-tooltip-label", `${p.label} - ${dataset.label}`);
        svg.appendChild(circle);
        if (showLabels) {
          this.drawText(svg, p.x, p.y - 8, p.val.toString(), "middle", "dl-chart-text", "var(--text-normal)");
        }
      });
    });
    return svg;
  }
  generateAreaPath(dataset, count, w, h, pad, max, min, smooth, yBase) {
    const points = [];
    let dsMax = max, dsMin = min;
    if (dataset.enablePercentage) {
      const valid = dataset.data.filter((v) => v !== null);
      dsMax = valid.length ? Math.max(...valid) : 100;
      dsMin = valid.length ? Math.min(...valid) : 0;
      if (dsMax === dsMin) dsMax += 1;
    }
    dataset.data.forEach((val, i) => {
      if (val === null) return;
      let normVal = val;
      let currentMax = max, currentMin = min;
      if (dataset.enablePercentage) {
        const range = dsMax - dsMin || 1;
        normVal = (val - dsMin) / range * 100;
        currentMax = 100;
        currentMin = 0;
      }
      const div = count > 1 ? count - 1 : 1;
      const x = pad + i / div * w;
      const y = this.getY(normVal, currentMax, currentMin, h, pad);
      points.push({ x, y });
    });
    if (points.length < 2) return "";
    let d = `M ${points[0].x} ${yBase} L ${points[0].x} ${points[0].y}`;
    if (smooth) {
      for (let i = 0; i < points.length - 1; i++) {
        const p0 = points[i];
        const p1 = points[i + 1];
        const cp1x = p0.x + (p1.x - p0.x) * 0.5;
        const cp2x = p1.x - (p1.x - p0.x) * 0.5;
        d += ` C ${cp1x} ${p0.y}, ${cp2x} ${p1.y}, ${p1.x} ${p1.y}`;
      }
    } else {
      for (let i = 1; i < points.length; i++) d += ` L ${points[i].x} ${points[i].y}`;
    }
    d += ` L ${points[points.length - 1].x} ${yBase} Z`;
    return d;
  }
};

// ui/renderers/ScatterChartRenderer.ts
var ScatterChartRenderer = class extends BaseChartRenderer {
  getY(val, max, min, height, padding) {
    const range = max - min || 1;
    return height - padding - (val - min) / range * (height - padding * 2);
  }
  render(datasets, labels, width, height, refLines, showLabels = false, userMin, userMax) {
    const svg = this.createSvg(width, height);
    const padding = 30;
    const chartW = width - padding * 2;
    const { max, min } = this.getRange(datasets, refLines, userMin, userMax);
    this.drawAxes(svg, labels, max, min, width, height, padding);
    this.drawRefLines(svg, refLines, max, min, width, height, padding);
    datasets.forEach((dataset) => {
      dataset.data.forEach((val, i) => {
        if (val === null) return;
        const div = labels.length > 1 ? labels.length - 1 : 1;
        const x = padding + i / div * chartW;
        const y = this.getY(val, max, min, height, padding);
        const circle = document.createElementNS(this.ns, "circle");
        circle.setAttribute("cx", x.toString());
        circle.setAttribute("cy", y.toString());
        circle.setAttribute("r", "4");
        circle.setAttribute("class", "dl-chart-point");
        circle.style.fill = dataset.color;
        circle.style.opacity = "0.7";
        circle.style.stroke = dataset.color;
        circle.style.strokeWidth = "0";
        circle.setAttribute("data-tooltip-value", val.toString());
        circle.setAttribute("data-tooltip-label", `${labels[i] || ""} - ${dataset.label}`);
        svg.appendChild(circle);
        if (showLabels) {
          this.drawText(svg, x, y - 8, val.toString(), "middle", "dl-chart-text", "var(--text-normal)");
        }
      });
    });
    return svg;
  }
};

// ui/renderers/RadarChartRenderer.ts
var RadarChartRenderer = class extends BaseChartRenderer {
  render(datasets, labels, width, height) {
    const svg = this.createSvg(width, height);
    const cx = width / 2;
    const cy = height / 2;
    const r = Math.min(cx, cy) - 40;
    const count = Math.max(1, labels.length);
    const angleStep = Math.PI * 2 / count;
    if (count === 1) {
      for (let level = 1; level <= 5; level++) {
        const levelR = r * (level / 5);
        const circle = document.createElementNS(this.ns, "circle");
        circle.setAttribute("cx", cx.toString());
        circle.setAttribute("cy", cy.toString());
        circle.setAttribute("r", levelR.toString());
        circle.style.fill = "none";
        circle.style.stroke = "var(--text-muted)";
        circle.style.strokeOpacity = "0.1";
        svg.appendChild(circle);
      }
    } else {
      for (let level = 1; level <= 5; level++) {
        const levelR = r * (level / 5);
        const points = [];
        for (let i = 0; i < count; i++) {
          const angle = i * angleStep - Math.PI / 2;
          const x = cx + levelR * Math.cos(angle);
          const y = cy + levelR * Math.sin(angle);
          points.push(`${x},${y}`);
        }
        const poly = document.createElementNS(this.ns, "polygon");
        poly.setAttribute("points", points.join(" "));
        poly.style.fill = "none";
        poly.style.stroke = "var(--text-muted)";
        poly.style.strokeOpacity = "0.2";
        svg.appendChild(poly);
      }
    }
    labels.forEach((l, i) => {
      const angle = i * angleStep - Math.PI / 2;
      const lx = cx + (r + 20) * Math.cos(angle);
      const ly = cy + (r + 20) * Math.sin(angle);
      const ax = cx + r * Math.cos(angle);
      const ay = cy + r * Math.sin(angle);
      const line = document.createElementNS(this.ns, "line");
      line.setAttribute("x1", cx.toString());
      line.setAttribute("y1", cy.toString());
      line.setAttribute("x2", ax.toString());
      line.setAttribute("y2", ay.toString());
      line.style.stroke = "var(--text-muted)";
      line.style.strokeOpacity = "0.2";
      svg.appendChild(line);
      this.drawText(svg, lx, ly, l, "middle", "dl-axis-text");
    });
    datasets.forEach((ds) => {
      const validData = ds.data.map((v) => v || 0);
      const maxVal = Math.max(...validData, 1);
      const points = [];
      validData.forEach((val, i) => {
        const norm = val / maxVal;
        const angle = i * angleStep - Math.PI / 2;
        const x = cx + r * norm * Math.cos(angle);
        const y = cy + r * norm * Math.sin(angle);
        points.push({ x, y });
      });
      if (count > 2) {
        const poly = document.createElementNS(this.ns, "polygon");
        poly.setAttribute("points", points.map((p) => `${p.x},${p.y}`).join(" "));
        poly.style.fill = ds.color;
        poly.style.fillOpacity = "0.3";
        poly.style.stroke = ds.color;
        poly.style.strokeWidth = "2";
        svg.appendChild(poly);
      } else if (count === 2) {
        const line = document.createElementNS(this.ns, "polyline");
        line.setAttribute("points", points.map((p) => `${p.x},${p.y}`).join(" "));
        line.style.fill = "none";
        line.style.stroke = ds.color;
        line.style.strokeWidth = "2";
        svg.appendChild(line);
      } else {
        const line = document.createElementNS(this.ns, "line");
        line.setAttribute("x1", cx.toString());
        line.setAttribute("y1", cy.toString());
        line.setAttribute("x2", points[0].x.toString());
        line.setAttribute("y2", points[0].y.toString());
        line.style.stroke = ds.color;
        line.style.strokeWidth = "4";
        svg.appendChild(line);
      }
      points.forEach((p, i) => {
        const dot = document.createElementNS(this.ns, "circle");
        dot.setAttribute("cx", p.x.toString());
        dot.setAttribute("cy", p.y.toString());
        dot.setAttribute("r", "4");
        dot.style.fill = ds.color;
        dot.style.stroke = "var(--background-primary)";
        dot.style.strokeWidth = "1";
        const val = validData[i];
        dot.setAttribute("data-tooltip-value", val.toString());
        dot.setAttribute("data-tooltip-label", labels[i]);
        svg.appendChild(dot);
      });
    });
    return svg;
  }
};

// ui/renderers/HeatmapChartRenderer.ts
var HeatmapChartRenderer = class extends BaseChartRenderer {
  render(data, width, height) {
    const svg = this.createSvg(width, height);
    const padding = 40;
    const chartW = width - padding * 2;
    const chartH = height - padding * 2;
    const cols = Math.max(1, data.xLabels.length);
    const rows = Math.max(1, data.yLabels.length);
    const cellW = chartW / cols;
    const cellH = chartH / rows;
    this.drawAxes(svg, data.xLabels, rows, 0, width, height, padding, data.yLabels);
    data.matrix.forEach((row, i) => {
      row.forEach((val, j) => {
        if (val === 0) return;
        const ratio = (val - data.min) / (data.max - data.min || 1);
        const rect = document.createElementNS(this.ns, "rect");
        rect.setAttribute("x", (padding + j * cellW).toString());
        rect.setAttribute("y", (height - padding - (i + 1) * cellH).toString());
        rect.setAttribute("width", cellW.toString());
        rect.setAttribute("height", cellH.toString());
        rect.style.fill = "var(--interactive-accent)";
        rect.style.fillOpacity = String(0.2 + ratio * 0.8);
        rect.setAttribute("data-tooltip-value", val.toString());
        rect.setAttribute("data-tooltip-label", `${data.xLabels[j]} / ${data.yLabels[i]}`);
        svg.appendChild(rect);
      });
    });
    return svg;
  }
};

// ui/renderers/PieChartRenderer.ts
var PieChartRenderer = class extends BaseChartRenderer {
  render(dataset, labels, width, height, colors, isDonut = false, showLabels = false) {
    const svg = this.createSvg(width, height);
    const data = dataset.data.map((v) => v || 0);
    const total = data.reduce((a, b) => a + b, 0);
    if (total === 0) return svg;
    let currentAngle = 0;
    const cx = width / 2;
    const cy = height / 2;
    let margin = showLabels ? 100 : 20;
    if (width < 350) margin = showLabels ? 60 : 10;
    const r = Math.min(cx, cy) - margin;
    if (r <= 0) return svg;
    const innerR = isDonut ? r * 0.6 : 0;
    const labelItems = [];
    data.forEach((val, i) => {
      const sliceAngle = val / total * 2 * Math.PI;
      const largeArc = sliceAngle > Math.PI ? 1 : 0;
      const x1 = cx + r * Math.cos(currentAngle);
      const y1 = cy + r * Math.sin(currentAngle);
      const x2 = cx + r * Math.cos(currentAngle + sliceAngle);
      const y2 = cy + r * Math.sin(currentAngle + sliceAngle);
      const x3 = cx + innerR * Math.cos(currentAngle + sliceAngle);
      const y3 = cy + innerR * Math.sin(currentAngle + sliceAngle);
      const x4 = cx + innerR * Math.cos(currentAngle);
      const y4 = cy + innerR * Math.sin(currentAngle);
      let d = isDonut ? `M ${x4} ${y4} L ${x1} ${y1} A ${r} ${r} 0 ${largeArc} 1 ${x2} ${y2} L ${x3} ${y3} A ${innerR} ${innerR} 0 ${largeArc} 0 ${x4} ${y4} Z` : `M ${cx} ${cy} L ${x1} ${y1} A ${r} ${r} 0 ${largeArc} 1 ${x2} ${y2} Z`;
      const path = document.createElementNS(this.ns, "path");
      path.setAttribute("d", d);
      path.style.fill = colors[i % colors.length];
      path.style.stroke = "var(--background-primary)";
      path.style.strokeWidth = "1";
      const tooltipVal = val.toFixed(2);
      const percent = (val / total * 100).toFixed(1);
      path.setAttribute("data-tooltip-value", `${tooltipVal} (${percent}%)`);
      path.setAttribute("data-tooltip-label", labels[i] || "");
      svg.appendChild(path);
      if (showLabels && sliceAngle > 0.08) {
        const midAngle = currentAngle + sliceAngle / 2;
        let labelText = labels[i] || "";
        const maxLen = width < 350 ? 4 : 8;
        if (labelText.length > maxLen) labelText = labelText.substring(0, maxLen) + "..";
        const percentStr = (val / total * 100).toFixed(0) + "%";
        const text = `${labelText} ${percentStr}`;
        let textW = 0;
        for (let c of text) textW += c.charCodeAt(0) > 255 ? 12 : 7;
        textW += 6;
        const labelR = width < 350 ? r + 5 : r + 15;
        const lx = cx + labelR * Math.cos(midAngle);
        const ly = cy + labelR * Math.sin(midAngle);
        const isRight = Math.cos(midAngle) >= 0;
        labelItems.push({
          x: lx,
          y: ly,
          text,
          align: isRight ? "start" : "end",
          isRight,
          angle: midAngle,
          anchorR: r,
          targetR: labelR,
          width: textW
        });
      }
      currentAngle += sliceAngle;
    });
    this.resolveCollisions(labelItems);
    labelItems.forEach((l) => {
      const sx = cx + (l.anchorR + 2) * Math.cos(l.angle);
      const sy = cy + (l.anchorR + 2) * Math.sin(l.angle);
      const mx = cx + (l.targetR + 5) * Math.cos(l.angle);
      const padding = 5;
      let safeX = l.x;
      if (l.isRight) safeX = Math.min(width - l.width - padding, Math.max(mx + 5, l.x));
      else safeX = Math.max(l.width + padding, Math.min(mx - 5, l.x));
      const line = document.createElementNS(this.ns, "polyline");
      line.setAttribute("points", `${sx},${sy} ${mx},${l.y} ${safeX},${l.y}`);
      line.style.stroke = "var(--text-muted)";
      line.style.fill = "none";
      line.style.strokeWidth = "1";
      line.style.opacity = "0.5";
      svg.appendChild(line);
      const bgX = l.isRight ? safeX + 2 : safeX - l.width - 2;
      const bgRect = document.createElementNS(this.ns, "rect");
      bgRect.setAttribute("x", bgX.toString());
      bgRect.setAttribute("y", (l.y - 10).toString());
      bgRect.setAttribute("width", l.width.toString());
      bgRect.setAttribute("height", "14");
      bgRect.style.fill = "var(--background-primary)";
      bgRect.style.opacity = "0.6";
      bgRect.setAttribute("rx", "2");
      svg.appendChild(bgRect);
      const textX = l.isRight ? safeX + 4 : safeX - 4;
      this.drawText(svg, textX, l.y + 3, l.text, l.align, "dl-chart-text", "var(--text-normal)");
    });
    return svg;
  }
  resolveCollisions(labels) {
    const left = labels.filter((l) => !l.isRight).sort((a, b) => a.y - b.y);
    const right = labels.filter((l) => l.isRight).sort((a, b) => a.y - b.y);
    const minSpacing = 14;
    const adjust = (group) => {
      for (let i = 1; i < group.length; i++) {
        const prev = group[i - 1];
        const curr = group[i];
        if (curr.y < prev.y + minSpacing) curr.y = prev.y + minSpacing;
      }
    };
    adjust(left);
    adjust(right);
  }
};

// ui/renderers/BubbleChartRenderer.ts
var BubbleChartRenderer = class extends BaseChartRenderer {
  render(points, xLabels, yLabels, width, height, opacity = 0.6) {
    const svg = this.createSvg(width, height);
    const padding = 40;
    const chartW = width - padding * 2;
    const chartH = height - padding * 2;
    const xValues = points.map((p) => p.x);
    const yValues = points.map((p) => p.y);
    const rValues = points.map((p) => p.r);
    const xMax = xLabels ? xLabels.length - 1 : Math.max(...xValues, 100);
    const xMin = xLabels ? 0 : Math.min(...xValues, 0);
    const yMax = yLabels ? yLabels.length - 1 : Math.max(...yValues, 100);
    const yMin = yLabels ? 0 : Math.min(...yValues, 0);
    const rMax = Math.max(...rValues, 1);
    const rMin = Math.min(...rValues, 0);
    const axisXLabels = xLabels || [];
    const axisYLabels = yLabels || [];
    this.drawAxes(svg, axisXLabels, yMax, yMin, width, height, padding, axisYLabels);
    points.forEach((p) => {
      const xRatio = (p.x - xMin) / (xMax - xMin || 1);
      const yRatio = (p.y - yMin) / (yMax - yMin || 1);
      const cx = padding + xRatio * chartW;
      const cy = height - padding - yRatio * chartH;
      const rRatio = (p.r - rMin) / (rMax - rMin || 1);
      const radius = 5 + rRatio * 35;
      const circle = document.createElementNS(this.ns, "circle");
      circle.setAttribute("cx", cx.toString());
      circle.setAttribute("cy", cy.toString());
      circle.setAttribute("r", radius.toString());
      circle.setAttribute("class", "dl-chart-bubble");
      circle.style.fill = "var(--interactive-accent)";
      circle.style.fillOpacity = String(opacity);
      circle.style.stroke = "var(--interactive-accent)";
      circle.style.strokeWidth = "1";
      const tooltipLabel = `${p.label}<br/>X: ${p.rawX}<br/>Y: ${p.rawY}<br/>Size: ${p.r}`;
      circle.setAttribute("data-tooltip-value", " ");
      circle.setAttribute("data-tooltip-label", tooltipLabel);
      svg.appendChild(circle);
    });
    return svg;
  }
};

// ui/renderers/GitLineDrawer.ts
var GitLineDrawer = class {
  constructor() {
    __publicField(this, "ns", "http://www.w3.org/2000/svg");
  }
  drawLine(g, x1, y1, x2, y2, color, dashed) {
    const line = document.createElementNS(this.ns, "line");
    line.setAttribute("x1", String(x1));
    line.setAttribute("y1", String(y1));
    line.setAttribute("x2", String(x2));
    line.setAttribute("y2", String(y2));
    line.style.stroke = color;
    line.style.strokeWidth = "2";
    if (dashed) line.style.strokeDasharray = "4,3";
    g.appendChild(line);
  }
  drawOrthogonalLine(g, x1, y1, x2, y2, color, isHorizontal) {
    const d = isHorizontal ? `M ${x1} ${y1} L ${x1} ${y2} L ${x2} ${y2}` : `M ${x1} ${y1} L ${x2} ${y1} L ${x2} ${y2}`;
    this.drawPath(g, d, color, false);
  }
  drawPath(g, d, color, dashed) {
    const path = document.createElementNS(this.ns, "path");
    path.setAttribute("d", d);
    path.style.stroke = color;
    path.style.strokeWidth = "2";
    path.style.fill = "none";
    if (dashed) path.style.strokeDasharray = "4,3";
    g.appendChild(path);
    return path;
  }
  drawNode(g, cx, cy, r, color, filled) {
    const c = document.createElementNS(this.ns, "circle");
    c.setAttribute("cx", String(cx));
    c.setAttribute("cy", String(cy));
    c.setAttribute("r", String(r));
    c.style.stroke = color;
    c.style.strokeWidth = "2";
    c.style.fill = filled ? color : "var(--background-primary)";
    g.appendChild(c);
    return c;
  }
  drawText(g, text, x, y, completed, isHorizontal) {
    const el = document.createElementNS(this.ns, "text");
    el.textContent = text;
    el.style.fontSize = "12px";
    el.style.fill = completed ? "var(--text-muted)" : "var(--text-normal)";
    if (completed) el.style.textDecoration = "line-through";
    if (isHorizontal) {
      el.setAttribute("x", String(x));
      el.setAttribute("y", String(y - 10));
      el.setAttribute("transform", `rotate(-30, ${x}, ${y - 10})`);
    } else {
      el.setAttribute("x", String(x + 15));
      el.setAttribute("y", String(y + 4));
    }
    g.appendChild(el);
  }
};

// ui/renderers/GitLineInteractions.ts
var GitLineInteractions = class {
  constructor() {
    __publicField(this, "scale", 1);
    __publicField(this, "translateX", 20);
    __publicField(this, "translateY", 20);
    __publicField(this, "svgGroup", null);
  }
  setSvgGroup(group) {
    this.svgGroup = group;
  }
  setupInteractions(wrapper) {
    let isDragging = false;
    let startX = 0;
    let startY = 0;
    wrapper.addEventListener("wheel", (e) => {
      e.preventDefault();
      const delta = e.deltaY > 0 ? 0.9 : 1.1;
      this.scale = Math.min(Math.max(0.1, this.scale * delta), 5);
      this.updateTransform();
    });
    wrapper.addEventListener("mousedown", (e) => {
      if (e.button !== 0) return;
      isDragging = true;
      startX = e.clientX - this.translateX;
      startY = e.clientY - this.translateY;
      wrapper.style.cursor = "grabbing";
    });
    window.addEventListener("mousemove", (e) => {
      if (!isDragging) return;
      this.translateX = e.clientX - startX;
      this.translateY = e.clientY - startY;
      this.updateTransform();
    });
    window.addEventListener("mouseup", () => {
      isDragging = false;
      wrapper.style.cursor = "grab";
    });
  }
  resetZoom() {
    this.scale = 1;
    this.translateX = 20;
    this.translateY = 20;
    this.updateTransform();
  }
  updateTransform() {
    if (this.svgGroup) {
      this.svgGroup.setAttribute(
        "transform",
        `translate(${this.translateX}, ${this.translateY}) scale(${this.scale})`
      );
    }
  }
};

// ui/renderers/GitLineChartRenderer.ts
var GitLineChartRenderer = class extends BaseChartRenderer {
  constructor(app) {
    super();
    __publicField(this, "drawer", new GitLineDrawer());
    __publicField(this, "interactions", new GitLineInteractions());
    __publicField(this, "app");
    this.app = app;
  }
  render(rawTasks) {
    var _a, _b, _c, _d;
    const wrapper = document.createElement("div");
    wrapper.style.overflow = "auto";
    const svg = document.createElementNS(this.ns, "svg");
    const g = document.createElementNS(this.ns, "g");
    svg.setAttribute("width", "100%");
    svg.appendChild(g);
    wrapper.appendChild(svg);
    const tasks = (rawTasks || []).slice().sort((a, b) => {
      var _a2, _b2;
      return ((_a2 = a.line) != null ? _a2 : 0) - ((_b2 = b.line) != null ? _b2 : 0);
    });
    const targetFile = (_b = (_a = tasks[0]) == null ? void 0 : _a.file) == null ? void 0 : _b.path;
    if (!targetFile) {
      svg.setAttribute("height", "200");
      svg.setAttribute("viewBox", "0 0 800 200");
      this.interactions.setSvgGroup(g);
      this.interactions.setupInteractions(wrapper);
      return wrapper;
    }
    const singleFileTasks = tasks.filter((t) => {
      var _a2;
      return ((_a2 = t.file) == null ? void 0 : _a2.path) === targetFile;
    });
    const fileName = targetFile.split("/").pop() || targetFile;
    const fileNode = {
      index: 0,
      task: {
        id: `file-${targetFile}`,
        text: fileName,
        completed: false,
        file: (_c = singleFileTasks[0]) == null ? void 0 : _c.file,
        line: 0
      },
      depth: -1,
      parentIndex: null,
      subtreeEnd: singleFileTasks.length,
      subtreeDone: false,
      subtreeSize: 1,
      subtreeMaxDepth: -1,
      side: 0
    };
    const taskNodes = singleFileTasks.map((t, i) => {
      var _a2, _b2;
      return {
        index: i + 1,
        task: t,
        depth: Math.max(0, (_a2 = t.indentation) != null ? _a2 : 0),
        parentIndex: null,
        subtreeEnd: i + 1,
        subtreeDone: false,
        subtreeSize: 1,
        subtreeMaxDepth: Math.max(0, (_b2 = t.indentation) != null ? _b2 : 0),
        side: 0
      };
    });
    const nodes = [fileNode, ...taskNodes];
    buildParentIndexByIndentation(nodes);
    computeSubtreeEndByIndentation(nodes);
    const childrenMap = buildChildrenMap(nodes);
    computeSubtreeSize(nodes, childrenMap);
    computeSubtreeDone(nodes, childrenMap);
    computeSubtreeMaxDepth(nodes, childrenMap);
    assignMindmapSides(nodes, childrenMap);
    const paddingX = 70;
    const paddingY = 70;
    const levelStep = 90;
    const slotStep = 150;
    const baseGap = 120;
    const labelPad = 220;
    const colors = ["#e06c75", "#98c379", "#61afef", "#e5c07b", "#c678dd", "#56b6c2"];
    const nodeRadius = 6;
    const maxDepth = nodes.reduce((m, n) => Math.max(m, n.depth), 0);
    const rootKids = (_d = childrenMap.get(0)) != null ? _d : [];
    const leftKids = rootKids.filter((i) => nodes[i].side === -1);
    const rightKids = rootKids.filter((i) => nodes[i].side === 1);
    const widthMemo = /* @__PURE__ */ new Map();
    const slotCenter = /* @__PURE__ */ new Map();
    const subtreeWidth = (i) => {
      var _a2;
      if (widthMemo.has(i)) return widthMemo.get(i);
      const kids = (_a2 = childrenMap.get(i)) != null ? _a2 : [];
      if (kids.length === 0) {
        widthMemo.set(i, 1);
        return 1;
      }
      let sum = 0;
      for (const c of kids) sum += subtreeWidth(c);
      const w = Math.max(1, sum);
      widthMemo.set(i, w);
      return w;
    };
    const assignSlots = (i, start) => {
      var _a2;
      const w = subtreeWidth(i);
      slotCenter.set(i, start + w / 2);
      let cur = start;
      const kids = (_a2 = childrenMap.get(i)) != null ? _a2 : [];
      for (const c of kids) {
        const cw = subtreeWidth(c);
        assignSlots(c, cur);
        cur += cw;
      }
    };
    let leftSlots = 0;
    for (const k of leftKids) leftSlots += subtreeWidth(k);
    let rightSlots = 0;
    for (const k of rightKids) rightSlots += subtreeWidth(k);
    let acc = 0;
    for (const k of leftKids) {
      assignSlots(k, acc);
      acc += subtreeWidth(k);
    }
    acc = 0;
    for (const k of rightKids) {
      assignSlots(k, acc);
      acc += subtreeWidth(k);
    }
    const leftSpan = baseGap + leftSlots * slotStep + labelPad;
    const rightSpan = baseGap + rightSlots * slotStep + labelPad;
    const rootX = paddingX + leftSpan;
    const yOfDepth = (depth) => {
      const level = depth + 1;
      return paddingY + level * levelStep;
    };
    const nodeColor = (n) => colors[(Math.max(0, n.depth) + 1) % colors.length];
    const pos = (n) => {
      var _a2;
      if (n.depth === -1) return { x: rootX, y: yOfDepth(-1) };
      const sc = (_a2 = slotCenter.get(n.index)) != null ? _a2 : 0.5;
      const localX = sc * slotStep;
      if (n.side === 1) return { x: rootX + baseGap + localX, y: yOfDepth(n.depth) };
      if (n.side === -1) return { x: rootX - (baseGap + localX), y: yOfDepth(n.depth) };
      return { x: rootX + baseGap + localX, y: yOfDepth(n.depth) };
    };
    const bottomY = yOfDepth(maxDepth) + 140;
    for (const n of nodes) {
      const p = pos(n);
      const color = nodeColor(n);
      let endY = bottomY;
      if (n.depth !== -1 && n.subtreeDone) {
        endY = yOfDepth(n.subtreeMaxDepth);
      }
      if (n.depth === -1) endY = bottomY;
      this.drawer.drawPath(g, `M ${p.x} ${p.y} L ${p.x} ${endY}`, color, false);
    }
    for (const n of nodes) {
      if (n.parentIndex == null) continue;
      if (n.depth === -1) continue;
      const parent = nodes[n.parentIndex];
      const parentPos = pos(parent);
      const childPos = pos(n);
      const mapX = parentPos.x;
      const y = childPos.y;
      this.drawer.drawPath(g, `M ${mapX} ${y} L ${childPos.x} ${y}`, nodeColor(parent), false);
    }
    for (const n of nodes) {
      if (n.parentIndex == null) continue;
      if (n.depth === -1) continue;
      if (!n.subtreeDone) continue;
      const parent = nodes[n.parentIndex];
      const parentPos = pos(parent);
      const endY = yOfDepth(n.subtreeMaxDepth);
      const fromX = pos(n).x;
      const toX = parentPos.x;
      this.drawer.drawPath(g, `M ${fromX} ${endY} L ${toX} ${endY}`, nodeColor(n), true);
    }
    for (const n of nodes) {
      const p = pos(n);
      const color = nodeColor(n);
      const r = n.depth === -1 ? nodeRadius + 2 : nodeRadius;
      this.drawer.drawNode(g, p.x, p.y, r, color, !!n.task.completed);
      drawLabel(g, n, p.x, p.y);
    }
    const totalHeight = bottomY + paddingY;
    const totalWidth = paddingX + leftSpan + rightSpan + paddingX;
    svg.setAttribute("height", `${totalHeight}`);
    svg.setAttribute("viewBox", `0 0 ${totalWidth} ${totalHeight}`);
    wrapper.style.maxHeight = "100%";
    this.interactions.setSvgGroup(g);
    this.interactions.setupInteractions(wrapper);
    return wrapper;
  }
};
function drawLabel(g, n, x, y) {
  const text = n.task.text || "";
  if (!text) return;
  const t = document.createElementNS("http://www.w3.org/2000/svg", "text");
  const isRoot = n.depth === -1;
  const side = isRoot ? 1 : n.side;
  const dx = isRoot ? 14 : side === -1 ? -14 : 14;
  t.setAttribute("x", String(x + dx));
  t.setAttribute("y", String(y));
  t.setAttribute("dominant-baseline", "middle");
  t.setAttribute("text-anchor", side === -1 ? "end" : "start");
  t.style.fontSize = "14px";
  t.style.userSelect = "none";
  t.style.pointerEvents = "none";
  if (n.task.completed) {
    t.style.opacity = "0.55";
    t.style.textDecoration = "line-through";
  }
  t.textContent = text;
  g.appendChild(t);
}
function buildParentIndexByIndentation(nodes) {
  const stack = [];
  for (let i = 0; i < nodes.length; i++) {
    const d = nodes[i].depth;
    if (d === -1) {
      nodes[i].parentIndex = null;
      stack.push({ depth: d, index: i });
      continue;
    }
    while (stack.length && stack[stack.length - 1].depth >= d) stack.pop();
    let parentIndex = null;
    const targetParentDepth = d - 1;
    for (let s = stack.length - 1; s >= 0; s--) {
      if (stack[s].depth === targetParentDepth) {
        parentIndex = stack[s].index;
        break;
      }
    }
    nodes[i].parentIndex = parentIndex;
    stack.push({ depth: d, index: i });
  }
}
function computeSubtreeEndByIndentation(nodes) {
  var _a, _b, _c, _d;
  for (let i = 0; i < nodes.length; i++) {
    const d = nodes[i].depth;
    const file = (_b = (_a = nodes[i].task.file) == null ? void 0 : _a.path) != null ? _b : "";
    let end = i;
    for (let j = i + 1; j < nodes.length; j++) {
      const fileJ = (_d = (_c = nodes[j].task.file) == null ? void 0 : _c.path) != null ? _d : "";
      if (fileJ !== file) break;
      if (nodes[j].depth <= d) break;
      end = j;
    }
    nodes[i].subtreeEnd = end;
  }
}
function buildChildrenMap(nodes) {
  var _a;
  const map = /* @__PURE__ */ new Map();
  for (const n of nodes) {
    if (n.parentIndex == null) continue;
    const arr = (_a = map.get(n.parentIndex)) != null ? _a : [];
    arr.push(n.index);
    map.set(n.parentIndex, arr);
  }
  return map;
}
function computeSubtreeSize(nodes, childrenMap) {
  const memo = /* @__PURE__ */ new Map();
  const dfs = (i) => {
    var _a;
    if (memo.has(i)) return memo.get(i);
    const kids = (_a = childrenMap.get(i)) != null ? _a : [];
    let size = 1;
    for (const c of kids) size += dfs(c);
    memo.set(i, size);
    nodes[i].subtreeSize = size;
    return size;
  };
  for (let i = 0; i < nodes.length; i++) dfs(i);
}
function computeSubtreeDone(nodes, childrenMap) {
  const memo = /* @__PURE__ */ new Map();
  const dfs = (i) => {
    var _a;
    if (memo.has(i)) return memo.get(i);
    const selfDone = !!nodes[i].task.completed;
    const kids = (_a = childrenMap.get(i)) != null ? _a : [];
    let ok = selfDone;
    for (const c of kids) ok = ok && dfs(c);
    memo.set(i, ok);
    nodes[i].subtreeDone = ok;
    return ok;
  };
  for (let i = 0; i < nodes.length; i++) dfs(i);
}
function computeSubtreeMaxDepth(nodes, childrenMap) {
  const memo = /* @__PURE__ */ new Map();
  const dfs = (i) => {
    var _a;
    if (memo.has(i)) return memo.get(i);
    const kids = (_a = childrenMap.get(i)) != null ? _a : [];
    let md = nodes[i].depth;
    for (const c of kids) md = Math.max(md, dfs(c));
    memo.set(i, md);
    nodes[i].subtreeMaxDepth = md;
    return md;
  };
  for (let i = 0; i < nodes.length; i++) dfs(i);
}
function assignMindmapSides(nodes, childrenMap) {
  var _a;
  nodes[0].side = 0;
  const rootKids = (_a = childrenMap.get(0)) != null ? _a : [];
  let leftW = 0;
  let rightW = 0;
  for (const kid of rootKids) {
    const w = nodes[kid].subtreeSize || 1;
    const side = leftW <= rightW ? -1 : 1;
    nodes[kid].side = side;
    if (side === -1) leftW += w;
    else rightW += w;
    propagate(kid, side);
  }
  function propagate(i, side) {
    var _a2;
    const kids = (_a2 = childrenMap.get(i)) != null ? _a2 : [];
    for (const c of kids) {
      nodes[c].side = side;
      propagate(c, side);
    }
  }
}

// ui/widgets/ChartRendererFactory.ts
var ChartRendererFactory = class {
  constructor(app) {
    this.app = app;
    __publicField(this, "barRenderer", new BarChartRenderer());
    __publicField(this, "lineRenderer", new LineChartRenderer());
    __publicField(this, "scatterRenderer", new ScatterChartRenderer());
    __publicField(this, "radarRenderer", new RadarChartRenderer());
    __publicField(this, "heatmapRenderer", new HeatmapChartRenderer());
    __publicField(this, "pieRenderer", new PieChartRenderer());
    __publicField(this, "bubbleRenderer", new BubbleChartRenderer());
    __publicField(this, "gitLineRenderer");
    this.gitLineRenderer = new GitLineChartRenderer(app);
  }
  getBarRenderer() {
    return this.barRenderer;
  }
  getLineRenderer() {
    return this.lineRenderer;
  }
  getScatterRenderer() {
    return this.scatterRenderer;
  }
  getRadarRenderer() {
    return this.radarRenderer;
  }
  getHeatmapRenderer() {
    return this.heatmapRenderer;
  }
  getPieRenderer() {
    return this.pieRenderer;
  }
  getBubbleRenderer() {
    return this.bubbleRenderer;
  }
  getGitLineRenderer() {
    return this.gitLineRenderer;
  }
};

// ui/widgets/ChartWidget.ts
var ChartWidget = class extends BaseWidget {
  constructor(widget, app, dataEngine, onDelete, onEdit, onMove) {
    super(widget, onDelete, onEdit, onMove);
    __publicField(this, "app");
    __publicField(this, "dataEngine");
    __publicField(this, "legendManager");
    __publicField(this, "tooltipManager");
    __publicField(this, "rendererFactory");
    this.app = app;
    this.dataEngine = dataEngine;
    this.legendManager = new ChartLegendManager(this.contentEl);
    this.tooltipManager = new ChartTooltipManager();
    this.rendererFactory = new ChartRendererFactory(app);
  }
  // =========================
  // Ê†∏ÂøÉÊ∏≤ÊüìÂÖ•Âè£
  // =========================
  async renderContent() {
    const w = this.widget;
    const refLines = w.refLines || [];
    const yAxisProps = w.yAxisProperties || [];
    const showDataLabels = w.showDataLabels || false;
    this.legendManager.setContainer(this.contentEl);
    this.contentEl.empty();
    this.legendManager.removeExistingLegend();
    this.contentEl.addClass("dl-widget-content");
    if (!w.dataSources || w.dataSources.length === 0) {
      this.contentEl.createDiv({ text: "\u672A\u914D\u7F6E\u6570\u636E\u6E90", cls: "dl-no-data" });
      return;
    }
    try {
      this.contentEl.addClass("is-loading");
      const rect = this.contentEl.getBoundingClientRect();
      let width = rect.width;
      let height = rect.height;
      if (import_obsidian28.Platform.isMobile) {
        if (height < 100) height = 260;
        if (width < 50) width = this.container.clientWidth || window.innerWidth - 32;
      } else {
        if (height < 50) height = 200;
        if (width < 50) width = 300;
      }
      const wrapper = this.contentEl.createDiv({ cls: "dl-chart-wrapper" });
      let svg = null;
      let standardDatasets = [];
      let standardLabels = [];
      if (w.chartType === "gitline") {
        const tasks = await this.dataEngine.getGitLineData(w);
        this.contentEl.removeClass("is-loading");
        if (!tasks.length) {
          wrapper.createDiv({ text: "\u65E0\u4EFB\u52A1\u6570\u636E", cls: "dl-no-data" });
          return;
        }
        const chartEl = this.rendererFactory.getGitLineRenderer().render(tasks, width, height, w.isHorizontal);
        wrapper.appendChild(chartEl);
        wrapper.style.overflow = "hidden";
        return;
      }
      if (w.chartType === "bubble") {
        const { points, xLabels, yLabels } = await this.dataEngine.getBubbleData(w);
        this.contentEl.removeClass("is-loading");
        if (!points.length) {
          wrapper.createDiv({ text: "\u65E0\u6570\u636E", cls: "dl-no-data" });
          return;
        }
        svg = this.rendererFactory.getBubbleRenderer().render(points, xLabels, yLabels, width, height);
      } else if (w.chartType === "heatmap") {
        const data = await this.dataEngine.getHeatmapData(w);
        this.contentEl.removeClass("is-loading");
        svg = this.rendererFactory.getHeatmapRenderer().render(data, width, height);
      } else {
        const result = await this.dataEngine.getChartData(w);
        standardLabels = result.labels;
        standardDatasets = result.datasets;
        this.contentEl.removeClass("is-loading");
        standardDatasets.forEach((d, i) => {
          var _a;
          if (!d.color) {
            d.color = ((_a = yAxisProps[i]) == null ? void 0 : _a.color) || ColorUtils.getColor(i);
          }
        });
        if (!standardDatasets.some((d) => d.data.some((v) => v !== null))) {
          wrapper.createDiv({ text: "\u65E0\u6570\u636E", cls: "dl-no-data" });
          return;
        }
        if (w.chartType === "pie") {
          const isTranspose = standardDatasets.length === 1 && standardLabels.length > 1;
          const pieData = isTranspose ? standardDatasets[0].data.map((v) => v || 0) : standardDatasets.map((ds) => ds.data.reduce((a, b) => (a || 0) + (b || 0), 0));
          const pieLabels = isTranspose ? standardLabels : standardDatasets.map((ds) => ds.label);
          const pieColors = pieLabels.map((_, i) => ColorUtils.getColor(i));
          const single = { label: "Total", data: pieData, color: "" };
          svg = this.rendererFactory.getPieRenderer().render(single, pieLabels, width, height, pieColors, w.isDonut, showDataLabels);
        } else if (w.chartType === "line") {
          svg = this.rendererFactory.getLineRenderer().render(
            standardDatasets,
            standardLabels,
            width,
            height,
            refLines,
            showDataLabels,
            w.enableSmoothCurve,
            w.yAxisMin,
            w.yAxisMax,
            w.enableRefLineZones
          );
        } else if (w.chartType === "scatter") {
          svg = this.rendererFactory.getScatterRenderer().render(
            standardDatasets,
            standardLabels,
            width,
            height,
            refLines,
            showDataLabels,
            w.yAxisMin,
            w.yAxisMax
          );
        } else if (w.chartType === "radar") {
          svg = this.rendererFactory.getRadarRenderer().render(standardDatasets, standardLabels, width, height);
        } else {
          svg = this.rendererFactory.getBarRenderer().render(
            standardDatasets,
            standardLabels,
            width,
            height,
            refLines,
            showDataLabels,
            w.yAxisMin,
            w.yAxisMax,
            w.isStacked,
            w.isHorizontal
          );
        }
      }
      if (svg) {
        wrapper.appendChild(svg);
        this.tooltipManager.attachTooltip(svg);
        this.legendManager.removeExistingLegend();
        if (w.showLegend && !["bubble", "heatmap", "gitline"].includes(w.chartType)) {
          const labels = standardDatasets.map((d) => d.label);
          const colors = standardDatasets.map((d) => d.color);
          const seen = /* @__PURE__ */ new Set();
          const finalLabels = [];
          const finalColors = [];
          labels.forEach((l, i) => {
            const key = l == null ? void 0 : l.trim();
            if (key && !seen.has(key)) {
              seen.add(key);
              finalLabels.push(key);
              finalColors.push(colors[i]);
            }
          });
          this.legendManager.renderLegend(finalLabels, finalColors);
        }
      }
    } catch (e) {
      console.error("Chart Render Error:", e);
      this.contentEl.empty();
      this.contentEl.createDiv({ text: "\u56FE\u8868\u6E32\u67D3\u9519\u8BEF", cls: "dl-error-msg" });
    }
  }
};

// ui/widgets/ListWidget.ts
var import_obsidian29 = require("obsidian");
var ListWidget = class extends BaseWidget {
  constructor(widget, app, onDelete, onEdit, onMove) {
    super(widget, onDelete, onEdit, onMove);
    __publicField(this, "app");
    this.app = app;
  }
  async renderContent() {
    const listWidget = this.widget;
    this.contentEl.empty();
    this.contentEl.addClass("dl-list-widget-container");
    let files = this.app.vault.getMarkdownFiles();
    if (listWidget.folderPath && listWidget.folderPath !== "/") {
      files = files.filter((f) => f.path.startsWith(listWidget.folderPath));
    }
    if (listWidget.filterTags && listWidget.filterTags.length > 0) {
      files = files.filter((f) => {
        const cache = this.app.metadataCache.getFileCache(f);
        const tags = (0, import_obsidian29.getAllTags)(cache) || [];
        return listWidget.filterTags.some((tag) => tags.includes(tag));
      });
    }
    files.sort((a, b) => {
      let valA, valB;
      switch (listWidget.sortBy) {
        case "created":
          valA = a.stat.ctime;
          valB = b.stat.ctime;
          break;
        case "modified":
          valA = a.stat.mtime;
          valB = b.stat.mtime;
          break;
        case "name":
        default:
          valA = a.basename;
          valB = b.basename;
          break;
      }
      if (listWidget.sortOrder === "desc") {
        return valA > valB ? -1 : 1;
      }
      return valA > valB ? 1 : -1;
    });
    if (listWidget.limit > 0) {
      files = files.slice(0, listWidget.limit);
    }
    if (files.length === 0) {
      this.contentEl.createDiv({ text: "\u672A\u627E\u5230\u7B26\u5408\u6761\u4EF6\u7684\u7B14\u8BB0", cls: "dl-no-data" });
      return;
    }
    const ul = this.contentEl.createEl("ul", { cls: "dl-list-items" });
    files.forEach((file) => {
      var _a;
      const li = ul.createEl("li", { cls: "dl-list-item" });
      const iconSpan = li.createSpan("dl-list-item-icon");
      iconSpan.setText("\u{1F4C4}");
      const infoDiv = li.createDiv("dl-list-item-info");
      infoDiv.createDiv({ cls: "dl-list-item-title", text: file.basename });
      const dateStr = new Date(file.stat.mtime).toLocaleDateString("zh-CN");
      const metaText = `${dateStr} \xB7 ${((_a = file.parent) == null ? void 0 : _a.name) || "\u6839\u76EE\u5F55"}`;
      infoDiv.createDiv({ cls: "dl-list-item-meta", text: metaText });
      li.onclick = () => {
        this.app.workspace.getLeaf(false).openFile(file);
      };
    });
  }
};

// ui/widgets/TodoWidget.ts
var import_obsidian30 = require("obsidian");
init_TaskService();
var TodoWidget = class extends BaseWidget {
  constructor(widget, app, settingsManager, onDelete, onEdit, onMove) {
    super(widget, onDelete, onEdit, onMove);
    __publicField(this, "app");
    __publicField(this, "taskService");
    __publicField(this, "items", []);
    __publicField(this, "settingsManager");
    this.app = app;
    this.settingsManager = settingsManager;
    this.taskService = new TaskService(app, settingsManager);
  }
  renderHeader() {
    super.renderHeader();
  }
  async renderContent() {
    this.contentEl.empty();
    this.contentEl.addClass("dl-todo-widget-container");
    this.contentEl.addClass("is-loading");
    try {
      const w = this.widget;
      this.items = await this.taskService.getTasks(w);
      const globalSettings = this.settingsManager.getSettings().taskManagement;
      if (globalSettings.autoArchive && this.items.some((t) => t.completed)) {
        setTimeout(async () => {
          await this.taskService.archiveCompletedTasks(w);
          this.items = await this.taskService.getTasks(w);
          this.renderList(w);
        }, 100);
      } else {
        this.renderList(w);
      }
    } catch (e) {
      console.error("Task Load Error", e);
      this.contentEl.createDiv({ text: "\u52A0\u8F7D\u4EFB\u52A1\u5931\u8D25", cls: "dl-error-msg" });
    } finally {
      this.contentEl.removeClass("is-loading");
    }
  }
  renderList(w) {
    this.contentEl.empty();
    if (this.items.length === 0) {
      this.contentEl.createDiv({ text: "\u6682\u65E0\u5F85\u529E\u4EFB\u52A1", cls: "dl-no-data" });
      return;
    }
    const listContainer = this.contentEl.createDiv("dl-todo-list");
    if (w.groupBy === "file" && w.sourceType !== "file") {
      const groups = /* @__PURE__ */ new Map();
      this.items.forEach((t) => {
        const key = t.file.basename;
        if (!groups.has(key)) groups.set(key, []);
        groups.get(key).push(t);
      });
      groups.forEach((tasks, fileName) => {
        const groupHeader = listContainer.createDiv("dl-todo-group-header");
        groupHeader.createSpan({ text: fileName, style: "font-weight: bold; font-size: 0.85em; color: var(--text-muted);" });
        groupHeader.createSpan({ text: ` (${tasks.length})`, style: "font-size: 0.8em; opacity: 0.7;" });
        tasks.forEach((t) => this.renderTaskItem(listContainer, t, w));
      });
    } else {
      this.items.forEach((t) => this.renderTaskItem(listContainer, t, w));
    }
  }
  renderTaskItem(container, item, config) {
    const row = container.createDiv("dl-todo-item");
    const checkbox = row.createEl("input", { type: "checkbox" });
    checkbox.checked = item.completed;
    checkbox.onclick = async (e) => {
      e.stopPropagation();
      item.completed = !item.completed;
      textSpan.toggleClass("is-completed", item.completed);
      await this.taskService.toggleTask(item);
      const globalSettings = this.settingsManager.getSettings().taskManagement;
      if (item.completed && globalSettings.autoArchive) {
        setTimeout(async () => {
          await this.taskService.archiveCompletedTasks(config);
          this.renderContent();
        }, 500);
      }
    };
    const contentDiv = row.createDiv({ cls: "dl-todo-content" });
    contentDiv.style.flex = "1";
    contentDiv.style.marginLeft = "8px";
    contentDiv.style.display = "flex";
    contentDiv.style.flexDirection = "column";
    const mainLine = contentDiv.createDiv({ style: "display: flex; align-items: center; gap: 6px;" });
    const textSpan = mainLine.createSpan({ text: item.text, cls: "dl-todo-text" });
    if (item.completed) textSpan.addClass("is-completed");
    if (item.priority) {
      const badge = mainLine.createSpan("dl-priority-badge");
      badge.setText(item.priority.toUpperCase());
      badge.setAttribute("data-priority", item.priority);
    }
    const metaLine = contentDiv.createDiv("dl-todo-meta-line");
    const metaParts = [];
    if (item.dueDate) {
      const isOverdue = new Date(item.dueDate) < /* @__PURE__ */ new Date() && !item.completed;
      const dateSpan = `<span class="${isOverdue ? "dl-date-overdue" : ""}">\u{1F4C5} ${item.dueDate}</span>`;
      metaParts.push(dateSpan);
    }
    if (config.groupBy !== "file") {
      metaParts.push(`\u{1F4C4} ${item.file.basename}`);
    }
    metaLine.innerHTML = metaParts.join(" \xB7 ");
    const linkBtn = row.createSpan("dl-icon-btn dl-todo-link");
    (0, import_obsidian30.setIcon)(linkBtn, "external-link");
    linkBtn.style.opacity = "0";
    row.onmouseenter = () => linkBtn.style.opacity = "1";
    row.onmouseleave = () => linkBtn.style.opacity = "0";
    linkBtn.onclick = (e) => {
      e.stopPropagation();
      this.app.workspace.getLeaf(false).openFile(item.file, { eState: { line: item.line } });
    };
  }
};

// ui/widgets/MarkdownWidget.ts
var import_obsidian31 = require("obsidian");
var MarkdownWidget = class extends BaseWidget {
  constructor(widget, app, component, onDelete, onEdit, onMove) {
    super(widget, onDelete, onEdit, onMove);
    __publicField(this, "app");
    __publicField(this, "component");
    __publicField(this, "file", null);
    this.app = app;
    this.component = component;
    this.registerFileWatcher();
  }
  registerFileWatcher() {
    this.component.registerEvent(
      this.app.vault.on("modify", (file) => {
        const w = this.widget;
        if (file instanceof import_obsidian31.TFile && file.path === w.filePath) {
          if (w.mode === "preview") {
            this.renderContent();
          }
        }
      })
    );
    this.component.registerEvent(
      this.app.vault.on("rename", (file, oldPath) => {
        const w = this.widget;
        if (oldPath === w.filePath) {
          w.filePath = file.path;
          this.renderContent();
        }
      })
    );
  }
  renderHeader() {
    const header = this.container.createDiv("dl-widget-header");
    header.createSpan({ cls: "dl-widget-title", text: this.widget.title });
    const controls = header.createDiv("dl-widget-controls");
    const openBtn = controls.createSpan("dl-icon-btn");
    (0, import_obsidian31.setIcon)(openBtn, "external-link");
    openBtn.title = "\u6253\u5F00\u7B14\u8BB0";
    openBtn.onclick = (e) => {
      e.stopPropagation();
      if (this.file) this.app.workspace.getLeaf(false).openFile(this.file);
      else new import_obsidian31.Notice("\u672A\u627E\u5230\u6587\u4EF6");
    };
    const toggleBtn = controls.createSpan("dl-icon-btn");
    const isEdit = this.widget.mode === "edit";
    (0, import_obsidian31.setIcon)(toggleBtn, isEdit ? "eye" : "pencil");
    toggleBtn.title = isEdit ? "\u5207\u6362\u9884\u89C8" : "\u5FEB\u901F\u7F16\u8F91";
    toggleBtn.onclick = (e) => {
      e.stopPropagation();
      const w = this.widget;
      w.mode = w.mode === "edit" ? "preview" : "edit";
      (0, import_obsidian31.setIcon)(toggleBtn, w.mode === "edit" ? "eye" : "pencil");
      this.renderContent();
    };
    const menuBtn = controls.createSpan("dl-icon-btn");
    (0, import_obsidian31.setIcon)(menuBtn, "more-vertical");
    menuBtn.onclick = (e) => {
      e.stopPropagation();
      const menu = new import_obsidian31.Menu();
      menu.addItem((item) => item.setTitle("\u914D\u7F6E").setIcon("settings").onClick(() => this.onEdit()));
      menu.addItem((item) => item.setTitle("\u79FB\u52A8").setIcon("arrow-right-circle").onClick(() => this.onMove()));
      menu.addItem((item) => item.setTitle("\u5220\u9664").setIcon("trash").setWarning(true).onClick(() => this.onDelete()));
      menu.showAtPosition({ x: e.clientX, y: e.clientY });
    };
  }
  async renderContent() {
    this.contentEl.empty();
    this.contentEl.addClass("dl-markdown-widget-container");
    const mdWidget = this.widget;
    if (!mdWidget.filePath) {
      this.contentEl.createDiv({ text: "\u672A\u9009\u62E9\u6587\u4EF6", cls: "dl-no-data" });
      return;
    }
    const abstractFile = this.app.vault.getAbstractFileByPath(mdWidget.filePath);
    if (!(abstractFile instanceof import_obsidian31.TFile)) {
      this.contentEl.createDiv({ text: "\u6587\u4EF6\u4E0D\u5B58\u5728", cls: "dl-error-msg" });
      return;
    }
    this.file = abstractFile;
    const content = await this.app.vault.read(this.file);
    if (mdWidget.mode === "preview") {
      const previewContainer = this.contentEl.createDiv("dl-markdown-preview markdown-preview-view");
      await import_obsidian31.MarkdownRenderer.render(
        this.app,
        content,
        previewContainer,
        this.file.path,
        this.component
      );
    } else {
      const wrapper = this.contentEl.createDiv("dl-markdown-editor-wrapper");
      const info = wrapper.createDiv({
        text: "\u{1F4A1} \u5FEB\u901F\u7F16\u8F91\u6A21\u5F0F (\u7EAF\u6587\u672C)",
        style: "font-size: 0.8em; color: var(--text-muted); padding: 5px 10px; background: var(--background-secondary); border-bottom: 1px solid var(--background-modifier-border);"
      });
      const textarea = wrapper.createEl("textarea", {
        cls: "dl-markdown-editor",
        text: content
      });
      textarea.onblur = async () => {
        if (this.file && textarea.value !== content) {
          await this.app.vault.modify(this.file, textarea.value);
          new import_obsidian31.Notice("\u7B14\u8BB0\u5DF2\u4FDD\u5B58");
        }
      };
    }
  }
};

// ui/widgets/WidgetFactory.ts
var WidgetFactory = class {
  constructor(app, component, dataEngine, settingsManager, onDelete, onEdit, onMove) {
    __publicField(this, "app");
    __publicField(this, "component");
    __publicField(this, "dataEngine");
    __publicField(this, "settingsManager");
    // [Êñ∞Â¢û]
    __publicField(this, "onDelete");
    __publicField(this, "onEdit");
    __publicField(this, "onMove");
    this.app = app;
    this.component = component;
    this.dataEngine = dataEngine;
    this.settingsManager = settingsManager;
    this.onDelete = onDelete;
    this.onEdit = onEdit;
    this.onMove = onMove;
  }
  create(widget) {
    const deleteHandler = () => this.onDelete(widget.id);
    const editHandler = () => this.onEdit(widget.id);
    const moveHandler = () => this.onMove(widget.id);
    switch (widget.type) {
      case "chart":
        return new ChartWidget(widget, this.app, this.dataEngine, deleteHandler, editHandler, moveHandler);
      case "list":
        return new ListWidget(widget, this.app, deleteHandler, editHandler, moveHandler);
      case "todo":
        return new TodoWidget(widget, this.app, this.settingsManager, deleteHandler, editHandler, moveHandler);
      case "markdown":
        return new MarkdownWidget(widget, this.app, this.component, deleteHandler, editHandler, moveHandler);
      default:
        return {
          render: (parent) => {
            const div = parent.createDiv("dl-widget-card");
            div.createDiv("dl-widget-header").setText(widget.title);
            div.createDiv("dl-widget-content").setText(`Unknown widget type: ${widget.type}`);
          }
        };
    }
  }
};

// ui/modals/MoveWidgetModal.ts
var import_obsidian32 = require("obsidian");
var MoveWidgetModal = class extends import_obsidian32.Modal {
  constructor(app, dashboards, currentDashboardId, onChoose) {
    super(app);
    __publicField(this, "dashboards");
    __publicField(this, "currentDashboardId");
    __publicField(this, "onChoose");
    this.dashboards = dashboards;
    this.currentDashboardId = currentDashboardId;
    this.onChoose = onChoose;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "\u79FB\u52A8\u7EC4\u4EF6\u5230..." });
    const targets = this.dashboards.filter((d) => d.id !== this.currentDashboardId);
    if (targets.length === 0) {
      contentEl.createDiv({ text: "\u6CA1\u6709\u5176\u4ED6\u770B\u677F\u53EF\u4F9B\u79FB\u52A8\u3002", style: "color: var(--text-muted); font-style: italic;" });
      return;
    }
    const list = contentEl.createDiv();
    list.style.display = "flex";
    list.style.flexDirection = "column";
    list.style.gap = "8px";
    targets.forEach((d) => {
      new import_obsidian32.Setting(list).setName(d.name).addButton((btn) => btn.setButtonText("\u9009\u62E9").onClick(() => {
        this.onChoose(d.id);
        this.close();
      }));
    });
  }
  onClose() {
    this.contentEl.empty();
  }
};

// ui/MainView.ts
var VIEW_TYPE_DIGITAL_LIFE = "digital-life-dashboard-view";
var MainView = class extends import_obsidian33.ItemView {
  constructor(leaf, settingsManager) {
    super(leaf);
    __publicField(this, "settingsManager");
    __publicField(this, "dataEngine");
    __publicField(this, "widgetFactory");
    __publicField(this, "sidebar");
    __publicField(this, "header");
    __publicField(this, "gridCanvas");
    __publicField(this, "isSidebarCollapsed", false);
    this.settingsManager = settingsManager;
    this.dataEngine = new DataEngine(this.app, this.settingsManager);
    this.widgetFactory = new WidgetFactory(
      this.app,
      this,
      this.dataEngine,
      this.settingsManager,
      (id) => this.handleDeleteWidget(id),
      (id) => this.handleEditWidget(id),
      (id) => this.handleMoveWidget(id)
    );
  }
  getViewType() {
    return VIEW_TYPE_DIGITAL_LIFE;
  }
  getDisplayText() {
    return "\u6570\u5B57\u4EBA\u751F";
  }
  getIcon() {
    return "home";
  }
  async onOpen() {
    const root = this.containerEl.children[1];
    root.empty();
    root.addClass("dl-main-container");
    if (import_obsidian33.Platform.isMobile) {
      root.addClass("is-mobile");
      this.isSidebarCollapsed = true;
    }
    const headerEl = root.createDiv();
    this.header = new Header(
      headerEl,
      this.app,
      this.settingsManager,
      () => this.toggleSidebar(),
      () => this.toggleEditMode(),
      () => this.gridCanvas.openAddWidgetModal()
      // ËøôÈáåËß¶ÂèëÊñ∞Â¢ûÂºπÁ™ó
    );
    this.header.render();
    const bodyContainer = root.createDiv("dl-body-container");
    const sidebarEl = bodyContainer.createDiv();
    this.sidebar = new Sidebar(
      sidebarEl,
      this.app,
      this.settingsManager,
      (id) => this.gridCanvas.loadDashboard(id)
    );
    this.sidebar.render();
    if (import_obsidian33.Platform.isMobile) {
      this.sidebar.toggleCollapse(true);
    }
    const contentArea = bodyContainer.createDiv("dl-content-area");
    const overlay = bodyContainer.createDiv("dl-overlay");
    overlay.onclick = () => this.toggleSidebar();
    if (this.isSidebarCollapsed || !import_obsidian33.Platform.isMobile) {
      overlay.addClass("is-hidden");
    }
    const gridEl = contentArea.createDiv();
    this.gridCanvas = new GridCanvas(gridEl, this.app, this.settingsManager, this.widgetFactory);
    this.gridCanvas.render();
    const activeId = this.settingsManager.getSettings().activeDashboardId;
    if (activeId) this.gridCanvas.loadDashboard(activeId);
  }
  async onClose() {
    if (this.sidebar) {
      this.sidebar.destroy();
    }
  }
  toggleSidebar() {
    this.isSidebarCollapsed = !this.isSidebarCollapsed;
    this.sidebar.toggleCollapse(this.isSidebarCollapsed);
    const overlay = this.containerEl.querySelector(".dl-overlay");
    if (overlay) {
      if (this.isSidebarCollapsed) {
        overlay.addClass("is-hidden");
      } else {
        overlay.removeClass("is-hidden");
      }
    }
  }
  toggleEditMode() {
    if (import_obsidian33.Platform.isMobile) {
      new import_obsidian33.Notice("\u79FB\u52A8\u7AEF\u6682\u4E0D\u652F\u6301\u5E03\u5C40\u7F16\u8F91\uFF0C\u8BF7\u5728\u684C\u9762\u7AEF\u8C03\u6574\u3002");
      return;
    }
    const isEditing = this.contentEl.querySelector(".dl-grid-canvas.is-editing") !== null;
    this.gridCanvas.setEditMode(!isEditing);
  }
  async handleDeleteWidget(widgetId) {
    const activeId = this.settingsManager.getSettings().activeDashboardId;
    if (!activeId) return;
    const dashboard = this.settingsManager.getDashboard(activeId);
    if (dashboard) {
      dashboard.layout = dashboard.layout.filter((i) => i.widgetId !== widgetId);
      await this.settingsManager.saveSettings();
      await this.settingsManager.removeWidget(widgetId);
      this.gridCanvas.loadDashboard(activeId);
    }
  }
  async handleEditWidget(widgetId) {
    const activeId = this.settingsManager.getSettings().activeDashboardId;
    if (!activeId) return;
    const widget = this.settingsManager.getWidget(widgetId);
    if (!widget) return;
    const { WidgetConfigModal: WidgetConfigModal2 } = await Promise.resolve().then(() => (init_WidgetConfigModal(), WidgetConfigModal_exports));
    new WidgetConfigModal2(
      this.app,
      activeId,
      this.settingsManager,
      // Add this
      async (updatedWidget) => {
        await this.settingsManager.saveWidget(updatedWidget);
        this.gridCanvas.loadDashboard(activeId);
      },
      widget
    ).open();
  }
  async handleMoveWidget(widgetId) {
    const activeId = this.settingsManager.getSettings().activeDashboardId;
    if (!activeId) return;
    const dashboards = this.settingsManager.getDashboards();
    if (dashboards.length <= 1) {
      new import_obsidian33.Notice("\u6682\u65E0\u5176\u4ED6\u770B\u677F\u53EF\u4F9B\u79FB\u52A8");
      return;
    }
    new MoveWidgetModal(this.app, dashboards, activeId, async (targetDashboardId) => {
      await this.settingsManager.moveWidgetToDashboard(widgetId, targetDashboardId);
      new import_obsidian33.Notice("\u7EC4\u4EF6\u5DF2\u79FB\u52A8");
      this.gridCanvas.loadDashboard(activeId);
    }).open();
  }
};

// ui/DigitalLifeSettingTab.ts
var import_obsidian34 = require("obsidian");
init_Suggesters();
var DigitalLifeSettingTab = class extends import_obsidian34.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    __publicField(this, "plugin");
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "\u6570\u5B57\u4EBA\u751F (Digital Life) \u8BBE\u7F6E" });
    containerEl.createEl("h3", { text: "\u2705 \u4EFB\u52A1\u7BA1\u7406 (Global)" });
    const taskSettings = this.plugin.settingsManager.getSettings().taskManagement;
    const inboxSetting = new import_obsidian34.Setting(containerEl).setDesc("\u6240\u6709\u201C\u5FEB\u901F\u6355\u83B7\u201D\u7684\u4EFB\u52A1\u5C06\u9ED8\u8BA4\u8FFD\u52A0\u5230\u6B64\u6587\u4EF6");
    this.addIconToSetting(inboxSetting, "download-cloud", "\u6536\u96C6\u7BB1\u8DEF\u5F84 (Inbox)");
    inboxSetting.addText((text) => {
      text.setValue(taskSettings.captureInboxPath).setPlaceholder("00.Inbox/Tasks.md").onChange(async (value) => {
        taskSettings.captureInboxPath = value;
        await this.plugin.settingsManager.saveSettings();
      });
      new FileSuggest(this.app, text.inputEl);
    });
    const archiveSetting = new import_obsidian34.Setting(containerEl).setDesc("\u5B8C\u6210\u7684\u4EFB\u52A1\u5C06\u4EE5\u8868\u683C\u5F62\u5F0F\u5F52\u6863\u5230\u6B64\u6587\u4EF6");
    this.addIconToSetting(archiveSetting, "archive", "\u5F52\u6863\u8DEF\u5F84 (Archive)");
    archiveSetting.addText((text) => {
      text.setValue(taskSettings.archivePath).setPlaceholder("99.Archive/Done.md").onChange(async (value) => {
        taskSettings.archivePath = value;
        await this.plugin.settingsManager.saveSettings();
      });
      new FileSuggest(this.app, text.inputEl);
    });
    const attrSetting = new import_obsidian34.Setting(containerEl).setDesc("\u5305\u542B\u6B64\u5C5E\u6027\u7684\u7B14\u8BB0\u5C06\u88AB\u89C6\u4E3A\u201C\u4EFB\u52A1\u7B14\u8BB0\u201D\uFF0C\u770B\u677F\u5C06\u6DF1\u5165\u89E3\u6790\u5176\u5B50\u4EFB\u52A1");
    this.addIconToSetting(attrSetting, "tag", "\u4EFB\u52A1\u7B14\u8BB0\u6807\u8BC6");
    attrSetting.addText((text) => text.setValue(taskSettings.taskNoteAttribute).setPlaceholder("type=task").onChange(async (value) => {
      taskSettings.taskNoteAttribute = value;
      await this.plugin.settingsManager.saveSettings();
    }));
    const autoSetting = new import_obsidian34.Setting(containerEl).setDesc("\u5728\u770B\u677F\u4E2D\u70B9\u51FB\u5B8C\u6210\u65F6\uFF0C\u81EA\u52A8\u5F52\u6863\u8BE5\u4EFB\u52A1");
    this.addIconToSetting(autoSetting, "zap", "\u81EA\u52A8\u5F52\u6863");
    autoSetting.addToggle((t) => t.setValue(taskSettings.autoArchive).onChange(async (v) => {
      taskSettings.autoArchive = v;
      await this.plugin.settingsManager.saveSettings();
    }));
    const captureSetting = new import_obsidian34.Setting(containerEl).setDesc("\u4FEE\u6539\u4EFB\u610F\u7B14\u8BB0\u65F6\uFF0C\u81EA\u52A8\u8BC6\u522B\u5E76\u5C06\u672A\u5B8C\u6210\u7684\u4EFB\u52A1\u79FB\u52A8\u5230\u6536\u96C6\u7BB1 (\u667A\u80FD\u5408\u5E76)");
    this.addIconToSetting(captureSetting, "magnet", "\u81EA\u52A8\u6355\u83B7");
    captureSetting.addToggle((t) => t.setValue(taskSettings.autoCapture).onChange(async (v) => {
      taskSettings.autoCapture = v;
      await this.plugin.settingsManager.saveSettings();
    }));
    containerEl.createEl("hr");
    containerEl.createEl("h3", { text: "\u{1F4DD} \u7B14\u8BB0\u521B\u5EFA" });
    const tmplSetting = new import_obsidian34.Setting(containerEl).setDesc("\u6A21\u677F\u6587\u4EF6\u76EE\u5F55");
    this.addIconToSetting(tmplSetting, "layout-template", "\u6A21\u677F\u8DEF\u5F84");
    tmplSetting.addText((text) => {
      text.setValue(this.plugin.settingsManager.getSettings().noteCreator.templatePath).onChange(async (value) => {
        this.plugin.settingsManager.getSettings().noteCreator.templatePath = value;
        await this.plugin.settingsManager.saveSettings();
      });
      new FolderSuggest(this.app, text.inputEl);
    });
    containerEl.createEl("hr");
    containerEl.createEl("h3", { text: "\u{1F9EE} \u6570\u636E\u5DE5\u5177" });
    new import_obsidian34.Setting(containerEl).setName("\u542F\u7528\u516C\u5F0F\u8BA1\u7B97").addToggle((t) => t.setValue(this.plugin.settingsManager.getSettings().formula.isHidingEnabled).onChange(async (v) => {
      this.plugin.settingsManager.getSettings().formula.isHidingEnabled = v;
      await this.plugin.settingsManager.saveSettings();
    }));
  }
  addIconToSetting(setting, iconId, name) {
    const frag = document.createDocumentFragment();
    const container = frag.createDiv();
    container.style.display = "flex";
    container.style.alignItems = "center";
    const iconSpan = container.createSpan();
    (0, import_obsidian34.setIcon)(iconSpan, iconId);
    iconSpan.style.display = "flex";
    iconSpan.style.marginRight = "5px";
    container.createSpan({ text: name });
    setting.setName(frag);
  }
};

// ui/modals/PropertyVisibilityModal.ts
var import_obsidian35 = require("obsidian");
var PropertyVisibilityModal = class extends import_obsidian35.Modal {
  constructor(app, settingsManager, formulaManager, file) {
    super(app);
    __publicField(this, "settingsManager");
    __publicField(this, "formulaManager");
    __publicField(this, "file");
    this.settingsManager = settingsManager;
    this.formulaManager = formulaManager;
    this.file = file;
  }
  onOpen() {
    this.contentEl.empty();
    this.contentEl.createEl("h3", { text: `\u7BA1\u7406\u5C5E\u6027\u53EF\u89C1\u6027: ${this.file.basename}` });
    const cache = this.app.metadataCache.getFileCache(this.file);
    const fm = cache ? cache.frontmatter : {};
    const keys = Object.keys(fm || {}).filter((k) => k !== "position");
    if (!keys.length) {
      this.contentEl.createEl("div", { text: "\u5F53\u524D\u7B14\u8BB0\u65E0 Frontmatter \u5C5E\u6027", cls: "dl-no-data" });
      return;
    }
    const settings = this.settingsManager.getSettings().formula;
    const hiddenList = settings.hiddenProperties || [];
    const container = this.contentEl.createDiv();
    container.style.maxHeight = "400px";
    container.style.overflowY = "auto";
    keys.forEach((k) => {
      const kLow = k.toLowerCase();
      const isHidden = hiddenList.includes(kLow);
      new import_obsidian35.Setting(container).setName(k).setDesc(isHidden ? "\u5F53\u524D\u72B6\u6001: \u9690\u85CF" : "\u5F53\u524D\u72B6\u6001: \u663E\u793A").addToggle((t) => t.setValue(isHidden).onChange(async (v) => {
        const currentSettings = this.settingsManager.getSettings();
        const s = new Set(currentSettings.formula.hiddenProperties);
        if (v) s.add(kLow);
        else s.delete(kLow);
        currentSettings.formula.hiddenProperties = Array.from(s);
        await this.settingsManager.saveSettings();
        this.formulaManager.updateHiddenPropertiesCSS();
        this.onOpen();
      }));
    });
  }
  onClose() {
    this.contentEl.empty();
  }
};

// ui/modals/CsvImportModal.ts
var import_obsidian36 = require("obsidian");
var CsvSelectionModal = class extends import_obsidian36.FuzzySuggestModal {
  constructor(app, onChoose) {
    super(app);
    __publicField(this, "onChoose");
    this.onChoose = onChoose;
    this.setPlaceholder("\u9009\u62E9 CSV \u6587\u4EF6...");
  }
  getItems() {
    return this.app.vault.getFiles().filter((f) => f.extension.toLowerCase() === "csv");
  }
  getItemText(item) {
    return item.path;
  }
  onChooseItem(item, evt) {
    this.onChoose(item);
  }
};
var ColumnSelectionModal = class extends import_obsidian36.Modal {
  constructor(app, headers, onSubmit) {
    super(app);
    __publicField(this, "headers");
    __publicField(this, "onSubmit");
    __publicField(this, "selectedIndices");
    this.headers = headers;
    this.onSubmit = onSubmit;
    this.selectedIndices = new Set(headers.map((_, i) => i));
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "\u9009\u62E9\u8981\u5BFC\u5165\u7684\u5217" });
    const listContainer = contentEl.createDiv({ cls: "dl-csv-column-list" });
    listContainer.style.maxHeight = "300px";
    listContainer.style.overflowY = "auto";
    listContainer.style.marginBottom = "20px";
    listContainer.style.border = "1px solid var(--background-modifier-border)";
    listContainer.style.padding = "10px";
    this.headers.forEach((header, index) => {
      new import_obsidian36.Setting(listContainer).setName(header || `Column ${index + 1}`).addToggle((toggle) => toggle.setValue(true).onChange((value) => {
        if (value) this.selectedIndices.add(index);
        else this.selectedIndices.delete(index);
      }));
    });
    new import_obsidian36.Setting(contentEl).addButton((btn) => btn.setButtonText("\u63D2\u5165\u8868\u683C").setCta().onClick(() => {
      const sortedIndices = Array.from(this.selectedIndices).sort((a, b) => a - b);
      this.onSubmit(sortedIndices);
      this.close();
    }));
  }
  onClose() {
    this.contentEl.empty();
  }
};

// core/utils/CsvParser.ts
var CsvParser = class {
  static convertToMarkdown(csvContent, selectedIndices) {
    const rows = this.parseCsv(csvContent);
    if (rows.length === 0) return "";
    if (!selectedIndices || selectedIndices.length === 0) return this.generateTable(rows);
    const filteredRows = rows.map((row) => row.filter((_, index) => selectedIndices.includes(index)));
    return this.generateTable(filteredRows);
  }
  static getHeaders(csvContent) {
    const rows = this.parseCsv(csvContent);
    return rows.length > 0 ? rows[0] : [];
  }
  static parseCsv(text) {
    const rows = [];
    let currentRow = [];
    let currentValue = "";
    let inQuote = false;
    for (let i = 0; i < text.length; i++) {
      const char = text[i];
      const nextChar = text[i + 1];
      if (char === '"') {
        if (inQuote && nextChar === '"') {
          currentValue += '"';
          i++;
        } else {
          inQuote = !inQuote;
        }
      } else if (char === "," && !inQuote) {
        currentRow.push(currentValue);
        currentValue = "";
      } else if ((char === "\r" || char === "\n") && !inQuote) {
        if (char === "\r" && nextChar === "\n") i++;
        currentRow.push(currentValue);
        rows.push(currentRow);
        currentRow = [];
        currentValue = "";
      } else {
        currentValue += char;
      }
    }
    if (currentValue || currentRow.length > 0) {
      currentRow.push(currentValue);
      rows.push(currentRow);
    }
    return rows.filter((r) => r.length > 0 && (r.length > 1 || r[0] !== ""));
  }
  static generateTable(rows) {
    if (rows.length === 0) return "";
    const header = rows[0];
    const body = rows.slice(1);
    const headerRow = `| ${header.map((cell) => this.escapeMarkdown(cell)).join(" | ")} |`;
    const separatorRow = `| ${header.map(() => "---").join(" | ")} |`;
    const bodyRows = body.map((row) => `| ${row.map((cell) => this.escapeMarkdown(cell)).join(" | ")} |`).join("\n");
    return `${headerRow}
${separatorRow}
${bodyRows}`;
  }
  static escapeMarkdown(text) {
    if (!text) return "";
    return text.replace(/\|/g, "\\|").replace(/\n/g, "<br>");
  }
};

// ui/modals/QuickTaskModal.ts
var import_obsidian38 = require("obsidian");

// core/utils/DateParser.ts
var import_obsidian37 = require("obsidian");
var DateParser = class {
  static parse(input) {
    const today = (0, import_obsidian37.moment)();
    const text = input.trim().toLowerCase();
    if (text === "\u4ECA\u5929" || text === "today" || text === "td") {
      return today.format("YYYY-MM-DD");
    }
    if (text === "\u660E\u5929" || text === "tomorrow" || text === "tm") {
      return today.add(1, "d").format("YYYY-MM-DD");
    }
    if (text === "\u540E\u5929") {
      return today.add(2, "d").format("YYYY-MM-DD");
    }
    const weekMap = {
      "\u5468\u4E00": 1,
      "\u661F\u671F\u4E00": 1,
      "mon": 1,
      "\u5468\u4E8C": 2,
      "\u661F\u671F\u4E8C": 2,
      "tue": 2,
      "\u5468\u4E09": 3,
      "\u661F\u671F\u4E09": 3,
      "wed": 3,
      "\u5468\u56DB": 4,
      "\u661F\u671F\u56DB": 4,
      "thu": 4,
      "\u5468\u4E94": 5,
      "\u661F\u671F\u4E94": 5,
      "fri": 5,
      "\u5468\u516D": 6,
      "\u661F\u671F\u516D": 6,
      "sat": 6,
      "\u5468\u65E5": 0,
      "\u661F\u671F\u65E5": 0,
      "sun": 0,
      "\u5929": 0
    };
    for (const key in weekMap) {
      if (text.endsWith(key)) {
        let targetDay = weekMap[key];
        let currentDay = today.day();
        let diff = targetDay - currentDay;
        if (diff <= 0) diff += 7;
        if (text.startsWith("\u4E0B\u5468") || text.startsWith("next")) {
          diff += 7;
        }
        return today.add(diff, "d").format("YYYY-MM-DD");
      }
    }
    return null;
  }
};

// ui/modals/QuickTaskModal.ts
var QuickTaskModal = class extends import_obsidian38.Modal {
  constructor(app, onSubmit) {
    super(app);
    __publicField(this, "onSubmit");
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "\u5FEB\u901F\u521B\u5EFA\u4EFB\u52A1" });
    contentEl.createDiv({
      text: "\u53C2\u6570: -P [\u4F18\u5148\u7EA7] -D [\u65E5\u671F] -p [\u9879\u76EE\u540D]",
      style: "color: var(--text-muted); font-size: 0.8em; margin-bottom: 10px;"
    });
    const inputContainer = contentEl.createDiv();
    inputContainer.style.width = "100%";
    inputContainer.style.marginBottom = "15px";
    const input = inputContainer.createEl("input", {
      type: "text",
      placeholder: "\u4F8B\u5982: \u5199\u4EE3\u7801 -P \u9AD8 -D \u4ECA\u5929 -p \u6570\u5B57\u4EBA\u751F"
    });
    input.style.width = "100%";
    input.style.boxSizing = "border-box";
    input.focus();
    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        this.parseAndSubmit(input.value);
        this.close();
      }
    });
    new import_obsidian38.Setting(contentEl).addButton((btn) => btn.setButtonText("\u521B\u5EFA").setCta().onClick(() => {
      this.parseAndSubmit(input.value);
      this.close();
    }));
  }
  parseAndSubmit(raw) {
    if (!raw.trim()) return;
    let priority = "";
    let text = raw;
    const pMatch = text.match(/-P\s+(È´ò|‰∏≠|‰Ωé|high|medium|low)/i);
    if (pMatch) {
      const pVal = pMatch[1].toLowerCase();
      if (["\u9AD8", "high"].includes(pVal)) priority = "\u{1F53A}";
      else if (["\u4E2D", "medium"].includes(pVal)) priority = "\u23EB";
      else if (["\u4F4E", "low"].includes(pVal)) priority = "\u{1F53D}";
      text = text.replace(pMatch[0], "");
    }
    let dateStr = "";
    const dMatch = text.match(/-D\s+(\S+)/i);
    if (dMatch) {
      const parsedDate = DateParser.parse(dMatch[1]);
      if (parsedDate) {
        dateStr = `\u{1F4C5} ${parsedDate}`;
      } else {
        new import_obsidian38.Notice(`\u65E0\u6CD5\u8BC6\u522B\u65E5\u671F: ${dMatch[1]}`);
      }
      text = text.replace(dMatch[0], "");
    }
    let projectStr = "";
    const projMatch = text.match(/-p\s+(\S+)/i);
    if (projMatch) {
      projectStr = ` [[${projMatch[1]}]]`;
      text = text.replace(projMatch[0], "");
    }
    const cleanContent = text.replace(/\s+/g, " ").trim();
    const taskLine = `- [ ] ${cleanContent}${projectStr} ${priority} ${dateStr}`.trim();
    this.onSubmit(taskLine);
  }
  onClose() {
    this.contentEl.empty();
  }
};

// ui/modals/SearchModal.ts
var import_obsidian39 = require("obsidian");

// ui/modals/SearchService.ts
var SearchService = class {
  constructor(app) {
    this.app = app;
  }
  /* ---------- Êü•ËØ¢Ëß£Êûê ---------- */
  buildMatcher(query) {
    query = query.trim();
    if (query.startsWith("/") && query.endsWith("/")) {
      const reg = new RegExp(query.slice(1, -1), "i");
      return (text) => reg.test(text);
    }
    if (query.includes("|")) {
      const parts2 = query.split("|").map((s) => s.trim().toLowerCase());
      return (text) => parts2.some((p) => text.includes(p));
    }
    const parts = query.toLowerCase().split(/\s+/);
    return (text) => parts.every((p) => text.includes(p));
  }
  async performSearch(query, onPartial) {
    var _a;
    if (query.length < 2) return [];
    const matcher = this.buildMatcher(query);
    const files = this.app.vault.getMarkdownFiles();
    const results = /* @__PURE__ */ new Map();
    for (const file of files) {
      const name = file.basename.toLowerCase();
      const path = file.path.toLowerCase();
      if (matcher(name) || matcher(path)) {
        results.set(file.path, {
          file,
          path: file.path,
          score: 80,
          matchedInFileName: true,
          matchedInContent: false,
          contentMatches: []
        });
      }
    }
    onPartial == null ? void 0 : onPartial(Array.from(results.values()));
    const CONTEXT = 2;
    const MAX_MATCH = 5;
    let index = 0;
    const idle = (_a = window.requestIdleCallback) != null ? _a : ((cb) => setTimeout(() => cb({ timeRemaining: () => 10 }), 16));
    return new Promise((resolve) => {
      const work = async (deadline) => {
        while (deadline.timeRemaining() > 0 && index < files.length) {
          const file = files[index++];
          try {
            if (file.stat.size > 1024 * 1024) continue;
            const text = await this.app.vault.cachedRead(file);
            const lines = text.split("\n");
            let matches = [];
            let score = 0;
            for (let i = 0; i < lines.length && matches.length < MAX_MATCH; i++) {
              if (matcher(lines[i].toLowerCase())) {
                const start = Math.max(0, i - CONTEXT);
                const end = Math.min(lines.length, i + CONTEXT + 1);
                matches.push({
                  lineNumber: i + 1,
                  context: lines.slice(start, end)
                });
                score += 30;
                if (/^#{1,6}\s/.test(lines[i])) score += 20;
              }
            }
            if (matches.length) {
              const existing = results.get(file.path);
              if (existing) {
                existing.matchedInContent = true;
                existing.contentMatches.push(...matches);
                existing.score += score;
              } else {
                results.set(file.path, {
                  file,
                  path: file.path,
                  score,
                  matchedInFileName: false,
                  matchedInContent: true,
                  contentMatches: matches
                });
              }
            }
          } catch (e) {
          }
        }
        onPartial == null ? void 0 : onPartial(Array.from(results.values()));
        if (index < files.length) idle(work);
        else resolve(Array.from(results.values()));
      };
      idle(work);
    });
  }
};

// ui/modals/SearchModal.ts
var SearchModal = class extends import_obsidian39.Modal {
  constructor(app) {
    super(app);
    __publicField(this, "input");
    __publicField(this, "list");
    __publicField(this, "preview");
    __publicField(this, "results", []);
    __publicField(this, "pinned", /* @__PURE__ */ new Map());
    __publicField(this, "service");
    __publicField(this, "debounced");
    this.service = new SearchService(app);
    this.debounced = (0, import_obsidian39.debounce)(this.search.bind(this), 300, true);
  }
  onOpen() {
    const el = this.contentEl;
    el.empty();
    el.style.maxWidth = "900px";
    el.style.overflow = "hidden";
    el.createEl("h2", { text: "\u641C\u7D22" });
    this.input = el.createEl("input", {
      type: "text",
      placeholder: "\u652F\u6301 AND / OR / \u6B63\u5219 (/regex/)"
    });
    this.input.style.width = "100%";
    const main = el.createDiv();
    main.style.display = "grid";
    main.style.gridTemplateColumns = "1fr 2fr";
    main.style.height = "450px";
    main.style.gap = "12px";
    this.list = main.createDiv();
    this.list.style.overflowY = "auto";
    this.list.style.border = "1px solid var(--background-modifier-border)";
    this.preview = main.createDiv();
    this.preview.style.overflowY = "auto";
    this.preview.style.border = "1px solid var(--background-modifier-border)";
    this.preview.style.padding = "12px";
    this.input.addEventListener(
      "input",
      () => this.debounced(this.input.value.trim())
    );
  }
  async search(q) {
    if (!q) return;
    await this.service.performSearch(q, (partial) => {
      this.results = this.mergePinned(partial);
      this.renderList();
    });
  }
  mergePinned(list) {
    const map = /* @__PURE__ */ new Map();
    this.pinned.forEach((v) => map.set(v.path, v));
    list.forEach((v) => {
      if (!map.has(v.path)) map.set(v.path, v);
    });
    return Array.from(map.values()).sort(
      (a, b) => Number(b.pinned) - Number(a.pinned) || b.score - a.score
    );
  }
  renderList() {
    this.list.empty();
    this.results.forEach((r) => {
      const item = this.list.createDiv();
      item.style.padding = "6px";
      item.style.cursor = "pointer";
      const title = item.createDiv({ text: r.file.name });
      title.style.fontWeight = "600";
      const pin = item.createSpan({ text: r.pinned ? "\u{1F4CC}" : "\u{1F4CD}" });
      pin.style.float = "right";
      pin.onclick = (e) => {
        e.stopPropagation();
        r.pinned = !r.pinned;
        r.pinned ? this.pinned.set(r.path, r) : this.pinned.delete(r.path);
        this.renderList();
      };
      item.onclick = () => this.showPreview(r);
      item.ondblclick = () => {
        var _a, _b;
        return this.openAt(r.file.path, (_b = (_a = r.contentMatches[0]) == null ? void 0 : _a.lineNumber) != null ? _b : 1);
      };
    });
  }
  /* ---------- Âè≥‰æß‰∏ä‰∏ãÊñá + ÂÖ≥ÈîÆËØçÈ´ò‰∫Æ ---------- */
  showPreview(r) {
    this.preview.empty();
    this.preview.createEl("h3", { text: r.file.name });
    if (!r.contentMatches.length) {
      this.preview.createDiv({ text: "\u4EC5\u6587\u4EF6\u540D\u547D\u4E2D" });
      return;
    }
    const q = this.input.value.trim();
    let reg = null;
    if (q.startsWith("/") && q.endsWith("/")) {
      reg = new RegExp(q.slice(1, -1), "gi");
    } else {
      const parts = q.split(/\s+|\|/).filter(Boolean);
      reg = new RegExp(`(${parts.join("|")})`, "gi");
    }
    r.contentMatches.forEach((m) => {
      const block = this.preview.createDiv();
      block.style.marginBottom = "10px";
      block.style.border = "1px solid var(--background-modifier-border)";
      block.style.padding = "6px";
      m.context.forEach((line, idx) => {
        const el = block.createDiv();
        el.innerHTML = reg ? line.replace(reg, "<mark>$1</mark>") : line;
        if (idx === Math.floor(m.context.length / 2)) {
          el.style.background = "var(--background-secondary)";
        }
      });
      block.onclick = () => this.openAt(r.file.path, m.lineNumber);
    });
  }
  async openAt(path, line) {
    const leaf = await this.app.workspace.openLinkText(path, "", true);
    if ((leaf == null ? void 0 : leaf.view) instanceof import_obsidian39.MarkdownView) {
      const ed = leaf.view.editor;
      ed.setCursor({ line: line - 1, ch: 0 });
      ed.scrollIntoView({ line: line - 1, ch: 0 }, true);
    }
    this.close();
  }
  onClose() {
    this.contentEl.empty();
  }
};

// main.ts
init_TaskService();
var DigitalLifePlugin = class extends import_obsidian40.Plugin {
  constructor() {
    super(...arguments);
    __publicField(this, "settingsManager");
    __publicField(this, "formulaManager");
    __publicField(this, "taskService");
    __publicField(this, "debouncedCalculate");
    __publicField(this, "debouncedAutoCapture");
  }
  // [Êñ∞Â¢û]
  async onload() {
    console.log("Loading Digital Life Plugin v1.3.0");
    this.settingsManager = new SettingsManager(this);
    await this.settingsManager.loadSettings();
    this.formulaManager = new FormulaManager(this.app, this.settingsManager);
    this.formulaManager.updateHiddenPropertiesCSS();
    this.taskService = new TaskService(this.app, this.settingsManager);
    this.registerView(
      VIEW_TYPE_DIGITAL_LIFE,
      (leaf) => new MainView(leaf, this.settingsManager)
    );
    this.addSettingTab(new DigitalLifeSettingTab(this.app, this));
    this.addRibbonIcon("home", "\u6253\u5F00\u6570\u5B57\u4EBA\u751F\u4EEA\u8868\u76D8", () => {
      this.activateView();
    });
    this.addCommand({
      id: "open-digital-life-dashboard",
      name: "\u6253\u5F00\u4EEA\u8868\u76D8 (Open Dashboard)",
      callback: () => {
        this.activateView();
      }
    });
    this.addCommand({
      id: "digital-life-quick-task-cmd",
      name: "\u5FEB\u901F\u521B\u5EFA\u4EFB\u52A1 (Smart Task)",
      callback: () => {
        new QuickTaskModal(this.app, async (taskLine) => {
          await this.taskService.quickAddTask(taskLine);
        }).open();
      }
    });
    this.addCommand({
      id: "create-new-note-modal",
      name: "\u65B0\u5EFA\u7B14\u8BB0 (\u4ECE\u6A21\u677F\u521B\u5EFA)",
      callback: () => {
        new NoteCreatorModal(this.app, this.settingsManager).open();
      }
    });
    this.addCommand({
      id: "insert-csv-as-table",
      name: "\u5BFC\u5165 CSV \u4E3A Markdown \u8868\u683C",
      editorCallback: (editor, view) => {
        new CsvSelectionModal(this.app, async (file) => {
          try {
            const content = await this.app.vault.read(file);
            const headers = CsvParser.getHeaders(content);
            if (headers.length === 0) {
              new import_obsidian40.Notice("CSV \u6587\u4EF6\u4E3A\u7A7A\u6216\u683C\u5F0F\u65E0\u6548");
              return;
            }
            new ColumnSelectionModal(this.app, headers, (selectedIndices) => {
              if (selectedIndices.length === 0) return;
              const markdownTable = CsvParser.convertToMarkdown(content, selectedIndices);
              editor.replaceSelection(markdownTable);
            }).open();
          } catch (error) {
            console.error("CSV \u5904\u7406\u5931\u8D25", error);
            new import_obsidian40.Notice("\u5BFC\u5165\u5931\u8D25");
          }
        }).open();
      }
    });
    this.addCommand({
      id: "manage-hidden-properties",
      name: "\u7BA1\u7406\u5F53\u524D\u7B14\u8BB0\u5C5E\u6027\u663E\u9690",
      callback: () => {
        const f = this.app.workspace.getActiveFile();
        if (f) new PropertyVisibilityModal(this.app, this.settingsManager, this.formulaManager, f).open();
      }
    });
    this.addCommand({
      id: "manual-calculate-yaml",
      name: "\u624B\u52A8\u8BA1\u7B97 YAML \u516C\u5F0F",
      editorCallback: (editor, view) => {
        if (view.file) this.formulaManager.calculateFormulas(view.file, true);
      }
    });
    this.addCommand({
      id: "search-digital-life",
      name: "\u641C\u7D22",
      hotkeys: [
        { modifiers: ["Ctrl"], key: "p" }
      ],
      callback: () => {
        new SearchModal(this.app).open();
      }
    });
    this.debouncedCalculate = (0, import_obsidian40.debounce)((file) => {
      this.formulaManager.calculateFormulas(file, false);
    }, 1e3, true);
    this.debouncedAutoCapture = (0, import_obsidian40.debounce)(async (file) => {
      const taskSettings = this.settingsManager.getSettings().taskManagement;
      if (taskSettings.autoCapture) {
        if (file.path !== taskSettings.captureInboxPath && file.path !== taskSettings.archivePath) {
          await this.taskService.captureTasks(null);
        }
      }
    }, 3e3, true);
    this.registerEvent(this.app.metadataCache.on("changed", (file) => {
      const activeFile = this.app.workspace.getActiveFile();
      if (activeFile && file.path === activeFile.path) {
        this.debouncedCalculate(activeFile);
      }
      this.debouncedAutoCapture(file);
    }));
  }
  onunload() {
  }
  async activateView() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_DIGITAL_LIFE);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getLeaf(true);
      await leaf.setViewState({ type: VIEW_TYPE_DIGITAL_LIFE, active: true });
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiY29yZS9zZXJ2aWNlcy9GaWxlU2VydmljZS50cyIsICJjb3JlL3NlcnZpY2VzL1RhYmxlU2VydmljZS50cyIsICJjb3JlL3V0aWxzL051bWJlclV0aWxzLnRzIiwgImNvcmUvc2VydmljZXMvVmFsdWVTZXJ2aWNlLnRzIiwgImNvcmUvc2VydmljZXMvR3JvdXBpbmdTZXJ2aWNlLnRzIiwgImNvcmUvc2VydmljZXMvVGFnU2VydmljZS50cyIsICJjb3JlL3NlcnZpY2VzL1Rhc2tQYXJzZXIudHMiLCAiY29yZS9zZXJ2aWNlcy9UYXNrRmV0Y2hlci50cyIsICJjb3JlL3NlcnZpY2VzL1Rhc2tDYXB0dXJlci50cyIsICJjb3JlL3NlcnZpY2VzL1Rhc2tUb2dnbGVyLnRzIiwgImNvcmUvc2VydmljZXMvVGFza0FyY2hpdmVyLnRzIiwgImNvcmUvc2VydmljZXMvVGFza1NlcnZpY2UudHMiLCAiY29yZS9zZXJ2aWNlcy9MaW5rUmVzb2x2ZXIudHMiLCAiY29yZS9zZXJ2aWNlcy9BZ2dyZWdhdG9yLnRzIiwgImNvcmUvdXRpbHMvRmlsdGVyTWF0Y2hlci50cyIsICJjb3JlL3V0aWxzL0NvbG9yVXRpbHMudHMiLCAiY29yZS9wcm9jZXNzb3JzL1RhYmxlUHJvY2Vzc29yLnRzIiwgImNvcmUvcHJvY2Vzc29ycy9Gb2xkZXJQcm9jZXNzb3IudHMiLCAiY29yZS9wcm9jZXNzb3JzL011bHRpQ29sdW1uUHJvY2Vzc29yLnRzIiwgImNvcmUvcHJvY2Vzc29ycy9IaXN0b2dyYW1Qcm9jZXNzb3IudHMiLCAiY29yZS9wcm9jZXNzb3JzL1N0YW5kYXJkUHJvY2Vzc29yLnRzIiwgImNvcmUvcHJvY2Vzc29ycy9CdWJibGVQcm9jZXNzb3IudHMiLCAiY29yZS9wcm9jZXNzb3JzL0hlYXRtYXBQcm9jZXNzb3IudHMiLCAiY29yZS9wcm9jZXNzb3JzL0dpdExpbmVQcm9jZXNzb3IudHMiLCAiY29yZS9EYXRhRW5naW5lLnRzIiwgImNvcmUvY29uc3RhbnRzLnRzIiwgInVpL2NvbXBvbmVudHMvU3VnZ2VzdGVycy50cyIsICJ1aS9tb2RhbHMvRmlsdGVyQ29uZmlnTW9kYWwudHMiLCAidWkvbW9kYWxzL2NvbmZpZy9CYXNlQ29uZmlnLnRzIiwgInVpL21vZGFscy9jb25maWcvY29tcG9uZW50cy9ZQXhpc0NvbmZpZy50cyIsICJ1aS9tb2RhbHMvY29uZmlnL2NvbXBvbmVudHMvWEF4aXNDb25maWcudHMiLCAidWkvbW9kYWxzL2NvbmZpZy9jb21wb25lbnRzL1JlZkxpbmVDb25maWcudHMiLCAidWkvbW9kYWxzL2NvbmZpZy9TdGFuZGFyZENvbmZpZy50cyIsICJ1aS9tb2RhbHMvY29uZmlnL2NvbXBvbmVudHMvQnViYmxlU2V0dGluZ3MudHMiLCAidWkvbW9kYWxzL2NvbmZpZy9CdWJibGVDb25maWcudHMiLCAidWkvbW9kYWxzL2NvbmZpZy9jb21wb25lbnRzL0FkdmFuY2VkU2V0dGluZ3MudHMiLCAidWkvbW9kYWxzL2NvbmZpZy9BZHZhbmNlZENvbmZpZy50cyIsICJ1aS9jb25maWdzL0NoYXJ0Q29uZmlnVmlldy50cyIsICJ1aS9jb25maWdzL0xpc3RDb25maWdWaWV3LnRzIiwgInVpL2NvbmZpZ3MvVG9kb0NvbmZpZ1ZpZXcudHMiLCAidWkvY29uZmlncy9NYXJrZG93bkNvbmZpZ1ZpZXcudHMiLCAidWkvbW9kYWxzL1dpZGdldENvbmZpZ01vZGFsLnRzIiwgIm1haW4udHMiLCAiY29yZS90eXBlcy50cyIsICJjb3JlL1NldHRpbmdzTWFuYWdlci50cyIsICJjb3JlL0Zvcm11bGFNYW5hZ2VyLnRzIiwgInVpL01haW5WaWV3LnRzIiwgInVpL2NvbXBvbmVudHMvU2lkZWJhci50cyIsICJ1aS9tb2RhbHMvUmVuYW1lTW9kYWwudHMiLCAidWkvY29tcG9uZW50cy9IZWFkZXIudHMiLCAidWkvbW9kYWxzL05vdGVDcmVhdG9yTW9kYWwudHMiLCAidWkvY29tcG9uZW50cy9HcmlkQ2FudmFzLnRzIiwgInVpL3dpZGdldHMvQmFzZVdpZGdldC50cyIsICJ1aS93aWRnZXRzL0NoYXJ0V2lkZ2V0LnRzIiwgInVpL3dpZGdldHMvQ2hhcnRMZWdlbmRNYW5hZ2VyLnRzIiwgInVpL3dpZGdldHMvQ2hhcnRUb29sdGlwTWFuYWdlci50cyIsICJ1aS9yZW5kZXJlcnMvaGVscGVycy9BeGlzR2VuZXJhdG9yLnRzIiwgInVpL3JlbmRlcmVycy9CYXNlQ2hhcnRSZW5kZXJlci50cyIsICJ1aS9yZW5kZXJlcnMvQmFyQ2hhcnRSZW5kZXJlci50cyIsICJ1aS9yZW5kZXJlcnMvTGluZUNoYXJ0UmVuZGVyZXIudHMiLCAidWkvcmVuZGVyZXJzL1NjYXR0ZXJDaGFydFJlbmRlcmVyLnRzIiwgInVpL3JlbmRlcmVycy9SYWRhckNoYXJ0UmVuZGVyZXIudHMiLCAidWkvcmVuZGVyZXJzL0hlYXRtYXBDaGFydFJlbmRlcmVyLnRzIiwgInVpL3JlbmRlcmVycy9QaWVDaGFydFJlbmRlcmVyLnRzIiwgInVpL3JlbmRlcmVycy9CdWJibGVDaGFydFJlbmRlcmVyLnRzIiwgInVpL3JlbmRlcmVycy9HaXRMaW5lRHJhd2VyLnRzIiwgInVpL3JlbmRlcmVycy9HaXRMaW5lSW50ZXJhY3Rpb25zLnRzIiwgInVpL3JlbmRlcmVycy9HaXRMaW5lQ2hhcnRSZW5kZXJlci50cyIsICJ1aS93aWRnZXRzL0NoYXJ0UmVuZGVyZXJGYWN0b3J5LnRzIiwgInVpL3dpZGdldHMvTGlzdFdpZGdldC50cyIsICJ1aS93aWRnZXRzL1RvZG9XaWRnZXQudHMiLCAidWkvd2lkZ2V0cy9NYXJrZG93bldpZGdldC50cyIsICJ1aS93aWRnZXRzL1dpZGdldEZhY3RvcnkudHMiLCAidWkvbW9kYWxzL01vdmVXaWRnZXRNb2RhbC50cyIsICJ1aS9EaWdpdGFsTGlmZVNldHRpbmdUYWIudHMiLCAidWkvbW9kYWxzL1Byb3BlcnR5VmlzaWJpbGl0eU1vZGFsLnRzIiwgInVpL21vZGFscy9Dc3ZJbXBvcnRNb2RhbC50cyIsICJjb3JlL3V0aWxzL0NzdlBhcnNlci50cyIsICJ1aS9tb2RhbHMvUXVpY2tUYXNrTW9kYWwudHMiLCAiY29yZS91dGlscy9EYXRlUGFyc2VyLnRzIiwgInVpL21vZGFscy9TZWFyY2hNb2RhbC50cyIsICJ1aS9tb2RhbHMvU2VhcmNoU2VydmljZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gPT09IEZJTEU6IGNvcmUvc2VydmljZXMvRmlsZVNlcnZpY2UudHMgPT09XHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIGdldEFsbFRhZ3MgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IERhdGFTb3VyY2UgfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgRmlsZVNlcnZpY2Uge1xyXG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkgeyB0aGlzLmFwcCA9IGFwcDsgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRGaWxlcyhkYXRhU291cmNlOiBEYXRhU291cmNlKTogVEZpbGVbXSB7XHJcbiAgICAgICAgaWYgKGRhdGFTb3VyY2UudHlwZSA9PT0gJ2ZpbGUnICYmIGRhdGFTb3VyY2UuZmlsZVBhdGgpIHtcclxuICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChkYXRhU291cmNlLmZpbGVQYXRoKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZpbGUgaW5zdGFuY2VvZiBURmlsZSA/IFtmaWxlXSA6IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhbGxGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuICAgICAgICByZXR1cm4gYWxsRmlsZXMuZmlsdGVyKGZpbGUgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZmlsZS5leHRlbnNpb24gIT09ICdtZCcpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKGRhdGFTb3VyY2UuZm9sZGVyUGF0aCAmJiBkYXRhU291cmNlLmZvbGRlclBhdGggIT09ICcvJyAmJiAhZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZGF0YVNvdXJjZS5mb2xkZXJQYXRoKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2ODA3XHU3QjdFXHU4RkM3XHU2RUU0XHJcbiAgICAgICAgICAgIGlmIChkYXRhU291cmNlLmZpbHRlci50YWdzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YWdzID0gZ2V0QWxsVGFncyhjYWNoZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRhZ3MpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIC8vIFx1N0I4MFx1NTM1NVx1NzY4NFx1NjgwN1x1N0I3RVx1NTMzOVx1OTE0RFx1OTAzQlx1OEY5MVxyXG4gICAgICAgICAgICAgICAgY29uc3QgaGFzTWF0Y2ggPSBkYXRhU291cmNlLmZpbHRlci50YWdzLnNvbWUocmVxVGFnID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWFyY2ggPSByZXFUYWcuc3RhcnRzV2l0aCgnIycpID8gcmVxVGFnLnRvTG93ZXJDYXNlKCkgOiAnIycgKyByZXFUYWcudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFncy5zb21lKHQgPT4gdC50b0xvd2VyQ2FzZSgpID09PSBzZWFyY2ggfHwgdC50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoc2VhcmNoICsgJy8nKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmICghaGFzTWF0Y2gpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0QXZhaWxhYmxlUHJvcGVydGllcyhmb2xkZXJQYXRoOiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGYgPT4gZi5leHRlbnNpb24gPT09ICdtZCcgJiYgKGZvbGRlclBhdGggPT09ICcvJyB8fCBmLnBhdGguc3RhcnRzV2l0aChmb2xkZXJQYXRoKSkpO1xyXG4gICAgICAgIGNvbnN0IGtleXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICAgICAgICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4geyBjb25zdCBjID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7IGlmIChjPy5mcm9udG1hdHRlcikgT2JqZWN0LmtleXMoYy5mcm9udG1hdHRlcikuZm9yRWFjaChrID0+IGtleXMuYWRkKGspKTsgfSk7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oa2V5cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEF2YWlsYWJsZVRhZ3MoZm9sZGVyUGF0aDogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihmID0+IGYuZXh0ZW5zaW9uID09PSAnbWQnICYmIChmb2xkZXJQYXRoID09PSAnLycgfHwgZi5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyUGF0aCkpKTtcclxuICAgICAgICBjb25zdCB0YWdTZXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICAgICAgICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4geyBjb25zdCBjID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7IGNvbnN0IHRhZ3MgPSBnZXRBbGxUYWdzKGMpOyBpZiAodGFncykgdGFncy5mb3JFYWNoKHQgPT4gdGFnU2V0LmFkZCh0KSk7IH0pO1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRhZ1NldCkuc29ydCgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBcdTUxN0NcdTVCQjlcdTYzQTVcdTUzRTNcdUZGMUFcdTgzQjdcdTUzRDZcdTUzQ0NcdTk0RkVcdTVDNUVcdTYwMjcgKFx1NUI5RVx1NzNCMFx1NzU2NVx1RkYwQ1x1NTNFRlx1NTdGQVx1NEU4RSBNZXRhZGF0YVNlcnZpY2UgXHU5MDNCXHU4RjkxXHU2MjY5XHU1QzU1KVxyXG4gICAgcHVibGljIGdldEF2YWlsYWJsZUxpbmtlZFByb3BlcnRpZXMoZm9sZGVyUGF0aDogc3RyaW5nLCBsaW5rUHJvcGVydHlOYW1lczogc3RyaW5nW10pOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtdOyBcclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogY29yZS9zZXJ2aWNlcy9UYWJsZVNlcnZpY2UudHMgPT09XHJcbmltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgY2xhc3MgVGFibGVTZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgYXBwOiBBcHA7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0TWFya2Rvd25UYWJsZURhdGEoZmlsZTogVEZpbGUpOiBQcm9taXNlPHsgaGVhZGVyczogc3RyaW5nW10sIHJvd3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZz5bXSB9PiB7XHJcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcbiAgICAgICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcclxuICAgICAgICBsZXQgaGVhZGVyTGluZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcbiAgICAgICAgbGV0IHNlcGFyYXRvckxpbmVJbmRleCA9IC0xO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7XHJcbiAgICAgICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJ3wnKSAmJiBsaW5lLmVuZHNXaXRoKCd8JykpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpICsgMSA8IGxpbmVzLmxlbmd0aCAmJiBsaW5lc1tpKzFdLnRyaW0oKS5tYXRjaCgvXlxcfChcXHMqOj8tKzo/XFxzKlxcfCkrJC8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyTGluZSA9IGxpbmU7IHNlcGFyYXRvckxpbmVJbmRleCA9IGkgKyAxOyBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWhlYWRlckxpbmUgfHwgc2VwYXJhdG9yTGluZUluZGV4ID09PSAtMSkgcmV0dXJuIHsgaGVhZGVyczogW10sIHJvd3M6IFtdIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHBhcnNlUm93ID0gKGxpbmU6IHN0cmluZykgPT4gbGluZS5zcGxpdCgnfCcpLnNsaWNlKDEsIC0xKS5tYXAoYyA9PiBjLnRyaW0oKSk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHBhcnNlUm93KGhlYWRlckxpbmUpO1xyXG4gICAgICAgIGNvbnN0IHJvd3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZz5bXSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gc2VwYXJhdG9yTGluZUluZGV4ICsgMTsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7XHJcbiAgICAgICAgICAgIGlmICghbGluZS5zdGFydHNXaXRoKCd8JykpIGJyZWFrOyBcclxuICAgICAgICAgICAgY29uc3QgY2VsbHMgPSBwYXJzZVJvdyhsaW5lKTtcclxuICAgICAgICAgICAgaWYgKGNlbGxzLmxlbmd0aCAhPT0gaGVhZGVycy5sZW5ndGgpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBjb25zdCByb3dEYXRhOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XHJcbiAgICAgICAgICAgIGhlYWRlcnMuZm9yRWFjaCgoaCwgaWR4KSA9PiB7IHJvd0RhdGFbaF0gPSBjZWxsc1tpZHhdOyB9KTtcclxuICAgICAgICAgICAgcm93cy5wdXNoKHJvd0RhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBoZWFkZXJzLCByb3dzIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldENvbHVtblZhbHVlcyhmaWxlOiBURmlsZSwgY29sdW1uTmFtZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG4gICAgICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgdGhpcy5nZXRNYXJrZG93blRhYmxlRGF0YShmaWxlKTtcclxuICAgICAgICBjb25zdCB2YWx1ZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICAgICAgICByb3dzLmZvckVhY2gociA9PiB7IGlmIChyW2NvbHVtbk5hbWVdKSB2YWx1ZXMuYWRkKHJbY29sdW1uTmFtZV0pOyB9KTtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh2YWx1ZXMpLnNvcnQoKTtcclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogY29yZS91dGlscy9OdW1iZXJVdGlscy50cyA9PT1cclxuZXhwb3J0IGNsYXNzIE51bWJlclV0aWxzIHtcclxuICAgIHN0YXRpYyBwYXJzZSh2YWw6IGFueSk6IG51bWJlciB8IG51bGwge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykgcmV0dXJuIGlzTmFOKHZhbCkgPyBudWxsIDogdmFsO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykgeyBcclxuICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VGbG9hdCh2YWwpOyBcclxuICAgICAgICAgICAgcmV0dXJuIGlzTmFOKHBhcnNlZCkgPyBudWxsIDogcGFyc2VkOyBcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IGNvcmUvc2VydmljZXMvVmFsdWVTZXJ2aWNlLnRzID09PVxyXG5pbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBMaW5rUmVzb2x2ZXIgfSBmcm9tICcuL0xpbmtSZXNvbHZlcic7XHJcbmltcG9ydCB7IFRhZ1NlcnZpY2UgfSBmcm9tICcuL1RhZ1NlcnZpY2UnO1xyXG5pbXBvcnQgeyBOdW1iZXJVdGlscyB9IGZyb20gJy4uL3V0aWxzL051bWJlclV0aWxzJztcclxuaW1wb3J0IHsgQXhpc01vZGUgfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgVmFsdWVTZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgYXBwOiBBcHA7XHJcbiAgICBwcml2YXRlIGxpbmtSZXNvbHZlcjogTGlua1Jlc29sdmVyO1xyXG4gICAgcHJpdmF0ZSB0YWdTZXJ2aWNlOiBUYWdTZXJ2aWNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBsaW5rUmVzb2x2ZXI6IExpbmtSZXNvbHZlciwgdGFnU2VydmljZTogVGFnU2VydmljZSkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMubGlua1Jlc29sdmVyID0gbGlua1Jlc29sdmVyO1xyXG4gICAgICAgIHRoaXMudGFnU2VydmljZSA9IHRhZ1NlcnZpY2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHJlc29sdmVWYWx1ZShmaWxlOiBURmlsZSwgcHJvcGVydHlOYW1lOiBzdHJpbmcsIGxpbmtTb3VyY2VQcm9wZXJ0aWVzPzogc3RyaW5nW10pOiBQcm9taXNlPG51bWJlciB8IG51bGw+IHtcclxuICAgICAgICAvLyAxLiBcdTY4MDdcdTdCN0VcdTRGNUNcdTRFM0FcdTY1NzBcdTUwM0MgKFx1NUI1OFx1NTcyOD0xLCBcdTRFMERcdTVCNThcdTU3Mjg9MClcclxuICAgICAgICBpZiAocHJvcGVydHlOYW1lLnN0YXJ0c1dpdGgoJyMnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50YWdTZXJ2aWNlLmhhc1RhZyhmaWxlLCBwcm9wZXJ0eU5hbWUpID8gMSA6IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xyXG4gICAgICAgIGlmICghY2FjaGUgfHwgIWNhY2hlLmZyb250bWF0dGVyKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBjb25zdCBmbSA9IGNhY2hlLmZyb250bWF0dGVyO1xyXG5cclxuICAgICAgICAvLyAyLiBcdTc2RjRcdTYzQTVcdTVDNUVcdTYwMjdcdThCRkJcdTUzRDZcclxuICAgICAgICBpZiAoIWxpbmtTb3VyY2VQcm9wZXJ0aWVzIHx8IGxpbmtTb3VyY2VQcm9wZXJ0aWVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyVXRpbHMucGFyc2UoZm1bcHJvcGVydHlOYW1lXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAzLiBcdTUzQ0NcdTk0RkVcdTdBN0ZcdTkwMEZcdTkwM0JcdThGOTEgKExpbmsgUGVuZXRyYXRpb24pXHJcbiAgICAgICAgbGV0IHRvdGFsVmFsdWUgPSAwOyBcclxuICAgICAgICBsZXQgaGFzVmFsaWRWYWx1ZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGxpbmtQcm9wTmFtZSBvZiBsaW5rU291cmNlUHJvcGVydGllcykge1xyXG4gICAgICAgICAgICBpZiAoIWxpbmtQcm9wTmFtZSkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmtSYXcgPSBmbVtsaW5rUHJvcE5hbWVdO1xyXG4gICAgICAgICAgICBpZiAoIWxpbmtSYXcpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbGlua1RleHRzOiBzdHJpbmdbXSA9IEFycmF5LmlzQXJyYXkobGlua1JhdykgPyBsaW5rUmF3LmZpbHRlcih4ID0+IHR5cGVvZiB4ID09PSAnc3RyaW5nJykgOiBbbGlua1Jhd107XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmtUZXh0IG9mIGxpbmtUZXh0cykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0RmlsZSA9IHRoaXMubGlua1Jlc29sdmVyLnJlc29sdmUobGlua1RleHQsIGZpbGUucGF0aCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldEZpbGUpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRDYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRhcmdldEZpbGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRDYWNoZT8uZnJvbnRtYXR0ZXIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRWYWwgPSBOdW1iZXJVdGlscy5wYXJzZSh0YXJnZXRDYWNoZS5mcm9udG1hdHRlcltwcm9wZXJ0eU5hbWVdKTtcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRWYWwgIT09IG51bGwpIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWxWYWx1ZSArPSB0YXJnZXRWYWw7IFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc1ZhbGlkVmFsdWUgPSB0cnVlOyBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaGFzVmFsaWRWYWx1ZSA/IHRvdGFsVmFsdWUgOiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyByZXNvbHZlTnVtZXJpY0FycmF5KGZpbGU6IFRGaWxlLCBwcm9wZXJ0eU5hbWU6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyW10+IHtcclxuICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xyXG4gICAgICAgIGlmICghY2FjaGUgfHwgIWNhY2hlLmZyb250bWF0dGVyKSByZXR1cm4gW107XHJcbiAgICAgICAgY29uc3QgcmF3ID0gY2FjaGUuZnJvbnRtYXR0ZXJbcHJvcGVydHlOYW1lXTtcclxuICAgICAgICBpZiAocmF3ID09PSB1bmRlZmluZWQgfHwgcmF3ID09PSBudWxsKSByZXR1cm4gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaW5wdXRzID0gQXJyYXkuaXNBcnJheShyYXcpID8gcmF3IDogW3Jhd107XHJcbiAgICAgICAgY29uc3QgcmVzdWx0czogbnVtYmVyW10gPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaW5wdXRzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbCA9IE51bWJlclV0aWxzLnBhcnNlKGl0ZW0pO1xyXG4gICAgICAgICAgICBpZiAodmFsICE9PSBudWxsKSByZXN1bHRzLnB1c2godmFsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU3NTI4XHU0RThFXHU4OUUzXHU2NzkwXHU3NTI4XHU0RThFXHU2NjNFXHU3OTNBXHU2MjE2XHU1MjA2XHU3RUM0XHU3Njg0XHU4Rjc0XHU1MDNDXHJcbiAgICBwdWJsaWMgYXN5bmMgcmVzb2x2ZUF4aXNWYWx1ZShmaWxlOiBURmlsZSwgbW9kZTogQXhpc01vZGUsIHByb3BOYW1lPzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCBudW1iZXI+IHtcclxuICAgICAgICBpZiAobW9kZSA9PT0gJ2ZpbGVuYW1lJykgcmV0dXJuIGZpbGUuYmFzZW5hbWU7XHJcbiAgICAgICAgaWYgKG1vZGUgPT09ICdjcmVhdGVkJykgcmV0dXJuIG5ldyBEYXRlKGZpbGUuc3RhdC5jdGltZSkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xyXG4gICAgICAgIGlmIChtb2RlID09PSAnbW9kaWZpZWQnKSByZXR1cm4gbmV3IERhdGUoZmlsZS5zdGF0Lm10aW1lKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XHJcbiAgICAgICAgaWYgKG1vZGUgPT09ICd0YWdzJykge1xyXG4gICAgICAgICAgICBjb25zdCB0YWdzID0gdGhpcy50YWdTZXJ2aWNlLmdldFRhZ3MoZmlsZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0YWdzLmxlbmd0aCA+IDAgPyB0YWdzWzBdIDogJ05vIFRhZyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtb2RlID09PSAnZnJvbnRtYXR0ZXInICYmIHByb3BOYW1lKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbCA9IGNhY2hlPy5mcm9udG1hdHRlcj8uW3Byb3BOYW1lXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSByZXR1cm4gdmFsO1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsICE9PSB1bmRlZmluZWQgJiYgdmFsICE9PSBudWxsID8gU3RyaW5nKHZhbCkgOiAnVW5rbm93bic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAnVW5rbm93bic7XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IGNvcmUvc2VydmljZXMvR3JvdXBpbmdTZXJ2aWNlLnRzID09PVxyXG5pbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQ2hhcnRXaWRnZXQgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IFRhZ1NlcnZpY2UgfSBmcm9tICcuL1RhZ1NlcnZpY2UnO1xyXG5pbXBvcnQgeyBWYWx1ZVNlcnZpY2UgfSBmcm9tICcuL1ZhbHVlU2VydmljZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgR3JvdXBpbmdTZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgdGFnU2VydmljZTogVGFnU2VydmljZTtcclxuICAgIHByaXZhdGUgdmFsdWVTZXJ2aWNlOiBWYWx1ZVNlcnZpY2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IodGFnU2VydmljZTogVGFnU2VydmljZSwgdmFsdWVTZXJ2aWNlOiBWYWx1ZVNlcnZpY2UpIHtcclxuICAgICAgICB0aGlzLnRhZ1NlcnZpY2UgPSB0YWdTZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMudmFsdWVTZXJ2aWNlID0gdmFsdWVTZXJ2aWNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyByZXNvbHZlR3JvdXBLZXlzKGZpbGU6IFRGaWxlLCB3aWRnZXQ6IENoYXJ0V2lkZ2V0KTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG4gICAgICAgIC8vIFx1NkEyMVx1NUYwRiBBOiBcdTY4MDdcdTdCN0VcdTUyMDZcdTdFQzQgKFx1NTNFRlx1ODBGRFx1NUM1RVx1NEU4RVx1NTkxQVx1NEUyQVx1N0VDNClcclxuICAgICAgICBpZiAod2lkZ2V0LnhBeGlzTW9kZSA9PT0gJ3RhZ3MnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZWRLZXlzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgICAgICB3aWRnZXQueEF4aXNQcm9wZXJ0eS5mb3JFYWNoKGNvbmZpZ1RhZyA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnVGFnICYmIHRoaXMudGFnU2VydmljZS5oYXNUYWcoZmlsZSwgY29uZmlnVGFnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZWRLZXlzLnB1c2goY29uZmlnVGFnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVkS2V5cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1NkEyMVx1NUYwRiBCOiBGcm9udG1hdHRlciBcdTU5MUFcdTVCNTdcdTZCQjVcdTdFQzRcdTU0MDggKFx1NEY4Qlx1NTk4MjogXHU1NzMwXHU1MzNBLVx1OTBFOFx1OTVFOClcclxuICAgICAgICBpZiAod2lkZ2V0LnhBeGlzTW9kZSA9PT0gJ2Zyb250bWF0dGVyJykge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgICAgIC8vIFx1NkNFOFx1NjEwRlx1RkYxQVx1OEZEOVx1OTFDQ1x1NjIxMVx1NEVFQ1x1N0I4MFx1NTMxNlx1NTkwNFx1NzQwNlx1RkYwQ1x1OTAxQVx1NUUzOFx1NTNFQVx1NTNENlx1N0IyQ1x1NEUwMFx1NEUyQVx1NUM1RVx1NjAyN1x1NEY1Q1x1NEUzQVx1NEUzQlx1NTIwNlx1N0VDNFx1RkYwQ1x1OTY2NFx1OTc1RVx1NjYyRlx1N0VDNFx1NTQwOFx1OTUyRVx1OTcwMFx1NkM0MlxyXG4gICAgICAgICAgICAvLyBcdThGRDlcdTkxQ0NcdTRFM0FcdTRFODZcdTUxN0NcdTVCQjlcdTU5MUFcdTUyMTdcdTkxNERcdTdGNkVcdUZGMENcdTYyMTFcdTRFRUNcdTkwNERcdTUzODZcdTYyNDBcdTY3MDlcdTVDNUVcdTYwMjdcclxuICAgICAgICAgICAgZm9yIChjb25zdCBwcm9wIG9mIHdpZGdldC54QXhpc1Byb3BlcnR5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXByb3ApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsID0gYXdhaXQgdGhpcy52YWx1ZVNlcnZpY2UucmVzb2x2ZUF4aXNWYWx1ZShmaWxlLCAnZnJvbnRtYXR0ZXInLCBwcm9wKTtcclxuICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKFN0cmluZyh2YWwpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gW3ZhbHVlcy5qb2luKCctJykgfHwgJ1Vua25vd24nXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1NkEyMVx1NUYwRiBDOiBcdTY4MDdcdTUxQzZcdTUzNTVcdTUwM0NcdTUyMDZcdTdFQzQgKFx1NjVFNVx1NjcxRlx1MzAwMVx1NjU4N1x1NEVGNlx1NTQwRFx1N0I0OSlcclxuICAgICAgICBjb25zdCB2YWwgPSBhd2FpdCB0aGlzLnZhbHVlU2VydmljZS5yZXNvbHZlQXhpc1ZhbHVlKGZpbGUsIHdpZGdldC54QXhpc01vZGUpO1xyXG4gICAgICAgIHJldHVybiBbU3RyaW5nKHZhbCldO1xyXG4gICAgfVxyXG59IiwgIi8vID09PSBGSUxFOiBjb3JlL3NlcnZpY2VzL1RhZ1NlcnZpY2UudHMgPT09XHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIGdldEFsbFRhZ3MgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgY2xhc3MgVGFnU2VydmljZSB7XHJcbiAgICBwcml2YXRlIGFwcDogQXBwO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFRhZ3MoZmlsZTogVEZpbGUpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcclxuICAgICAgICByZXR1cm4gZ2V0QWxsVGFncyhjYWNoZSkgfHwgW107XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhhc1RhZyhmaWxlOiBURmlsZSwgdGFnTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCF0YWdOYW1lKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgdGFncyA9IHRoaXMuZ2V0VGFncyhmaWxlKTtcclxuICAgICAgICBpZiAodGFncy5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgc2VhcmNoID0gdGFnTmFtZS50cmltKCk7XHJcbiAgICAgICAgaWYgKCFzZWFyY2guc3RhcnRzV2l0aCgnIycpKSBzZWFyY2ggPSAnIycgKyBzZWFyY2g7XHJcbiAgICAgICAgc2VhcmNoID0gc2VhcmNoLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRhZ3Muc29tZSh0ID0+IHsgXHJcbiAgICAgICAgICAgIGNvbnN0IGxvd2VyVCA9IHQudG9Mb3dlckNhc2UoKTsgXHJcbiAgICAgICAgICAgIHJldHVybiBsb3dlclQgPT09IHNlYXJjaCB8fCBsb3dlclQuc3RhcnRzV2l0aChzZWFyY2ggKyAnLycpOyBcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogY29yZS9zZXJ2aWNlcy9UYXNrUGFyc2VyLnRzID09PVxyXG5pbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVGFza0l0ZW0gfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgVGFza1BhcnNlciB7XHJcbiAgICBcclxuICAgIHN0YXRpYyBwYXJzZUxpbmUodGV4dDogc3RyaW5nLCBmaWxlOiBURmlsZSwgbGluZU51bWJlcjogbnVtYmVyKTogVGFza0l0ZW0gfCBudWxsIHtcclxuICAgICAgICAvLyBbXHU0RkVFXHU1OTBEXSBcdTY1MkZcdTYzMDEgLSBbIF0gXHU1NDhDICogWyBdXHJcbiAgICAgICAgY29uc3QgbWF0Y2ggPSB0ZXh0Lm1hdGNoKC9eXFxzKlstKl1cXHMqXFxbKFsgeFhdKVxcXVxccyooLiopJC8pO1xyXG4gICAgICAgIGlmICghbWF0Y2gpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICBjb25zdCBpc0NvbXBsZXRlZCA9IG1hdGNoWzFdICE9PSAnICc7XHJcbiAgICAgICAgbGV0IGNvbnRlbnQgPSBtYXRjaFsyXS50cmltKCk7XHJcblxyXG4gICAgICAgIC8vIDEuIFx1ODlFM1x1Njc5MFx1NEYxOFx1NTE0OFx1N0VBN1xyXG4gICAgICAgIGxldCBwcmlvcml0eTogJ2hpZ2gnIHwgJ21lZGl1bScgfCAnbG93JyB8IHVuZGVmaW5lZDtcclxuICAgICAgICBpZiAoY29udGVudC5pbmNsdWRlcygnXHVEODNEXHVERDNBJykpIHsgcHJpb3JpdHkgPSAnaGlnaCc7IGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoJ1x1RDgzRFx1REQzQScsICcnKTsgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNvbnRlbnQuaW5jbHVkZXMoJ1x1MjNFQicpKSB7IHByaW9yaXR5ID0gJ21lZGl1bSc7IGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoJ1x1MjNFQicsICcnKTsgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNvbnRlbnQuaW5jbHVkZXMoJ1x1RDgzRFx1REQzRCcpKSB7IHByaW9yaXR5ID0gJ2xvdyc7IGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoJ1x1RDgzRFx1REQzRCcsICcnKTsgfVxyXG5cclxuICAgICAgICAvLyAyLiBcdTg5RTNcdTY3OTBcdTY1RTVcdTY3MUYgKFx1RDgzRFx1RENDNSBZWVlZLU1NLUREKVxyXG4gICAgICAgIGxldCBkdWVEYXRlOiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcbiAgICAgICAgLy8gW1x1NEZFRVx1NTkwRF0gXHU2M0QwXHU1M0Q2XHU2NUU1XHU2NzFGXHU1NDBFXHVGRjBDXHU0RUNFXHU1MTg1XHU1QkI5XHU0RTJEXHU3OUZCXHU5NjY0XHU1QjgzXHJcbiAgICAgICAgY29uc3QgZGF0ZU1hdGNoID0gY29udGVudC5tYXRjaCgvXHVEODNEXHVEQ0M1XFxzKihcXGR7NH0tXFxkezJ9LVxcZHsyfSkvKTtcclxuICAgICAgICBpZiAoZGF0ZU1hdGNoKSB7XHJcbiAgICAgICAgICAgIGR1ZURhdGUgPSBkYXRlTWF0Y2hbMV07XHJcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoZGF0ZU1hdGNoWzBdLCAnJyk7IFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHU2RTA1XHU3NDA2XHU1M0VGXHU4MEZEXHU2QjhCXHU3NTU5XHU3Njg0XHU1OTFBXHU0RjU5XHU3QTdBXHU2ODNDXHJcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQudHJpbSgpO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpZDogYCR7ZmlsZS5wYXRofS0ke2xpbmVOdW1iZXJ9YCxcclxuICAgICAgICAgICAgdGV4dDogY29udGVudCxcclxuICAgICAgICAgICAgY29tcGxldGVkOiBpc0NvbXBsZXRlZCxcclxuICAgICAgICAgICAgZmlsZTogZmlsZSxcclxuICAgICAgICAgICAgbGluZTogbGluZU51bWJlcixcclxuICAgICAgICAgICAgcHJpb3JpdHksXHJcbiAgICAgICAgICAgIGR1ZURhdGUsXHJcbiAgICAgICAgICAgIGlzVGFza05vdGU6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcGFyc2VUYXNrTm90ZShmaWxlOiBURmlsZSwgZm06IGFueSk6IFRhc2tJdGVtIHtcclxuICAgICAgICBjb25zdCBpc0NvbXBsZXRlZCA9IGZtLnN0YXR1cyA9PT0gJ2RvbmUnIHx8IGZtLmNvbXBsZXRlZCA9PT0gdHJ1ZTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgcHJpb3JpdHk6ICdoaWdoJyB8ICdtZWRpdW0nIHwgJ2xvdycgfCB1bmRlZmluZWQ7XHJcbiAgICAgICAgaWYgKGZtLnByaW9yaXR5ID09PSAnaGlnaCcgfHwgZm0ucHJpb3JpdHkgPT09ICdIaWdoJykgcHJpb3JpdHkgPSAnaGlnaCc7XHJcbiAgICAgICAgZWxzZSBpZiAoZm0ucHJpb3JpdHkgPT09ICdtZWRpdW0nKSBwcmlvcml0eSA9ICdtZWRpdW0nO1xyXG4gICAgICAgIGVsc2UgaWYgKGZtLnByaW9yaXR5ID09PSAnbG93JykgcHJpb3JpdHkgPSAnbG93JztcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWQ6IGZpbGUucGF0aCxcclxuICAgICAgICAgICAgdGV4dDogZmlsZS5iYXNlbmFtZSxcclxuICAgICAgICAgICAgY29tcGxldGVkOiBpc0NvbXBsZXRlZCxcclxuICAgICAgICAgICAgZmlsZTogZmlsZSxcclxuICAgICAgICAgICAgbGluZTogLTEsXHJcbiAgICAgICAgICAgIHByaW9yaXR5LFxyXG4gICAgICAgICAgICBkdWVEYXRlOiBmbS5kdWVfZGF0ZSB8fCBmbS5kdWVEYXRlLFxyXG4gICAgICAgICAgICBpc1Rhc2tOb3RlOiB0cnVlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVGFza0l0ZW0sIFRvZG9XaWRnZXQgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBTZXR0aW5nc01hbmFnZXIgfSBmcm9tICcuLi9TZXR0aW5nc01hbmFnZXInO1xuaW1wb3J0IHsgVGFza1BhcnNlciB9IGZyb20gJy4vVGFza1BhcnNlcic7XG5cbmV4cG9ydCBjbGFzcyBUYXNrRmV0Y2hlciB7XG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcbiAgICBwcml2YXRlIHNldHRpbmdzTWFuYWdlcjogU2V0dGluZ3NNYW5hZ2VyO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHNldHRpbmdzTWFuYWdlcjogU2V0dGluZ3NNYW5hZ2VyKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlciA9IHNldHRpbmdzTWFuYWdlcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEdsb2JhbFNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZ3MoKS50YXNrTWFuYWdlbWVudDtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgZ2V0VGFza3MoY29uZmlnOiBUb2RvV2lkZ2V0KTogUHJvbWlzZTxUYXNrSXRlbVtdPiB7XG4gICAgICAgIGNvbnN0IGl0ZW1zOiBUYXNrSXRlbVtdID0gW107XG4gICAgICAgIGNvbnN0IGdsb2JhbFNldHRpbmdzID0gdGhpcy5nZXRHbG9iYWxTZXR0aW5ncygpO1xuICAgICAgICBjb25zdCB0YXNrQXR0cmlidXRlID0gZ2xvYmFsU2V0dGluZ3MudGFza05vdGVBdHRyaWJ1dGU7XG4gICAgICAgIGxldCBmaWxlczogVEZpbGVbXSA9IFtdO1xuXG4gICAgICAgIGlmIChjb25maWcuc291cmNlVHlwZSA9PT0gJ2ZpbGUnICYmIGNvbmZpZy5maWxlUGF0aCkge1xuICAgICAgICAgICAgY29uc3QgZiA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChjb25maWcuZmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKGYgaW5zdGFuY2VvZiBURmlsZSkgZmlsZXMucHVzaChmKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGFsbEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICAgICAgaWYgKGNvbmZpZy5mb2xkZXJQYXRoICYmIGNvbmZpZy5mb2xkZXJQYXRoICE9PSAnLycpIHtcbiAgICAgICAgICAgICAgICBmaWxlcyA9IGFsbEZpbGVzLmZpbHRlcihmID0+IGYucGF0aC5zdGFydHNXaXRoKGNvbmZpZy5mb2xkZXJQYXRoKSk7XG4gICAgICAgICAgICB9IGVsc2UgeyBmaWxlcyA9IGFsbEZpbGVzOyB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1ODFFQVx1NTJBOFx1NUU3Nlx1NTE2NVx1NjUzNlx1OTZDNlx1N0JCMSAoXHU5NzVFXHU1MzU1XHU2NTg3XHU0RUY2XHU2QTIxXHU1RjBGXHU0RTBCKVxuICAgICAgICAgICAgaWYgKGdsb2JhbFNldHRpbmdzLmNhcHR1cmVJbmJveFBhdGggJiYgY29uZmlnLnNvdXJjZVR5cGUgIT09ICdmaWxlJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluYm94RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChnbG9iYWxTZXR0aW5ncy5jYXB0dXJlSW5ib3hQYXRoKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5ib3hGaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgIWZpbGVzLmluY2x1ZGVzKGluYm94RmlsZSkpIGZpbGVzLnB1c2goaW5ib3hGaWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChnbG9iYWxTZXR0aW5ncy5hcmNoaXZlUGF0aCkge1xuICAgICAgICAgICAgZmlsZXMgPSBmaWxlcy5maWx0ZXIoZiA9PiBmLnBhdGggIT09IGdsb2JhbFNldHRpbmdzLmFyY2hpdmVQYXRoIHx8IGYucGF0aCA9PT0gY29uZmlnLmZpbGVQYXRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgIGxldCBpc1Rhc2tOb3RlID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodGFza0F0dHJpYnV0ZSAmJiBjYWNoZT8uZnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBba2V5LCB2YWxdID0gdGFza0F0dHJpYnV0ZS5zcGxpdCgnPScpLm1hcChzID0+IHMudHJpbSgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmbVZhbCA9IGNhY2hlLmZyb250bWF0dGVyW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKGZtVmFsICE9PSB1bmRlZmluZWQgJiYgKCF2YWwgfHwgU3RyaW5nKGZtVmFsKSA9PT0gdmFsKSkgaXNUYXNrTm90ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1NEVGQlx1NTJBMVx1N0IxNFx1OEJCMFx1RkYwQ1x1NkRGQlx1NTJBMFx1N0IxNFx1OEJCMFx1NjcyQ1x1OEVBQlx1NEY1Q1x1NEUzQVx1NEUwMFx1NEUyQVx1NEVGQlx1NTJBMVx1OTg3OSAoUm9vdCBOb2RlKVxuICAgICAgICAgICAgLy8gXHU0RjQ2XHU1MzU1XHU2NTg3XHU0RUY2XHU2QTIxXHU1RjBGXHU0RTBCXHU0RTBEXHU2REZCXHU1MkEwXHVGRjBDXHU5MDdGXHU1MTREXHU5MUNEXHU1OTBEXHU2NjNFXHU3OTNBXHU2NTg3XHU0RUY2XHU1NDBEXG4gICAgICAgICAgICBpZiAoaXNUYXNrTm90ZSAmJiBjb25maWcuc291cmNlVHlwZSAhPT0gJ2ZpbGUnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFza05vdGVJdGVtID0gVGFza1BhcnNlci5wYXJzZVRhc2tOb3RlKGZpbGUsIGNhY2hlIS5mcm9udG1hdHRlcik7XG4gICAgICAgICAgICAgICAgLy8gXHU1M0VBXHU2NzA5XHU2NzJBXHU1QjhDXHU2MjEwXHVGRjBDXHU2MjE2XHU4MDA1XHU2NzJBXHU5NjkwXHU4NUNGXHU1QjhDXHU2MjEwXHU2NUY2XHU2MjREXHU2REZCXHU1MkEwXG4gICAgICAgICAgICAgICAgaWYgKCFjb25maWcuaGlkZUNvbXBsZXRlZCB8fCAhdGFza05vdGVJdGVtLmNvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBHaXRMaW5lIFx1NkEyMVx1NUYwRlx1NEUwQlx1NjIxMVx1NEVFQ1x1NUUwQ1x1NjcxQlx1NzcwQlx1NTIzMFx1NUI4M1x1RkYwQ1x1NUY4NVx1NTI5RVx1NkEyMVx1NUYwRlx1NEUwQlx1NEU1Rlx1NEY1Q1x1NEUzQVx1NUJCOVx1NTY2OFx1NjYzRVx1NzkzQVxuICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKHRhc2tOb3RlSXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgICAgICAgICBsaW5lcy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2sgPSBUYXNrUGFyc2VyLnBhcnNlTGluZShsaW5lLCBmaWxlLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5oaWRlQ29tcGxldGVkICYmIHRhc2suY29tcGxldGVkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIHRhc2suaXNUYXNrTm90ZVN1YnRhc2sgPSBpc1Rhc2tOb3RlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRlbnRNYXRjaCA9IGxpbmUubWF0Y2goL14oXFxzKikvKTtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5pbmRlbnRhdGlvbiA9IGluZGVudE1hdGNoID8gaW5kZW50TWF0Y2hbMV0ubGVuZ3RoIDogMDtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNvcnRcbiAgICAgICAgaWYgKGNvbmZpZy5zb3J0QnkgPT09ICdwcmlvcml0eScpIHtcbiAgICAgICAgICAgIGNvbnN0IHBNYXAgPSB7ICdoaWdoJzogMywgJ21lZGl1bSc6IDIsICdsb3cnOiAxLCB1bmRlZmluZWQ6IDAgfTtcbiAgICAgICAgICAgIGl0ZW1zLnNvcnQoKGEsIGIpID0+IChwTWFwW2IucHJpb3JpdHkgfHwgJ3VuZGVmaW5lZCddIC0gcE1hcFthLnByaW9yaXR5IHx8ICd1bmRlZmluZWQnXSkpO1xuICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5zb3J0QnkgPT09ICdkYXRlJykge1xuICAgICAgICAgICAgaXRlbXMuc29ydCgoYSwgYikgPT4gKGEuZHVlRGF0ZSB8fCAnOTk5OScpLmxvY2FsZUNvbXBhcmUoYi5kdWVEYXRlIHx8ICc5OTk5JykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpdGVtcztcbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgVEZpbGUsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFRvZG9XaWRnZXQgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBTZXR0aW5nc01hbmFnZXIgfSBmcm9tICcuLi9TZXR0aW5nc01hbmFnZXInO1xuXG5leHBvcnQgY2xhc3MgVGFza0NhcHR1cmVyIHtcbiAgICBwcml2YXRlIGFwcDogQXBwO1xuICAgIHByaXZhdGUgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXIpIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyID0gc2V0dGluZ3NNYW5hZ2VyO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0R2xvYmFsU2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5ncygpLnRhc2tNYW5hZ2VtZW50O1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBjYXB0dXJlVGFza3MoY29uZmlnOiBUb2RvV2lkZ2V0IHwgbnVsbCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBnbG9iYWxTZXR0aW5ncyA9IHRoaXMuZ2V0R2xvYmFsU2V0dGluZ3MoKTtcbiAgICAgICAgaWYgKCFnbG9iYWxTZXR0aW5ncy5jYXB0dXJlSW5ib3hQYXRoKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGluYm94RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChnbG9iYWxTZXR0aW5ncy5jYXB0dXJlSW5ib3hQYXRoKTtcbiAgICAgICAgaWYgKCEoaW5ib3hGaWxlIGluc3RhbmNlb2YgVEZpbGUpKSByZXR1cm47XG5cbiAgICAgICAgbGV0IGNhcHR1cmVDb3VudCA9IDA7XG4gICAgICAgIGxldCBmaWxlc1RvU2NhbiA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgaWYgKGNvbmZpZyAmJiBjb25maWcuZm9sZGVyUGF0aCAmJiBjb25maWcuZm9sZGVyUGF0aCAhPT0gJy8nKSB7XG4gICAgICAgICAgICBmaWxlc1RvU2NhbiA9IGZpbGVzVG9TY2FuLmZpbHRlcihmID0+IGYucGF0aC5zdGFydHNXaXRoKGNvbmZpZy5mb2xkZXJQYXRoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaW5ib3hDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChpbmJveEZpbGUpO1xuICAgICAgICBsZXQgaW5ib3hNb2RpZmllZCA9IGZhbHNlO1xuXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlc1RvU2Nhbikge1xuICAgICAgICAgICAgaWYgKGZpbGUucGF0aCA9PT0gZ2xvYmFsU2V0dGluZ3MuY2FwdHVyZUluYm94UGF0aCB8fCBmaWxlLnBhdGggPT09IGdsb2JhbFNldHRpbmdzLmFyY2hpdmVQYXRoKSBjb250aW51ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gW1x1OTAzQlx1OEY5MVx1NEZERFx1NjMwMV0gXHU0RUZCXHU1MkExXHU3QjE0XHU4QkIwXHU0RTBEXHU4RkRCXHU4ODRDXHU4ODRDXHU2MzU1XHU4M0I3XG4gICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgaWYgKGdsb2JhbFNldHRpbmdzLnRhc2tOb3RlQXR0cmlidXRlICYmIGNhY2hlPy5mcm9udG1hdHRlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbF0gPSBnbG9iYWxTZXR0aW5ncy50YXNrTm90ZUF0dHJpYnV0ZS5zcGxpdCgnPScpLm1hcChzID0+IHMudHJpbSgpKTtcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGUuZnJvbnRtYXR0ZXJba2V5XSAhPT0gdW5kZWZpbmVkKSBjb250aW51ZTsgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgICAgICAgICBjb25zdCBsaW5lc1RvS2VlcDogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IGJsb2Nrc1RvTW92ZTogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICAgIGxldCBza2lwSW5kZXggPSAtMTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChpIDw9IHNraXBJbmRleCkgY29udGludWU7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gbGluZS5tYXRjaCgvXihcXHMqKS1cXHMqXFxbIFxcXVxccyooLiopJC8pO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9ja0J1ZmZlciA9IFtsaW5lXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEluZGVudCA9IG1hdGNoWzFdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGogPSBpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGogPCBsaW5lcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRMaW5lID0gbGluZXNbal07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0SW5kZW50TWF0Y2ggPSBuZXh0TGluZS5tYXRjaCgvXihcXHMqKS8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dEluZGVudCA9IG5leHRJbmRlbnRNYXRjaCA/IG5leHRJbmRlbnRNYXRjaFsxXS5sZW5ndGggOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRMaW5lLnRyaW0oKS5sZW5ndGggPT09IDAgfHwgbmV4dEluZGVudCA+IGN1cnJlbnRJbmRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja0J1ZmZlci5wdXNoKG5leHRMaW5lKTsgaisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1RvTW92ZS5wdXNoKGJsb2NrQnVmZmVyLmpvaW4oJ1xcbicpKTtcbiAgICAgICAgICAgICAgICAgICAgY2FwdHVyZUNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIHNraXBJbmRleCA9IGogLSAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBsaW5lc1RvS2VlcC5wdXNoKGxpbmUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYmxvY2tzVG9Nb3ZlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbGluZXNUb0tlZXAuam9pbignXFxuJykpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtIZWFkZXIgPSBgIyMjIyBbWyR7ZmlsZS5iYXNlbmFtZX1dXWA7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudFRvQXBwZW5kID0gYmxvY2tzVG9Nb3ZlLmpvaW4oJ1xcbicpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChpbmJveENvbnRlbnQuaW5jbHVkZXMobGlua0hlYWRlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5ib3hDb250ZW50ID0gaW5ib3hDb250ZW50LnJlcGxhY2UobGlua0hlYWRlciwgYCR7bGlua0hlYWRlcn1cXG4ke2NvbnRlbnRUb0FwcGVuZH1gKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWluYm94Q29udGVudC5lbmRzV2l0aCgnXFxuJykgJiYgaW5ib3hDb250ZW50Lmxlbmd0aCA+IDApIGluYm94Q29udGVudCArPSAnXFxuJztcbiAgICAgICAgICAgICAgICAgICAgaW5ib3hDb250ZW50ICs9IGBcXG4ke2xpbmtIZWFkZXJ9XFxuJHtjb250ZW50VG9BcHBlbmR9XFxuYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5ib3hNb2RpZmllZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW5ib3hNb2RpZmllZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGluYm94RmlsZSwgaW5ib3hDb250ZW50KTtcbiAgICAgICAgICAgIGlmIChjb25maWcpIG5ldyBOb3RpY2UoYFx1NURGMlx1NjY3QVx1ODBGRFx1NjM1NVx1ODNCNyAke2NhcHR1cmVDb3VudH0gXHU2NzYxXHU0RUZCXHU1MkExYCk7XG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBUYXNrSXRlbSB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIFRhc2tUb2dnbGVyIHtcbiAgICBwcml2YXRlIGFwcDogQXBwO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHRvZ2dsZVRhc2sodGFzazogVGFza0l0ZW0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKHRhc2suaXNUYXNrTm90ZSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKHRhc2suZmlsZSwgKGZtKSA9PiB7XG4gICAgICAgICAgICAgICAgZm0uc3RhdHVzID0gdGFzay5jb21wbGV0ZWQgPyAndG9kbycgOiAnZG9uZSc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKHRhc2suZmlsZSk7XG4gICAgICAgICAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgICAgICAgICAgbGV0IHRhcmdldExpbmVJbmRleCA9IHRhc2subGluZTtcbiAgICAgICAgICAgIGlmICh0YXJnZXRMaW5lSW5kZXggPj0gbGluZXMubGVuZ3RoIHx8ICFsaW5lc1t0YXJnZXRMaW5lSW5kZXhdLmluY2x1ZGVzKHRhc2sudGV4dCkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRMaW5lSW5kZXggPSBsaW5lcy5maW5kSW5kZXgobCA9PiBsLmluY2x1ZGVzKHRhc2sudGV4dCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmdldExpbmVJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lID0gbGluZXNbdGFyZ2V0TGluZUluZGV4XTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdMaW5lID0gbGluZS5yZXBsYWNlKC8oWy0qXVxccyopXFxbKFsgeF0pXFxdLywgKG1hdGNoLCBwcmVmaXgsIHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgJHtwcmVmaXh9WyR7c3RhdGUgPT09ICcgJyA/ICd4JyA6ICcgJ31dYDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBsaW5lc1t0YXJnZXRMaW5lSW5kZXhdID0gbmV3TGluZTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkodGFzay5maWxlLCBsaW5lcy5qb2luKCdcXG4nKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwgIi8vID09PSBGSUxFOiBjb3JlL3NlcnZpY2VzL1Rhc2tBcmNoaXZlci50cyA9PT1cbmltcG9ydCB7IEFwcCwgVEZpbGUsIE5vdGljZSwgbW9tZW50IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVG9kb1dpZGdldCB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IFNldHRpbmdzTWFuYWdlciB9IGZyb20gJy4uL1NldHRpbmdzTWFuYWdlcic7XG5cbmV4cG9ydCBjbGFzcyBUYXNrQXJjaGl2ZXIge1xuICAgIHByaXZhdGUgYXBwOiBBcHA7XG4gICAgcHJpdmF0ZSBzZXR0aW5nc01hbmFnZXI6IFNldHRpbmdzTWFuYWdlcjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBzZXR0aW5nc01hbmFnZXI6IFNldHRpbmdzTWFuYWdlcikge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIgPSBzZXR0aW5nc01hbmFnZXI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRHbG9iYWxTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmdzKCkudGFza01hbmFnZW1lbnQ7XG4gICAgfVxuXG4gICAgLy8gW1x1NjgzOFx1NUZDM1x1NEZFRVx1NTkwRF0gXHU1RjUyXHU2ODYzXHU5MDNCXHU4RjkxXHU1MjA2XHU2RDQxXG4gICAgcHVibGljIGFzeW5jIGFyY2hpdmVDb21wbGV0ZWRUYXNrcyhjb25maWc6IFRvZG9XaWRnZXQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgZ2xvYmFsU2V0dGluZ3MgPSB0aGlzLmdldEdsb2JhbFNldHRpbmdzKCk7XG4gICAgICAgIGlmICghZ2xvYmFsU2V0dGluZ3MuYXJjaGl2ZVBhdGgpIHJldHVybjtcbiAgICAgICAgY29uc3QgYXJjaGl2ZUZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZ2xvYmFsU2V0dGluZ3MuYXJjaGl2ZVBhdGgpO1xuICAgICAgICBpZiAoIShhcmNoaXZlRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuO1xuXG4gICAgICAgIC8vIFx1OEJBMVx1N0I5N1x1NUY1Mlx1Njg2M1x1NjU4N1x1NEVGNlx1NTkzOSAoXHU3NTI4XHU0RThFXHU3OUZCXHU1MkE4XHU2NTg3XHU0RUY2KVxuICAgICAgICBjb25zdCBhcmNoaXZlRm9sZGVyID0gYXJjaGl2ZUZpbGUucGFyZW50Py5wYXRoIHx8ICcvJztcblxuICAgICAgICBsZXQgZmlsZXNUb1NjYW46IFRGaWxlW10gPSBbXTtcbiAgICAgICAgLy8gXHU2MjZCXHU2M0NGXHU5MDNCXHU4RjkxLi4uXG4gICAgICAgIGNvbnN0IGluYm94RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChnbG9iYWxTZXR0aW5ncy5jYXB0dXJlSW5ib3hQYXRoIHx8ICcnKTtcbiAgICAgICAgaWYgKGluYm94RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSBmaWxlc1RvU2Nhbi5wdXNoKGluYm94RmlsZSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY29uZmlnLnNvdXJjZVR5cGUgPT09ICdmaWxlJyAmJiBjb25maWcuZmlsZVBhdGgpIHtcbiAgICAgICAgICAgICBjb25zdCBmID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGNvbmZpZy5maWxlUGF0aCk7IFxuICAgICAgICAgICAgIGlmIChmIGluc3RhbmNlb2YgVEZpbGUgJiYgZiAhPT0gaW5ib3hGaWxlKSBmaWxlc1RvU2Nhbi5wdXNoKGYpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5mb3JFYWNoKGYgPT4ge1xuICAgICAgICAgICAgICAgIGlmICgoY29uZmlnLmZvbGRlclBhdGggPT09ICcvJyB8fCBmLnBhdGguc3RhcnRzV2l0aChjb25maWcuZm9sZGVyUGF0aCkpICYmIGYgIT09IGluYm94RmlsZSkgZmlsZXNUb1NjYW4ucHVzaChmKTtcbiAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBhcmNoaXZlQ291bnQgPSAwOyBcbiAgICAgICAgY29uc3QgdGFibGVSb3dzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlc1RvU2Nhbikge1xuICAgICAgICAgICAgaWYgKGZpbGUucGF0aCA9PT0gZ2xvYmFsU2V0dGluZ3MuYXJjaGl2ZVBhdGgpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgbGV0IGlzVGFza05vdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2RDRCXHU2NjJGXHU1NDI2XHU0RTNBXHU0RUZCXHU1MkExXHU3QjE0XHU4QkIwXG4gICAgICAgICAgICBpZiAoZ2xvYmFsU2V0dGluZ3MudGFza05vdGVBdHRyaWJ1dGUgJiYgY2FjaGU/LmZyb250bWF0dGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgW2tleSwgdmFsXSA9IGdsb2JhbFNldHRpbmdzLnRhc2tOb3RlQXR0cmlidXRlLnNwbGl0KCc9JykubWFwKHMgPT4gcy50cmltKCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZtVmFsID0gY2FjaGUuZnJvbnRtYXR0ZXJba2V5XTtcbiAgICAgICAgICAgICAgICBpZiAoZm1WYWwgIT09IHVuZGVmaW5lZCAmJiAoIXZhbCB8fCBTdHJpbmcoZm1WYWwpID09PSB2YWwpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzVGFza05vdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gW1x1NjgzOFx1NUZDM1x1OTAzQlx1OEY5MSBBXSBcdTRFRkJcdTUyQTFcdTdCMTRcdThCQjBcdTVGNTJcdTY4NjMgLT4gXHU3OUZCXHU1MkE4XHU2NTg3XHU0RUY2XG4gICAgICAgICAgICBpZiAoaXNUYXNrTm90ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZtID0gY2FjaGUhLmZyb250bWF0dGVyITtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0NvbXBsZXRlZCA9IGZtLnN0YXR1cyA9PT0gJ2RvbmUnIHx8IGZtLmNvbXBsZXRlZCA9PT0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoaXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU5NjMyXHU2QjYyXHU5MUNEXHU1NDBEXHU4OTg2XHU3NkQ2XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFBhdGggPSBgJHthcmNoaXZlRm9sZGVyfS8ke2ZpbGUubmFtZX1gO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRhcmdldFBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTVGNTJcdTY4NjNcdTU5MzFcdThEMjVcdUZGMUEke3RhcmdldFBhdGh9IFx1NURGMlx1NUI1OFx1NTcyOGApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShmaWxlLCB0YXJnZXRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NURGMlx1NUY1Mlx1Njg2M1x1NEVGQlx1NTJBMVx1N0IxNFx1OEJCMFx1RkYxQSR7ZmlsZS5iYXNlbmFtZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBcdTRFRkJcdTUyQTFcdTdCMTRcdThCQjBcdTUxODVcdTkwRThcdTc2ODRcdTg4NENcdTRFRkJcdTUyQTFcdTRFMERcdThGREJcdTg4NENcdTYzRDBcdTUzRDZcdTVGNTJcdTY4NjNcdUZGMENcdTc2RjRcdTYzQTVcdThERjNcdThGQzdcbiAgICAgICAgICAgICAgICBjb250aW51ZTsgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFtcdTY4MzhcdTVGQzNcdTkwM0JcdThGOTEgQl0gXHU2NjZFXHU5MDFBXHU3QjE0XHU4QkIwXHU1RjUyXHU2ODYzIC0+IFx1NjNEMFx1NTNENlx1ODg0Q1x1NEVGQlx1NTJBMVxuICAgICAgICAgICAgbGV0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmVzVG9LZWVwOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgbGV0IHNraXBJbmRleCA9IC0xO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPD0gc2tpcEluZGV4KSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lID0gbGluZXNbaV07XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBsaW5lLm1hdGNoKC9eKFxccyopWy0qXVxccypcXFt4XFxdXFxzKiguKikkL2kpO1xuXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIC4uLiBcdTg5RTNcdTY3OTBcdTkwM0JcdThGOTEgKFx1NEZERFx1NjMwMSB2MS4zLjApIC4uLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50SW5kZW50ID0gbWF0Y2hbMV0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGFza1RleHQgPSBtYXRjaFsyXS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1YkxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaiA9IGkgKyAxO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaiA8IGxpbmVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dExpbmUgPSBsaW5lc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRJbmRlbnRNYXRjaCA9IG5leHRMaW5lLm1hdGNoKC9eKFxccyopLyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0SW5kZW50ID0gbmV4dEluZGVudE1hdGNoID8gbmV4dEluZGVudE1hdGNoWzFdLmxlbmd0aCA6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dExpbmUudHJpbSgpLmxlbmd0aCA9PT0gMCB8fCBuZXh0SW5kZW50ID4gY3VycmVudEluZGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuU3ViID0gbmV4dExpbmUudHJpbSgpLnJlcGxhY2UoL15bLSpdXFxzKy8sICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xlYW5TdWIpIHN1YkxpbmVzLnB1c2goY2xlYW5TdWIpOyBqKys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2tpcEluZGV4ID0gaiAtIDE7XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IHByaW9yaXR5ID0gJ1x1NjVFMCc7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXNrVGV4dC5pbmNsdWRlcygnXHVEODNEXHVERDNBJykpIHsgcHJpb3JpdHkgPSAnXHU5QUQ4JzsgdGFza1RleHQgPSB0YXNrVGV4dC5yZXBsYWNlKCdcdUQ4M0RcdUREM0EnLCAnJyk7IH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGFza1RleHQuaW5jbHVkZXMoJ1x1MjNFQicpKSB7IHByaW9yaXR5ID0gJ1x1NEUyRCc7IHRhc2tUZXh0ID0gdGFza1RleHQucmVwbGFjZSgnXHUyM0VCJywgJycpOyB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRhc2tUZXh0LmluY2x1ZGVzKCdcdUQ4M0RcdUREM0QnKSkgeyBwcmlvcml0eSA9ICdcdTRGNEUnOyB0YXNrVGV4dCA9IHRhc2tUZXh0LnJlcGxhY2UoJ1x1RDgzRFx1REQzRCcsICcnKTsgfVxuICAgICAgICAgICAgICAgICAgICB0YXNrVGV4dCA9IHRhc2tUZXh0LnJlcGxhY2UoL1x1RDgzRFx1RENDNVxccypcXGR7NH0tXFxkezJ9LVxcZHsyfS8sICcnKS50cmltKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IGNlbGxDb250ZW50ID0gdGFza1RleHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdWJMaW5lcy5sZW5ndGggPiAwKSBjZWxsQ29udGVudCArPSBgPGJyPjxzcGFuIHN0eWxlPVwiY29sb3I6dmFyKC0tdGV4dC1tdXRlZCk7Zm9udC1zaXplOjAuOWVtXCI+LSAke3N1YkxpbmVzLmpvaW4oJzxicj4tICcpfTwvc3Bhbj5gO1xuICAgICAgICAgICAgICAgICAgICBjZWxsQ29udGVudCA9IGNlbGxDb250ZW50LnJlcGxhY2UoL1xcfC9nLCAnXFxcXHwnKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZVN0ciA9IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbScpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2VMaW5rID0gYFtbJHtmaWxlLmJhc2VuYW1lfV1dYDtcbiAgICAgICAgICAgICAgICAgICAgdGFibGVSb3dzLnB1c2goYHwgJHt0aW1lU3RyfSB8ICR7Y2VsbENvbnRlbnR9IHwgJHtzb3VyY2VMaW5rfSB8ICR7cHJpb3JpdHl9IHxgKTtcbiAgICAgICAgICAgICAgICAgICAgYXJjaGl2ZUNvdW50Kys7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGxpbmVzVG9LZWVwLnB1c2gobGluZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhcmNoaXZlQ291bnQgPiAwICYmIHRhYmxlUm93cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIGxpbmVzVG9LZWVwLmpvaW4oJ1xcbicpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YWJsZVJvd3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbGV0IGFyY2hpdmVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhcmNoaXZlRmlsZSk7XG4gICAgICAgICAgICBsZXQgYXBwZW5kVGV4dCA9ICcnO1xuICAgICAgICAgICAgaWYgKCEvXFx8XFxzKlx1NUI4Q1x1NjIxMFx1NjVGNlx1OTVGNC8udGVzdChhcmNoaXZlQ29udGVudCkpIGFwcGVuZFRleHQgKz0gYFxcbnwgXHU1QjhDXHU2MjEwXHU2NUY2XHU5NUY0IHwgXHU0RUZCXHU1MkExXHU1MTg1XHU1QkI5IHwgXHU2NzY1XHU2RTkwIHwgXHU0RjE4XHU1MTQ4XHU3RUE3IHxcXG58LS0tfC0tLXwtLS18LS0tfFxcbmA7XG4gICAgICAgICAgICBlbHNlIGlmICghYXJjaGl2ZUNvbnRlbnQuZW5kc1dpdGgoJ1xcbicpKSBhcHBlbmRUZXh0ICs9ICdcXG4nO1xuICAgICAgICAgICAgYXBwZW5kVGV4dCArPSB0YWJsZVJvd3Muam9pbignXFxuJykgKyAnXFxuJztcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFwcGVuZChhcmNoaXZlRmlsZSwgYXBwZW5kVGV4dCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTVERjJcdTVGNTJcdTY4NjMgJHthcmNoaXZlQ291bnR9IFx1Njc2MVx1NEVGQlx1NTJBMVx1OTg3OWApO1xuICAgICAgICB9XG4gICAgfVxufSIsICIvLyA9PT0gRklMRTogY29yZS9zZXJ2aWNlcy9UYXNrU2VydmljZS50cyA9PT1cclxuaW1wb3J0IHsgQXBwLCBURmlsZSwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBUYXNrSXRlbSwgVG9kb1dpZGdldCB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgU2V0dGluZ3NNYW5hZ2VyIH0gZnJvbSAnLi4vU2V0dGluZ3NNYW5hZ2VyJztcclxuaW1wb3J0IHsgVGFza0ZldGNoZXIgfSBmcm9tICcuL1Rhc2tGZXRjaGVyJztcclxuaW1wb3J0IHsgVGFza0NhcHR1cmVyIH0gZnJvbSAnLi9UYXNrQ2FwdHVyZXInO1xyXG5pbXBvcnQgeyBUYXNrVG9nZ2xlciB9IGZyb20gJy4vVGFza1RvZ2dsZXInO1xyXG5pbXBvcnQgeyBUYXNrQXJjaGl2ZXIgfSBmcm9tICcuL1Rhc2tBcmNoaXZlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgVGFza1NlcnZpY2Uge1xyXG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcclxuICAgIHByaXZhdGUgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXI7XHJcbiAgICBwcml2YXRlIHRhc2tGZXRjaGVyOiBUYXNrRmV0Y2hlcjtcclxuICAgIHByaXZhdGUgdGFza0NhcHR1cmVyOiBUYXNrQ2FwdHVyZXI7XHJcbiAgICBwcml2YXRlIHRhc2tUb2dnbGVyOiBUYXNrVG9nZ2xlcjtcclxuICAgIHByaXZhdGUgdGFza0FyY2hpdmVyOiBUYXNrQXJjaGl2ZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHNldHRpbmdzTWFuYWdlcjogU2V0dGluZ3NNYW5hZ2VyKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIgPSBzZXR0aW5nc01hbmFnZXI7XHJcbiAgICAgICAgdGhpcy50YXNrRmV0Y2hlciA9IG5ldyBUYXNrRmV0Y2hlcihhcHAsIHNldHRpbmdzTWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy50YXNrQ2FwdHVyZXIgPSBuZXcgVGFza0NhcHR1cmVyKGFwcCwgc2V0dGluZ3NNYW5hZ2VyKTtcclxuICAgICAgICB0aGlzLnRhc2tUb2dnbGVyID0gbmV3IFRhc2tUb2dnbGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy50YXNrQXJjaGl2ZXIgPSBuZXcgVGFza0FyY2hpdmVyKGFwcCwgc2V0dGluZ3NNYW5hZ2VyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEdsb2JhbFNldHRpbmdzKCkgeyByZXR1cm4gdGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZ3MoKS50YXNrTWFuYWdlbWVudDsgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXRUYXNrcyhjb25maWc6IFRvZG9XaWRnZXQpOiBQcm9taXNlPFRhc2tJdGVtW10+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy50YXNrRmV0Y2hlci5nZXRUYXNrcyhjb25maWcpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBxdWlja0FkZFRhc2sodGFza0xpbmU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IGdsb2JhbFNldHRpbmdzID0gdGhpcy5nZXRHbG9iYWxTZXR0aW5ncygpO1xyXG4gICAgICAgIGlmICghZ2xvYmFsU2V0dGluZ3MuY2FwdHVyZUluYm94UGF0aCkgeyBuZXcgTm90aWNlKCdcdThCRjdcdTUxNDhcdTkxNERcdTdGNkVcdTY1MzZcdTk2QzZcdTdCQjEnKTsgcmV0dXJuOyB9XHJcbiAgICAgICAgY29uc3QgaW5ib3hGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGdsb2JhbFNldHRpbmdzLmNhcHR1cmVJbmJveFBhdGgpO1xyXG4gICAgICAgIGlmICghKGluYm94RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgeyBuZXcgTm90aWNlKCdcdTY1MzZcdTk2QzZcdTdCQjFcdTY1ODdcdTRFRjZcdTRFMERcdTVCNThcdTU3MjgnKTsgcmV0dXJuOyB9XHJcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYXBwZW5kKGluYm94RmlsZSwgYFxcbiR7dGFza0xpbmV9YCk7XHJcbiAgICAgICAgbmV3IE5vdGljZSgnXHU0RUZCXHU1MkExXHU1REYyXHU2REZCXHU1MkEwJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGNhcHR1cmVUYXNrcyhjb25maWc6IFRvZG9XaWRnZXQgfCBudWxsKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGFza0NhcHR1cmVyLmNhcHR1cmVUYXNrcyhjb25maWcpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBhcmNoaXZlQ29tcGxldGVkVGFza3MoY29uZmlnOiBUb2RvV2lkZ2V0KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGFza0FyY2hpdmVyLmFyY2hpdmVDb21wbGV0ZWRUYXNrcyhjb25maWcpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyB0b2dnbGVUYXNrKHRhc2s6IFRhc2tJdGVtKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGFza1RvZ2dsZXIudG9nZ2xlVGFzayh0YXNrKTtcclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogY29yZS9zZXJ2aWNlcy9MaW5rUmVzb2x2ZXIudHMgPT09XHJcbmltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgY2xhc3MgTGlua1Jlc29sdmVyIHtcclxuICAgIHByaXZhdGUgYXBwOiBBcHA7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVzb2x2ZShsaW5rVGV4dDogc3RyaW5nLCBzb3VyY2VQYXRoOiBzdHJpbmcpOiBURmlsZSB8IG51bGwge1xyXG4gICAgICAgIGlmICghbGlua1RleHQgfHwgdHlwZW9mIGxpbmtUZXh0ICE9PSAnc3RyaW5nJykgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgLy8gXHU1OTA0XHU3NDA2IFtbTGlua3xBbGlhc11dIFx1NjIxNiBMaW5rIFx1NjgzQ1x1NUYwRlxyXG4gICAgICAgIGNvbnN0IGNsZWFuTGluayA9IGxpbmtUZXh0LnJlcGxhY2UoL1tcXFtcXF1cIl0vZywgJycpLnNwbGl0KCd8JylbMF07IFxyXG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGNsZWFuTGluaywgc291cmNlUGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZCcpID8gZmlsZSA6IG51bGw7XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IGNvcmUvc2VydmljZXMvQWdncmVnYXRvci50cyA9PT1cclxuaW1wb3J0IHsgQWdncmVnYXRpb25UeXBlIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFnZ3JlZ2F0b3Ige1xyXG4gICAgc3RhdGljIGFnZ3JlZ2F0ZSh2YWx1ZXM6IG51bWJlcltdLCB0eXBlOiBBZ2dyZWdhdGlvblR5cGUpOiBudW1iZXIge1xyXG4gICAgICAgIGlmICh2YWx1ZXMubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcclxuXHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3N1bSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApO1xyXG4gICAgICAgICAgICBjYXNlICdhdmcnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlcy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKSAvIHZhbHVlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNhc2UgJ21heCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoLi4udmFsdWVzKTtcclxuICAgICAgICAgICAgY2FzZSAnbWluJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1pbiguLi52YWx1ZXMpO1xyXG4gICAgICAgICAgICBjYXNlICdjb3VudCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzLmxlbmd0aDtcclxuICAgICAgICAgICAgY2FzZSAncmF3JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXMubGVuZ3RoID4gMCA/IHZhbHVlc1swXSA6IDA7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogY29yZS91dGlscy9GaWx0ZXJNYXRjaGVyLnRzID09PVxyXG5pbXBvcnQgeyBGaWx0ZXJDb25maWcsIEZpbHRlckNvbmRpdGlvbiB9IGZyb20gJy4uL3R5cGVzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBGaWx0ZXJNYXRjaGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogXHU1MjI0XHU2NUFEXHU2N0QwXHU0RTAwXHU4ODRDXHU2NTcwXHU2MzZFXHU2NjJGXHU1NDI2XHU3QjI2XHU1NDA4XHU4RkM3XHU2RUU0XHU5MTREXHU3RjZFXHJcbiAgICAgKiBAcGFyYW0gcm93IFx1NjU3MFx1NjM2RVx1ODg0QyAoS2V5OiBcdTUyMTdcdTU0MEQsIFZhbHVlOiBcdTUzNTVcdTUxNDNcdTY4M0NcdTUwM0MpXHJcbiAgICAgKiBAcGFyYW0gY29uZmlnIFx1OEZDN1x1NkVFNFx1OTE0RFx1N0Y2RVx1NUJGOVx1OEM2MVxyXG4gICAgICogQHJldHVybnMgdHJ1ZTogXHU0RkREXHU3NTU5XHU4QkU1XHU4ODRDOyBmYWxzZTogXHU4RkM3XHU2RUU0XHU2Mzg5XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBtYXRjaChyb3c6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sIGNvbmZpZz86IEZpbHRlckNvbmZpZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOVx1OTE0RFx1N0Y2RVx1NjIxNlx1NkNBMVx1NjcwOVx1NTQyRlx1NzUyOFx1NzY4NFx1Njc2MVx1NEVGNlx1RkYwQ1x1OUVEOFx1OEJBNFx1NEUwRFx1OEZDN1x1NkVFNFxyXG4gICAgICAgIGlmICghY29uZmlnIHx8ICFjb25maWcuY29uZGl0aW9ucyB8fCBjb25maWcuY29uZGl0aW9ucy5sZW5ndGggPT09IDApIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICBjb25zdCBhY3RpdmVDb25kaXRpb25zID0gY29uZmlnLmNvbmRpdGlvbnMuZmlsdGVyKGMgPT4gYy5lbmFibGVkKTtcclxuICAgICAgICBpZiAoYWN0aXZlQ29uZGl0aW9ucy5sZW5ndGggPT09IDApIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAvLyBcdThCQTFcdTdCOTdcdTZCQ0ZcdTRFMkFcdTY3NjFcdTRFRjZcdTc2ODRcdTdFRDNcdTY3OUNcclxuICAgICAgICBjb25zdCByZXN1bHRzID0gYWN0aXZlQ29uZGl0aW9ucy5tYXAoY29uZGl0aW9uID0+IHRoaXMuY2hlY2tDb25kaXRpb24ocm93LCBjb25kaXRpb24pKTtcclxuXHJcbiAgICAgICAgLy8gXHU2ODM5XHU2MzZFXHU5MDNCXHU4RjkxXHU3RUM0XHU1NDA4XHU3RUQzXHU2NzlDXHJcbiAgICAgICAgaWYgKGNvbmZpZy5sb2dpYyA9PT0gJ0FORCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHMuZXZlcnkociA9PiByID09PSB0cnVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBPUiBMb2dpY1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cy5zb21lKHIgPT4gciA9PT0gdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGNoZWNrQ29uZGl0aW9uKHJvdzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiwgY29uZGl0aW9uOiBGaWx0ZXJDb25kaXRpb24pOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBjb2xOYW1lID0gY29uZGl0aW9uLmNvbHVtbi50cmltKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gMS4gXHU4M0I3XHU1M0Q2XHU1MzU1XHU1MTQzXHU2ODNDXHU1MDNDIChcdTY1MkZcdTYzMDFcdTZBMjFcdTdDQ0FcdTUzMzlcdTkxNERcdTg4NjhcdTU5MzRcdUZGMENcdTU5MDRcdTc0MDZcdTdBN0FcdTY4M0MpXHJcbiAgICAgICAgbGV0IGNlbGxWYWwgPSByb3dbY29sTmFtZV07XHJcbiAgICAgICAgaWYgKGNlbGxWYWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjb25zdCBtYXRjaGVkS2V5ID0gT2JqZWN0LmtleXMocm93KS5maW5kKGsgPT4gay50cmltKCkgPT09IGNvbE5hbWUpO1xyXG4gICAgICAgICAgICBpZiAobWF0Y2hlZEtleSkgY2VsbFZhbCA9IHJvd1ttYXRjaGVkS2V5XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHZhbFN0ciA9IChjZWxsVmFsIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKTtcclxuICAgICAgICBjb25zdCB0YXJnZXRTdHIgPSBjb25kaXRpb24udmFsdWUudHJpbSgpO1xyXG4gICAgICAgIGNvbnN0IG9wID0gY29uZGl0aW9uLm9wZXJhdG9yO1xyXG5cclxuICAgICAgICAvLyAyLiBcdTY1NzBcdTUwM0NcdTZCRDRcdThGODNcdTUxQzZcdTU5MDdcclxuICAgICAgICBjb25zdCBudW1WYWwgPSBwYXJzZUZsb2F0KHZhbFN0cik7XHJcbiAgICAgICAgY29uc3QgbnVtVGFyZ2V0ID0gcGFyc2VGbG9hdCh0YXJnZXRTdHIpO1xyXG4gICAgICAgIGNvbnN0IGlzTnVtQ29tcCA9ICFpc05hTihudW1WYWwpICYmICFpc05hTihudW1UYXJnZXQpICYmIHRhcmdldFN0ciAhPT0gJyc7XHJcblxyXG4gICAgICAgIC8vIDMuIFx1NjI2N1x1ODg0Q1x1NkJENFx1OEY4M1xyXG4gICAgICAgIHN3aXRjaCAob3ApIHtcclxuICAgICAgICAgICAgY2FzZSAnZXEnOiByZXR1cm4gdmFsU3RyID09PSB0YXJnZXRTdHI7XHJcbiAgICAgICAgICAgIGNhc2UgJ25lcSc6IHJldHVybiB2YWxTdHIgIT09IHRhcmdldFN0cjtcclxuICAgICAgICAgICAgY2FzZSAnY29udGFpbnMnOiByZXR1cm4gdmFsU3RyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGFyZ2V0U3RyLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICBjYXNlICdub3RfY29udGFpbnMnOiByZXR1cm4gIXZhbFN0ci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRhcmdldFN0ci50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNhc2UgJ2d0JzogcmV0dXJuIGlzTnVtQ29tcCA/IG51bVZhbCA+IG51bVRhcmdldCA6IHZhbFN0ciA+IHRhcmdldFN0cjtcclxuICAgICAgICAgICAgY2FzZSAnbHQnOiByZXR1cm4gaXNOdW1Db21wID8gbnVtVmFsIDwgbnVtVGFyZ2V0IDogdmFsU3RyIDwgdGFyZ2V0U3RyO1xyXG4gICAgICAgICAgICBjYXNlICdndGUnOiByZXR1cm4gaXNOdW1Db21wID8gbnVtVmFsID49IG51bVRhcmdldCA6IHZhbFN0ciA+PSB0YXJnZXRTdHI7XHJcbiAgICAgICAgICAgIGNhc2UgJ2x0ZSc6IHJldHVybiBpc051bUNvbXAgPyBudW1WYWwgPD0gbnVtVGFyZ2V0IDogdmFsU3RyIDw9IHRhcmdldFN0cjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogY29yZS91dGlscy9Db2xvclV0aWxzLnRzID09PVxyXG5leHBvcnQgY2xhc3MgQ29sb3JVdGlscyB7XHJcbiAgICAvLyBcdTlFRDhcdThCQTRcdTgyNzJcdTY3N0ZcclxuICAgIHByaXZhdGUgc3RhdGljIGRlZmF1bHRQYWxldHRlOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAnIzFmNzdiNCcsICcjZmY3ZjBlJywgJyMyY2EwMmMnLCAnI2Q2MjcyOCcsXHJcbiAgICAgICAgJyM5NDY3YmQnLCAnIzhjNTY0YicsICcjZTM3N2MyJywgJyM3ZjdmN2YnLFxyXG4gICAgICAgICcjYmNiZDIyJywgJyMxN2JlY2YnXHJcbiAgICBdO1xyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGN1c3RvbVBhbGV0dGU6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgLyoqIFx1OEJCRVx1N0Y2RVx1ODFFQVx1NUI5QVx1NEU0OVx1ODI3Mlx1Njc3Rlx1RkYwQ1x1ODk4Nlx1NzZENlx1OUVEOFx1OEJBNCAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBzZXRDdXN0b21QYWxldHRlKHBhbGV0dGU6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgdGhpcy5jdXN0b21QYWxldHRlID0gcGFsZXR0ZS5zbGljZSgpOyAvLyBcdTUxNEJcdTk2ODZcclxuICAgIH1cclxuXHJcbiAgICAvKiogXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU4MjcyXHU2NzdGXHVGRjA4XHU0RjE4XHU1MTQ4XHU4MUVBXHU1QjlBXHU0RTQ5XHU4MjcyXHU2NzdGXHVGRjA5ICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFBhbGV0dGUoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1c3RvbVBhbGV0dGUubGVuZ3RoID4gMCA/IHRoaXMuY3VzdG9tUGFsZXR0ZSA6IHRoaXMuZGVmYXVsdFBhbGV0dGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFx1NjgzOVx1NjM2RVx1N0QyMlx1NUYxNVx1ODNCN1x1NTNENlx1OTg5Q1x1ODI3MiAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXRDb2xvcihpbmRleDogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBwYWxldHRlID0gdGhpcy5nZXRQYWxldHRlKCk7XHJcbiAgICAgICAgcmV0dXJuIHBhbGV0dGVbaW5kZXggJSBwYWxldHRlLmxlbmd0aF07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFx1NzUxRlx1NjIxMFx1NUJGOVx1NkJENFx1ODI3Mlx1RkYwOFx1OUFEOFx1NEVBRS9cdThGODVcdTUyQTlcdTgyNzJcdUZGMDkgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29udHJhc3RDb2xvcihoZXg6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgLy8gXHU4RjZDXHU2MjEwUkdCXHJcbiAgICAgICAgY29uc3QgcmdiID0gdGhpcy5oZXhUb1JnYihoZXgpO1xyXG4gICAgICAgIGlmICghcmdiKSByZXR1cm4gJyMwMDAwMDAnO1xyXG4gICAgICAgIC8vIFx1NEVBRVx1NUVBNlx1NTE2Q1x1NUYwRjogaHR0cHM6Ly93d3cudzMub3JnL1RSL0FFUlQvI2NvbG9yLWNvbnRyYXN0XHJcbiAgICAgICAgY29uc3QgYnJpZ2h0bmVzcyA9IChyZ2IuciAqIDI5OSArIHJnYi5nICogNTg3ICsgcmdiLmIgKiAxMTQpIC8gMTAwMDtcclxuICAgICAgICByZXR1cm4gYnJpZ2h0bmVzcyA+IDEyOCA/ICcjMDAwMDAwJyA6ICcjZmZmZmZmJztcclxuICAgIH1cclxuXHJcbiAgICAvKiogXHU3NTFGXHU2MjEwXHU4Rjg1XHU1MkE5XHU4MjcyXHVGRjA4XHU2RDQ1XHU4MjcyXHU2MjE2XHU5MDBGXHU2NjBFXHU5QUQ4XHU0RUFFXHVGRjA5ICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEFjY2VudENvbG9yKGhleDogc3RyaW5nLCBvcGFjaXR5OiBudW1iZXIgPSAwLjIpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhleFRvUmdiYShoZXgsIG9wYWNpdHkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBIRVggXHU4RjZDIFJHQiAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBoZXhUb1JnYihoZXg6IHN0cmluZyk6IHsgcjogbnVtYmVyOyBnOiBudW1iZXI7IGI6IG51bWJlciB9IHwgbnVsbCB7XHJcbiAgICAgICAgY29uc3Qgc2FuaXRpemVkID0gaGV4LnJlcGxhY2UoJyMnLCAnJyk7XHJcbiAgICAgICAgY29uc3QgYmlnaW50ID0gcGFyc2VJbnQoc2FuaXRpemVkLCAxNik7XHJcbiAgICAgICAgaWYgKHNhbml0aXplZC5sZW5ndGggPT09IDYpIHtcclxuICAgICAgICAgICAgY29uc3QgciA9IChiaWdpbnQgPj4gMTYpICYgMjU1O1xyXG4gICAgICAgICAgICBjb25zdCBnID0gKGJpZ2ludCA+PiA4KSAmIDI1NTtcclxuICAgICAgICAgICAgY29uc3QgYiA9IGJpZ2ludCAmIDI1NTtcclxuICAgICAgICAgICAgcmV0dXJuIHsgciwgZywgYiB9O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2FuaXRpemVkLmxlbmd0aCA9PT0gMykge1xyXG4gICAgICAgICAgICBjb25zdCByID0gKGJpZ2ludCA+PiA4KSAmIDE1O1xyXG4gICAgICAgICAgICBjb25zdCBnID0gKGJpZ2ludCA+PiA0KSAmIDE1O1xyXG4gICAgICAgICAgICBjb25zdCBiID0gYmlnaW50ICYgMTU7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHI6IHIgKiAxNywgZzogZyAqIDE3LCBiOiBiICogMTcgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEhFWCBcdThGNkMgUkdCQSAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBoZXhUb1JnYmEoaGV4OiBzdHJpbmcsIGFscGhhOiBudW1iZXIgPSAxKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCByZ2IgPSB0aGlzLmhleFRvUmdiKGhleCk7XHJcbiAgICAgICAgaWYgKCFyZ2IpIHJldHVybiBgcmdiYSgwLDAsMCwke2FscGhhfSlgO1xyXG4gICAgICAgIHJldHVybiBgcmdiYSgke3JnYi5yfSwke3JnYi5nfSwke3JnYi5ifSwke2FscGhhfSlgO1xyXG4gICAgfVxyXG59XHJcbiIsICIvLyA9PT0gRklMRTogY29yZS9wcm9jZXNzb3JzL1RhYmxlUHJvY2Vzc29yLnRzID09PVxyXG5pbXBvcnQgeyBDaGFydFdpZGdldCwgQ2hhcnREYXRhUmVzdWx0LCBDaGFydERhdGFzZXQsIEZpbHRlckNvbmRpdGlvbiB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgVGFibGVTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvVGFibGVTZXJ2aWNlJztcclxuaW1wb3J0IHsgRmlsZVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9GaWxlU2VydmljZSc7IC8vIE5lZWQgZm9yIGdldEZpbGVzXHJcbmltcG9ydCB7IEFnZ3JlZ2F0b3IgfSBmcm9tICcuLi9zZXJ2aWNlcy9BZ2dyZWdhdG9yJztcclxuaW1wb3J0IHsgRmlsdGVyTWF0Y2hlciB9IGZyb20gJy4uL3V0aWxzL0ZpbHRlck1hdGNoZXInO1xyXG5pbXBvcnQgeyBDb2xvclV0aWxzIH0gZnJvbSAnLi4vdXRpbHMvQ29sb3JVdGlscyc7XHJcbmltcG9ydCB7IE51bWJlclV0aWxzIH0gZnJvbSAnLi4vdXRpbHMvTnVtYmVyVXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRhYmxlUHJvY2Vzc29yIHtcclxuICAgIHByaXZhdGUgZmlsZVNlcnZpY2U6IEZpbGVTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSB0YWJsZVNlcnZpY2U6IFRhYmxlU2VydmljZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihmaWxlU2VydmljZTogRmlsZVNlcnZpY2UsIHRhYmxlU2VydmljZTogVGFibGVTZXJ2aWNlKSB7XHJcbiAgICAgICAgdGhpcy5maWxlU2VydmljZSA9IGZpbGVTZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMudGFibGVTZXJ2aWNlID0gdGFibGVTZXJ2aWNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBwcm9jZXNzKHdpZGdldDogQ2hhcnRXaWRnZXQpOiBQcm9taXNlPENoYXJ0RGF0YVJlc3VsdD4ge1xyXG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHdpZGdldC5kYXRhU291cmNlc1swXTtcclxuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuZmlsZVNlcnZpY2UuZ2V0RmlsZXMoc291cmNlKTtcclxuICAgICAgICBpZiAoZmlsZXMubGVuZ3RoID09PSAwKSByZXR1cm4geyBsYWJlbHM6IFtdLCBkYXRhc2V0czogW10gfTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTRGN0ZcdTc1MjggVGFibGVTZXJ2aWNlXHJcbiAgICAgICAgY29uc3QgeyBoZWFkZXJzLCByb3dzOiByYXdSb3dzIH0gPSBhd2FpdCB0aGlzLnRhYmxlU2VydmljZS5nZXRNYXJrZG93blRhYmxlRGF0YShmaWxlc1swXSk7XHJcbiAgICAgICAgaWYgKHJhd1Jvd3MubGVuZ3RoID09PSAwKSByZXR1cm4geyBsYWJlbHM6IFtdLCBkYXRhc2V0czogW10gfTtcclxuXHJcbiAgICAgICAgbGV0IHhDb2xLZXkgPSB3aWRnZXQueEF4aXNQcm9wZXJ0eVswXSB8fCBoZWFkZXJzWzBdO1xyXG4gICAgICAgIGNvbnN0IGZpcnN0Um93ID0gcmF3Um93c1swXSB8fCB7fTtcclxuICAgICAgICBjb25zdCByZWFsWENvbEtleSA9IE9iamVjdC5rZXlzKGZpcnN0Um93KS5maW5kKGsgPT4gay50cmltKCkgPT09IHhDb2xLZXkudHJpbSgpKSB8fCB4Q29sS2V5O1xyXG5cclxuICAgICAgICBpZiAoc291cmNlLmZpbHRlckNvbmZpZyAmJiBzb3VyY2UuZmlsdGVyQ29uZmlnLmVuYWJsZVNwbGl0U2VyaWVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NTcGxpdFNlcmllcyh3aWRnZXQsIHJhd1Jvd3MsIHJlYWxYQ29sS2V5LCBzb3VyY2UuZmlsdGVyQ29uZmlnLmNvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHJvd3MgPSByYXdSb3dzO1xyXG4gICAgICAgIGlmIChzb3VyY2UuZmlsdGVyQ29uZmlnKSB7XHJcbiAgICAgICAgICAgIHJvd3MgPSByb3dzLmZpbHRlcihyID0+IEZpbHRlck1hdGNoZXIubWF0Y2gociwgc291cmNlLmZpbHRlckNvbmZpZykpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc291cmNlLnRhYmxlRmlsdGVyQ29sdW1uICYmIHNvdXJjZS50YWJsZUZpbHRlclZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldENvbCA9IHNvdXJjZS50YWJsZUZpbHRlckNvbHVtbi50cmltKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldFZhbCA9IHNvdXJjZS50YWJsZUZpbHRlclZhbHVlLnRyaW0oKTtcclxuICAgICAgICAgICAgaWYgKHRhcmdldENvbCkge1xyXG4gICAgICAgICAgICAgICAgcm93cyA9IHJvd3MuZmlsdGVyKHIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjZWxsVmFsID0gclt0YXJnZXRDb2xdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsVmFsID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgayA9IE9iamVjdC5rZXlzKHIpLmZpbmQoa2V5ID0+IGtleS50cmltKCkgPT09IHRhcmdldENvbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrKSBjZWxsVmFsID0gcltrXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChjZWxsVmFsIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKSA9PT0gdGFyZ2V0VmFsO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHsgbGFiZWxzLCBncm91cGVkUm93cyB9ID0gdGhpcy5ncm91cFJvd3Mocm93cywgcmVhbFhDb2xLZXkpO1xyXG4gICAgICAgIGNvbnN0IGRhdGFzZXRzID0gdGhpcy5nZW5lcmF0ZURhdGFzZXRzKHdpZGdldCwgbGFiZWxzLCBncm91cGVkUm93cyk7XHJcbiAgICAgICAgcmV0dXJuIHsgbGFiZWxzLCBkYXRhc2V0cyB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC4uLiBwcm9jZXNzU3BsaXRTZXJpZXMsIGdyb3VwUm93cywgZ2VuZXJhdGVEYXRhc2V0cyBcdTkwM0JcdThGOTFcdTRGRERcdTYzMDFcdTRFMERcdTUzRDggLi4uXHJcbiAgICAvLyAuLi4gXHU1NTJGXHU0RTAwXHU5NzAwXHU4OTgxXHU0RkVFXHU2NTM5XHU3Njg0XHU2NjJGIHBhcnNlTnVtYmVyIFx1OEMwM1x1NzUyOFx1NjUzOVx1NEUzQSBOdW1iZXJVdGlscy5wYXJzZSAuLi5cclxuICAgIFxyXG4gICAgcHJpdmF0ZSBwcm9jZXNzU3BsaXRTZXJpZXMod2lkZ2V0OiBDaGFydFdpZGdldCwgYWxsUm93czogUmVjb3JkPHN0cmluZywgc3RyaW5nPltdLCB4S2V5OiBzdHJpbmcsIGNvbmRpdGlvbnM6IEZpbHRlckNvbmRpdGlvbltdKTogQ2hhcnREYXRhUmVzdWx0IHtcclxuICAgICAgICAvLyAuLi4gKFx1NEZERFx1NjMwMVx1OTAzQlx1OEY5MSkgLi4uXHJcbiAgICAgICAgY29uc3QgYWN0aXZlQ29uZGl0aW9ucyA9IGNvbmRpdGlvbnMuZmlsdGVyKGMgPT4gYy5lbmFibGVkKTtcclxuICAgICAgICBpZiAoYWN0aXZlQ29uZGl0aW9ucy5sZW5ndGggPT09IDApIHJldHVybiB7IGxhYmVsczogW10sIGRhdGFzZXRzOiBbXSB9O1xyXG4gICAgICAgIGNvbnN0IHVuaW9uTGFiZWxzU2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcbiAgICAgICAgYWN0aXZlQ29uZGl0aW9ucy5mb3JFYWNoKGNvbmQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IGFsbFJvd3MuZmlsdGVyKHIgPT4gRmlsdGVyTWF0Y2hlci5tYXRjaChyLCB7IGxvZ2ljOiAnQU5EJywgY29uZGl0aW9uczogW2NvbmRdIH0pKTtcclxuICAgICAgICAgICAgZmlsdGVyZWQuZm9yRWFjaChyb3cgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGdyb3VwS2V5ID0gcm93W3hLZXldIHx8ICdVbmtub3duJztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVNYXRjaCA9IGdyb3VwS2V5Lm1hdGNoKC9eKFxcZHs0fVstL11cXGR7MSwyfVstL11cXGR7MSwyfSkvKTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRlTWF0Y2gpIGdyb3VwS2V5ID0gZGF0ZU1hdGNoWzFdO1xyXG4gICAgICAgICAgICAgICAgdW5pb25MYWJlbHNTZXQuYWRkKGdyb3VwS2V5KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3Qgc29ydGVkTGFiZWxzID0gQXJyYXkuZnJvbSh1bmlvbkxhYmVsc1NldCkuc29ydCgpO1xyXG4gICAgICAgIGNvbnN0IGRhdGFzZXRzOiBDaGFydERhdGFzZXRbXSA9IFtdO1xyXG5cclxuICAgICAgICBhY3RpdmVDb25kaXRpb25zLmZvckVhY2goKGNvbmQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN1YlJvd3MgPSBhbGxSb3dzLmZpbHRlcihyID0+IEZpbHRlck1hdGNoZXIubWF0Y2gociwgeyBsb2dpYzogJ0FORCcsIGNvbmRpdGlvbnM6IFtjb25kXSB9KSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgZ3JvdXBlZFJvd3MgfSA9IHRoaXMuZ3JvdXBSb3dzKHN1YlJvd3MsIHhLZXkpO1xyXG4gICAgICAgICAgICB3aWRnZXQueUF4aXNQcm9wZXJ0aWVzLmZvckVhY2goeUNvbmYgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHNvcnRlZExhYmVscy5tYXAobGFiZWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRHcm91cFJvd3MgPSBncm91cGVkUm93cy5nZXQobGFiZWwpIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbFJvd3MgPSBjdXJyZW50R3JvdXBSb3dzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh5Q29uZi5maWx0ZXJDb25maWcpIGZpbmFsUm93cyA9IGZpbmFsUm93cy5maWx0ZXIociA9PiBGaWx0ZXJNYXRjaGVyLm1hdGNoKHIsIHlDb25mLmZpbHRlckNvbmZpZykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlczogbnVtYmVyW10gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xOYW1lID0geUNvbmYubmFtZS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmluYWxSb3dzLmZvckVhY2gocm93ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJhd1ZhbCA9IHJvd1t5Q29uZi5uYW1lXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJhd1ZhbCA9PT0gdW5kZWZpbmVkKSB7IGNvbnN0IGsgPSBPYmplY3Qua2V5cyhyb3cpLmZpbmQoa2V5ID0+IGtleS50cmltKCkgPT09IGNvbE5hbWUpOyBpZiAoaykgcmF3VmFsID0gcm93W2tdOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IE51bWJlclV0aWxzLnBhcnNlKHJhd1ZhbCk7IC8vIFtcdTRGRUVcdTY1MzldXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW0gIT09IG51bGwpIHZhbHVlcy5wdXNoKG51bSk7IGVsc2UgaWYgKCF3aWRnZXQuaWdub3JlRW1wdHkpIHZhbHVlcy5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBBZ2dyZWdhdG9yLmFnZ3JlZ2F0ZSh2YWx1ZXMsIHlDb25mLmFnZ3JlZ2F0aW9uIHx8ICdzdW0nKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3BNYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7ICdlcSc6ICc9JywgJ25lcSc6ICchPScsICdndCc6ICc+JywgJ2x0JzogJzwnLCAnY29udGFpbnMnOiAnXHU1NDJCJyB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3BTdHIgPSBvcE1hcFtjb25kLm9wZXJhdG9yXSB8fCBjb25kLm9wZXJhdG9yO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZExhYmVsID0gYCR7Y29uZC5jb2x1bW59ICR7b3BTdHJ9ICR7Y29uZC52YWx1ZX1gO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSB3aWRnZXQueUF4aXNQcm9wZXJ0aWVzLmxlbmd0aCA+IDEgPyBgJHt5Q29uZi5uYW1lfSAoJHtjb25kTGFiZWx9KWAgOiBjb25kTGFiZWw7XHJcbiAgICAgICAgICAgICAgICBkYXRhc2V0cy5wdXNoKHsgbGFiZWw6IGxhYmVsLCBkYXRhOiBkYXRhLCBlbmFibGVQZXJjZW50YWdlOiB5Q29uZi5lbmFibGVQZXJjZW50YWdlLCBjb2xvcjogQ29sb3JVdGlscy5nZXRDb2xvcihpbmRleCkgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYXBwbHlQb3N0UHJvY2Vzc2luZyh3aWRnZXQsIGRhdGFzZXRzKTtcclxuICAgICAgICByZXR1cm4geyBsYWJlbHM6IHNvcnRlZExhYmVscywgZGF0YXNldHMgfTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdyb3VwUm93cyhyb3dzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+W10sIHhLZXk6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGdyb3VwZWRSb3dzID0gbmV3IE1hcDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIHN0cmluZz5bXT4oKTtcclxuICAgICAgICBjb25zdCBsYWJlbHNTZXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICAgICAgICByb3dzLmZvckVhY2gocm93ID0+IHtcclxuICAgICAgICAgICAgbGV0IGdyb3VwS2V5ID0gcm93W3hLZXldIHx8ICdVbmtub3duJztcclxuICAgICAgICAgICAgY29uc3QgZGF0ZU1hdGNoID0gZ3JvdXBLZXkubWF0Y2goL14oXFxkezR9Wy0vXVxcZHsxLDJ9Wy0vXVxcZHsxLDJ9KS8pO1xyXG4gICAgICAgICAgICBpZiAoZGF0ZU1hdGNoKSBncm91cEtleSA9IGRhdGVNYXRjaFsxXTtcclxuICAgICAgICAgICAgbGFiZWxzU2V0LmFkZChncm91cEtleSk7XHJcbiAgICAgICAgICAgIGlmICghZ3JvdXBlZFJvd3MuaGFzKGdyb3VwS2V5KSkgZ3JvdXBlZFJvd3Muc2V0KGdyb3VwS2V5LCBbXSk7XHJcbiAgICAgICAgICAgIGdyb3VwZWRSb3dzLmdldChncm91cEtleSkhLnB1c2gocm93KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4geyBsYWJlbHM6IEFycmF5LmZyb20obGFiZWxzU2V0KS5zb3J0KCksIGdyb3VwZWRSb3dzIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZURhdGFzZXRzKHdpZGdldDogQ2hhcnRXaWRnZXQsIGxhYmVsczogc3RyaW5nW10sIGdyb3VwZWRSb3dzOiBNYXA8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+W10+KSB7XHJcbiAgICAgICAgY29uc3QgZGF0YXNldHM6IENoYXJ0RGF0YXNldFtdID0gd2lkZ2V0LnlBeGlzUHJvcGVydGllcy5tYXAoKHlDb25mKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBsYWJlbHMubWFwKGxhYmVsID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50R3JvdXBSb3dzID0gZ3JvdXBlZFJvd3MuZ2V0KGxhYmVsKSB8fCBbXTtcclxuICAgICAgICAgICAgICAgIGlmICh5Q29uZi5maWx0ZXJDb25maWcpIGN1cnJlbnRHcm91cFJvd3MgPSBjdXJyZW50R3JvdXBSb3dzLmZpbHRlcihyID0+IEZpbHRlck1hdGNoZXIubWF0Y2gociwgeUNvbmYuZmlsdGVyQ29uZmlnKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZXM6IG51bWJlcltdID0gW107XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xOYW1lID0geUNvbmYubmFtZS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50R3JvdXBSb3dzLmZvckVhY2gocm93ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmF3VmFsID0gcm93W3lDb25mLm5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyYXdWYWwgPT09IHVuZGVmaW5lZCkgeyBjb25zdCBrID0gT2JqZWN0LmtleXMocm93KS5maW5kKGtleSA9PiBrZXkudHJpbSgpID09PSBjb2xOYW1lKTsgaWYgKGspIHJhd1ZhbCA9IHJvd1trXTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IE51bWJlclV0aWxzLnBhcnNlKHJhd1ZhbCk7IC8vIFtcdTRGRUVcdTY1MzldXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bSAhPT0gbnVsbCkgdmFsdWVzLnB1c2gobnVtKTsgZWxzZSBpZiAoIXdpZGdldC5pZ25vcmVFbXB0eSkgdmFsdWVzLnB1c2goMCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBBZ2dyZWdhdG9yLmFnZ3JlZ2F0ZSh2YWx1ZXMsIHlDb25mLmFnZ3JlZ2F0aW9uIHx8ICdzdW0nKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGxhYmVsOiB5Q29uZi5uYW1lLCBkYXRhOiBkYXRhLCBlbmFibGVQZXJjZW50YWdlOiB5Q29uZi5lbmFibGVQZXJjZW50YWdlLCBjb2xvcjogeUNvbmYuY29sb3IgfHwgJyM0MzYxZWUnIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hcHBseVBvc3RQcm9jZXNzaW5nKHdpZGdldCwgZGF0YXNldHMpO1xyXG4gICAgICAgIHJldHVybiBkYXRhc2V0cztcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXBwbHlQb3N0UHJvY2Vzc2luZyh3aWRnZXQ6IENoYXJ0V2lkZ2V0LCBkYXRhc2V0czogQ2hhcnREYXRhc2V0W10pIHsgaWYgKHdpZGdldC5pc0N1bXVsYXRpdmUpIHsgZGF0YXNldHMuZm9yRWFjaChkcyA9PiB7IGxldCBydW5uaW5nVG90YWwgPSAwOyBkcy5kYXRhID0gZHMuZGF0YS5tYXAodmFsID0+IHsgY29uc3QgY3VycmVudCA9IHZhbCA9PT0gbnVsbCA/IDAgOiB2YWw7IHJ1bm5pbmdUb3RhbCArPSBjdXJyZW50OyByZXR1cm4gcnVubmluZ1RvdGFsOyB9KTsgfSk7IH0gfVxyXG59IiwgIi8vID09PSBGSUxFOiBjb3JlL3Byb2Nlc3NvcnMvRm9sZGVyUHJvY2Vzc29yLnRzID09PVxyXG5pbXBvcnQgeyBDaGFydFdpZGdldCwgQ2hhcnREYXRhUmVzdWx0LCBDaGFydERhdGFzZXQgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IEZpbGVTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvRmlsZVNlcnZpY2UnO1xyXG5pbXBvcnQgeyBWYWx1ZVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9WYWx1ZVNlcnZpY2UnOyAgICAgLy8gW1x1NjVCMFx1NTg5RV1cclxuaW1wb3J0IHsgR3JvdXBpbmdTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvR3JvdXBpbmdTZXJ2aWNlJzsgLy8gW1x1NjVCMFx1NTg5RV1cclxuaW1wb3J0IHsgVGFnU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL1RhZ1NlcnZpY2UnOyAgICAgICAgIC8vIFtcdTY1QjBcdTU4OUVdXHJcbmltcG9ydCB7IEFnZ3JlZ2F0b3IgfSBmcm9tICcuLi9zZXJ2aWNlcy9BZ2dyZWdhdG9yJztcclxuXHJcbmV4cG9ydCBjbGFzcyBGb2xkZXJQcm9jZXNzb3Ige1xyXG4gICAgcHJpdmF0ZSBmaWxlU2VydmljZTogRmlsZVNlcnZpY2U7XHJcbiAgICBwcml2YXRlIHZhbHVlU2VydmljZTogVmFsdWVTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBncm91cGluZ1NlcnZpY2U6IEdyb3VwaW5nU2VydmljZTtcclxuICAgIHByaXZhdGUgdGFnU2VydmljZTogVGFnU2VydmljZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBmaWxlU2VydmljZTogRmlsZVNlcnZpY2UsIFxyXG4gICAgICAgIHZhbHVlU2VydmljZTogVmFsdWVTZXJ2aWNlLCBcclxuICAgICAgICBncm91cGluZ1NlcnZpY2U6IEdyb3VwaW5nU2VydmljZSxcclxuICAgICAgICB0YWdTZXJ2aWNlOiBUYWdTZXJ2aWNlXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmZpbGVTZXJ2aWNlID0gZmlsZVNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy52YWx1ZVNlcnZpY2UgPSB2YWx1ZVNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5ncm91cGluZ1NlcnZpY2UgPSBncm91cGluZ1NlcnZpY2U7XHJcbiAgICAgICAgdGhpcy50YWdTZXJ2aWNlID0gdGFnU2VydmljZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgcHJvY2Vzcyh3aWRnZXQ6IENoYXJ0V2lkZ2V0KTogUHJvbWlzZTxDaGFydERhdGFSZXN1bHQ+IHtcclxuICAgICAgICBjb25zdCBzb3VyY2UgPSB3aWRnZXQuZGF0YVNvdXJjZXNbMF07XHJcbiAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmZpbGVTZXJ2aWNlLmdldEZpbGVzKHNvdXJjZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZ3JvdXBlZERhdGEgPSBuZXcgTWFwPHN0cmluZywgKG51bWJlciB8IG51bGwpW11bXT4oKTtcclxuICAgICAgICBjb25zdCBsYWJlbHNTZXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuXHJcbiAgICAgICAgaWYgKHdpZGdldC54QXhpc01vZGUgPT09ICd0YWdzJykge1xyXG4gICAgICAgICAgICB3aWRnZXQueEF4aXNQcm9wZXJ0eS5mb3JFYWNoKHRhZyA9PiB7IGlmICh0YWcpIGxhYmVsc1NldC5hZGQodGFnKTsgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcclxuICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4IEdyb3VwaW5nU2VydmljZVxyXG4gICAgICAgICAgICBjb25zdCBncm91cEtleXMgPSBhd2FpdCB0aGlzLmdyb3VwaW5nU2VydmljZS5yZXNvbHZlR3JvdXBLZXlzKGZpbGUsIHdpZGdldCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGdyb3VwS2V5IG9mIGdyb3VwS2V5cykge1xyXG4gICAgICAgICAgICAgICAgbGFiZWxzU2V0LmFkZChncm91cEtleSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFncm91cGVkRGF0YS5oYXMoZ3JvdXBLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnVja2V0Q291bnQgPSB3aWRnZXQuaXNUb3RhbENvdW50ID8gMSA6IHdpZGdldC55QXhpc1Byb3BlcnRpZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwZWREYXRhLnNldChncm91cEtleSwgQXJyYXkoYnVja2V0Q291bnQpLmZpbGwobnVsbCkubWFwKCgpID0+IFtdKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBWYWx1ZXMgPSBncm91cGVkRGF0YS5nZXQoZ3JvdXBLZXkpITtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAod2lkZ2V0LmlzVG90YWxDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwVmFsdWVzWzBdLnB1c2goMSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2lkZ2V0LnlBeGlzUHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wID0gd2lkZ2V0LnlBeGlzUHJvcGVydGllc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wLnR5cGUgPT09ICd0YWcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjggVGFnU2VydmljZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzVGFnID0gdGhpcy50YWdTZXJ2aWNlLmhhc1RhZyhmaWxlLCBwcm9wLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBWYWx1ZXNbaV0ucHVzaChoYXNUYWcgPyAxIDogMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlua1Byb3BzID0gd2lkZ2V0LmVuYWJsZUxpbmtQZW5ldHJhdGlvbiAmJiB3aWRnZXQueEF4aXNQcm9wZXJ0eS5sZW5ndGggPiAwIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB3aWRnZXQueEF4aXNQcm9wZXJ0eSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4IFZhbHVlU2VydmljZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBhd2FpdCB0aGlzLnZhbHVlU2VydmljZS5yZXNvbHZlVmFsdWUoZmlsZSwgcHJvcC5uYW1lLCBsaW5rUHJvcHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCAhPT0gbnVsbCAmJiB2YWwgIT09IHVuZGVmaW5lZCAmJiAhaXNOYU4odmFsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBWYWx1ZXNbaV0ucHVzaCh2YWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF3aWRnZXQuaWdub3JlRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwVmFsdWVzW2ldLnB1c2goMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgc29ydGVkTGFiZWxzID0gQXJyYXkuZnJvbShsYWJlbHNTZXQpLnNvcnQoKTtcclxuICAgICAgICBsZXQgZGF0YXNldHM6IENoYXJ0RGF0YXNldFtdID0gW107XHJcblxyXG4gICAgICAgIGlmICh3aWRnZXQuaXNUb3RhbENvdW50KSB7XHJcbiAgICAgICAgICAgIGRhdGFzZXRzID0gW3sgbGFiZWw6ICdcdTY1ODdcdTY4NjNcdTYwM0JcdTY1NzAnLCBkYXRhOiBbXSwgZW5hYmxlUGVyY2VudGFnZTogZmFsc2UgfV07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGF0YXNldHMgPSB3aWRnZXQueUF4aXNQcm9wZXJ0aWVzLm1hcChwID0+ICh7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogcC5uYW1lIHx8IChwLnR5cGUgPT09ICd0YWcnID8gYFx1NjgwN1x1N0I3RTogJHtwLm5hbWV9YCA6ICdcdTY3MkFcdTU0N0RcdTU0MEQnKSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IFtdLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlUGVyY2VudGFnZTogcC5lbmFibGVQZXJjZW50YWdlXHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgbGFiZWwgb2Ygc29ydGVkTGFiZWxzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwVmFsdWVzID0gZ3JvdXBlZERhdGEuZ2V0KGxhYmVsKSB8fCAod2lkZ2V0LmlzVG90YWxDb3VudCA/IFtbXV0gOiB3aWRnZXQueUF4aXNQcm9wZXJ0aWVzLm1hcCgoKSA9PiBbXSkpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFzZXRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByYXdWYWx1ZXMgPSBncm91cFZhbHVlc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmIChyYXdWYWx1ZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpZGdldC5pZ25vcmVFbXB0eSAmJiAhd2lkZ2V0LmlzVG90YWxDb3VudCkgZGF0YXNldHNbaV0uZGF0YS5wdXNoKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgZGF0YXNldHNbaV0uZGF0YS5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYWdncmVnYXRpb24gPSB3aWRnZXQuaXNUb3RhbENvdW50ID8gJ3N1bScgOiB3aWRnZXQueUF4aXNQcm9wZXJ0aWVzW2ldLmFnZ3JlZ2F0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghd2lkZ2V0LmlzVG90YWxDb3VudCAmJiB3aWRnZXQueUF4aXNQcm9wZXJ0aWVzW2ldLnR5cGUgPT09ICd0YWcnKSBhZ2dyZWdhdGlvbiA9ICdzdW0nO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbmFsVmFsID0gQWdncmVnYXRvci5hZ2dyZWdhdGUocmF3VmFsdWVzIGFzIG51bWJlcltdLCBhZ2dyZWdhdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YXNldHNbaV0uZGF0YS5wdXNoKGZpbmFsVmFsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAod2lkZ2V0LmlzQ3VtdWxhdGl2ZSkge1xyXG4gICAgICAgICAgICBkYXRhc2V0cy5mb3JFYWNoKGRzID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBydW5uaW5nVG90YWwgPSAwO1xyXG4gICAgICAgICAgICAgICAgZHMuZGF0YSA9IGRzLmRhdGEubWFwKHZhbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IHZhbCA9PT0gbnVsbCA/IDAgOiB2YWw7XHJcbiAgICAgICAgICAgICAgICAgICAgcnVubmluZ1RvdGFsICs9IGN1cnJlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ1bm5pbmdUb3RhbDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgbGFiZWxzOiBzb3J0ZWRMYWJlbHMsIGRhdGFzZXRzIH07XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IGNvcmUvcHJvY2Vzc29ycy9NdWx0aUNvbHVtblByb2Nlc3Nvci50cyA9PT1cclxuaW1wb3J0IHsgQ2hhcnRXaWRnZXQsIENoYXJ0RGF0YVJlc3VsdCwgQ2hhcnREYXRhc2V0IH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBGaWxlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL0ZpbGVTZXJ2aWNlJztcclxuaW1wb3J0IHsgVmFsdWVTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvVmFsdWVTZXJ2aWNlJztcclxuaW1wb3J0IHsgQWdncmVnYXRvciB9IGZyb20gJy4uL3NlcnZpY2VzL0FnZ3JlZ2F0b3InO1xyXG5cclxuZXhwb3J0IGNsYXNzIE11bHRpQ29sdW1uUHJvY2Vzc29yIHtcclxuICAgIHByaXZhdGUgZmlsZVNlcnZpY2U6IEZpbGVTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSB2YWx1ZVNlcnZpY2U6IFZhbHVlU2VydmljZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihmaWxlU2VydmljZTogRmlsZVNlcnZpY2UsIHZhbHVlU2VydmljZTogVmFsdWVTZXJ2aWNlKSB7XHJcbiAgICAgICAgdGhpcy5maWxlU2VydmljZSA9IGZpbGVTZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMudmFsdWVTZXJ2aWNlID0gdmFsdWVTZXJ2aWNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBwcm9jZXNzKGZpbGVzOiBhbnlbXSwgd2lkZ2V0OiBDaGFydFdpZGdldCk6IFByb21pc2U8Q2hhcnREYXRhUmVzdWx0PiB7XHJcbiAgICAgICAgY29uc3QgbGFiZWxzID0gd2lkZ2V0LnhBeGlzUHJvcGVydHkuZmlsdGVyKHAgPT4gISFwKTtcclxuICAgICAgICBjb25zdCBidWNrZXRzID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcltdPigpO1xyXG4gICAgICAgIGxhYmVscy5mb3JFYWNoKGwgPT4gYnVja2V0cy5zZXQobCwgW10pKTtcclxuICAgICAgICBjb25zdCB5Q29uZmlnID0gd2lkZ2V0LnlBeGlzUHJvcGVydGllc1swXTtcclxuICAgICAgICBjb25zdCB0YXJnZXRQcm9wTmFtZSA9IHlDb25maWcgPyB5Q29uZmlnLm5hbWUgOiAnJzsgXHJcbiAgICAgICAgY29uc3QgYWdnVHlwZSA9IHlDb25maWcgPyB5Q29uZmlnLmFnZ3JlZ2F0aW9uIDogKHdpZGdldC5jaGFydFR5cGUgPT09ICdyYWRhcicgPyAnYXZnJyA6ICdzdW0nKTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgeFByb3Agb2YgbGFiZWxzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsOiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmICh3aWRnZXQuZW5hYmxlTGlua1BlbmV0cmF0aW9uICYmIHRhcmdldFByb3BOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gYXdhaXQgdGhpcy52YWx1ZVNlcnZpY2UucmVzb2x2ZVZhbHVlKGZpbGUsIHRhcmdldFByb3BOYW1lLCBbeFByb3BdKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gYXdhaXQgdGhpcy52YWx1ZVNlcnZpY2UucmVzb2x2ZVZhbHVlKGZpbGUsIHhQcm9wKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh2YWwgIT09IG51bGwgJiYgdmFsICE9PSB1bmRlZmluZWQgJiYgIWlzTmFOKHZhbCkpIGJ1Y2tldHMuZ2V0KHhQcm9wKT8ucHVzaCh2YWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGRhdGE6IG51bWJlcltdID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBsYWJlbCBvZiBsYWJlbHMpIHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gYnVja2V0cy5nZXQobGFiZWwpIHx8IFtdO1xyXG4gICAgICAgICAgICBkYXRhLnB1c2goQWdncmVnYXRvci5hZ2dyZWdhdGUodmFsdWVzLCBhZ2dUeXBlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRhdGFzZXRzOiBDaGFydERhdGFzZXRbXSA9IFt7XHJcbiAgICAgICAgICAgIGxhYmVsOiB3aWRnZXQuY2hhcnRUeXBlID09PSAncmFkYXInID8gJ1x1NjU3MFx1NTAzQ1x1NTIwNlx1NUUwMycgOiAodGFyZ2V0UHJvcE5hbWUgfHwgJ1x1NjU3MFx1NTAzQycpLFxyXG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgICAgICBlbmFibGVQZXJjZW50YWdlOiBmYWxzZSxcclxuICAgICAgICAgICAgY29sb3I6ICcjNDM2MWVlJ1xyXG4gICAgICAgIH1dO1xyXG4gICAgICAgIHJldHVybiB7IGxhYmVscywgZGF0YXNldHMgfTtcclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogY29yZS9wcm9jZXNzb3JzL0hpc3RvZ3JhbVByb2Nlc3Nvci50cyA9PT1cclxuaW1wb3J0IHsgQ2hhcnRXaWRnZXQsIENoYXJ0RGF0YVJlc3VsdCB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgRmlsZVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9GaWxlU2VydmljZSc7XHJcbmltcG9ydCB7IFZhbHVlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL1ZhbHVlU2VydmljZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgSGlzdG9ncmFtUHJvY2Vzc29yIHtcclxuICAgIHByaXZhdGUgZmlsZVNlcnZpY2U6IEZpbGVTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSB2YWx1ZVNlcnZpY2U6IFZhbHVlU2VydmljZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihmaWxlU2VydmljZTogRmlsZVNlcnZpY2UsIHZhbHVlU2VydmljZTogVmFsdWVTZXJ2aWNlKSB7XHJcbiAgICAgICAgdGhpcy5maWxlU2VydmljZSA9IGZpbGVTZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMudmFsdWVTZXJ2aWNlID0gdmFsdWVTZXJ2aWNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBwcm9jZXNzKHdpZGdldDogQ2hhcnRXaWRnZXQpOiBQcm9taXNlPENoYXJ0RGF0YVJlc3VsdD4ge1xyXG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHdpZGdldC5kYXRhU291cmNlc1swXTtcclxuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuZmlsZVNlcnZpY2UuZ2V0RmlsZXMoc291cmNlKTtcclxuICAgICAgICBjb25zdCBwcm9wTmFtZSA9IHdpZGdldC54QXhpc1Byb3BlcnR5WzBdO1xyXG4gICAgICAgIGlmICghcHJvcE5hbWUpIHJldHVybiB7IGxhYmVsczogW10sIGRhdGFzZXRzOiBbXSB9O1xyXG5cclxuICAgICAgICBjb25zdCB2YWx1ZXM6IG51bWJlcltdID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVWYWx1ZXMgPSBhd2FpdCB0aGlzLnZhbHVlU2VydmljZS5yZXNvbHZlTnVtZXJpY0FycmF5KGZpbGUsIHByb3BOYW1lKTtcclxuICAgICAgICAgICAgdmFsdWVzLnB1c2goLi4uZmlsZVZhbHVlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodmFsdWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHsgbGFiZWxzOiBbXSwgZGF0YXNldHM6IFtdIH07XHJcbiAgICAgICAgLy8gLi4uIChcdTUyMDZcdTdCQjFcdTkwM0JcdThGOTFcdTRGRERcdTYzMDFcdTRFMERcdTUzRDgpXHJcbiAgICAgICAgY29uc3QgbWluID0gTWF0aC5taW4oLi4udmFsdWVzKTtcclxuICAgICAgICBjb25zdCBtYXggPSBNYXRoLm1heCguLi52YWx1ZXMpO1xyXG4gICAgICAgIGxldCBiaW5TaXplID0gd2lkZ2V0LmJpblNpemU7XHJcbiAgICAgICAgaWYgKCFiaW5TaXplIHx8IGJpblNpemUgPD0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBrID0gTWF0aC5jZWlsKE1hdGgubG9nMih2YWx1ZXMubGVuZ3RoKSArIDEpO1xyXG4gICAgICAgICAgICBiaW5TaXplID0gKG1heCAtIG1pbikgLyBrO1xyXG4gICAgICAgICAgICBpZiAoYmluU2l6ZSA9PT0gMCkgYmluU2l6ZSA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC5mbG9vcihtaW4gLyBiaW5TaXplKSAqIGJpblNpemU7XHJcbiAgICAgICAgY29uc3QgYnVja2V0Q291bnQgPSBNYXRoLmZsb29yKChtYXggLSBzdGFydCkgLyBiaW5TaXplKSArIDE7XHJcbiAgICAgICAgY29uc3QgYnVja2V0cyA9IG5ldyBBcnJheShidWNrZXRDb3VudCkuZmlsbCgwKTtcclxuICAgICAgICBjb25zdCBsYWJlbHM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgZm9yKGxldCBpPTA7IGk8YnVja2V0Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBiU3RhcnQgPSBzdGFydCArIGkgKiBiaW5TaXplO1xyXG4gICAgICAgICAgICBjb25zdCBiRW5kID0gYlN0YXJ0ICsgYmluU2l6ZTtcclxuICAgICAgICAgICAgY29uc3QgbDEgPSBOdW1iZXIuaXNJbnRlZ2VyKGJTdGFydCkgPyBiU3RhcnQgOiBiU3RhcnQudG9GaXhlZCgxKTtcclxuICAgICAgICAgICAgY29uc3QgbDIgPSBOdW1iZXIuaXNJbnRlZ2VyKGJFbmQpID8gYkVuZCA6IGJFbmQudG9GaXhlZCgxKTtcclxuICAgICAgICAgICAgbGFiZWxzLnB1c2goYCR7bDF9LSR7bDJ9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhbHVlcy5mb3JFYWNoKHYgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaWR4ID0gTWF0aC5mbG9vcigodiAtIHN0YXJ0KSAvIGJpblNpemUpO1xyXG4gICAgICAgICAgICBpZiAoaWR4ID49IGJ1Y2tldENvdW50KSBpZHggPSBidWNrZXRDb3VudCAtIDE7XHJcbiAgICAgICAgICAgIGlmIChpZHggPCAwKSBpZHggPSAwO1xyXG4gICAgICAgICAgICBidWNrZXRzW2lkeF0rKztcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4geyBsYWJlbHMsIGRhdGFzZXRzOiBbeyBsYWJlbDogJ1x1OTg5MVx1NkIyMScsIGRhdGE6IGJ1Y2tldHMsIGVuYWJsZVBlcmNlbnRhZ2U6IGZhbHNlLCBjb2xvcjogJyM0MzYxZWUnIH1dIH07XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IGNvcmUvcHJvY2Vzc29ycy9TdGFuZGFyZFByb2Nlc3Nvci50cyA9PT1cclxuaW1wb3J0IHsgQ2hhcnRXaWRnZXQsIENoYXJ0RGF0YVJlc3VsdCB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgRmlsZVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9GaWxlU2VydmljZSc7XHJcbmltcG9ydCB7IFRhYmxlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL1RhYmxlU2VydmljZSc7XHJcbmltcG9ydCB7IFZhbHVlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL1ZhbHVlU2VydmljZSc7ICAgICAvLyBbXHU2NUIwXHU1ODlFXVxyXG5pbXBvcnQgeyBHcm91cGluZ1NlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9Hcm91cGluZ1NlcnZpY2UnOyAvLyBbXHU2NUIwXHU1ODlFXVxyXG5pbXBvcnQgeyBUYWdTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvVGFnU2VydmljZSc7ICAgICAgICAgLy8gW1x1NjVCMFx1NTg5RV1cclxuXHJcbmltcG9ydCB7IFRhYmxlUHJvY2Vzc29yIH0gZnJvbSAnLi9UYWJsZVByb2Nlc3Nvcic7XHJcbmltcG9ydCB7IEZvbGRlclByb2Nlc3NvciB9IGZyb20gJy4vRm9sZGVyUHJvY2Vzc29yJztcclxuaW1wb3J0IHsgTXVsdGlDb2x1bW5Qcm9jZXNzb3IgfSBmcm9tICcuL011bHRpQ29sdW1uUHJvY2Vzc29yJztcclxuaW1wb3J0IHsgSGlzdG9ncmFtUHJvY2Vzc29yIH0gZnJvbSAnLi9IaXN0b2dyYW1Qcm9jZXNzb3InO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0YW5kYXJkUHJvY2Vzc29yIHtcclxuICAgIHByaXZhdGUgdGFibGVQcm9jZXNzb3I6IFRhYmxlUHJvY2Vzc29yO1xyXG4gICAgcHJpdmF0ZSBmb2xkZXJQcm9jZXNzb3I6IEZvbGRlclByb2Nlc3NvcjtcclxuICAgIHByaXZhdGUgbXVsdGlDb2x1bW5Qcm9jZXNzb3I6IE11bHRpQ29sdW1uUHJvY2Vzc29yO1xyXG4gICAgcHJpdmF0ZSBoaXN0b2dyYW1Qcm9jZXNzb3I6IEhpc3RvZ3JhbVByb2Nlc3NvcjtcclxuICAgIHByaXZhdGUgZmlsZVNlcnZpY2U6IEZpbGVTZXJ2aWNlOyBcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBmaWxlU2VydmljZTogRmlsZVNlcnZpY2UsIFxyXG4gICAgICAgIHRhYmxlU2VydmljZTogVGFibGVTZXJ2aWNlLFxyXG4gICAgICAgIHZhbHVlU2VydmljZTogVmFsdWVTZXJ2aWNlLFxyXG4gICAgICAgIGdyb3VwaW5nU2VydmljZTogR3JvdXBpbmdTZXJ2aWNlLFxyXG4gICAgICAgIHRhZ1NlcnZpY2U6IFRhZ1NlcnZpY2VcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMuZmlsZVNlcnZpY2UgPSBmaWxlU2VydmljZTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnRhYmxlUHJvY2Vzc29yID0gbmV3IFRhYmxlUHJvY2Vzc29yKGZpbGVTZXJ2aWNlLCB0YWJsZVNlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMuZm9sZGVyUHJvY2Vzc29yID0gbmV3IEZvbGRlclByb2Nlc3NvcihmaWxlU2VydmljZSwgdmFsdWVTZXJ2aWNlLCBncm91cGluZ1NlcnZpY2UsIHRhZ1NlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMubXVsdGlDb2x1bW5Qcm9jZXNzb3IgPSBuZXcgTXVsdGlDb2x1bW5Qcm9jZXNzb3IoZmlsZVNlcnZpY2UsIHZhbHVlU2VydmljZSk7XHJcbiAgICAgICAgdGhpcy5oaXN0b2dyYW1Qcm9jZXNzb3IgPSBuZXcgSGlzdG9ncmFtUHJvY2Vzc29yKGZpbGVTZXJ2aWNlLCB2YWx1ZVNlcnZpY2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBwcm9jZXNzKHdpZGdldDogQ2hhcnRXaWRnZXQpOiBQcm9taXNlPENoYXJ0RGF0YVJlc3VsdD4ge1xyXG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHdpZGdldC5kYXRhU291cmNlc1swXTtcclxuICAgICAgICBpZiAoc291cmNlLnR5cGUgPT09ICdmaWxlJyAmJiBzb3VyY2UuZmlsZVBhdGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGFibGVQcm9jZXNzb3IucHJvY2Vzcyh3aWRnZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAod2lkZ2V0LmNoYXJ0VHlwZSA9PT0gJ2hpc3RvZ3JhbScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGlzdG9ncmFtUHJvY2Vzc29yLnByb2Nlc3Mod2lkZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaXNNdWx0aUNvbHVtbk1vZGUgPSBcclxuICAgICAgICAgICAgKHdpZGdldC5lbmFibGVUcmFuc3Bvc2UgJiYgd2lkZ2V0LnhBeGlzTW9kZSA9PT0gJ2Zyb250bWF0dGVyJyAmJiB3aWRnZXQueEF4aXNQcm9wZXJ0eS5sZW5ndGggPiAwKSB8fFxyXG4gICAgICAgICAgICAod2lkZ2V0LmNoYXJ0VHlwZSA9PT0gJ3JhZGFyJyk7XHJcblxyXG4gICAgICAgIGlmIChpc011bHRpQ29sdW1uTW9kZSkge1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuZmlsZVNlcnZpY2UuZ2V0RmlsZXMoc291cmNlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubXVsdGlDb2x1bW5Qcm9jZXNzb3IucHJvY2VzcyhmaWxlcywgd2lkZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9sZGVyUHJvY2Vzc29yLnByb2Nlc3Mod2lkZ2V0KTtcclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogY29yZS9wcm9jZXNzb3JzL0J1YmJsZVByb2Nlc3Nvci50cyA9PT1cclxuaW1wb3J0IHsgQ2hhcnRXaWRnZXQsIEJ1YmJsZURhdGFSZXN1bHQsIEJ1YmJsZVBvaW50IH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBGaWxlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL0ZpbGVTZXJ2aWNlJztcclxuaW1wb3J0IHsgVmFsdWVTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvVmFsdWVTZXJ2aWNlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBCdWJibGVQcm9jZXNzb3Ige1xyXG4gICAgcHJpdmF0ZSBmaWxlU2VydmljZTogRmlsZVNlcnZpY2U7XHJcbiAgICBwcml2YXRlIHZhbHVlU2VydmljZTogVmFsdWVTZXJ2aWNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGZpbGVTZXJ2aWNlOiBGaWxlU2VydmljZSwgdmFsdWVTZXJ2aWNlOiBWYWx1ZVNlcnZpY2UpIHtcclxuICAgICAgICB0aGlzLmZpbGVTZXJ2aWNlID0gZmlsZVNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy52YWx1ZVNlcnZpY2UgPSB2YWx1ZVNlcnZpY2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHByb2Nlc3Mod2lkZ2V0OiBDaGFydFdpZGdldCk6IFByb21pc2U8QnViYmxlRGF0YVJlc3VsdD4ge1xyXG4gICAgICAgIGlmICh3aWRnZXQuZGF0YVNvdXJjZXMubGVuZ3RoID09PSAwKSByZXR1cm4geyBwb2ludHM6IFtdIH07XHJcbiAgICAgICAgY29uc3Qgc291cmNlID0gd2lkZ2V0LmRhdGFTb3VyY2VzWzBdO1xyXG4gICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5maWxlU2VydmljZS5nZXRGaWxlcyhzb3VyY2UpO1xyXG4gICAgICAgIGNvbnN0IHBvaW50czogQnViYmxlUG9pbnRbXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHhNYXAgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xyXG4gICAgICAgIGNvbnN0IHlNYXAgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xyXG4gICAgICAgIGxldCB4Q291bnRlciA9IDA7IGxldCB5Q291bnRlciA9IDA7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xyXG4gICAgICAgICAgICBsZXQgeFJhdzogc3RyaW5nIHwgbnVtYmVyID0gJ1Vua25vd24nO1xyXG4gICAgICAgICAgICBpZiAod2lkZ2V0LnhBeGlzTW9kZSA9PT0gJ2Zyb250bWF0dGVyJyAmJiB3aWRnZXQueEF4aXNQcm9wZXJ0eS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBhd2FpdCB0aGlzLnZhbHVlU2VydmljZS5yZXNvbHZlVmFsdWUoZmlsZSwgd2lkZ2V0LnhBeGlzUHJvcGVydHlbMF0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB4UmF3ID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyID0gYXdhaXQgdGhpcy52YWx1ZVNlcnZpY2UucmVzb2x2ZUF4aXNWYWx1ZShmaWxlLCAnZnJvbnRtYXR0ZXInLCB3aWRnZXQueEF4aXNQcm9wZXJ0eVswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgeFJhdyA9IFN0cmluZyhzdHIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgeFJhdyA9IFN0cmluZyhhd2FpdCB0aGlzLnZhbHVlU2VydmljZS5yZXNvbHZlQXhpc1ZhbHVlKGZpbGUsIHdpZGdldC54QXhpc01vZGUpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IHlSYXc6IHN0cmluZyB8IG51bWJlciA9IDA7XHJcbiAgICAgICAgICAgIGlmICh3aWRnZXQueUF4aXNNb2RlID09PSAnZnJvbnRtYXR0ZXInICYmIHdpZGdldC55QXhpc1Byb3BlcnR5KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBhd2FpdCB0aGlzLnZhbHVlU2VydmljZS5yZXNvbHZlVmFsdWUoZmlsZSwgd2lkZ2V0LnlBeGlzUHJvcGVydHkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB5UmF3ID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyID0gYXdhaXQgdGhpcy52YWx1ZVNlcnZpY2UucmVzb2x2ZUF4aXNWYWx1ZShmaWxlLCAnZnJvbnRtYXR0ZXInLCB3aWRnZXQueUF4aXNQcm9wZXJ0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgeVJhdyA9IFN0cmluZyhzdHIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHdpZGdldC55QXhpc01vZGUpIHtcclxuICAgICAgICAgICAgICAgIHlSYXcgPSBTdHJpbmcoYXdhaXQgdGhpcy52YWx1ZVNlcnZpY2UucmVzb2x2ZUF4aXNWYWx1ZShmaWxlLCB3aWRnZXQueUF4aXNNb2RlKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCByVmFsID0gMTtcclxuICAgICAgICAgICAgaWYgKHdpZGdldC5idWJibGVTaXplUHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHYgPSBhd2FpdCB0aGlzLnZhbHVlU2VydmljZS5yZXNvbHZlVmFsdWUoZmlsZSwgd2lkZ2V0LmJ1YmJsZVNpemVQcm9wZXJ0eSk7XHJcbiAgICAgICAgICAgICAgICByVmFsID0gdiAhPT0gbnVsbCA/IHYgOiAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgbGFiZWwgPSBmaWxlLmJhc2VuYW1lO1xyXG4gICAgICAgICAgICBpZiAod2lkZ2V0LmJ1YmJsZUxhYmVsUHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHYgPSBhd2FpdCB0aGlzLnZhbHVlU2VydmljZS5yZXNvbHZlQXhpc1ZhbHVlKGZpbGUsICdmcm9udG1hdHRlcicsIHdpZGdldC5idWJibGVMYWJlbFByb3BlcnR5KTtcclxuICAgICAgICAgICAgICAgIGlmICh2ICYmIHYgIT09ICdVbmtub3duJykgbGFiZWwgPSBTdHJpbmcodik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCB4TnVtOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgeFJhdyA9PT0gJ251bWJlcicpIHsgeE51bSA9IHhSYXc7IH0gZWxzZSB7IGlmICgheE1hcC5oYXMoU3RyaW5nKHhSYXcpKSkgeE1hcC5zZXQoU3RyaW5nKHhSYXcpLCB4Q291bnRlcisrKTsgeE51bSA9IHhNYXAuZ2V0KFN0cmluZyh4UmF3KSkhOyB9XHJcbiAgICAgICAgICAgIGxldCB5TnVtOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgeVJhdyA9PT0gJ251bWJlcicpIHsgeU51bSA9IHlSYXc7IH0gZWxzZSB7IGlmICgheU1hcC5oYXMoU3RyaW5nKHlSYXcpKSkgeU1hcC5zZXQoU3RyaW5nKHlSYXcpLCB5Q291bnRlcisrKTsgeU51bSA9IHlNYXAuZ2V0KFN0cmluZyh5UmF3KSkhOyB9XHJcblxyXG4gICAgICAgICAgICBwb2ludHMucHVzaCh7IHg6IHhOdW0sIHk6IHlOdW0sIHI6IHJWYWwsIGxhYmVsOiBsYWJlbCwgcmF3WDogU3RyaW5nKHhSYXcpLCByYXdZOiBTdHJpbmcoeVJhdykgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IHBvaW50cywgeExhYmVsczogeE1hcC5zaXplID4gMCA/IEFycmF5LmZyb20oeE1hcC5rZXlzKCkpIDogdW5kZWZpbmVkLCB5TGFiZWxzOiB5TWFwLnNpemUgPiAwID8gQXJyYXkuZnJvbSh5TWFwLmtleXMoKSkgOiB1bmRlZmluZWQgfTtcclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogY29yZS9wcm9jZXNzb3JzL0hlYXRtYXBQcm9jZXNzb3IudHMgPT09XHJcbmltcG9ydCB7IENoYXJ0V2lkZ2V0LCBIZWF0bWFwRGF0YVJlc3VsdCB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgRmlsZVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9GaWxlU2VydmljZSc7XHJcbmltcG9ydCB7IFZhbHVlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL1ZhbHVlU2VydmljZSc7XHJcbmltcG9ydCB7IEFnZ3JlZ2F0b3IgfSBmcm9tICcuLi9zZXJ2aWNlcy9BZ2dyZWdhdG9yJztcclxuXHJcbmV4cG9ydCBjbGFzcyBIZWF0bWFwUHJvY2Vzc29yIHtcclxuICAgIHByaXZhdGUgZmlsZVNlcnZpY2U6IEZpbGVTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSB2YWx1ZVNlcnZpY2U6IFZhbHVlU2VydmljZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihmaWxlU2VydmljZTogRmlsZVNlcnZpY2UsIHZhbHVlU2VydmljZTogVmFsdWVTZXJ2aWNlKSB7XHJcbiAgICAgICAgdGhpcy5maWxlU2VydmljZSA9IGZpbGVTZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMudmFsdWVTZXJ2aWNlID0gdmFsdWVTZXJ2aWNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBwcm9jZXNzKHdpZGdldDogQ2hhcnRXaWRnZXQpOiBQcm9taXNlPEhlYXRtYXBEYXRhUmVzdWx0PiB7XHJcbiAgICAgICAgY29uc3Qgc291cmNlID0gd2lkZ2V0LmRhdGFTb3VyY2VzWzBdO1xyXG4gICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5maWxlU2VydmljZS5nZXRGaWxlcyhzb3VyY2UpO1xyXG4gICAgICAgIGNvbnN0IGdyaWQgPSBuZXcgTWFwPHN0cmluZywgTWFwPHN0cmluZywgbnVtYmVyW10+PigpO1xyXG4gICAgICAgIGNvbnN0IHhTZXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICAgICAgICBjb25zdCB5U2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xyXG4gICAgICAgICAgICBjb25zdCB4S2V5ID0gYXdhaXQgdGhpcy52YWx1ZVNlcnZpY2UucmVzb2x2ZUF4aXNWYWx1ZShmaWxlLCB3aWRnZXQueEF4aXNNb2RlLCB3aWRnZXQueEF4aXNQcm9wZXJ0eVswXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHlLZXkgPSBhd2FpdCB0aGlzLnZhbHVlU2VydmljZS5yZXNvbHZlQXhpc1ZhbHVlKGZpbGUsIHdpZGdldC55QXhpc01vZGUgfHwgJ2Zyb250bWF0dGVyJywgd2lkZ2V0LnlBeGlzUHJvcGVydHkpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWwgPSBhd2FpdCB0aGlzLnZhbHVlU2VydmljZS5yZXNvbHZlVmFsdWUoZmlsZSwgd2lkZ2V0LmJ1YmJsZVNpemVQcm9wZXJ0eSB8fCAndmFsdWUnKTsgXHJcblxyXG4gICAgICAgICAgICBpZiAodmFsID09PSBudWxsKSBjb250aW51ZTtcclxuICAgICAgICAgICAgY29uc3QgeFN0ciA9IFN0cmluZyh4S2V5KTtcclxuICAgICAgICAgICAgY29uc3QgeVN0ciA9IFN0cmluZyh5S2V5KTtcclxuICAgICAgICAgICAgeFNldC5hZGQoeFN0cik7XHJcbiAgICAgICAgICAgIHlTZXQuYWRkKHlTdHIpO1xyXG4gICAgICAgICAgICBpZiAoIWdyaWQuaGFzKHhTdHIpKSBncmlkLnNldCh4U3RyLCBuZXcgTWFwKCkpO1xyXG4gICAgICAgICAgICBpZiAoIWdyaWQuZ2V0KHhTdHIpIS5oYXMoeVN0cikpIGdyaWQuZ2V0KHhTdHIpIS5zZXQoeVN0ciwgW10pO1xyXG4gICAgICAgICAgICBncmlkLmdldCh4U3RyKSEuZ2V0KHlTdHIpIS5wdXNoKHZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHhMYWJlbHMgPSBBcnJheS5mcm9tKHhTZXQpLnNvcnQoKTtcclxuICAgICAgICBjb25zdCB5TGFiZWxzID0gQXJyYXkuZnJvbSh5U2V0KS5zb3J0KCk7XHJcbiAgICAgICAgY29uc3QgbWF0cml4OiBudW1iZXJbXVtdID0gW107XHJcbiAgICAgICAgbGV0IG1pbiA9IEluZmluaXR5OyBsZXQgbWF4ID0gLUluZmluaXR5O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgeUxhYmVscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCByb3c6IG51bWJlcltdID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgeExhYmVscy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gZ3JpZC5nZXQoeExhYmVsc1tqXSk/LmdldCh5TGFiZWxzW2ldKSB8fCBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbmFsVmFsID0gdmFsdWVzLmxlbmd0aCA+IDAgPyBBZ2dyZWdhdG9yLmFnZ3JlZ2F0ZSh2YWx1ZXMsICdzdW0nKSA6IDA7XHJcbiAgICAgICAgICAgICAgICByb3cucHVzaChmaW5hbFZhbCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmluYWxWYWwgPCBtaW4pIG1pbiA9IGZpbmFsVmFsO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpbmFsVmFsID4gbWF4KSBtYXggPSBmaW5hbFZhbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtYXRyaXgucHVzaChyb3cpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBtYXRyaXgsIHhMYWJlbHMsIHlMYWJlbHMsIG1pbjogbWluID09PSBJbmZpbml0eSA/IDAgOiBtaW4sIG1heDogbWF4ID09PSAtSW5maW5pdHkgPyAwIDogbWF4IH07XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IGNvcmUvcHJvY2Vzc29ycy9HaXRMaW5lUHJvY2Vzc29yLnRzID09PVxyXG5pbXBvcnQgeyBDaGFydFdpZGdldCwgVGFza0l0ZW0gfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IFRhc2tTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvVGFza1NlcnZpY2UnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdpdExpbmVQcm9jZXNzb3Ige1xyXG4gICAgcHJpdmF0ZSB0YXNrU2VydmljZTogVGFza1NlcnZpY2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IodGFza1NlcnZpY2U6IFRhc2tTZXJ2aWNlKSB7XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZSA9IHRhc2tTZXJ2aWNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBwcm9jZXNzKHdpZGdldDogQ2hhcnRXaWRnZXQpOiBQcm9taXNlPFRhc2tJdGVtW10+IHtcclxuICAgICAgICBjb25zdCBzb3VyY2UgPSB3aWRnZXQuZGF0YVNvdXJjZXNbMF07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1OTBEXHU3NTI4IFRvZG9XaWRnZXQgXHU3Njg0XHU2N0U1XHU4QkUyXHU5MDNCXHU4RjkxXHJcbiAgICAgICAgY29uc3QgdG9kb0NvbmZpZzogYW55ID0ge1xyXG4gICAgICAgICAgICBzb3VyY2VUeXBlOiBzb3VyY2UudHlwZSxcclxuICAgICAgICAgICAgZm9sZGVyUGF0aDogc291cmNlLmZvbGRlclBhdGgsXHJcbiAgICAgICAgICAgIGZpbGVQYXRoOiBzb3VyY2UuZmlsZVBhdGgsXHJcbiAgICAgICAgICAgIGhpZGVDb21wbGV0ZWQ6IGZhbHNlLCAvLyBHaXRMaW5lIFx1OTcwMFx1ODk4MVx1NTM4Nlx1NTNGMlx1NjU3MFx1NjM2RVxyXG4gICAgICAgICAgICBzb3J0Qnk6ICdkZWZhdWx0J1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHRhc2tzID0gYXdhaXQgdGhpcy50YXNrU2VydmljZS5nZXRUYXNrcyh0b2RvQ29uZmlnKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBbXHU0RkVFXHU1OTBEXSBcdTU5MDRcdTc0MDZcdTdGMjlcdThGREJcdTVDNDJcdTdFQTcgKFZpc3VhbCBIaWVyYXJjaHkpXHJcbiAgICAgICAgdGFza3MuZm9yRWFjaCh0YXNrID0+IHtcclxuICAgICAgICAgICAgaWYgKHRhc2suaW5kZW50YXRpb24gPT09IHVuZGVmaW5lZCkgdGFzay5pbmRlbnRhdGlvbiA9IDA7XHJcblxyXG4gICAgICAgICAgICAvLyBcdTkwM0JcdThGOTEgMS4xOiBcdTRFRkJcdTUyQTFcdTdCMTRcdThCQjBcdTRGNUNcdTRFM0FcdTRFM0JcdTdFQkZcdUZGMENcdTUxNzZcdTVCNTBcdTRFRkJcdTUyQTFcdTRGNUNcdTRFM0FcdTY1MkZcdTdFQkZcclxuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU0RTAwXHU0RTJBXHU0RUZCXHU1MkExXHU4OEFCXHU2ODA3XHU4QkIwXHU0RTNBIGlzVGFza05vdGVTdWJ0YXNrXHVGRjBDXHU4QkY0XHU2NjBFXHU1QjgzXHU1QzVFXHU0RThFXHU2N0QwXHU0RTJBXHUyMDFDXHU0RUZCXHU1MkExXHU3QjE0XHU4QkIwXHUyMDFEXHU2NTg3XHU0RUY2XHJcbiAgICAgICAgICAgIC8vIFx1NjIxMVx1NEVFQ1x1NUMwNlx1NUI4M1x1NzY4NFx1N0YyOVx1OEZEQiArIDFcdUZGMENcdThGRDlcdTY4MzcgTGV2ZWwgMCAoTWFzdGVyKSBcdTc1NTlcdTdFRDlcdTk2OTBcdTVGNjJcdTc2ODRcdTIwMUNcdTY1ODdcdTRFRjZcdTgyODJcdTcwQjlcdTIwMURcdUZGMENMZXZlbCAxKyBcdTRFM0FcdTRFRkJcdTUyQTFcclxuICAgICAgICAgICAgaWYgKHRhc2suaXNUYXNrTm90ZVN1YnRhc2spIHtcclxuICAgICAgICAgICAgICAgIHRhc2suaW5kZW50YXRpb24gKz0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU5MDNCXHU4RjkxIDEuMjogXHU4ODRDXHU1MTg1XHU0RUZCXHU1MkExXHJcbiAgICAgICAgICAgIC8vIFx1NjcyQVx1N0YyOVx1OEZEQiAoaW5kZW50YXRpb249MCkgLT4gXHU0RTNCXHU3RUJGXHJcbiAgICAgICAgICAgIC8vIFx1N0YyOVx1OEZEQiAoaW5kZW50YXRpb24+MCkgLT4gXHU2NTJGXHU3RUJGXHJcbiAgICAgICAgICAgIC8vIChcdTY1RTBcdTk3MDBcdTk4OURcdTU5MTZcdTU5MDRcdTc0MDZcdUZGMENUYXNrU2VydmljZSBcdTg5RTNcdTY3OTBcdTc2ODQgaW5kZW50YXRpb24gXHU1REYyXHU3RUNGXHU3QjI2XHU1NDA4XHU2QjY0XHU5MDNCXHU4RjkxKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdTYzOTJcdTVFOEZcdUZGMUFcdTYzMDlcdTY1ODdcdTRFRjZcdThERUZcdTVGODQgKyBcdTg4NENcdTUzRjdcdUZGMENcdTRGRERcdThCQzFcdTY4MTFcdTcyQjZcdTdFRDNcdTY3ODRcdTk4N0FcdTVFOEZcclxuICAgICAgICB0YXNrcy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhLmZpbGUucGF0aCAhPT0gYi5maWxlLnBhdGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhLmZpbGUucGF0aC5sb2NhbGVDb21wYXJlKGIuZmlsZS5wYXRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYS5saW5lIC0gYi5saW5lO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGFza3M7XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IGNvcmUvRGF0YUVuZ2luZS50cyA9PT1cclxuaW1wb3J0IHsgQXBwLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQ2hhcnRXaWRnZXQsIENoYXJ0RGF0YVJlc3VsdCwgQnViYmxlRGF0YVJlc3VsdCwgSGVhdG1hcERhdGFSZXN1bHQsIFRhc2tJdGVtIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB7IEZpbGVTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9GaWxlU2VydmljZSc7XHJcbmltcG9ydCB7IFRhYmxlU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvVGFibGVTZXJ2aWNlJztcclxuaW1wb3J0IHsgVmFsdWVTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9WYWx1ZVNlcnZpY2UnO1xyXG5pbXBvcnQgeyBHcm91cGluZ1NlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL0dyb3VwaW5nU2VydmljZSc7XHJcbmltcG9ydCB7IFRhZ1NlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL1RhZ1NlcnZpY2UnO1xyXG5pbXBvcnQgeyBUYXNrU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvVGFza1NlcnZpY2UnOyAvLyBbXHU2NUIwXHU1ODlFXVxyXG5pbXBvcnQgeyBMaW5rUmVzb2x2ZXIgfSBmcm9tICcuL3NlcnZpY2VzL0xpbmtSZXNvbHZlcic7XHJcblxyXG5pbXBvcnQgeyBTdGFuZGFyZFByb2Nlc3NvciB9IGZyb20gJy4vcHJvY2Vzc29ycy9TdGFuZGFyZFByb2Nlc3Nvcic7XHJcbmltcG9ydCB7IEJ1YmJsZVByb2Nlc3NvciB9IGZyb20gJy4vcHJvY2Vzc29ycy9CdWJibGVQcm9jZXNzb3InO1xyXG5pbXBvcnQgeyBIZWF0bWFwUHJvY2Vzc29yIH0gZnJvbSAnLi9wcm9jZXNzb3JzL0hlYXRtYXBQcm9jZXNzb3InO1xyXG5pbXBvcnQgeyBHaXRMaW5lUHJvY2Vzc29yIH0gZnJvbSAnLi9wcm9jZXNzb3JzL0dpdExpbmVQcm9jZXNzb3InOyAvLyBbXHU2NUIwXHU1ODlFXVxyXG5pbXBvcnQgeyBTZXR0aW5nc01hbmFnZXIgfSBmcm9tICcuL1NldHRpbmdzTWFuYWdlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgRGF0YUVuZ2luZSB7XHJcbiAgICBwcml2YXRlIGZpbGVTZXJ2aWNlOiBGaWxlU2VydmljZTtcclxuICAgIHByaXZhdGUgdGFibGVTZXJ2aWNlOiBUYWJsZVNlcnZpY2U7XHJcbiAgICBwcml2YXRlIHZhbHVlU2VydmljZTogVmFsdWVTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBncm91cGluZ1NlcnZpY2U6IEdyb3VwaW5nU2VydmljZTtcclxuICAgIHByaXZhdGUgdGFnU2VydmljZTogVGFnU2VydmljZTtcclxuICAgIHByaXZhdGUgbGlua1Jlc29sdmVyOiBMaW5rUmVzb2x2ZXI7XHJcbiAgICBwcml2YXRlIHRhc2tTZXJ2aWNlOiBUYXNrU2VydmljZTsgXHJcblxyXG4gICAgcHJpdmF0ZSBzdGFuZGFyZFByb2Nlc3NvcjogU3RhbmRhcmRQcm9jZXNzb3I7XHJcbiAgICBwcml2YXRlIGJ1YmJsZVByb2Nlc3NvcjogQnViYmxlUHJvY2Vzc29yO1xyXG4gICAgcHJpdmF0ZSBoZWF0bWFwUHJvY2Vzc29yOiBIZWF0bWFwUHJvY2Vzc29yO1xyXG4gICAgcHJpdmF0ZSBnaXRMaW5lUHJvY2Vzc29yOiBHaXRMaW5lUHJvY2Vzc29yOyBcclxuXHJcbiAgICBwcml2YXRlIGFwcDogQXBwO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBzZXR0aW5nc01hbmFnZXI/OiBTZXR0aW5nc01hbmFnZXIpIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmZpbGVTZXJ2aWNlID0gbmV3IEZpbGVTZXJ2aWNlKGFwcCk7XHJcbiAgICAgICAgdGhpcy50YWJsZVNlcnZpY2UgPSBuZXcgVGFibGVTZXJ2aWNlKGFwcCk7XHJcbiAgICAgICAgdGhpcy50YWdTZXJ2aWNlID0gbmV3IFRhZ1NlcnZpY2UoYXBwKTtcclxuICAgICAgICB0aGlzLmxpbmtSZXNvbHZlciA9IG5ldyBMaW5rUmVzb2x2ZXIoYXBwKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTUxNzNcdTk1MkVcdUZGMUFcdTUyMURcdTU5Q0JcdTUzMTYgVGFza1NlcnZpY2VcclxuICAgICAgICBpZiAoc2V0dGluZ3NNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFza1NlcnZpY2UgPSBuZXcgVGFza1NlcnZpY2UoYXBwLCBzZXR0aW5nc01hbmFnZXIpO1xyXG4gICAgICAgICAgICB0aGlzLmdpdExpbmVQcm9jZXNzb3IgPSBuZXcgR2l0TGluZVByb2Nlc3Nvcih0aGlzLnRhc2tTZXJ2aWNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy52YWx1ZVNlcnZpY2UgPSBuZXcgVmFsdWVTZXJ2aWNlKGFwcCwgdGhpcy5saW5rUmVzb2x2ZXIsIHRoaXMudGFnU2VydmljZSk7XHJcbiAgICAgICAgdGhpcy5ncm91cGluZ1NlcnZpY2UgPSBuZXcgR3JvdXBpbmdTZXJ2aWNlKHRoaXMudGFnU2VydmljZSwgdGhpcy52YWx1ZVNlcnZpY2UpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc3RhbmRhcmRQcm9jZXNzb3IgPSBuZXcgU3RhbmRhcmRQcm9jZXNzb3IodGhpcy5maWxlU2VydmljZSwgdGhpcy50YWJsZVNlcnZpY2UsIHRoaXMudmFsdWVTZXJ2aWNlLCB0aGlzLmdyb3VwaW5nU2VydmljZSwgdGhpcy50YWdTZXJ2aWNlKTtcclxuICAgICAgICB0aGlzLmJ1YmJsZVByb2Nlc3NvciA9IG5ldyBCdWJibGVQcm9jZXNzb3IodGhpcy5maWxlU2VydmljZSwgdGhpcy52YWx1ZVNlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMuaGVhdG1hcFByb2Nlc3NvciA9IG5ldyBIZWF0bWFwUHJvY2Vzc29yKHRoaXMuZmlsZVNlcnZpY2UsIHRoaXMudmFsdWVTZXJ2aWNlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0R2l0TGluZURhdGEod2lkZ2V0OiBDaGFydFdpZGdldCk6IFByb21pc2U8VGFza0l0ZW1bXT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmdpdExpbmVQcm9jZXNzb3IpIHJldHVybiB0aGlzLmdpdExpbmVQcm9jZXNzb3IucHJvY2Vzcyh3aWRnZXQpO1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0Q2hhcnREYXRhKHc6IENoYXJ0V2lkZ2V0KSB7IHJldHVybiB0aGlzLnN0YW5kYXJkUHJvY2Vzc29yLnByb2Nlc3Modyk7IH1cclxuICAgIHB1YmxpYyBhc3luYyBnZXRCdWJibGVEYXRhKHc6IENoYXJ0V2lkZ2V0KSB7IHJldHVybiB0aGlzLmJ1YmJsZVByb2Nlc3Nvci5wcm9jZXNzKHcpOyB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0SGVhdG1hcERhdGEodzogQ2hhcnRXaWRnZXQpIHsgcmV0dXJuIHRoaXMuaGVhdG1hcFByb2Nlc3Nvci5wcm9jZXNzKHcpOyB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBhc3luYyBnZXRNYXJrZG93blRhYmxlRGF0YShmOiBURmlsZSkgeyByZXR1cm4gdGhpcy50YWJsZVNlcnZpY2UuZ2V0TWFya2Rvd25UYWJsZURhdGEoZik7IH1cclxuICAgIHB1YmxpYyBnZXRBdmFpbGFibGVQcm9wZXJ0aWVzKHA6IHN0cmluZykgeyByZXR1cm4gdGhpcy5maWxlU2VydmljZS5nZXRBdmFpbGFibGVQcm9wZXJ0aWVzKHApOyB9XHJcbiAgICBwdWJsaWMgZ2V0QXZhaWxhYmxlVGFncyhwOiBzdHJpbmcpIHsgcmV0dXJuIHRoaXMuZmlsZVNlcnZpY2UuZ2V0QXZhaWxhYmxlVGFncyhwKTsgfVxyXG4gICAgcHVibGljIGdldEF2YWlsYWJsZUxpbmtlZFByb3BlcnRpZXMocDogc3RyaW5nLCBsOiBzdHJpbmdbXSkgeyByZXR1cm4gdGhpcy5maWxlU2VydmljZS5nZXRBdmFpbGFibGVMaW5rZWRQcm9wZXJ0aWVzKHAsIGwpOyB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IGNvcmUvY29uc3RhbnRzLnRzID09PVxyXG5pbXBvcnQgeyBXaWRnZXRUeXBlLCBDaGFydFdpZGdldCwgTGlzdFdpZGdldCwgVG9kb1dpZGdldCwgTWFya2Rvd25XaWRnZXQgfSBmcm9tICcuL3R5cGVzJztcclxuaW1wb3J0IHsgQ29sb3JVdGlscyB9IGZyb20gJy4vdXRpbHMvQ29sb3JVdGlscyc7XHJcblxyXG5leHBvcnQgY29uc3QgV0lER0VUX0RFRkFVTFRTID0ge1xyXG4gICAgY2hhcnQ6ICgpOiBQYXJ0aWFsPENoYXJ0V2lkZ2V0PiA9PiAoe1xyXG4gICAgICAgIHR5cGU6ICdjaGFydCcsXHJcbiAgICAgICAgY2hhcnRUeXBlOiAnYmFyJyxcclxuICAgICAgICB0aXRsZTogJ1x1NjVCMFx1NUVGQVx1N0VERlx1OEJBMVx1NTZGRVx1ODg2OCcsXHJcbiAgICAgICAgZGF0YVNvdXJjZXM6IFt7IFxyXG4gICAgICAgICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSwgXHJcbiAgICAgICAgICAgIGZvbGRlclBhdGg6ICcvJywgXHJcbiAgICAgICAgICAgIGZpbHRlcjogeyB0YWdzOiBbXSB9LFxyXG4gICAgICAgICAgICBmaWx0ZXJDb25maWc6IHsgbG9naWM6ICdBTkQnLCBjb25kaXRpb25zOiBbXSB9XHJcbiAgICAgICAgfV0sXHJcbiAgICAgICAgeEF4aXNNb2RlOiAnY3JlYXRlZCcsXHJcbiAgICAgICAgeEF4aXNQcm9wZXJ0eTogWycnXSxcclxuICAgICAgICB5QXhpc1Byb3BlcnRpZXM6IFt7IG5hbWU6ICcnLCBhZ2dyZWdhdGlvbjogJ3N1bScsIHR5cGU6ICdmaWVsZCcsIGNvbG9yOiBDb2xvclV0aWxzLmdldERlZmF1bHRDb2xvcigpIH1dLFxyXG4gICAgICAgIHJlZkxpbmVzOiBbXSxcclxuICAgICAgICBlbmFibGVUb29sdGlwOiB0cnVlLFxyXG4gICAgICAgIHNob3dMZWdlbmQ6IHRydWUsXHJcbiAgICAgICAgc2hvd0RhdGFMYWJlbHM6IHRydWUsXHJcbiAgICAgICAgaXNEb251dDogZmFsc2UsXHJcbiAgICAgICAgZW5hYmxlTGlua1BlbmV0cmF0aW9uOiBmYWxzZVxyXG4gICAgfSksXHJcblxyXG4gICAgbGlzdDogKCk6IFBhcnRpYWw8TGlzdFdpZGdldD4gPT4gKHtcclxuICAgICAgICB0eXBlOiAnbGlzdCcsXHJcbiAgICAgICAgdGl0bGU6ICdcdTY1QjBcdTVFRkFcdTY1ODdcdTRFRjZcdTUyMTdcdTg4NjgnLFxyXG4gICAgICAgIGZvbGRlclBhdGg6ICcvJyxcclxuICAgICAgICBmaWx0ZXJUYWdzOiBbXSxcclxuICAgICAgICBzb3J0Qnk6ICdtb2RpZmllZCcsXHJcbiAgICAgICAgc29ydE9yZGVyOiAnZGVzYycsXHJcbiAgICAgICAgbGltaXQ6IDEwXHJcbiAgICB9KSxcclxuXHJcbiAgICB0b2RvOiAoKTogUGFydGlhbDxUb2RvV2lkZ2V0PiA9PiAoe1xyXG4gICAgICAgIHR5cGU6ICd0b2RvJyxcclxuICAgICAgICB0aXRsZTogJ1x1NjVCMFx1NUVGQVx1NUY4NVx1NTI5RVx1NkUwNVx1NTM1NScsXHJcbiAgICAgICAgZm9sZGVyUGF0aDogJy8nLFxyXG4gICAgICAgIGluY2x1ZGVTdWJmb2xkZXJzOiB0cnVlLFxyXG4gICAgICAgIGhpZGVDb21wbGV0ZWQ6IGZhbHNlXHJcbiAgICB9KSxcclxuXHJcbiAgICBtYXJrZG93bjogKCk6IFBhcnRpYWw8TWFya2Rvd25XaWRnZXQ+ID0+ICh7XHJcbiAgICAgICAgdHlwZTogJ21hcmtkb3duJyxcclxuICAgICAgICB0aXRsZTogJ1x1NjVCMFx1NUVGQSBNYXJrZG93biBcdTk3NjJcdTY3N0YnLFxyXG4gICAgICAgIGZpbGVQYXRoOiAnJyxcclxuICAgICAgICBtb2RlOiAncHJldmlldydcclxuICAgIH0pXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9XSURHRVRfVFlQRTogV2lkZ2V0VHlwZSA9ICdjaGFydCc7IiwgIi8vID09PSBGSUxFOiB1aS9jb21wb25lbnRzL1N1Z2dlc3RlcnMudHMgPT09XHJcbmltcG9ydCB7IEFic3RyYWN0SW5wdXRTdWdnZXN0LCBBcHAsIFRGb2xkZXIsIFRGaWxlLCBnZXRBbGxUYWdzIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZvbGRlclN1Z2dlc3QgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdDxURm9sZGVyPiB7XHJcbiAgICBwcml2YXRlIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlcihhcHAsIGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuaW5wdXRFbCA9IGlucHV0RWw7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IFRGb2xkZXJbXSB7XHJcbiAgICAgICAgY29uc3QgYWJzdHJhY3RGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCk7XHJcbiAgICAgICAgY29uc3QgZm9sZGVyczogVEZvbGRlcltdID0gW107XHJcbiAgICAgICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBhYnN0cmFjdEZpbGVzKSB7XHJcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmNvbnRhaW5zKGxvd2VyUXVlcnkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9sZGVycy5wdXNoKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmb2xkZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlclN1Z2dlc3Rpb24oZmlsZTogVEZvbGRlciwgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgZWwuc2V0VGV4dChmaWxlLnBhdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGVjdFN1Z2dlc3Rpb24oZmlsZTogVEZvbGRlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaW5wdXRFbC52YWx1ZSA9IGZpbGUucGF0aDtcclxuICAgICAgICB0aGlzLmlucHV0RWwudHJpZ2dlcignaW5wdXQnKTtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBGaWxlU3VnZ2VzdCBleHRlbmRzIEFic3RyYWN0SW5wdXRTdWdnZXN0PFRGaWxlPiB7XHJcbiAgICBwcml2YXRlIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlcihhcHAsIGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuaW5wdXRFbCA9IGlucHV0RWw7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IFRGaWxlW10ge1xyXG4gICAgICAgIGNvbnN0IGFsbEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xyXG4gICAgICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIHJldHVybiBhbGxGaWxlcy5maWx0ZXIoZiA9PiBmLnBhdGgudG9Mb3dlckNhc2UoKS5jb250YWlucyhsb3dlclF1ZXJ5KSkuc2xpY2UoMCwgMjApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlclN1Z2dlc3Rpb24oZmlsZTogVEZpbGUsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG4gICAgICAgIGVsLnNldFRleHQoZmlsZS5wYXRoKTtcclxuICAgICAgICBlbC5jcmVhdGVEaXYoeyBcclxuICAgICAgICAgICAgdGV4dDogZmlsZS5wYXJlbnQ/LnBhdGgsIFxyXG4gICAgICAgICAgICBzdHlsZTogJ2ZvbnQtc2l6ZTogMC44ZW07IGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsnIFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGVjdFN1Z2dlc3Rpb24oZmlsZTogVEZpbGUpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmlucHV0RWwudmFsdWUgPSBmaWxlLnBhdGg7XHJcbiAgICAgICAgdGhpcy5pbnB1dEVsLnRyaWdnZXIoJ2lucHV0Jyk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGFnU3VnZ2VzdCBleHRlbmRzIEFic3RyYWN0SW5wdXRTdWdnZXN0PHN0cmluZz4ge1xyXG4gICAgcHJpdmF0ZSBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBjdXN0b21UYWdzOiBzdHJpbmdbXSB8IG51bGwgPSBudWxsOyAvLyBbXHU2NUIwXHU1ODlFXSBcdTY1MkZcdTYzMDFcdTgxRUFcdTVCOUFcdTRFNDlcdTY1NzBcdTYzNkVcdTZFOTBcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyKGFwcCwgaW5wdXRFbCk7XHJcbiAgICAgICAgdGhpcy5pbnB1dEVsID0gaW5wdXRFbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBbXHU2NUIwXHU1ODlFXSBcdTUxNDFcdThCQjhcdTU5MTZcdTkwRThcdTY2RjRcdTY1QjBcdTVFRkFcdThCQUVcdTUyMTdcdTg4NjhcclxuICAgIHNldFN1Z2dlc3Rpb25zKHRhZ3M6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgdGhpcy5jdXN0b21UYWdzID0gdGFncztcclxuICAgIH1cclxuXHJcbiAgICBnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgICAgIGxldCBhbGxUYWdzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLmN1c3RvbVRhZ3MpIHtcclxuICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU4MUVBXHU1QjlBXHU0RTQ5XHU1MjE3XHU4ODY4XHVGRjA4XHU1N0ZBXHU0RThFXHU2NTg3XHU0RUY2XHU1OTM5XHU4RkM3XHU2RUU0XHVGRjA5XHJcbiAgICAgICAgICAgIGFsbFRhZ3MgPSB0aGlzLmN1c3RvbVRhZ3M7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gXHU5RUQ4XHU4QkE0XHU1NkRFXHU5MDAwXHU1MjMwXHU1MTY4XHU1RTkzXHU2MjZCXHU2M0NGXHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgY29uc3QgdGFncyA9ICh0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldFRhZ3MoKSBhcyBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+KTtcclxuICAgICAgICAgICAgYWxsVGFncyA9IE9iamVjdC5rZXlzKHRhZ3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFZhbCA9IHRoaXMuaW5wdXRFbC52YWx1ZTtcclxuICAgICAgICBjb25zdCBsYXN0Q29tbWFJbmRleCA9IGN1cnJlbnRWYWwubGFzdEluZGV4T2YoJywnKTtcclxuICAgICAgICBjb25zdCBjdXJyZW50U2VnbWVudCA9IGxhc3RDb21tYUluZGV4ID49IDAgPyBjdXJyZW50VmFsLnN1YnN0cmluZyhsYXN0Q29tbWFJbmRleCArIDEpLnRyaW0oKSA6IGN1cnJlbnRWYWwudHJpbSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghY3VycmVudFNlZ21lbnQpIHJldHVybiBhbGxUYWdzLnNsaWNlKDAsIDIwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGFsbFRhZ3MuZmlsdGVyKHQgPT4gdC50b0xvd2VyQ2FzZSgpLmNvbnRhaW5zKGN1cnJlbnRTZWdtZW50LnRvTG93ZXJDYXNlKCkpKS5zbGljZSgwLCAyMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyU3VnZ2VzdGlvbih0YWc6IHN0cmluZywgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgZWwuc2V0VGV4dCh0YWcpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGVjdFN1Z2dlc3Rpb24odGFnOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50VmFsID0gdGhpcy5pbnB1dEVsLnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGxhc3RDb21tYUluZGV4ID0gY3VycmVudFZhbC5sYXN0SW5kZXhPZignLCcpO1xyXG4gICAgICAgIGlmIChsYXN0Q29tbWFJbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRFbC52YWx1ZSA9IGN1cnJlbnRWYWwuc3Vic3RyaW5nKDAsIGxhc3RDb21tYUluZGV4ICsgMSkgKyAnICcgKyB0YWc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5pbnB1dEVsLnZhbHVlID0gdGFnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlucHV0RWwudHJpZ2dlcignaW5wdXQnKTtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9wZXJ0eVN1Z2dlc3QgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdDxzdHJpbmc+IHtcclxuICAgIHByaXZhdGUgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudDtcclxuICAgIHByaXZhdGUgcHJvcGVydGllczogc3RyaW5nW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQsIHByb3BlcnRpZXM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwLCBpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLmlucHV0RWwgPSBpbnB1dEVsO1xyXG4gICAgICAgIHRoaXMucHJvcGVydGllcyA9IHByb3BlcnRpZXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U3VnZ2VzdGlvbnMocHJvcGVydGllczogc3RyaW5nW10pIHtcclxuICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5maWx0ZXIocCA9PiBwLnRvTG93ZXJDYXNlKCkuY29udGFpbnMobG93ZXJRdWVyeSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlclN1Z2dlc3Rpb24ocHJvcDogc3RyaW5nLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICBlbC5zZXRUZXh0KHByb3ApO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGVjdFN1Z2dlc3Rpb24ocHJvcDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pbnB1dEVsLnZhbHVlID0gcHJvcDtcclxuICAgICAgICB0aGlzLmlucHV0RWwudHJpZ2dlcignaW5wdXQnKTtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IHVpL21vZGFscy9GaWx0ZXJDb25maWdNb2RhbC50cyA9PT1cclxuaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZywgQnV0dG9uQ29tcG9uZW50LCBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBGaWx0ZXJDb25maWcsIEZpbHRlckNvbmRpdGlvbiB9IGZyb20gJy4uLy4uL2NvcmUvdHlwZXMnO1xyXG5pbXBvcnQgeyBQcm9wZXJ0eVN1Z2dlc3QgfSBmcm9tICcuLi9jb21wb25lbnRzL1N1Z2dlc3RlcnMnO1xyXG5pbXBvcnQgeyBEYXRhRW5naW5lIH0gZnJvbSAnLi4vLi4vY29yZS9EYXRhRW5naW5lJztcclxuXHJcbmV4cG9ydCBjbGFzcyBGaWx0ZXJDb25maWdNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHByaXZhdGUgY29uZmlnOiBGaWx0ZXJDb25maWc7XHJcbiAgICBwcml2YXRlIG9uU2F2ZTogKGNvbmZpZzogRmlsdGVyQ29uZmlnKSA9PiB2b2lkO1xyXG4gICAgcHJpdmF0ZSBkYXRhRW5naW5lOiBEYXRhRW5naW5lO1xyXG4gICAgcHJpdmF0ZSBmaWxlUGF0aD86IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBhcHA6IEFwcCwgXHJcbiAgICAgICAgZGF0YUVuZ2luZTogRGF0YUVuZ2luZSwgXHJcbiAgICAgICAgaW5pdGlhbENvbmZpZzogRmlsdGVyQ29uZmlnIHwgdW5kZWZpbmVkLCBcclxuICAgICAgICBmaWxlUGF0aDogc3RyaW5nIHwgdW5kZWZpbmVkLFxyXG4gICAgICAgIG9uU2F2ZTogKGNvbmZpZzogRmlsdGVyQ29uZmlnKSA9PiB2b2lkXHJcbiAgICApIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMuZGF0YUVuZ2luZSA9IGRhdGFFbmdpbmU7XHJcbiAgICAgICAgdGhpcy5maWxlUGF0aCA9IGZpbGVQYXRoO1xyXG4gICAgICAgIHRoaXMub25TYXZlID0gb25TYXZlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY29uZmlnID0gaW5pdGlhbENvbmZpZyA/IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoaW5pdGlhbENvbmZpZykpIDogeyBsb2dpYzogJ0FORCcsIGNvbmRpdGlvbnM6IFtdIH07XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy5jb25kaXRpb25zKSB0aGlzLmNvbmZpZy5jb25kaXRpb25zID0gW107XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy5sb2dpYykgdGhpcy5jb25maWcubG9naWMgPSAnQU5EJztcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1OTE0RFx1N0Y2RVx1OEZDN1x1NkVFNFx1Njc2MVx1NEVGNicgfSk7XHJcblxyXG4gICAgICAgIC8vIFtcdTY1QjBcdTU4OUVdIFx1NUJGOVx1NkJENFx1NkEyMVx1NUYwRlx1NUYwMFx1NTE3M1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1NTkxQVx1N0VGNFx1NUJGOVx1NkJENFx1NkEyMVx1NUYwRiAoU3BsaXQgU2VyaWVzKScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdTVGMDBcdTU0MkZcdTU0MEVcdUZGMENcdTZCQ0ZcdTRFMDBcdTY3NjFcdThGQzdcdTZFRTRcdTg5QzRcdTUyMTlcdTVDMDZcdTc1MUZcdTYyMTBcdTRFMDBcdTY3NjFcdTcyRUNcdTdBQ0JcdTc2ODRcdTY2RjJcdTdFQkYvXHU2N0YxXHU3MkI2XHU1NkZFXHVGRjBDXHU3NTI4XHU0RThFXHU2NTcwXHU2MzZFXHU1QkY5XHU2QkQ0XHUzMDAyJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0ID0+IHRcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLmNvbmZpZy5lbmFibGVTcGxpdFNlcmllcyB8fCBmYWxzZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZSh2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5lbmFibGVTcGxpdFNlcmllcyA9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTsgLy8gXHU1MjM3XHU2NUIwXHU3NTRDXHU5NzYyXHU3MkI2XHU2MDAxXHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NUYwMFx1NTQyRlx1NEU4Nlx1NUJGOVx1NkJENFx1NkEyMVx1NUYwRlx1RkYwQ1x1OTY5MFx1ODVDRlx1OTAzQlx1OEY5MVx1OTAwOVx1NjJFOVx1RkYwOFx1NTZFMFx1NEUzQVx1NkJDRlx1Njc2MVx1ODlDNFx1NTIxOVx1NzJFQ1x1N0FDQlx1RkYwOVxyXG4gICAgICAgIGlmICghdGhpcy5jb25maWcuZW5hYmxlU3BsaXRTZXJpZXMpIHtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1N0VDNFx1NTQwOFx1OTAzQlx1OEY5MScpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYygnXHU1OTFBXHU2NzYxXHU4OUM0XHU1MjE5XHU0RTRCXHU5NUY0XHU3Njg0XHU1MTczXHU3Q0ZCJylcclxuICAgICAgICAgICAgICAgIC5hZGREcm9wZG93bihkID0+IGRcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdBTkQnLCAnXHU2RUUxXHU4REIzXHU2MjQwXHU2NzA5XHU2NzYxXHU0RUY2IChBTkQpJylcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdPUicsICdcdTZFRTFcdThEQjNcdTRFRkJcdTRFMDBcdTY3NjFcdTRFRjYgKE9SKScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMuY29uZmlnLmxvZ2ljKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZSh2ID0+IHsgdGhpcy5jb25maWcubG9naWMgPSB2IGFzIGFueTsgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbGlzdENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ2RsLWZpbHRlci1saXN0Jyk7XHJcbiAgICAgICAgbGlzdENvbnRhaW5lci5zdHlsZS5tYXhIZWlnaHQgPSAnNDAwcHgnO1xyXG4gICAgICAgIGxpc3RDb250YWluZXIuc3R5bGUub3ZlcmZsb3dZID0gJ2F1dG8nO1xyXG4gICAgICAgIGxpc3RDb250YWluZXIuc3R5bGUubWFyZ2luID0gJzEwcHggMCc7XHJcbiAgICAgICAgbGlzdENvbnRhaW5lci5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XHJcbiAgICAgICAgbGlzdENvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JztcclxuICAgICAgICBsaXN0Q29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAnMTBweCc7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5jb25kaXRpb25zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBsaXN0Q29udGFpbmVyLmNyZWF0ZURpdih7IHRleHQ6ICdcdTY2ODJcdTY1RTBcdThGQzdcdTZFRTRcdTY3NjFcdTRFRjYnLCBzdHlsZTogJ3RleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpOyBwYWRkaW5nOiAyMHB4OycgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jb25maWcuY29uZGl0aW9ucy5mb3JFYWNoKChjb25kLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDb25kaXRpb25Sb3cobGlzdENvbnRhaW5lciwgY29uZCwgaW5kZXgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZvb3RlciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ2RsLW1vZGFsLWZvb3RlcicpO1xyXG4gICAgICAgIGZvb3Rlci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgIGZvb3Rlci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdzcGFjZS1iZXR3ZWVuJztcclxuICAgICAgICBmb290ZXIuc3R5bGUubWFyZ2luVG9wID0gJzIwcHgnO1xyXG5cclxuICAgICAgICBuZXcgQnV0dG9uQ29tcG9uZW50KGZvb3RlcilcclxuICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJysgXHU2REZCXHU1MkEwXHU2NzYxXHU0RUY2JylcclxuICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuY29uZGl0aW9ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcclxuICAgICAgICAgICAgICAgICAgICBjb2x1bW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yOiAnZXEnLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBhY3Rpb25Hcm91cCA9IGZvb3Rlci5jcmVhdGVEaXYoeyBzdHlsZTogJ2Rpc3BsYXk6IGZsZXg7IGdhcDogMTBweDsnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG5ldyBCdXR0b25Db21wb25lbnQoYWN0aW9uR3JvdXApXHJcbiAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdTUzRDZcdTZEODgnKVxyXG4gICAgICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG5cclxuICAgICAgICBuZXcgQnV0dG9uQ29tcG9uZW50KGFjdGlvbkdyb3VwKVxyXG4gICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHU0RkREXHU1QjU4JylcclxuICAgICAgICAgICAgLnNldEN0YSgpXHJcbiAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TYXZlKHRoaXMuY29uZmlnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJDb25kaXRpb25Sb3coY29udGFpbmVyOiBIVE1MRWxlbWVudCwgY29uZDogRmlsdGVyQ29uZGl0aW9uLCBpbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3Qgcm93ID0gY29udGFpbmVyLmNyZWF0ZURpdignZGwtZmlsdGVyLXJvdycpO1xyXG4gICAgICAgIHJvdy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgIHJvdy5zdHlsZS5nYXAgPSAnOHB4JztcclxuICAgICAgICByb3cuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xyXG4gICAgICAgIHJvdy5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnOHB4JztcclxuICAgICAgICByb3cuc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpJztcclxuICAgICAgICByb3cuc3R5bGUucGFkZGluZyA9ICc4cHgnO1xyXG4gICAgICAgIHJvdy5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JztcclxuICAgICAgICByb3cuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xyXG5cclxuICAgICAgICBjb25zdCB0b2dnbGUgPSByb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xyXG4gICAgICAgIHRvZ2dsZS5jaGVja2VkID0gY29uZC5lbmFibGVkO1xyXG4gICAgICAgIHRvZ2dsZS5vbmNoYW5nZSA9IChlKSA9PiBjb25kLmVuYWJsZWQgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZDtcclxuXHJcbiAgICAgICAgY29uc3QgY29sSW5wdXQgPSByb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcgfSk7XHJcbiAgICAgICAgY29sSW5wdXQucGxhY2Vob2xkZXIgPSAnXHU1MjE3XHU1NDBEJztcclxuICAgICAgICBjb2xJbnB1dC52YWx1ZSA9IGNvbmQuY29sdW1uO1xyXG4gICAgICAgIGNvbElucHV0LnN0eWxlLmZsZXggPSAnMic7XHJcbiAgICAgICAgY29sSW5wdXQub25pbnB1dCA9IChlKSA9PiBjb25kLmNvbHVtbiA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBjb2xTdWdnZXN0ID0gbmV3IFByb3BlcnR5U3VnZ2VzdCh0aGlzLmFwcCwgY29sSW5wdXQsIFtdKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZmlsZVBhdGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YUVuZ2luZS5nZXRUYWJsZUhlYWRlcnNCeVBhdGgodGhpcy5maWxlUGF0aClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihoZWFkZXJzID0+IGNvbFN1Z2dlc3Quc2V0U3VnZ2VzdGlvbnMoaGVhZGVycykpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gY29uc29sZS5lcnJvcihlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7fVxyXG5cclxuICAgICAgICBjb25zdCBvcFNlbGVjdCA9IHJvdy5jcmVhdGVFbCgnc2VsZWN0Jyk7XHJcbiAgICAgICAgb3BTZWxlY3Quc3R5bGUud2lkdGggPSAnMTEwcHgnO1xyXG4gICAgICAgIGNvbnN0IG9wczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcclxuICAgICAgICAgICAgJ2VxJzogJ1x1N0I0OVx1NEU4RSAoPSknLCAnbmVxJzogJ1x1NEUwRFx1N0I0OVx1NEU4RSAoIT0pJywgXHJcbiAgICAgICAgICAgICdjb250YWlucyc6ICdcdTUzMDVcdTU0MkInLCAnbm90X2NvbnRhaW5zJzogJ1x1NEUwRFx1NTMwNVx1NTQyQicsXHJcbiAgICAgICAgICAgICdndCc6ICdcdTU5MjdcdTRFOEUgKD4pJywgJ2d0ZSc6ICdcdTU5MjdcdTRFOEVcdTdCNDlcdTRFOEUgKD49KScsICdsdCc6ICdcdTVDMEZcdTRFOEUgKDwpJywgJ2x0ZSc6ICdcdTVDMEZcdTRFOEVcdTdCNDlcdTRFOEUgKDw9KSdcclxuICAgICAgICB9O1xyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG9wcykuZm9yRWFjaCgoW2ssIHZdKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG8gPSBvcFNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB2YWx1ZTogaywgdGV4dDogdiB9KTtcclxuICAgICAgICAgICAgaWYgKGsgPT09IGNvbmQub3BlcmF0b3IpIG8uc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG9wU2VsZWN0Lm9uY2hhbmdlID0gKGUpID0+IGNvbmQub3BlcmF0b3IgPSAoZS50YXJnZXQgYXMgSFRNTFNlbGVjdEVsZW1lbnQpLnZhbHVlIGFzIGFueTtcclxuXHJcbiAgICAgICAgY29uc3QgdmFsSW5wdXQgPSByb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcgfSk7XHJcbiAgICAgICAgdmFsSW5wdXQucGxhY2Vob2xkZXIgPSAnXHU1MDNDJztcclxuICAgICAgICB2YWxJbnB1dC52YWx1ZSA9IGNvbmQudmFsdWU7XHJcbiAgICAgICAgdmFsSW5wdXQuc3R5bGUuZmxleCA9ICcyJztcclxuICAgICAgICB2YWxJbnB1dC5vbmlucHV0ID0gKGUpID0+IGNvbmQudmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsU3VnZ2VzdCA9IG5ldyBQcm9wZXJ0eVN1Z2dlc3QodGhpcy5hcHAsIHZhbElucHV0LCBbXSk7XHJcbiAgICAgICAgICAgIGNvbElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5maWxlUGF0aCAmJiBjb2xJbnB1dC52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YUVuZ2luZS5nZXRUYWJsZUNvbHVtblZhbHVlc0J5UGF0aCh0aGlzLmZpbGVQYXRoISwgY29sSW5wdXQudmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHZhbHMgPT4gdmFsU3VnZ2VzdC5zZXRTdWdnZXN0aW9ucyh2YWxzKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gY29uc29sZS5lcnJvcihlKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XHJcblxyXG4gICAgICAgIGNvbnN0IGRlbEJ0biA9IHJvdy5jcmVhdGVTcGFuKCdkbC1pY29uLWJ0bicpO1xyXG4gICAgICAgIHNldEljb24oZGVsQnRuLCAndHJhc2gnKTtcclxuICAgICAgICBkZWxCdG4uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xyXG4gICAgICAgIGRlbEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5jb25kaXRpb25zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogdWkvbW9kYWxzL2NvbmZpZy9CYXNlQ29uZmlnLnRzID09PVxyXG5pbXBvcnQgeyBBcHAsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IENoYXJ0V2lkZ2V0IH0gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS90eXBlcyc7XHJcbmltcG9ydCB7IERhdGFFbmdpbmUgfSBmcm9tICcuLi8uLi8uLi8uLi9jb3JlL0RhdGFFbmdpbmUnO1xyXG5pbXBvcnQgeyBGb2xkZXJTdWdnZXN0LCBGaWxlU3VnZ2VzdCwgVGFnU3VnZ2VzdCB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvU3VnZ2VzdGVycyc7XHJcbmltcG9ydCB7IEZpbHRlckNvbmZpZ01vZGFsIH0gZnJvbSAnLi4vRmlsdGVyQ29uZmlnTW9kYWwnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJhc2VDb25maWcge1xyXG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcclxuICAgIHByaXZhdGUgZGF0YUVuZ2luZTogRGF0YUVuZ2luZTtcclxuICAgIHByaXZhdGUgb25VcGRhdGU6ICgpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIGZpbHRlckNvbHVtblN1Z2dlc3Rpb25zOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBkYXRhRW5naW5lOiBEYXRhRW5naW5lLCBvblVwZGF0ZTogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuZGF0YUVuZ2luZSA9IGRhdGFFbmdpbmU7XHJcbiAgICAgICAgdGhpcy5vblVwZGF0ZSA9IG9uVXBkYXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVGaWx0ZXJDb2x1bW5TdWdnZXN0aW9ucyhwcm9wczogc3RyaW5nW10pIHtcclxuICAgICAgICB0aGlzLmZpbHRlckNvbHVtblN1Z2dlc3Rpb25zID0gcHJvcHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlcihlbDogSFRNTEVsZW1lbnQsIHc6IENoYXJ0V2lkZ2V0LCBvblNvdXJjZUNoYW5nZTogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIGVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1NTdGQVx1Nzg0MFx1OTE0RFx1N0Y2RScgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGVsKS5zZXROYW1lKCdcdTU2RkVcdTg4NjhcdTdDN0JcdTU3OEInKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZCA9PiBkXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdiYXInLCAnXHU2N0YxXHU3MkI2XHU1NkZFIChCYXIpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2xpbmUnLCAnXHU2Mjk4XHU3RUJGXHU1NkZFIChMaW5lKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdwaWUnLCAnXHU5OTdDXHU1NkZFIChQaWUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ3NjYXR0ZXInLCAnXHU2NTYzXHU3MEI5XHU1NkZFIChTY2F0dGVyKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdyYWRhcicsICdcdTk2RjdcdThGQkVcdTU2RkUgKFJhZGFyKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdoZWF0bWFwJywgJ1x1NzBFRFx1NTI5Qlx1NTZGRSAoSGVhdG1hcCknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignYnViYmxlJywgJ1x1NkMxNFx1NkNFMVx1NTZGRSAoQnViYmxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdoaXN0b2dyYW0nLCAnXHU3NkY0XHU2NUI5XHU1NkZFIChIaXN0b2dyYW0pJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dpdGxpbmUnLCAnXHU0RUZCXHU1MkExXHU1MjA2XHU2NTJGXHU1NkZFIChHaXRMaW5lKScpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUody5jaGFydFR5cGUpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UodiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdy5jaGFydFR5cGUgPSB2IGFzIGFueTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uVXBkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIFtcdTY1QjBcdTU4OUVdIEdpdExpbmUgXHU0RTVGXHU2NTJGXHU2MzAxXHU2NUI5XHU1NDExXHU1MjA3XHU2MzYyXHJcbiAgICAgICAgaWYgKHcuY2hhcnRUeXBlID09PSAnYmFyJyB8fCB3LmNoYXJ0VHlwZSA9PT0gJ2dpdGxpbmUnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpclNldHRpbmcgPSBuZXcgU2V0dGluZyhlbCkuc2V0TmFtZSgnXHU1RTAzXHU1QzQwXHU2NUI5XHU1NDExJyk7XHJcbiAgICAgICAgICAgIGlmICh3LmNoYXJ0VHlwZSA9PT0gJ2JhcicpIGRpclNldHRpbmcuc2V0RGVzYygnXHU2QzM0XHU1RTczXHU2NzYxXHU1RjYyXHU1NkZFJyk7XHJcbiAgICAgICAgICAgIGlmICh3LmNoYXJ0VHlwZSA9PT0gJ2dpdGxpbmUnKSBkaXJTZXR0aW5nLnNldERlc2MoJ1x1NUYwMFx1NTQyRlx1NTQwRVx1NEUzQVx1NkMzNFx1NUU3M1x1NjVGNlx1OTVGNFx1OEY3NFx1NkEyMVx1NUYwRicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZGlyU2V0dGluZy5hZGRUb2dnbGUodCA9PiB0XHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUody5pc0hvcml6b250YWwgfHwgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UodiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdy5pc0hvcml6b250YWwgPSB2O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25VcGRhdGUoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh3LmNoYXJ0VHlwZSA9PT0gJ2JhcicpIHtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoZWwpLnNldE5hbWUoJ1x1NTgwNlx1NTNFMFx1NkEyMVx1NUYwRicpLmFkZFRvZ2dsZSh0ID0+IHQuc2V0VmFsdWUody5pc1N0YWNrZWQgfHwgZmFsc2UpLm9uQ2hhbmdlKHYgPT4geyB3LmlzU3RhY2tlZCA9IHY7IHRoaXMub25VcGRhdGUoKTsgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHU2NTcwXHU2MzZFXHU2RTkwXHU5MTREXHU3RjZFJyB9KTtcclxuXHJcbiAgICAgICAgaWYgKCF3LmRhdGFTb3VyY2VzIHx8IHcuZGF0YVNvdXJjZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHcuZGF0YVNvdXJjZXMgPSBbeyBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSwgZm9sZGVyUGF0aDogJy8nLCBmaWx0ZXI6IHsgdGFnczogW10gfSB9XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc291cmNlID0gdy5kYXRhU291cmNlc1swXTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoZWwpLnNldE5hbWUoJ1x1NjU3MFx1NjM2RVx1NkU5MFx1N0M3Qlx1NTc4QicpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkID0+IGRcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2ZvbGRlcicsICdcdTY1ODdcdTRFRjZcdTU5MzlcdTgwNUFcdTU0MDgnKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZmlsZScsICdcdTUzNTVcdTY1ODdcdTRFRjZcdTg4NjhcdTY4M0MnKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHNvdXJjZS50eXBlIHx8ICdmb2xkZXInKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKHYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZS50eXBlID0gdiBhcyBhbnk7XHJcbiAgICAgICAgICAgICAgICAgICAgdy54QXhpc01vZGUgPSBzb3VyY2UudHlwZSA9PT0gJ2ZpbGUnID8gJ2Zyb250bWF0dGVyJyA6ICdjcmVhdGVkJztcclxuICAgICAgICAgICAgICAgICAgICB3LnhBeGlzUHJvcGVydHkgPSBbJyddO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25VcGRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBvblNvdXJjZUNoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBpZiAoc291cmNlLnR5cGUgPT09ICdmaWxlJykge1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhlbCkuc2V0TmFtZSgnXHU2NTg3XHU0RUY2XHU4REVGXHU1Rjg0JylcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHQuc2V0VmFsdWUoc291cmNlLmZpbGVQYXRoIHx8ICcnKTtcclxuICAgICAgICAgICAgICAgICAgICB0cnkgeyBuZXcgRmlsZVN1Z2dlc3QodGhpcy5hcHAsIHQuaW5wdXRFbCk7IH0gY2F0Y2goZSkge31cclxuICAgICAgICAgICAgICAgICAgICB0Lm9uQ2hhbmdlKHYgPT4geyBzb3VyY2UuZmlsZVBhdGggPSB2OyBvblNvdXJjZUNoYW5nZSgpOyB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGVsKS5zZXROYW1lKCdcdTY1NzBcdTYzNkVcdTZFOTBcdTY1ODdcdTRFRjZcdTU5MzknKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQodCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdC5zZXRWYWx1ZShzb3VyY2UuZm9sZGVyUGF0aCB8fCAnLycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7IG5ldyBGb2xkZXJTdWdnZXN0KHRoaXMuYXBwLCB0LmlucHV0RWwpOyB9IGNhdGNoKGUpIHt9XHJcbiAgICAgICAgICAgICAgICAgICAgdC5vbkNoYW5nZSh2ID0+IHsgc291cmNlLmZvbGRlclBhdGggPSB2OyBvblNvdXJjZUNoYW5nZSgpOyB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoZWwpLnNldE5hbWUoJ1x1NjgwN1x1N0I3RVx1OEZDN1x1NkVFNCcpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZS5maWx0ZXIpIHNvdXJjZS5maWx0ZXIgPSB7IHRhZ3M6IFtdIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdC5zZXRWYWx1ZShzb3VyY2UuZmlsdGVyLnRhZ3Muam9pbignLCAnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHsgbmV3IFRhZ1N1Z2dlc3QodGhpcy5hcHAsIHQuaW5wdXRFbCk7IH0gY2F0Y2goZSkge31cclxuICAgICAgICAgICAgICAgICAgICB0Lm9uQ2hhbmdlKHYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UuZmlsdGVyLnRhZ3MgPSB2LnNwbGl0KC9bLFx1RkYwQ10vKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmaWx0ZXJDb250YWluZXIgPSBlbC5jcmVhdGVEaXYoeyBzdHlsZTogJ21hcmdpbi10b3A6IDEwcHg7IHBhZGRpbmc6IDEwcHg7IGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTsgYm9yZGVyLXJhZGl1czogNHB4OycgfSk7XHJcbiAgICAgICAgY29uc3QgaW5mb1RleHQgPSBzb3VyY2UuZmlsdGVyQ29uZmlnICYmIHNvdXJjZS5maWx0ZXJDb25maWcuY29uZGl0aW9ucy5sZW5ndGggPiAwID8gYFx1NURGMlx1NTQyRlx1NzUyOCAke3NvdXJjZS5maWx0ZXJDb25maWcuY29uZGl0aW9ucy5sZW5ndGh9IFx1Njc2MVx1ODlDNFx1NTIxOWAgOiAnXHU2NzJBXHU5MTREXHU3RjZFXHU4RkM3XHU2RUU0XHU4OUM0XHU1MjE5JztcclxuICAgICAgICBjb25zdCBidG5Sb3cgPSBmaWx0ZXJDb250YWluZXIuY3JlYXRlRGl2KHsgc3R5bGU6ICdkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7JyB9KTtcclxuICAgICAgICBidG5Sb3cuY3JlYXRlU3Bhbih7IHRleHQ6IGluZm9UZXh0LCBzdHlsZTogJ2NvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsgZm9udC1zaXplOiAwLjllbTsnIH0pO1xyXG4gICAgICAgIGNvbnN0IGVkaXRCdG4gPSBidG5Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1OTE0RFx1N0Y2RVx1OEZDN1x1NkVFNFx1Njc2MVx1NEVGNicgfSk7XHJcbiAgICAgICAgZWRpdEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBuZXcgRmlsdGVyQ29uZmlnTW9kYWwodGhpcy5hcHAsIHRoaXMuZGF0YUVuZ2luZSwgc291cmNlLmZpbHRlckNvbmZpZywgc291cmNlLnR5cGUgPT09ICdmaWxlJyA/IHNvdXJjZS5maWxlUGF0aCA6IHVuZGVmaW5lZCwgKG5ld0NvbmZpZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgc291cmNlLmZpbHRlckNvbmZpZyA9IG5ld0NvbmZpZztcclxuICAgICAgICAgICAgICAgIHRoaXMub25VcGRhdGUoKTtcclxuICAgICAgICAgICAgfSkub3BlbigpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IHVpL21vZGFscy9jb25maWcvY29tcG9uZW50cy9ZQXhpc0NvbmZpZy50cyA9PT1cclxuaW1wb3J0IHsgQXBwLCBTZXR0aW5nLCBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBDaGFydFdpZGdldCB9IGZyb20gJy4uLy4uLy4uLy4uL2NvcmUvdHlwZXMnO1xyXG5pbXBvcnQgeyBQcm9wZXJ0eVN1Z2dlc3QsIFRhZ1N1Z2dlc3QgfSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL1N1Z2dlc3RlcnMnO1xyXG5pbXBvcnQgeyBDb2xvclV0aWxzIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS91dGlscy9Db2xvclV0aWxzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBZQXhpc0NvbmZpZyB7XHJcbiAgICBwcml2YXRlIGFwcDogQXBwO1xyXG4gICAgcHJpdmF0ZSBvblVwZGF0ZTogKCkgPT4gdm9pZDtcclxuICAgIHByaXZhdGUgcHJvcFN1Z2dlc3RlcnM6IFByb3BlcnR5U3VnZ2VzdFtdID0gW107XHJcbiAgICBwcml2YXRlIHRhZ1N1Z2dlc3RlcnM6IFRhZ1N1Z2dlc3RbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvblVwZGF0ZTogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMub25VcGRhdGUgPSBvblVwZGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U3VnZ2VzdGVycygpOiBQcm9wZXJ0eVN1Z2dlc3RbXSB7IHJldHVybiB0aGlzLnByb3BTdWdnZXN0ZXJzOyB9XHJcbiAgICBwdWJsaWMgdXBkYXRlU3VnZ2VzdGVycyhwcm9wczogc3RyaW5nW10pIHsgdGhpcy5wcm9wU3VnZ2VzdGVycy5mb3JFYWNoKHMgPT4gcy5zZXRTdWdnZXN0aW9ucyhwcm9wcykpOyB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlcihlbDogSFRNTEVsZW1lbnQsIHc6IENoYXJ0V2lkZ2V0KSB7XHJcbiAgICAgICAgdGhpcy5wcm9wU3VnZ2VzdGVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMudGFnU3VnZ2VzdGVycyA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHcuZGF0YVNvdXJjZXNbMF07XHJcbiAgICAgICAgY29uc3QgaXNGaWxlTW9kZSA9IHNvdXJjZT8udHlwZSA9PT0gJ2ZpbGUnO1xyXG5cclxuICAgICAgICBlbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdZIFx1OEY3NCAvIFx1NjMwN1x1NjgwN1x1OTE0RFx1N0Y2RScsIHN0eWxlOiAnbWFyZ2luLWJvdHRvbTogMTBweDsnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFtcdTRGRUVcdTU5MERdIFx1NEY3Rlx1NzUyOCBGbGV4IFx1NUUwM1x1NUM0MFxyXG4gICAgICAgIGNvbnN0IGNvbnRyb2xzID0gZWwuY3JlYXRlRGl2KHsgY2xzOiAnZGwteS1heGlzLXN3aXRjaGVzJyB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFpc0ZpbGVNb2RlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsQ29udGFpbmVyID0gY29udHJvbHMuY3JlYXRlRGl2KHsgc3R5bGU6ICdkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOycgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsVG9nZ2xlID0gbmV3IFNldHRpbmcodG90YWxDb250YWluZXIpLmFkZFRvZ2dsZSh0ID0+IHQuc2V0VmFsdWUody5pc1RvdGFsQ291bnQgfHwgZmFsc2UpLm9uQ2hhbmdlKHYgPT4geyB3LmlzVG90YWxDb3VudCA9IHY7IHRoaXMub25VcGRhdGUoKTsgfSkpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZEljb24odG90YWxUb2dnbGUsICdzaWdtYScsICdcdTYwM0JcdTY1NzBcdTdFREZcdThCQTFcdTZBMjFcdTVGMEYnKTtcclxuICAgICAgICAgICAgdG90YWxUb2dnbGUuc2V0dGluZ0VsLnN0eWxlLmJvcmRlciA9ICdub25lJzsgXHJcbiAgICAgICAgICAgIHRvdGFsVG9nZ2xlLnNldHRpbmdFbC5zdHlsZS5wYWRkaW5nID0gJzAnOyBcclxuICAgICAgICAgICAgdG90YWxUb2dnbGUubmFtZUVsLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzhweCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjdW1Db250YWluZXIgPSBjb250cm9scy5jcmVhdGVEaXYoeyBzdHlsZTogJ2Rpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7JyB9KTtcclxuICAgICAgICBjb25zdCBjdW1Ub2dnbGUgPSBuZXcgU2V0dGluZyhjdW1Db250YWluZXIpLmFkZFRvZ2dsZSh0ID0+IHQuc2V0VmFsdWUody5pc0N1bXVsYXRpdmUgfHwgZmFsc2UpLm9uQ2hhbmdlKHYgPT4geyB3LmlzQ3VtdWxhdGl2ZSA9IHY7IHRoaXMub25VcGRhdGUoKTsgfSkpO1xyXG4gICAgICAgIHRoaXMuYWRkSWNvbihjdW1Ub2dnbGUsICd0cmVuZGluZy11cCcsICdcdTdEMkZcdTUyQTBcdTZBMjFcdTVGMEYnKTtcclxuICAgICAgICBjdW1Ub2dnbGUuc2V0dGluZ0VsLnN0eWxlLmJvcmRlciA9ICdub25lJzsgXHJcbiAgICAgICAgY3VtVG9nZ2xlLnNldHRpbmdFbC5zdHlsZS5wYWRkaW5nID0gJzAnOyBcclxuICAgICAgICBjdW1Ub2dnbGUubmFtZUVsLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzhweCc7XHJcblxyXG4gICAgICAgIGlmICh3LmlzVG90YWxDb3VudCAmJiAhaXNGaWxlTW9kZSkge1xyXG4gICAgICAgICAgICBlbC5jcmVhdGVEaXYoeyB0ZXh0OiAnXHUyNEQ4IFx1NUY1M1x1NTI0RFx1NkEyMVx1NUYwRlx1NUMwNlx1NUZGRFx1NzU2NVx1NTE3N1x1NEY1M1x1NUM1RVx1NjAyN1x1OTE0RFx1N0Y2RVx1RkYwQ1x1NzZGNFx1NjNBNVx1N0VERlx1OEJBMSBYIFx1OEY3NFx1NTIwNlx1N0VDNFx1NEUwQlx1NzY4NFx1NjU4N1x1Njg2M1x1NjU3MFx1OTFDRlx1MzAwMicsIHN0eWxlOiAnY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpOyBmb250LXN0eWxlOiBpdGFsaWM7IG1hcmdpbi1ib3R0b206IDIwcHg7IHBhZGRpbmc6IDEwcHg7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTsgYm9yZGVyLXJhZGl1czogNHB4OycgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcm9wZXJ0eU1ldHJpY3MoZWwsIHcsIGlzRmlsZU1vZGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlclByb3BlcnR5TWV0cmljcyhlbDogSFRNTEVsZW1lbnQsIHc6IENoYXJ0V2lkZ2V0LCBpc0ZpbGVNb2RlOiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc3QgeUNvbnRhaW5lciA9IGVsLmNyZWF0ZURpdih7IHN0eWxlOiAnbWFyZ2luLWJvdHRvbTogMjBweDsnIH0pO1xyXG4gICAgICAgIGxldCBsYWJlbFRleHQgPSBpc0ZpbGVNb2RlID8gJ1x1ODg2OFx1NjgzQ1x1NTIxN1x1NTQwRCAoXHU2NTcwXHU1MDNDXHU1MjE3KScgOiAody5lbmFibGVMaW5rUGVuZXRyYXRpb24gPyAnXHU3NkVFXHU2ODA3XHU3QjE0XHU4QkIwXHU1QzVFXHU2MDI3XHU1NDBEIChcdTdBN0ZcdTkwMEYpJyA6ICdcdTVGNTNcdTUyNERcdTdCMTRcdThCQjBcdTVDNUVcdTYwMjdcdTU0MEQnKTtcclxuICAgICAgICB5Q29udGFpbmVyLmNyZWF0ZURpdih7IHRleHQ6IGxhYmVsVGV4dCwgc3R5bGU6ICdjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7IGZvbnQtc2l6ZTogMC44ZW07IG1hcmdpbi1ib3R0b206IDhweDsnIH0pO1xyXG5cclxuICAgICAgICB3LnlBeGlzUHJvcGVydGllcy5mb3JFYWNoKCh5UHJvcCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCF5UHJvcC50eXBlKSB5UHJvcC50eXBlID0gJ2ZpZWxkJztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHlDb250YWluZXIuY3JlYXRlRGl2KCk7XHJcbiAgICAgICAgICAgIHJvdy5zdHlsZS5kaXNwbGF5ID0gJ2dyaWQnO1xyXG4gICAgICAgICAgICBjb25zdCBpc0xpbmUgPSB3LmNoYXJ0VHlwZSA9PT0gJ2xpbmUnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgZ3JpZENvbHMgPSBpc0ZpbGVNb2RlIFxyXG4gICAgICAgICAgICAgICAgPyAoaXNMaW5lID8gJzFmciA3MHB4IDMwcHggNDBweCAzMHB4JyA6ICcxZnIgNzBweCAzMHB4IDMwcHgnKVxyXG4gICAgICAgICAgICAgICAgOiAoaXNMaW5lID8gJzgwcHggMWZyIDcwcHggMzBweCA0MHB4IDMwcHgnIDogJzgwcHggMWZyIDcwcHggMzBweCAzMHB4Jyk7XHJcblxyXG4gICAgICAgICAgICByb3cuc3R5bGUuZ3JpZFRlbXBsYXRlQ29sdW1ucyA9IGdyaWRDb2xzO1xyXG4gICAgICAgICAgICByb3cuc3R5bGUuZ2FwID0gJzZweCc7XHJcbiAgICAgICAgICAgIHJvdy5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnOHB4JztcclxuICAgICAgICAgICAgcm93LnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcclxuICAgICAgICAgICAgcm93LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xyXG4gICAgICAgICAgICByb3cuc3R5bGUucGFkZGluZyA9ICc2cHgnO1xyXG4gICAgICAgICAgICByb3cuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCc7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWlzRmlsZU1vZGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVTZWwgPSByb3cuY3JlYXRlRWwoJ3NlbGVjdCcpO1xyXG4gICAgICAgICAgICAgICAgdHlwZVNlbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICAgICAgICAgIHR5cGVTZWwuY3JlYXRlRWwoJ29wdGlvbicsIHsgdmFsdWU6ICdmaWVsZCcsIHRleHQ6ICdcdTVDNUVcdTYwMjcnIH0pLnNlbGVjdGVkID0geVByb3AudHlwZSA9PT0gJ2ZpZWxkJztcclxuICAgICAgICAgICAgICAgIHR5cGVTZWwuY3JlYXRlRWwoJ29wdGlvbicsIHsgdmFsdWU6ICd0YWcnLCB0ZXh0OiAnXHU2ODA3XHU3QjdFJyB9KS5zZWxlY3RlZCA9IHlQcm9wLnR5cGUgPT09ICd0YWcnO1xyXG4gICAgICAgICAgICAgICAgdHlwZVNlbC5vbmNoYW5nZSA9IChlKSA9PiB7IHlQcm9wLnR5cGUgPSAoZS50YXJnZXQgYXMgSFRNTFNlbGVjdEVsZW1lbnQpLnZhbHVlIGFzIGFueTsgeVByb3AubmFtZSA9ICcnOyB0aGlzLm9uVXBkYXRlKCk7IH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gcm93LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnIH0pO1xyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHlQcm9wLm5hbWU7XHJcbiAgICAgICAgICAgIGlucHV0LnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFpc0ZpbGVNb2RlICYmIHlQcm9wLnR5cGUgPT09ICd0YWcnKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9ICcjXHU2ODA3XHU3QjdFJztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRzID0gbmV3IFRhZ1N1Z2dlc3QodGhpcy5hcHAsIGlucHV0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFnU3VnZ2VzdGVycy5wdXNoKHRzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gaXNGaWxlTW9kZSA/ICdcdTUyMTdcdTU0MEQnIDogJ1x1NUM1RVx1NjAyN1x1NTQwRCc7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcyA9IG5ldyBQcm9wZXJ0eVN1Z2dlc3QodGhpcy5hcHAsIGlucHV0LCBbXSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BTdWdnZXN0ZXJzLnB1c2gocHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlucHV0Lm9uaW5wdXQgPSAoZSkgPT4geVByb3AubmFtZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNlbCA9IHJvdy5jcmVhdGVFbCgnc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgIHNlbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICAgICAgY29uc3QgYWdnTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0geyAnc3VtJzogJ1x1NkM0Mlx1NTQ4QycsICdjb3VudCc6ICdcdThCQTFcdTY1NzAnLCAnYXZnJzogJ1x1NUU3M1x1NTc0NycsICdtYXgnOiAnXHU2NzAwXHU1OTI3JywgJ21pbic6ICdcdTY3MDBcdTVDMEYnIH07XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGFnZ01hcCkuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IHNlbC5jcmVhdGVFbCgnb3B0aW9uJywgeyB2YWx1ZToga2V5LCB0ZXh0OiBhZ2dNYXBba2V5XSB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IHlQcm9wLmFnZ3JlZ2F0aW9uKSBvLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNlbC5vbmNoYW5nZSA9IChlKSA9PiB5UHJvcC5hZ2dyZWdhdGlvbiA9IChlLnRhcmdldCBhcyBIVE1MU2VsZWN0RWxlbWVudCkudmFsdWUgYXMgYW55O1xyXG4gICAgICAgICAgICBpZiAoIWlzRmlsZU1vZGUgJiYgeVByb3AudHlwZSA9PT0gJ3RhZycpIHsgc2VsLmRpc2FibGVkID0gdHJ1ZTsgc2VsLnZhbHVlID0gJ3N1bSc7IH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbENvbnRhaW5lciA9IHJvdy5jcmVhdGVEaXYoeyBzdHlsZTogJ2Rpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOycgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbCA9IGNvbENvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjb2xvcicgfSk7XHJcbiAgICAgICAgICAgIGNvbC52YWx1ZSA9IHlQcm9wLmNvbG9yIHx8IENvbG9yVXRpbHMuZ2V0RGVmYXVsdENvbG9yKCk7XHJcbiAgICAgICAgICAgIGNvbC5zdHlsZS53aWR0aCA9ICcyNXB4JzsgY29sLnN0eWxlLmhlaWdodCA9ICcyNXB4JzsgY29sLnN0eWxlLnBhZGRpbmcgPSAnMCc7IGNvbC5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7IGNvbC5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XHJcbiAgICAgICAgICAgIGNvbC5vbmNoYW5nZSA9IChlKSA9PiB5UHJvcC5jb2xvciA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpc0xpbmUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRvZ2dsZUNvbnRhaW5lciA9IHJvdy5jcmVhdGVEaXYoeyBzdHlsZTogJ2Rpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBoZWlnaHQ6IDEwMCU7IG1hcmdpbi10b3A6IDA7JyB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgU2V0dGluZyh0b2dnbGVDb250YWluZXIpLmFkZFRvZ2dsZSh0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0LnNldFZhbHVlKHlQcm9wLmVuYWJsZVBlcmNlbnRhZ2UgfHwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHQuc2V0VG9vbHRpcCgnXHU2NjJGXHU1NDI2XHU3NjdFXHU1MjA2XHU2QkQ0XHU2NjNFXHU3OTNBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdC5vbkNoYW5nZSh2ID0+IHsgeVByb3AuZW5hYmxlUGVyY2VudGFnZSA9IHY7IHRoaXMub25VcGRhdGUoKTsgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHMuc2V0TmFtZSgnJyk7IHMuaW5mb0VsLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgcy5zZXR0aW5nRWwuc3R5bGUuYm9yZGVyID0gJ25vbmUnOyBzLnNldHRpbmdFbC5zdHlsZS5wYWRkaW5nID0gJzAnOyBzLnNldHRpbmdFbC5zdHlsZS5taW5IZWlnaHQgPSAnYXV0byc7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0b2dnbGVFbCA9IHMuY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJy5jaGVja2JveC1jb250YWluZXInKTtcclxuICAgICAgICAgICAgICAgIGlmKHRvZ2dsZUVsKSAodG9nZ2xlRWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLm1hcmdpbiA9ICcwJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgcm0gPSByb3cuY3JlYXRlU3BhbignZGwtaWNvbi1idG4nKTtcclxuICAgICAgICAgICAgc2V0SWNvbihybSwgJ3RyYXNoJyk7XHJcbiAgICAgICAgICAgIHJtLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7IHJtLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7IHJtLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcclxuICAgICAgICAgICAgcm0ub25jbGljayA9ICgpID0+IHsgdy55QXhpc1Byb3BlcnRpZXMuc3BsaWNlKGluZGV4LCAxKTsgdGhpcy5vblVwZGF0ZSgpOyB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBhZGRZID0geUNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnKyBcdTZERkJcdTUyQTBcdTYzMDdcdTY4MDdcdTUyMTcnIH0pO1xyXG4gICAgICAgIGFkZFkub25jbGljayA9ICgpID0+IHsgdy55QXhpc1Byb3BlcnRpZXMucHVzaCh7IG5hbWU6ICcnLCBhZ2dyZWdhdGlvbjogJ3N1bScsIHR5cGU6ICdmaWVsZCcsIGNvbG9yOiBDb2xvclV0aWxzLmdldERlZmF1bHRDb2xvcigpIH0pOyB0aGlzLm9uVXBkYXRlKCk7IH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhZGRJY29uKHNldHRpbmc6IFNldHRpbmcsIGljb246IHN0cmluZywgbmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBmcmFnLmNyZWF0ZURpdigpO1xyXG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOyBjb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xyXG4gICAgICAgIGNvbnN0IGljb25TcGFuID0gY29udGFpbmVyLmNyZWF0ZVNwYW4oKTtcclxuICAgICAgICBzZXRJY29uKGljb25TcGFuLCBpY29uKTtcclxuICAgICAgICBpY29uU3Bhbi5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOyBpY29uU3Bhbi5zdHlsZS5tYXJnaW5SaWdodCA9ICc1cHgnO1xyXG4gICAgICAgIGNvbnRhaW5lci5jcmVhdGVTcGFuKHsgdGV4dDogbmFtZSB9KTtcclxuICAgICAgICBzZXR0aW5nLnNldE5hbWUoZnJhZyk7XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IHVpL21vZGFscy9jb25maWcvY29tcG9uZW50cy9YQXhpc0NvbmZpZy50cyA9PT1cclxuaW1wb3J0IHsgQXBwLCBTZXR0aW5nLCBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBDaGFydFdpZGdldCB9IGZyb20gJy4uLy4uLy4uLy4uL2NvcmUvdHlwZXMnO1xyXG5pbXBvcnQgeyBQcm9wZXJ0eVN1Z2dlc3QsIFRhZ1N1Z2dlc3QgfSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL1N1Z2dlc3RlcnMnO1xyXG5pbXBvcnQgeyBEYXRhRW5naW5lIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9EYXRhRW5naW5lJztcclxuXHJcbmV4cG9ydCBjbGFzcyBYQXhpc0NvbmZpZyB7XHJcbiAgICBwcml2YXRlIGFwcDogQXBwO1xyXG4gICAgcHJpdmF0ZSBkYXRhRW5naW5lOiBEYXRhRW5naW5lO1xyXG4gICAgcHJpdmF0ZSBvblVwZGF0ZTogKCkgPT4gdm9pZDtcclxuICAgIHByaXZhdGUgc3VnZ2VzdGVyczogUHJvcGVydHlTdWdnZXN0W10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZGF0YUVuZ2luZTogRGF0YUVuZ2luZSwgb25VcGRhdGU6ICgpID0+IHZvaWQpIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLmRhdGFFbmdpbmUgPSBkYXRhRW5naW5lO1xyXG4gICAgICAgIHRoaXMub25VcGRhdGUgPSBvblVwZGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U3VnZ2VzdGVycygpIHsgcmV0dXJuIHRoaXMuc3VnZ2VzdGVyczsgfVxyXG4gICAgcHVibGljIHVwZGF0ZVN1Z2dlc3RlcnMocHJvcHM6IHN0cmluZ1tdKSB7IHRoaXMuc3VnZ2VzdGVycy5mb3JFYWNoKHMgPT4gcy5zZXRTdWdnZXN0aW9ucyhwcm9wcykpOyB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlcihlbDogSFRNTEVsZW1lbnQsIHc6IENoYXJ0V2lkZ2V0LCBvblByb3BDaGFuZ2U/OiAoKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgdGhpcy5zdWdnZXN0ZXJzID0gW107XHJcbiAgICAgICAgZWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnWCBcdThGNzQgLyBcdTUyMDZcdTdFQzRcdTkxNERcdTdGNkUnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHcuZGF0YVNvdXJjZXNbMF07XHJcbiAgICAgICAgY29uc3QgaXNGaWxlTW9kZSA9IHNvdXJjZT8udHlwZSA9PT0gJ2ZpbGUnOyBcclxuXHJcbiAgICAgICAgaWYgKGlzRmlsZU1vZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJGaWxlTW9kZVNldHRpbmdzKGVsLCB3LCBvblByb3BDaGFuZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRm9sZGVyTW9kZVNldHRpbmdzKGVsLCB3LCBvblByb3BDaGFuZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlckZpbGVNb2RlU2V0dGluZ3MoZWw6IEhUTUxFbGVtZW50LCB3OiBDaGFydFdpZGdldCwgb25Qcm9wQ2hhbmdlPzogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGVsLmNyZWF0ZURpdih7IHN0eWxlOiAnbWFyZ2luLWJvdHRvbTogNXB4OycgfSk7XHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHcueEF4aXNQcm9wZXJ0eSkgfHwgdy54QXhpc1Byb3BlcnR5Lmxlbmd0aCA9PT0gMCkgdy54QXhpc1Byb3BlcnR5ID0gWycnXTtcclxuXHJcbiAgICAgICAgdy54QXhpc1Byb3BlcnR5LmZvckVhY2goKHByb3AsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoKTtcclxuICAgICAgICAgICAgcm93LnN0eWxlLmRpc3BsYXkgPSAnZ3JpZCc7IHJvdy5zdHlsZS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gJzFmciAzMHB4Jzsgcm93LnN0eWxlLmdhcCA9ICc4cHgnOyByb3cuc3R5bGUubWFyZ2luQm90dG9tID0gJzhweCc7IHJvdy5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IHJvdy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JyB9KTtcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBwcm9wOyBpbnB1dC5zdHlsZS53aWR0aCA9ICcxMDAlJzsgaW5wdXQucGxhY2Vob2xkZXIgPSAnXHU4RjkzXHU1MTY1XHU4ODY4XHU1OTM0XHU1MjE3XHU1NDBEJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHBzID0gbmV3IFByb3BlcnR5U3VnZ2VzdCh0aGlzLmFwcCwgaW5wdXQsIFtdKTtcclxuICAgICAgICAgICAgdGhpcy5zdWdnZXN0ZXJzLnB1c2gocHMpO1xyXG5cclxuICAgICAgICAgICAgaW5wdXQub25pbnB1dCA9IChlKSA9PiB3LnhBeGlzUHJvcGVydHlbaW5kZXhdID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICBpbnB1dC5vbmJsdXIgPSAoKSA9PiB7IGlmIChvblByb3BDaGFuZ2UpIG9uUHJvcENoYW5nZSgpOyB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgcm0gPSByb3cuY3JlYXRlU3BhbignZGwtaWNvbi1idG4nKTtcclxuICAgICAgICAgICAgc2V0SWNvbihybSwgJ3RyYXNoJyk7XHJcbiAgICAgICAgICAgIHJtLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7IHJtLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7IHJtLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcclxuICAgICAgICAgICAgcm0ub25jbGljayA9ICgpID0+IHsgXHJcbiAgICAgICAgICAgICAgICBpZiAody54QXhpc1Byb3BlcnR5Lmxlbmd0aCA+IDEpIHsgdy54QXhpc1Byb3BlcnR5LnNwbGljZShpbmRleCwgMSk7IHRoaXMub25VcGRhdGUoKTsgfSBcclxuICAgICAgICAgICAgICAgIGVsc2UgeyB3LnhBeGlzUHJvcGVydHlbMF0gPSAnJzsgdGhpcy5vblVwZGF0ZSgpOyB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcyA9IG5ldyBTZXR0aW5nKGVsKS5zZXREZXNjKCdcdTYzRDBcdTc5M0FcdUZGMUFcdThCRjdcdThGOTNcdTUxNjUgTWFya2Rvd24gXHU4ODY4XHU2ODNDXHU3Njg0XHU3QjJDXHU0RTAwXHU4ODRDXHU4ODY4XHU1OTM0XHU1NDBEXHU3OUYwXHU0RjVDXHU0RTNBIFggXHU4Rjc0XHUzMDAyJyk7XHJcbiAgICAgICAgcy5zZXR0aW5nRWwuc3R5bGUucGFkZGluZ1RvcCA9ICcwJztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlckZvbGRlck1vZGVTZXR0aW5ncyhlbDogSFRNTEVsZW1lbnQsIHc6IENoYXJ0V2lkZ2V0LCBvblByb3BDaGFuZ2U/OiAoKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgY29uc3QgbW9kZVNldHRpbmcgPSBuZXcgU2V0dGluZyhlbCkuc2V0RGVzYygnXHU5MDA5XHU2MkU5XHU3NTI4XHU0RThFXHU1MjA2XHU3RUM0XHU3Njg0XHU3RUY0XHU1RUE2Jyk7XHJcbiAgICAgICAgdGhpcy5hZGRJY29uKG1vZGVTZXR0aW5nLCAnYXJyb3ctcmlnaHQtY2lyY2xlJywgJ1ggXHU4Rjc0XHU2QTIxXHU1RjBGJyk7XHJcbiAgICAgICAgbW9kZVNldHRpbmcuYWRkRHJvcGRvd24oZCA9PiBkXHJcbiAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NyZWF0ZWQnLCAnXHU1MjFCXHU1RUZBXHU2NUU1XHU2NzFGJylcclxuICAgICAgICAgICAgLmFkZE9wdGlvbignbW9kaWZpZWQnLCAnXHU0RkVFXHU2NTM5XHU2NUY2XHU5NUY0JylcclxuICAgICAgICAgICAgLmFkZE9wdGlvbignZmlsZW5hbWUnLCAnXHU2NTg3XHU0RUY2XHU1NDBEJylcclxuICAgICAgICAgICAgLmFkZE9wdGlvbignZnJvbnRtYXR0ZXInLCAnXHU1QzVFXHU2MDI3XHU1MDNDJylcclxuICAgICAgICAgICAgLmFkZE9wdGlvbigndGFncycsICdcdTY4MDdcdTdCN0UnKVxyXG4gICAgICAgICAgICAuc2V0VmFsdWUody54QXhpc01vZGUpLm9uQ2hhbmdlKHYgPT4geyB3LnhBeGlzTW9kZSA9IHYgYXMgYW55OyB0aGlzLm9uVXBkYXRlKCk7IH0pKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAody54QXhpc01vZGUgPT09ICdmcm9udG1hdHRlcicgfHwgdy54QXhpc01vZGUgPT09ICd0YWdzJykge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBlbC5jcmVhdGVEaXYoeyBzdHlsZTogJ21hcmdpbi1ib3R0b206IDVweDsnIH0pO1xyXG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkody54QXhpc1Byb3BlcnR5KSB8fCB3LnhBeGlzUHJvcGVydHkubGVuZ3RoID09PSAwKSB3LnhBeGlzUHJvcGVydHkgPSBbJyddO1xyXG5cclxuICAgICAgICAgICAgLy8gW1x1NjgzOFx1NUZDM1x1NEZFRVx1NTkwRF0gXHU1ODlFXHU1MkEwIFRyeS1DYXRjaCBcdTVFNzZcdTYzRDBcdTRGOUJcdTlFRDhcdThCQTRcdTdBN0FcdTY1NzBcdTdFQzRcdUZGMENcdTk2MzJcdTZCNjIgRGF0YUVuZ2luZSBcdTVGMDJcdTVFMzhcdTVCRkNcdTgxRjRcdTZFMzJcdTY3RDNcdTRFMkRcdTY1QURcclxuICAgICAgICAgICAgbGV0IGF2YWlsYWJsZVByb3BzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZm9sZGVyUGF0aCA9IHcuZGF0YVNvdXJjZXM/LlswXT8uZm9sZGVyUGF0aCB8fCAnLyc7XHJcbiAgICAgICAgICAgICAgICBhdmFpbGFibGVQcm9wcyA9IHRoaXMuZGF0YUVuZ2luZS5nZXRBdmFpbGFibGVQcm9wZXJ0aWVzKGZvbGRlclBhdGgpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiW0RpZ2l0YWxMaWZlXSBGYWlsZWQgdG8gbG9hZCBhdmFpbGFibGUgcHJvcGVydGllczpcIiwgZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTRGRERcdTYzMDEgYXZhaWxhYmxlUHJvcHMgXHU0RTNBXHU3QTdBXHVGRjBDXHU1MTQxXHU4QkI4XHU3NTRDXHU5NzYyXHU3RUU3XHU3RUVEXHU2RTMyXHU2N0QzXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHcueEF4aXNQcm9wZXJ0eS5mb3JFYWNoKChwcm9wLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gY29udGFpbmVyLmNyZWF0ZURpdigpO1xyXG4gICAgICAgICAgICAgICAgcm93LnN0eWxlLmRpc3BsYXkgPSAnZ3JpZCc7IHJvdy5zdHlsZS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gJzFmciAzMHB4Jzsgcm93LnN0eWxlLmdhcCA9ICc4cHgnOyByb3cuc3R5bGUubWFyZ2luQm90dG9tID0gJzhweCc7IHJvdy5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gcm93LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnIH0pO1xyXG4gICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBwcm9wOyBpbnB1dC5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHcueEF4aXNNb2RlID09PSAndGFncycpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9ICdcdThGOTNcdTUxNjVcdTY4MDdcdTdCN0UgKCN0YWcpJztcclxuICAgICAgICAgICAgICAgICAgICBuZXcgVGFnU3VnZ2VzdCh0aGlzLmFwcCwgaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9ICdcdThGOTNcdTUxNjVcdTVDNUVcdTYwMjdcdTU0MEQnO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBzID0gbmV3IFByb3BlcnR5U3VnZ2VzdCh0aGlzLmFwcCwgaW5wdXQsIGF2YWlsYWJsZVByb3BzKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1Z2dlc3RlcnMucHVzaChwcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaW5wdXQub25pbnB1dCA9IChlKSA9PiB3LnhBeGlzUHJvcGVydHlbaW5kZXhdID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaW5wdXQub25ibHVyID0gKCkgPT4geyBpZiAob25Qcm9wQ2hhbmdlKSBvblByb3BDaGFuZ2UoKTsgfTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm0gPSByb3cuY3JlYXRlU3BhbignZGwtaWNvbi1idG4nKTtcclxuICAgICAgICAgICAgICAgIHNldEljb24ocm0sICd0cmFzaCcpO1xyXG4gICAgICAgICAgICAgICAgcm0uc3R5bGUuZGlzcGxheSA9ICdmbGV4Jzsgcm0uc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJzsgcm0uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xyXG4gICAgICAgICAgICAgICAgcm0ub25jbGljayA9ICgpID0+IHsgdy54QXhpc1Byb3BlcnR5LnNwbGljZShpbmRleCwgMSk7IHRoaXMub25VcGRhdGUoKTsgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBidG5UZXh0ID0gdy54QXhpc01vZGUgPT09ICd0YWdzJyA/ICcrIFx1NjgwN1x1N0I3RScgOiAnKyBcdTdFRjRcdTVFQTYnO1xyXG4gICAgICAgICAgICBjb25zdCBhZGRCdG4gPSBjb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogYnRuVGV4dCB9KTtcclxuICAgICAgICAgICAgYWRkQnRuLm9uY2xpY2sgPSAoKSA9PiB7IHcueEF4aXNQcm9wZXJ0eS5wdXNoKCcnKTsgdGhpcy5vblVwZGF0ZSgpOyB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKHcueEF4aXNNb2RlID09PSAnZnJvbnRtYXR0ZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgY29uc3QgbGlua1NldHRpbmcgPSBuZXcgU2V0dGluZyhlbCkuc2V0RGVzYygnXHU2NjJGXHU1NDI2XHU4RkZEXHU4RTJBXHU1M0NDXHU5NEZFXHU3QjE0XHU4QkIwXHU0RTJEXHU3Njg0XHU1QzVFXHU2MDI3XHU1MDNDJyk7XHJcbiAgICAgICAgICAgICAgICAgdGhpcy5hZGRJY29uKGxpbmtTZXR0aW5nLCAnbGluaycsICdcdTUzQ0NcdTk0RkVcdTdBN0ZcdTkwMEYnKTtcclxuICAgICAgICAgICAgICAgICBsaW5rU2V0dGluZy5hZGRUb2dnbGUodCA9PiB0LnNldFZhbHVlKHcuZW5hYmxlTGlua1BlbmV0cmF0aW9uIHx8IGZhbHNlKS5vbkNoYW5nZSh2ID0+IHsgdy5lbmFibGVMaW5rUGVuZXRyYXRpb24gPSB2OyB0aGlzLm9uVXBkYXRlKCk7IH0pKTtcclxuICAgICAgICAgICAgICAgICBsaW5rU2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuYm9yZGVyVG9wID0gJ25vbmUnOyBsaW5rU2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuYm9yZGVyQm90dG9tID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgIGlmICh3LnhBeGlzUHJvcGVydHkubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFuc1NldHRpbmcgPSBuZXcgU2V0dGluZyhlbCkuc2V0RGVzYygnXHU1QzA2XHU2QkNGXHU0RTJBXHU1QzVFXHU2MDI3XHU0RjVDXHU0RTNBXHU0RTAwXHU0RTJBXHU3MkVDXHU3QUNCXHU3Njg0XHU1MjA2XHU3RUM0XHU4RkRCXHU4ODRDXHU2QTJBXHU1NDExXHU1QkY5XHU2QkQ0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkSWNvbih0cmFuc1NldHRpbmcsICdjb2x1bW5zJywgJ1x1OEY2Q1x1N0Y2RSBYIFx1OEY3NFx1NUM1RVx1NjAyNycpO1xyXG4gICAgICAgICAgICAgICAgICAgICB0cmFuc1NldHRpbmcuYWRkVG9nZ2xlKHQgPT4gdC5zZXRWYWx1ZSh3LmVuYWJsZVRyYW5zcG9zZSB8fCBmYWxzZSkub25DaGFuZ2UodiA9PiB7IHcuZW5hYmxlVHJhbnNwb3NlID0gdjsgdGhpcy5vblVwZGF0ZSgpOyB9KSk7XHJcbiAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkSWNvbihzZXR0aW5nOiBTZXR0aW5nLCBpY29uOiBzdHJpbmcsIG5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZnJhZy5jcmVhdGVEaXYoKTtcclxuICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsgY29udGFpbmVyLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcclxuICAgICAgICBjb25zdCBpY29uU3BhbiA9IGNvbnRhaW5lci5jcmVhdGVTcGFuKCk7IHNldEljb24oaWNvblNwYW4sIGljb24pO1xyXG4gICAgICAgIGljb25TcGFuLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7IGljb25TcGFuLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzVweCc7XHJcbiAgICAgICAgY29udGFpbmVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBuYW1lIH0pO1xyXG4gICAgICAgIHNldHRpbmcuc2V0TmFtZShmcmFnKTtcclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogdWkvbW9kYWxzL2NvbmZpZy9jb21wb25lbnRzL1JlZkxpbmVDb25maWcudHMgPT09XHJcbmltcG9ydCB7IFNldHRpbmcsIHNldEljb24gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IENoYXJ0V2lkZ2V0IH0gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS90eXBlcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUmVmTGluZUNvbmZpZyB7XHJcbiAgICBwdWJsaWMgcmVuZGVyKGVsOiBIVE1MRWxlbWVudCwgdzogQ2hhcnRXaWRnZXQsIG9uVXBkYXRlOiAoKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgZWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHU1M0MyXHU4MDAzXHU3RUJGIChSZWZlcmVuY2UgTGluZXMpJyB9KTtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBlbC5jcmVhdGVEaXYoeyBzdHlsZTogJ21hcmdpbi1ib3R0b206IDIwcHg7JyB9KTtcclxuXHJcbiAgICAgICAgaWYgKCF3LnJlZkxpbmVzKSB3LnJlZkxpbmVzID0gW107XHJcblxyXG4gICAgICAgIHcucmVmTGluZXMuZm9yRWFjaCgobGluZSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgcm93ID0gY29udGFpbmVyLmNyZWF0ZURpdigpO1xyXG4gICAgICAgICAgICByb3cuc3R5bGUuZGlzcGxheSA9ICdncmlkJztcclxuICAgICAgICAgICAgcm93LnN0eWxlLmdyaWRUZW1wbGF0ZUNvbHVtbnMgPSAnODBweCAxZnIgNDBweCAzMHB4JztcclxuICAgICAgICAgICAgcm93LnN0eWxlLmdhcCA9ICc4cHgnO1xyXG4gICAgICAgICAgICByb3cuc3R5bGUubWFyZ2luQm90dG9tID0gJzhweCc7XHJcbiAgICAgICAgICAgIHJvdy5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgIHJvdy5zdHlsZS5iYWNrZ3JvdW5kID0gJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XHJcbiAgICAgICAgICAgIHJvdy5zdHlsZS5wYWRkaW5nID0gJzVweCc7XHJcbiAgICAgICAgICAgIHJvdy5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbElucHV0ID0gcm93LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ251bWJlcicgfSk7XHJcbiAgICAgICAgICAgIHZhbElucHV0LnBsYWNlaG9sZGVyID0gJ1x1NTAzQyc7XHJcbiAgICAgICAgICAgIHZhbElucHV0LnZhbHVlID0gU3RyaW5nKGxpbmUudmFsdWUpO1xyXG4gICAgICAgICAgICB2YWxJbnB1dC5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICAgICAgdmFsSW5wdXQub25pbnB1dCA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsaW5lLnZhbHVlID0gTnVtYmVyKChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBvblVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbGFiZWxJbnB1dCA9IHJvdy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JyB9KTtcclxuICAgICAgICAgICAgbGFiZWxJbnB1dC5wbGFjZWhvbGRlciA9ICdcdTY4MDdcdTdCN0UgKFx1NTNFRlx1OTAwOSknO1xyXG4gICAgICAgICAgICBsYWJlbElucHV0LnZhbHVlID0gbGluZS5sYWJlbCB8fCAnJztcclxuICAgICAgICAgICAgbGFiZWxJbnB1dC5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICAgICAgbGFiZWxJbnB1dC5vbmlucHV0ID0gKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGxpbmUubGFiZWwgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBvblVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY29sQ29udGFpbmVyID0gcm93LmNyZWF0ZURpdigpO1xyXG4gICAgICAgICAgICBjb25zdCBjb2wgPSBjb2xDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY29sb3InIH0pO1xyXG4gICAgICAgICAgICBjb2wudmFsdWUgPSBsaW5lLmNvbG9yIHx8ICcjZmYwMDAwJztcclxuICAgICAgICAgICAgY29sLnN0eWxlLndpZHRoID0gJzI1cHgnOyBjb2wuc3R5bGUuaGVpZ2h0ID0gJzI1cHgnOyBjb2wuc3R5bGUuYm9yZGVyID0gJ25vbmUnOyBjb2wuc3R5bGUucGFkZGluZyA9ICcwJzsgY29sLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcclxuICAgICAgICAgICAgY29sLm9uY2hhbmdlID0gKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGxpbmUuY29sb3IgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBvblVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgcm0gPSByb3cuY3JlYXRlU3BhbignZGwtaWNvbi1idG4nKTtcclxuICAgICAgICAgICAgc2V0SWNvbihybSwgJ3RyYXNoJyk7XHJcbiAgICAgICAgICAgIHJtLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcclxuICAgICAgICAgICAgcm0ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHcucmVmTGluZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgIG9uVXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZEJ0biA9IGNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnKyBcdTZERkJcdTUyQTBcdTUzQzJcdTgwMDNcdTdFQkYnIH0pO1xyXG4gICAgICAgIGFkZEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB3LnJlZkxpbmVzLnB1c2goeyB2YWx1ZTogMCwgbGFiZWw6ICdUYXJnZXQnLCBjb2xvcjogJyNmZjAwMDAnIH0pO1xyXG4gICAgICAgICAgICBvblVwZGF0ZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1MzNBXHU1N0RGXHU3NzQwXHU4MjcyXHU5MDA5XHU5ODc5XHJcbiAgICAgICAgaWYgKHcuY2hhcnRUeXBlID09PSAnbGluZScgfHwgdy5jaGFydFR5cGUgPT09ICdiYXInKSB7XHJcbiAgICAgICAgICAgICBjb25zdCB6b25lU2V0dGluZyA9IG5ldyBTZXR0aW5nKGVsKS5zZXROYW1lKCdcdTU0MkZcdTc1MjhcdTUzQzJcdTgwMDNcdTdFQkZcdTUzM0FcdTU3REZcdTc3NDBcdTgyNzInKS5zZXREZXNjKCdcdTU3MjhcdTUzQzJcdTgwMDNcdTdFQkZcdTRFNEJcdTk1RjRcdTU4NkJcdTUxNDVcdTk4OUNcdTgyNzInKTtcclxuICAgICAgICAgICAgIHpvbmVTZXR0aW5nLmFkZFRvZ2dsZSh0ID0+IHQuc2V0VmFsdWUody5lbmFibGVSZWZMaW5lWm9uZXMgfHwgZmFsc2UpLm9uQ2hhbmdlKHYgPT4geyB3LmVuYWJsZVJlZkxpbmVab25lcyA9IHY7IG9uVXBkYXRlKCk7IH0pKTtcclxuICAgICAgICAgICAgIHpvbmVTZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5wYWRkaW5nID0gJzAnOyB6b25lU2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogdWkvbW9kYWxzL2NvbmZpZy9TdGFuZGFyZENvbmZpZy50cyA9PT1cclxuaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBDaGFydFdpZGdldCB9IGZyb20gJy4uLy4uLy4uLy4uL2NvcmUvdHlwZXMnO1xyXG5pbXBvcnQgeyBEYXRhRW5naW5lIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9EYXRhRW5naW5lJztcclxuaW1wb3J0IHsgUHJvcGVydHlTdWdnZXN0IH0gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9TdWdnZXN0ZXJzJztcclxuaW1wb3J0IHsgWUF4aXNDb25maWcgfSBmcm9tICcuL2NvbXBvbmVudHMvWUF4aXNDb25maWcnO1xyXG5pbXBvcnQgeyBYQXhpc0NvbmZpZyB9IGZyb20gJy4vY29tcG9uZW50cy9YQXhpc0NvbmZpZyc7XHJcbmltcG9ydCB7IFJlZkxpbmVDb25maWcgfSBmcm9tICcuL2NvbXBvbmVudHMvUmVmTGluZUNvbmZpZyc7IC8vIFtcdTY1QjBcdTU4OUVdXHJcblxyXG5leHBvcnQgY2xhc3MgU3RhbmRhcmRDb25maWcge1xyXG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcclxuICAgIHByaXZhdGUgZGF0YUVuZ2luZTogRGF0YUVuZ2luZTtcclxuICAgIHByaXZhdGUgb25VcGRhdGU6ICgpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIHhBeGlzQ29uZmlnOiBYQXhpc0NvbmZpZztcclxuICAgIHByaXZhdGUgeUF4aXNDb25maWc6IFlBeGlzQ29uZmlnO1xyXG4gICAgcHJpdmF0ZSByZWZMaW5lQ29uZmlnOiBSZWZMaW5lQ29uZmlnOyAvLyBbXHU2NUIwXHU1ODlFXVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBkYXRhRW5naW5lOiBEYXRhRW5naW5lLCBvblVwZGF0ZTogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuZGF0YUVuZ2luZSA9IGRhdGFFbmdpbmU7XHJcbiAgICAgICAgdGhpcy5vblVwZGF0ZSA9IG9uVXBkYXRlO1xyXG4gICAgICAgIHRoaXMueEF4aXNDb25maWcgPSBuZXcgWEF4aXNDb25maWcoYXBwLCBkYXRhRW5naW5lLCBvblVwZGF0ZSk7XHJcbiAgICAgICAgdGhpcy55QXhpc0NvbmZpZyA9IG5ldyBZQXhpc0NvbmZpZyhhcHAsIG9uVXBkYXRlKTtcclxuICAgICAgICB0aGlzLnJlZkxpbmVDb25maWcgPSBuZXcgUmVmTGluZUNvbmZpZygpOyAvLyBbXHU2NUIwXHU1ODlFXVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRTdWdnZXN0ZXJzKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHg6IHRoaXMueEF4aXNDb25maWcuZ2V0U3VnZ2VzdGVycygpLFxyXG4gICAgICAgICAgICB5OiB0aGlzLnlBeGlzQ29uZmlnLmdldFN1Z2dlc3RlcnMoKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlcihlbDogSFRNTEVsZW1lbnQsIHc6IENoYXJ0V2lkZ2V0KSB7XHJcbiAgICAgICAgaWYgKCF3LnhBeGlzUHJvcGVydHkpIHcueEF4aXNQcm9wZXJ0eSA9IFsnJ107XHJcbiAgICAgICAgaWYgKCF3LnlBeGlzUHJvcGVydGllcykgdy55QXhpc1Byb3BlcnRpZXMgPSBbXTtcclxuXHJcbiAgICAgICAgdHJ5IHsgdGhpcy54QXhpc0NvbmZpZy5yZW5kZXIoZWwsIHcpOyB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IH1cclxuICAgICAgICBlbC5jcmVhdGVFbCgnaHInKTtcclxuICAgICAgICB0cnkgeyB0aGlzLnlBeGlzQ29uZmlnLnJlbmRlcihlbCwgdyk7IH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcihlKTsgfVxyXG4gICAgICAgIGVsLmNyZWF0ZUVsKCdocicpO1xyXG4gICAgICAgIC8vIFtcdTY1QjBcdTU4OUVdIFx1NkUzMlx1NjdEM1x1NTNDMlx1ODAwM1x1N0VCRlx1OTE0RFx1N0Y2RVxyXG4gICAgICAgIHRyeSB7IHRoaXMucmVmTGluZUNvbmZpZy5yZW5kZXIoZWwsIHcsIHRoaXMub25VcGRhdGUpOyB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IH1cclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogdWkvbW9kYWxzL2NvbmZpZy9jb21wb25lbnRzL0J1YmJsZVNldHRpbmdzLnRzID09PVxyXG5pbXBvcnQgeyBBcHAsIFNldHRpbmcsIHNldEljb24gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IENoYXJ0V2lkZ2V0IH0gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9jcl9kZWZfdHlwZV9tYWluJztcclxuaW1wb3J0IHsgUHJvcGVydHlTdWdnZXN0IH0gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9TdWdnZXN0ZXJzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBCdWJibGVTZXR0aW5ncyB7XHJcbiAgICBwcml2YXRlIGFwcDogQXBwO1xyXG4gICAgcHJpdmF0ZSBvblVwZGF0ZTogKCkgPT4gdm9pZDtcclxuICAgIHByaXZhdGUgc3VnZ2VzdGVyczogUHJvcGVydHlTdWdnZXN0W10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgb25VcGRhdGU6ICgpID0+IHZvaWQpIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLm9uVXBkYXRlID0gb25VcGRhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFN1Z2dlc3RlcnMoKSB7IHJldHVybiB0aGlzLnN1Z2dlc3RlcnM7IH1cclxuICAgIHB1YmxpYyB1cGRhdGVTdWdnZXN0ZXJzKHByb3BzOiBzdHJpbmdbXSkgeyB0aGlzLnN1Z2dlc3RlcnMuZm9yRWFjaChzID0+IHMuc2V0U3VnZ2VzdGlvbnMocHJvcHMpKTsgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXIoZWw6IEhUTUxFbGVtZW50LCB3OiBDaGFydFdpZGdldCkge1xyXG4gICAgICAgIHRoaXMuc3VnZ2VzdGVycyA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1NkMxNFx1NkNFMVx1NTZGRVx1OTE0RFx1N0Y2RScgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZEF4aXNPcHRpb25zID0gKGQ6IGFueSkgPT4gZFxyXG4gICAgICAgICAgICAuYWRkT3B0aW9uKCdmcm9udG1hdHRlcicsICdcdTVDNUVcdTYwMjdcdTUwM0MnKVxyXG4gICAgICAgICAgICAuYWRkT3B0aW9uKCdjcmVhdGVkJywgJ1x1NTIxQlx1NUVGQVx1NjVGNlx1OTVGNCcpXHJcbiAgICAgICAgICAgIC5hZGRPcHRpb24oJ21vZGlmaWVkJywgJ1x1NEZFRVx1NjUzOVx1NjVGNlx1OTVGNCcpXHJcbiAgICAgICAgICAgIC5hZGRPcHRpb24oJ2ZpbGVuYW1lJywgJ1x1NjU4N1x1NEVGNlx1NTQwRCcpXHJcbiAgICAgICAgICAgIC5hZGRPcHRpb24oJ3RhZ3MnLCAnXHU2ODA3XHU3QjdFJyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHpTZXR0aW5nID0gbmV3IFNldHRpbmcoZWwpLnNldERlc2MoJ1x1NjMwN1x1NUI5QVx1NEUwMFx1NEUyQVx1NjU3MFx1NTAzQ1x1NUM1RVx1NjAyN1x1RkYwQ1x1NzUyOFx1NEU4RVx1NTFCM1x1NUI5QVx1NkMxNFx1NkNFMVx1NzY4NFx1NTkyN1x1NUMwRlx1RkYwOFx1NTM0QVx1NUY4NFx1RkYwOScpO1xyXG4gICAgICAgIHRoaXMuYWRkSWNvbih6U2V0dGluZywgJ21heGltaXplJywgJ1x1NkMxNFx1NkNFMVx1NTkyN1x1NUMwRiAoWlx1OEY3NCknKTtcclxuICAgICAgICB6U2V0dGluZy5hZGRUZXh0KHQgPT4geyBcclxuICAgICAgICAgICAgdC5zZXRWYWx1ZSh3LmJ1YmJsZVNpemVQcm9wZXJ0eSB8fCAnJyk7IFxyXG4gICAgICAgICAgICB0aGlzLmFkZFN1Z2dlc3QodC5pbnB1dEVsKTsgXHJcbiAgICAgICAgICAgIHQub25DaGFuZ2UodiA9PiB3LmJ1YmJsZVNpemVQcm9wZXJ0eSA9IHYpOyBcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgeVNldHRpbmcgPSBuZXcgU2V0dGluZyhlbCkuc2V0RGVzYygnXHU5MDA5XHU2MkU5IFkgXHU4Rjc0XHU3Njg0XHU2NTcwXHU2MzZFXHU2NzY1XHU2RTkwJyk7XHJcbiAgICAgICAgdGhpcy5hZGRJY29uKHlTZXR0aW5nLCAnYXJyb3ctdXAtY2lyY2xlJywgJ1kgXHU4Rjc0XHU2QTIxXHU1RjBGJyk7XHJcbiAgICAgICAgeVNldHRpbmcuYWRkRHJvcGRvd24oZCA9PiB7XHJcbiAgICAgICAgICAgIGFkZEF4aXNPcHRpb25zKGQpO1xyXG4gICAgICAgICAgICBkLnNldFZhbHVlKHcueUF4aXNNb2RlIHx8ICdmcm9udG1hdHRlcicpO1xyXG4gICAgICAgICAgICBkLm9uQ2hhbmdlKCh2OiBhbnkpID0+IHsgdy55QXhpc01vZGUgPSB2OyB0aGlzLm9uVXBkYXRlKCk7IH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAody55QXhpc01vZGUgPT09ICdmcm9udG1hdHRlcicgfHwgIXcueUF4aXNNb2RlKSB7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGVsKS5zZXROYW1lKCcgICBcdTIxQjMgWSBcdTVDNUVcdTYwMjdcdTU0MEQnKS5hZGRUZXh0KHQgPT4geyBcclxuICAgICAgICAgICAgICAgIHQuc2V0VmFsdWUody55QXhpc1Byb3BlcnR5IHx8ICcnKTsgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFN1Z2dlc3QodC5pbnB1dEVsKTsgXHJcbiAgICAgICAgICAgICAgICB0Lm9uQ2hhbmdlKHYgPT4gdy55QXhpc1Byb3BlcnR5ID0gdik7IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHhTZXR0aW5nID0gbmV3IFNldHRpbmcoZWwpLnNldERlc2MoJ1x1OTAwOVx1NjJFOSBYIFx1OEY3NFx1NzY4NFx1NjU3MFx1NjM2RVx1Njc2NVx1NkU5MCcpO1xyXG4gICAgICAgIHRoaXMuYWRkSWNvbih4U2V0dGluZywgJ2Fycm93LXJpZ2h0LWNpcmNsZScsICdYIFx1OEY3NFx1NkEyMVx1NUYwRicpO1xyXG4gICAgICAgIHhTZXR0aW5nLmFkZERyb3Bkb3duKGQgPT4ge1xyXG4gICAgICAgICAgICBhZGRBeGlzT3B0aW9ucyhkKTtcclxuICAgICAgICAgICAgZC5zZXRWYWx1ZSh3LnhBeGlzTW9kZSB8fCAnY3JlYXRlZCcpO1xyXG4gICAgICAgICAgICBkLm9uQ2hhbmdlKCh2OiBhbnkpID0+IHsgdy54QXhpc01vZGUgPSB2OyB0aGlzLm9uVXBkYXRlKCk7IH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAody54QXhpc01vZGUgPT09ICdmcm9udG1hdHRlcicpIHtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoZWwpLnNldE5hbWUoJyAgIFx1MjFCMyBYIFx1NUM1RVx1NjAyN1x1NTQwRCcpLmFkZFRleHQodCA9PiB7IFxyXG4gICAgICAgICAgICAgICAgdC5zZXRWYWx1ZSh3LnhBeGlzUHJvcGVydHlbMF0gfHwgJycpOyBcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkU3VnZ2VzdCh0LmlucHV0RWwpOyBcclxuICAgICAgICAgICAgICAgIHQub25DaGFuZ2UodiA9PiB3LnhBeGlzUHJvcGVydHkgPSBbdl0pOyBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBsYmxTZXR0aW5nID0gbmV3IFNldHRpbmcoZWwpLnNldERlc2MoJ1x1OUYyMFx1NjgwN1x1NjBBQ1x1NTA1Q1x1NkMxNFx1NkNFMVx1NjVGNlx1NjYzRVx1NzkzQVx1NzY4NFx1NjgwN1x1OTg5OFx1RkYwOFx1OUVEOFx1OEJBNFx1NjYzRVx1NzkzQVx1NjU4N1x1NEVGNlx1NTQwRFx1RkYwOScpO1xyXG4gICAgICAgIHRoaXMuYWRkSWNvbihsYmxTZXR0aW5nLCAndGFnJywgJ1x1NjgwN1x1NkNFOFx1NUI1N1x1NkJCNScpO1xyXG4gICAgICAgIGxibFNldHRpbmcuYWRkVGV4dCh0ID0+IHsgXHJcbiAgICAgICAgICAgIHQuc2V0VmFsdWUody5idWJibGVMYWJlbFByb3BlcnR5IHx8ICcnKTsgXHJcbiAgICAgICAgICAgIHRoaXMuYWRkU3VnZ2VzdCh0LmlucHV0RWwpOyBcclxuICAgICAgICAgICAgdC5vbkNoYW5nZSh2ID0+IHcuYnViYmxlTGFiZWxQcm9wZXJ0eSA9IHYpOyBcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBlbC5jcmVhdGVFbCgnaHInKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjb2xTZXR0aW5nID0gbmV3IFNldHRpbmcoZWwpO1xyXG4gICAgICAgIHRoaXMuYWRkSWNvbihjb2xTZXR0aW5nLCAncGFsZXR0ZScsICdcdTZDMTRcdTZDRTFcdTk4OUNcdTgyNzInKTtcclxuICAgICAgICBjb2xTZXR0aW5nLmFkZENvbG9yUGlja2VyKGMgPT4gY1xyXG4gICAgICAgICAgICAuc2V0VmFsdWUody5idWJibGVDb2xvciB8fCAnIzQzNjFlZScpXHJcbiAgICAgICAgICAgIC5vbkNoYW5nZSh2ID0+IHcuYnViYmxlQ29sb3IgPSB2KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhZGRTdWdnZXN0KGVsOiBIVE1MSW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5zdWdnZXN0ZXJzLnB1c2gobmV3IFByb3BlcnR5U3VnZ2VzdCh0aGlzLmFwcCwgZWwsIFtdKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gW1x1NEZFRVx1NTkwRF0gRmxleGJveCBcdTVCRjlcdTlGNTBcclxuICAgIHByaXZhdGUgYWRkSWNvbihzZXR0aW5nOiBTZXR0aW5nLCBpY29uOiBzdHJpbmcsIG5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZnJhZy5jcmVhdGVEaXYoKTtcclxuICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICBjb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xyXG5cclxuICAgICAgICBjb25zdCBpY29uU3BhbiA9IGNvbnRhaW5lci5jcmVhdGVTcGFuKCk7XHJcbiAgICAgICAgc2V0SWNvbihpY29uU3BhbiwgaWNvbik7XHJcbiAgICAgICAgaWNvblNwYW4uc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICBpY29uU3Bhbi5zdHlsZS5tYXJnaW5SaWdodCA9ICc1cHgnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnRhaW5lci5jcmVhdGVTcGFuKHsgdGV4dDogbmFtZSB9KTtcclxuICAgICAgICBzZXR0aW5nLnNldE5hbWUoZnJhZyk7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBDaGFydFdpZGdldCB9IGZyb20gJy4uLy4uLy4uL2NvcmUvY3JfZGVmX3R5cGVfbWFpbic7XHJcbmltcG9ydCB7IEJ1YmJsZVNldHRpbmdzIH0gZnJvbSAnLi9jb21wb25lbnRzL0J1YmJsZVNldHRpbmdzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBCdWJibGVDb25maWcge1xyXG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcclxuICAgIHByaXZhdGUgb25VcGRhdGU6ICgpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIHNldHRpbmdzOiBCdWJibGVTZXR0aW5ncztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgb25VcGRhdGU6ICgpID0+IHZvaWQpIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLm9uVXBkYXRlID0gb25VcGRhdGU7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IG5ldyBCdWJibGVTZXR0aW5ncyhhcHAsIG9uVXBkYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlU3VnZ2VzdGVycyhwcm9wczogc3RyaW5nW10pIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzLnVwZGF0ZVN1Z2dlc3RlcnMocHJvcHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXIoZWw6IEhUTUxFbGVtZW50LCB3OiBDaGFydFdpZGdldCkge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MucmVuZGVyKGVsLCB3KTtcclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogdWkvbW9kYWxzL2NvbmZpZy9jb21wb25lbnRzL0FkdmFuY2VkU2V0dGluZ3MudHMgPT09XHJcbmltcG9ydCB7IEFwcCwgU2V0dGluZywgc2V0SWNvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQ2hhcnRXaWRnZXQgfSBmcm9tICcuLi8uLi8uLi8uLi9jb3JlL2NyX2RlZl90eXBlX21haW4nO1xyXG5pbXBvcnQgeyBQcm9wZXJ0eVN1Z2dlc3QsIFRhZ1N1Z2dlc3QgfSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL1N1Z2dlc3RlcnMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJhZGFyU2V0dGluZ3Mge1xyXG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcclxuICAgIHByaXZhdGUgb25VcGRhdGU6ICgpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIHByb3BTdWdnZXN0ZXJzOiBQcm9wZXJ0eVN1Z2dlc3RbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSB0YWdTdWdnZXN0ZXJzOiBUYWdTdWdnZXN0W10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgb25VcGRhdGU6ICgpID0+IHZvaWQpIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLm9uVXBkYXRlID0gb25VcGRhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZVN1Z2dlc3RlcnMocHJvcHM6IHN0cmluZ1tdLCB0YWdzOiBzdHJpbmdbXSkge1xyXG4gICAgICAgIHRoaXMucHJvcFN1Z2dlc3RlcnMuZm9yRWFjaChzID0+IHMuc2V0U3VnZ2VzdGlvbnMocHJvcHMpKTtcclxuICAgICAgICB0aGlzLnRhZ1N1Z2dlc3RlcnMuZm9yRWFjaChzID0+IHMuc2V0U3VnZ2VzdGlvbnModGFncykpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXIoZWw6IEhUTUxFbGVtZW50LCB3OiBDaGFydFdpZGdldCkge1xyXG4gICAgICAgIHRoaXMucHJvcFN1Z2dlc3RlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLnRhZ1N1Z2dlc3RlcnMgPSBbXTtcclxuXHJcbiAgICAgICAgZWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHU5NkY3XHU4RkJFXHU3RUY0XHU1RUE2XHU5MTREXHU3RjZFJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBlbC5jcmVhdGVEaXYoeyBzdHlsZTogJ21hcmdpbi1ib3R0b206IDEwcHg7JyB9KTtcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkody54QXhpc1Byb3BlcnR5KSkgdy54QXhpc1Byb3BlcnR5ID0gW107XHJcblxyXG4gICAgICAgIHcueEF4aXNQcm9wZXJ0eS5mb3JFYWNoKChwcm9wLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByb3cgPSBjb250YWluZXIuY3JlYXRlRGl2KCk7XHJcbiAgICAgICAgICAgIHJvdy5zdHlsZS5kaXNwbGF5ID0gJ2dyaWQnO1xyXG4gICAgICAgICAgICByb3cuc3R5bGUuZ3JpZFRlbXBsYXRlQ29sdW1ucyA9ICc4MHB4IDFmciAzMHB4JztcclxuICAgICAgICAgICAgcm93LnN0eWxlLmdhcCA9ICc4cHgnO1xyXG4gICAgICAgICAgICByb3cuc3R5bGUubWFyZ2luQm90dG9tID0gJzhweCc7XHJcbiAgICAgICAgICAgIHJvdy5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpc1RhZyA9IHByb3Auc3RhcnRzV2l0aCgnIycpO1xyXG4gICAgICAgICAgICBjb25zdCB0eXBlU2VsID0gcm93LmNyZWF0ZUVsKCdzZWxlY3QnKTtcclxuICAgICAgICAgICAgdHlwZVNlbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICAgICAgdHlwZVNlbC5jcmVhdGVFbCgnb3B0aW9uJywgeyB2YWx1ZTogJ2ZpZWxkJywgdGV4dDogJ1x1NUM1RVx1NjAyNycgfSkuc2VsZWN0ZWQgPSAhaXNUYWc7XHJcbiAgICAgICAgICAgIHR5cGVTZWwuY3JlYXRlRWwoJ29wdGlvbicsIHsgdmFsdWU6ICd0YWcnLCB0ZXh0OiAnXHU2ODA3XHU3QjdFJyB9KS5zZWxlY3RlZCA9IGlzVGFnO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSByb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcgfSk7XHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gcHJvcDtcclxuICAgICAgICAgICAgaW5wdXQuc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBiaW5kU3VnZ2VzdGVyID0gKHR5cGU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICd0YWcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSAnI1x1NjgwN1x1N0I3RSc7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHMgPSBuZXcgVGFnU3VnZ2VzdCh0aGlzLmFwcCwgaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFnU3VnZ2VzdGVycy5wdXNoKHRzKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSAnXHU1QzVFXHU2MDI3XHU1NDBEJztcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcyA9IG5ldyBQcm9wZXJ0eVN1Z2dlc3QodGhpcy5hcHAsIGlucHV0LCBbXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wU3VnZ2VzdGVycy5wdXNoKHBzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGJpbmRTdWdnZXN0ZXIoaXNUYWcgPyAndGFnJyA6ICdmaWVsZCcpO1xyXG5cclxuICAgICAgICAgICAgdHlwZVNlbC5vbmNoYW5nZSA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUeXBlID0gKGUudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gbmV3VHlwZSA9PT0gJ3RhZycgPyAnIycgOiAnJztcclxuICAgICAgICAgICAgICAgIHcueEF4aXNQcm9wZXJ0eVtpbmRleF0gPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25VcGRhdGUoKTsgXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpbnB1dC5vbmlucHV0ID0gKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCB2YWwgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZVNlbC52YWx1ZSA9PT0gJ3RhZycgJiYgIXZhbC5zdGFydHNXaXRoKCcjJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWwgPSAnIycgKyB2YWwucmVwbGFjZSgvXiMrLywgJycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdy54QXhpc1Byb3BlcnR5W2luZGV4XSA9IHZhbDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJtID0gcm93LmNyZWF0ZVNwYW4oJ2RsLWljb24tYnRuJyk7XHJcbiAgICAgICAgICAgIHNldEljb24ocm0sICd0cmFzaCcpO1xyXG4gICAgICAgICAgICBybS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOyBybS5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdjZW50ZXInOyBybS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XHJcbiAgICAgICAgICAgIHJtLm9uY2xpY2sgPSAoKSA9PiB7IHcueEF4aXNQcm9wZXJ0eS5zcGxpY2UoaW5kZXgsIDEpOyB0aGlzLm9uVXBkYXRlKCk7IH07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZEJ0biA9IGNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnKyBcdTZERkJcdTUyQTBcdTdFRjRcdTVFQTYnIH0pO1xyXG4gICAgICAgIGFkZEJ0bi5vbmNsaWNrID0gKCkgPT4geyB3LnhBeGlzUHJvcGVydHkucHVzaCgnJyk7IHRoaXMub25VcGRhdGUoKTsgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEhlYXRtYXBTZXR0aW5ncyB7XHJcbiAgICBwcml2YXRlIGFwcDogQXBwO1xyXG4gICAgcHJpdmF0ZSBvblVwZGF0ZTogKCkgPT4gdm9pZDtcclxuICAgIHByaXZhdGUgc3VnZ2VzdGVyczogUHJvcGVydHlTdWdnZXN0W10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgb25VcGRhdGU6ICgpID0+IHZvaWQpIHsgdGhpcy5hcHAgPSBhcHA7IHRoaXMub25VcGRhdGUgPSBvblVwZGF0ZTsgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgZ2V0U3VnZ2VzdGVycygpIHsgcmV0dXJuIHRoaXMuc3VnZ2VzdGVyczsgfVxyXG4gICAgcHVibGljIHVwZGF0ZVN1Z2dlc3RlcnMocHJvcHM6IHN0cmluZ1tdKSB7IHRoaXMuc3VnZ2VzdGVycy5mb3JFYWNoKHMgPT4gcy5zZXRTdWdnZXN0aW9ucyhwcm9wcykpOyB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlcihlbDogSFRNTEVsZW1lbnQsIHc6IENoYXJ0V2lkZ2V0KSB7XHJcbiAgICAgICAgdGhpcy5zdWdnZXN0ZXJzID0gW107XHJcbiAgICAgICAgY29uc3QgYWRkQXhpc09wdGlvbnMgPSAoZDogYW55KSA9PiBkXHJcbiAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NyZWF0ZWQnLCAnXHU1MjFCXHU1RUZBXHU2NUU1XHU2NzFGJylcclxuICAgICAgICAgICAgLmFkZE9wdGlvbignbW9kaWZpZWQnLCAnXHU0RkVFXHU2NTM5XHU2NUY2XHU5NUY0JylcclxuICAgICAgICAgICAgLmFkZE9wdGlvbignZnJvbnRtYXR0ZXInLCAnXHU1QzVFXHU2MDI3XHU1MDNDJylcclxuICAgICAgICAgICAgLmFkZE9wdGlvbignZmlsZW5hbWUnLCAnXHU2NTg3XHU0RUY2XHU1NDBEJylcclxuICAgICAgICAgICAgLmFkZE9wdGlvbigndGFncycsICdcdTY4MDdcdTdCN0UnKTtcclxuXHJcbiAgICAgICAgY29uc3QgeFNldHRpbmcgPSBuZXcgU2V0dGluZyhlbCkuc2V0RGVzYygnXHU5MDA5XHU2MkU5IFggXHU4Rjc0XHU3RUY0XHU1RUE2Jyk7XHJcbiAgICAgICAgdGhpcy5hZGRJY29uKHhTZXR0aW5nLCAnYXJyb3ctcmlnaHQtY2lyY2xlJywgJ1ggXHU4Rjc0Jyk7XHJcbiAgICAgICAgeFNldHRpbmcuYWRkRHJvcGRvd24oZCA9PiB7XHJcbiAgICAgICAgICAgIGFkZEF4aXNPcHRpb25zKGQpO1xyXG4gICAgICAgICAgICBkLnNldFZhbHVlKHcueEF4aXNNb2RlIHx8ICdjcmVhdGVkJyk7XHJcbiAgICAgICAgICAgIGQub25DaGFuZ2UoKHY6IGFueSkgPT4geyB3LnhBeGlzTW9kZSA9IHY7IHRoaXMub25VcGRhdGUoKTsgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh3LnhBeGlzTW9kZSA9PT0gJ2Zyb250bWF0dGVyJykge1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhlbCkuc2V0TmFtZSgnICAgXHUyMUIzIFggXHU1QzVFXHU2MDI3XHU1NDBEJykuYWRkVGV4dCh0ID0+IHsgXHJcbiAgICAgICAgICAgICAgICB0LnNldFZhbHVlKHcueEF4aXNQcm9wZXJ0eVswXSB8fCAnJyk7IFxyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRTdWdnZXN0KHQuaW5wdXRFbCk7IFxyXG4gICAgICAgICAgICAgICAgdC5vbkNoYW5nZSh2ID0+IHcueEF4aXNQcm9wZXJ0eSA9IFt2XSk7IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgeVNldHRpbmcgPSBuZXcgU2V0dGluZyhlbCkuc2V0RGVzYygnXHU5MDA5XHU2MkU5IFkgXHU4Rjc0XHU3RUY0XHU1RUE2Jyk7XHJcbiAgICAgICAgdGhpcy5hZGRJY29uKHlTZXR0aW5nLCAnYXJyb3ctdXAtY2lyY2xlJywgJ1kgXHU4Rjc0Jyk7XHJcbiAgICAgICAgeVNldHRpbmcuYWRkRHJvcGRvd24oZCA9PiB7XHJcbiAgICAgICAgICAgIGFkZEF4aXNPcHRpb25zKGQpO1xyXG4gICAgICAgICAgICBkLnNldFZhbHVlKHcueUF4aXNNb2RlIHx8ICdmcm9udG1hdHRlcicpO1xyXG4gICAgICAgICAgICBkLm9uQ2hhbmdlKCh2OiBhbnkpID0+IHsgdy55QXhpc01vZGUgPSB2OyB0aGlzLm9uVXBkYXRlKCk7IH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAody55QXhpc01vZGUgPT09ICdmcm9udG1hdHRlcicpIHtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoZWwpLnNldE5hbWUoJyAgIFx1MjFCMyBZIFx1NUM1RVx1NjAyN1x1NTQwRCcpLmFkZFRleHQodCA9PiB7IFxyXG4gICAgICAgICAgICAgICAgdC5zZXRWYWx1ZSh3LnlBeGlzUHJvcGVydHkgfHwgJycpOyBcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkU3VnZ2VzdCh0LmlucHV0RWwpOyBcclxuICAgICAgICAgICAgICAgIHQub25DaGFuZ2UodiA9PiB3LnlBeGlzUHJvcGVydHkgPSB2KTsgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB2U2V0dGluZyA9IG5ldyBTZXR0aW5nKGVsKS5zZXREZXNjKCdcdTUxQjNcdTVCOUFcdTk4OUNcdTgyNzJcdTc2ODRcdTY1NzBcdTUwM0NcdTVDNUVcdTYwMjcnKTtcclxuICAgICAgICB0aGlzLmFkZEljb24odlNldHRpbmcsICd0aGVybW9tZXRlcicsICdcdTcwRURcdTUyOUJcdTUwM0MnKTtcclxuICAgICAgICB2U2V0dGluZy5hZGRUZXh0KHQgPT4geyBcclxuICAgICAgICAgICAgdC5zZXRWYWx1ZSh3LmJ1YmJsZVNpemVQcm9wZXJ0eSB8fCAnJyk7IFxyXG4gICAgICAgICAgICB0aGlzLmFkZFN1Z2dlc3QodC5pbnB1dEVsKTsgXHJcbiAgICAgICAgICAgIHQub25DaGFuZ2UodiA9PiB3LmJ1YmJsZVNpemVQcm9wZXJ0eSA9IHYpOyBcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkZFN1Z2dlc3QoZWw6IEhUTUxJbnB1dEVsZW1lbnQpIHsgdGhpcy5zdWdnZXN0ZXJzLnB1c2gobmV3IFByb3BlcnR5U3VnZ2VzdCh0aGlzLmFwcCwgZWwsIFtdKSk7IH1cclxuICAgIFxyXG4gICAgLy8gW1x1NEZFRVx1NTkwRF0gRmxleGJveCBcdTVCRjlcdTlGNTBcclxuICAgIHByaXZhdGUgYWRkSWNvbihzZXR0aW5nOiBTZXR0aW5nLCBpY29uOiBzdHJpbmcsIG5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZnJhZy5jcmVhdGVEaXYoKTtcclxuICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICBjb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xyXG5cclxuICAgICAgICBjb25zdCBpY29uU3BhbiA9IGNvbnRhaW5lci5jcmVhdGVTcGFuKCk7XHJcbiAgICAgICAgc2V0SWNvbihpY29uU3BhbiwgaWNvbik7XHJcbiAgICAgICAgaWNvblNwYW4uc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICBpY29uU3Bhbi5zdHlsZS5tYXJnaW5SaWdodCA9ICc1cHgnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnRhaW5lci5jcmVhdGVTcGFuKHsgdGV4dDogbmFtZSB9KTtcclxuICAgICAgICBzZXR0aW5nLnNldE5hbWUoZnJhZyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBIaXN0b2dyYW1TZXR0aW5ncyB7XHJcbiAgICBwcml2YXRlIGFwcDogQXBwO1xyXG4gICAgcHJpdmF0ZSBvblVwZGF0ZTogKCkgPT4gdm9pZDtcclxuICAgIHByaXZhdGUgc3VnZ2VzdGVyczogUHJvcGVydHlTdWdnZXN0W10gPSBbXTtcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG9uVXBkYXRlOiAoKSA9PiB2b2lkKSB7IHRoaXMuYXBwID0gYXBwOyB0aGlzLm9uVXBkYXRlID0gb25VcGRhdGU7IH1cclxuICAgIFxyXG4gICAgcHVibGljIGdldFN1Z2dlc3RlcnMoKSB7IHJldHVybiB0aGlzLnN1Z2dlc3RlcnM7IH1cclxuICAgIHB1YmxpYyB1cGRhdGVTdWdnZXN0ZXJzKHByb3BzOiBzdHJpbmdbXSkgeyB0aGlzLnN1Z2dlc3RlcnMuZm9yRWFjaChzID0+IHMuc2V0U3VnZ2VzdGlvbnMocHJvcHMpKTsgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgcmVuZGVyKGVsOiBIVE1MRWxlbWVudCwgdzogQ2hhcnRXaWRnZXQpIHtcclxuICAgICAgICB0aGlzLnN1Z2dlc3RlcnMgPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICBlbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdTc2RjRcdTY1QjlcdTU2RkVcdTkxNERcdTdGNkUnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHN0U2V0dGluZyA9IG5ldyBTZXR0aW5nKGVsKS5zZXREZXNjKCdcdTkwMDlcdTYyRTlcdTg5ODFcdTdFREZcdThCQTFcdTUyMDZcdTVFMDNcdTc2ODRcdTY1NzBcdTUwM0NcdTVDNUVcdTYwMjdcdUZGMDhcdTY1MkZcdTYzMDFcdTUzNTVcdTRFMkFcdTY1NzBcdTUwM0NcdTYyMTZcdTY1NzBcdTdFQzRcdUZGMDknKTtcclxuICAgICAgICB0aGlzLmFkZEljb24oc3RTZXR0aW5nLCAnYmFyLWNoYXJ0LTInLCAnXHU3RURGXHU4QkExXHU1QjU3XHU2QkI1Jyk7XHJcbiAgICAgICAgc3RTZXR0aW5nLmFkZFRleHQodCA9PiB7IFxyXG4gICAgICAgICAgICAgICAgdC5zZXRWYWx1ZSh3LnhBeGlzUHJvcGVydHlbMF0gfHwgJycpOyBcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkU3VnZ2VzdCh0LmlucHV0RWwpOyBcclxuICAgICAgICAgICAgICAgIHQub25DaGFuZ2UodiA9PiB3LnhBeGlzUHJvcGVydHkgPSBbdl0pOyBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFkZFN1Z2dlc3QoZWw6IEhUTUxJbnB1dEVsZW1lbnQpIHsgdGhpcy5zdWdnZXN0ZXJzLnB1c2gobmV3IFByb3BlcnR5U3VnZ2VzdCh0aGlzLmFwcCwgZWwsIFtdKSk7IH1cclxuICAgIFxyXG4gICAgLy8gW1x1NEZFRVx1NTkwRF0gRmxleGJveCBcdTVCRjlcdTlGNTBcclxuICAgIHByaXZhdGUgYWRkSWNvbihzZXR0aW5nOiBTZXR0aW5nLCBpY29uOiBzdHJpbmcsIG5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZnJhZy5jcmVhdGVEaXYoKTtcclxuICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICBjb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xyXG5cclxuICAgICAgICBjb25zdCBpY29uU3BhbiA9IGNvbnRhaW5lci5jcmVhdGVTcGFuKCk7XHJcbiAgICAgICAgc2V0SWNvbihpY29uU3BhbiwgaWNvbik7XHJcbiAgICAgICAgaWNvblNwYW4uc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICBpY29uU3Bhbi5zdHlsZS5tYXJnaW5SaWdodCA9ICc1cHgnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnRhaW5lci5jcmVhdGVTcGFuKHsgdGV4dDogbmFtZSB9KTtcclxuICAgICAgICBzZXR0aW5nLnNldE5hbWUoZnJhZyk7XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IHVpL21vZGFscy9jb25maWcvQWR2YW5jZWRDb25maWcudHMgPT09XHJcbmltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQ2hhcnRXaWRnZXQgfSBmcm9tICcuLi8uLi8uLi9jb3JlL2NyX2RlZl90eXBlX21haW4nO1xyXG5pbXBvcnQgeyBSYWRhclNldHRpbmdzLCBIZWF0bWFwU2V0dGluZ3MsIEhpc3RvZ3JhbVNldHRpbmdzIH0gZnJvbSAnLi9jb21wb25lbnRzL0FkdmFuY2VkU2V0dGluZ3MnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFkdmFuY2VkQ29uZmlnIHtcclxuICAgIHByaXZhdGUgYXBwOiBBcHA7XHJcbiAgICBwcml2YXRlIG9uVXBkYXRlOiAoKSA9PiB2b2lkO1xyXG4gICAgcHJpdmF0ZSByYWRhclNldHRpbmdzOiBSYWRhclNldHRpbmdzO1xyXG4gICAgcHJpdmF0ZSBoZWF0bWFwU2V0dGluZ3M6IEhlYXRtYXBTZXR0aW5ncztcclxuICAgIHByaXZhdGUgaGlzdG9ncmFtU2V0dGluZ3M6IEhpc3RvZ3JhbVNldHRpbmdzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvblVwZGF0ZTogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMub25VcGRhdGUgPSBvblVwZGF0ZTtcclxuICAgICAgICB0aGlzLnJhZGFyU2V0dGluZ3MgPSBuZXcgUmFkYXJTZXR0aW5ncyhhcHAsIG9uVXBkYXRlKTtcclxuICAgICAgICB0aGlzLmhlYXRtYXBTZXR0aW5ncyA9IG5ldyBIZWF0bWFwU2V0dGluZ3MoYXBwLCBvblVwZGF0ZSk7XHJcbiAgICAgICAgdGhpcy5oaXN0b2dyYW1TZXR0aW5ncyA9IG5ldyBIaXN0b2dyYW1TZXR0aW5ncyhhcHAsIG9uVXBkYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBbXHU2ODM4XHU1RkMzXSBcdTYzQTVcdTY1MzYgdGFncyBcdTUzQzJcdTY1NzBcclxuICAgIHB1YmxpYyB1cGRhdGVTdWdnZXN0ZXJzKHByb3BzOiBzdHJpbmdbXSwgdGFnczogc3RyaW5nW10gPSBbXSkge1xyXG4gICAgICAgIHRoaXMucmFkYXJTZXR0aW5ncy51cGRhdGVTdWdnZXN0ZXJzKHByb3BzLCB0YWdzKTtcclxuICAgICAgICB0aGlzLmhlYXRtYXBTZXR0aW5ncy51cGRhdGVTdWdnZXN0ZXJzKHByb3BzKTtcclxuICAgICAgICB0aGlzLmhpc3RvZ3JhbVNldHRpbmdzLnVwZGF0ZVN1Z2dlc3RlcnMocHJvcHMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1ODNCN1x1NTNENlx1OTY2NFx1OTZGN1x1OEZCRVx1NTZGRVx1NEVFNVx1NTkxNlx1NzY4NFx1NUVGQVx1OEJBRVx1NTY2OFx1RkYwOFx1OTZGN1x1OEZCRVx1NTZGRVx1ODFFQVx1NURGMVx1N0JBMVx1NzQwNlx1NjZGNFx1NjVCMFx1NEU4Nlx1RkYwOVxyXG4gICAgcHVibGljIGdldFN1Z2dlc3RlcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgLi4udGhpcy5oZWF0bWFwU2V0dGluZ3MuZ2V0U3VnZ2VzdGVycygpLFxyXG4gICAgICAgICAgICAuLi50aGlzLmhpc3RvZ3JhbVNldHRpbmdzLmdldFN1Z2dlc3RlcnMoKVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlcihlbDogSFRNTEVsZW1lbnQsIHc6IENoYXJ0V2lkZ2V0KSB7XHJcbiAgICAgICAgaWYgKHcuY2hhcnRUeXBlID09PSAnaGVhdG1hcCcpIHRoaXMuaGVhdG1hcFNldHRpbmdzLnJlbmRlcihlbCwgdyk7XHJcbiAgICAgICAgZWxzZSBpZiAody5jaGFydFR5cGUgPT09ICdyYWRhcicpIHRoaXMucmFkYXJTZXR0aW5ncy5yZW5kZXIoZWwsIHcpO1xyXG4gICAgICAgIGVsc2UgaWYgKHcuY2hhcnRUeXBlID09PSAnaGlzdG9ncmFtJykgdGhpcy5oaXN0b2dyYW1TZXR0aW5ncy5yZW5kZXIoZWwsIHcpO1xyXG4gICAgfVxyXG59IiwgIi8vID09PSBGSUxFOiB1aS9jb25maWdzL0NoYXJ0Q29uZmlnVmlldy50cyA9PT1cclxuaW1wb3J0IHsgQXBwLCBURmlsZSwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQ2hhcnRXaWRnZXQgfSBmcm9tICcuLi8uLi9jb3JlL3R5cGVzJztcclxuaW1wb3J0IHsgRGF0YUVuZ2luZSB9IGZyb20gJy4uLy4uL2NvcmUvRGF0YUVuZ2luZSc7XHJcbmltcG9ydCB7IElDb25maWdWaWV3IH0gZnJvbSAnLi9JQ29uZmlnVmlldyc7XHJcbmltcG9ydCB7IEJhc2VDb25maWcgfSBmcm9tICcuLi9tb2RhbHMvY29uZmlnL0Jhc2VDb25maWcnO1xyXG5pbXBvcnQgeyBTdGFuZGFyZENvbmZpZyB9IGZyb20gJy4uL21vZGFscy9jb25maWcvU3RhbmRhcmRDb25maWcnO1xyXG5pbXBvcnQgeyBCdWJibGVDb25maWcgfSBmcm9tICcuLi9tb2RhbHMvY29uZmlnL0J1YmJsZUNvbmZpZyc7XHJcbmltcG9ydCB7IEFkdmFuY2VkQ29uZmlnIH0gZnJvbSAnLi4vbW9kYWxzL2NvbmZpZy9BZHZhbmNlZENvbmZpZyc7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2hhcnRDb25maWdWaWV3IGltcGxlbWVudHMgSUNvbmZpZ1ZpZXc8Q2hhcnRXaWRnZXQ+IHtcclxuICAgIHByaXZhdGUgYXBwOiBBcHA7XHJcbiAgICBwcml2YXRlIGRhdGFFbmdpbmU6IERhdGFFbmdpbmU7XHJcbiAgICBwcml2YXRlIG9uVXBkYXRlOiAoKSA9PiB2b2lkO1xyXG5cclxuICAgIHByaXZhdGUgYmFzZUNvbmZpZzogQmFzZUNvbmZpZztcclxuICAgIHByaXZhdGUgc3RhbmRhcmRDb25maWc6IFN0YW5kYXJkQ29uZmlnO1xyXG4gICAgcHJpdmF0ZSBidWJibGVDb25maWc6IEJ1YmJsZUNvbmZpZztcclxuICAgIHByaXZhdGUgYWR2YW5jZWRDb25maWc6IEFkdmFuY2VkQ29uZmlnO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBkYXRhRW5naW5lOiBEYXRhRW5naW5lLCBvblVwZGF0ZTogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuZGF0YUVuZ2luZSA9IGRhdGFFbmdpbmU7XHJcbiAgICAgICAgdGhpcy5vblVwZGF0ZSA9IG9uVXBkYXRlO1xyXG5cclxuICAgICAgICB0aGlzLmJhc2VDb25maWcgPSBuZXcgQmFzZUNvbmZpZyhhcHAsIGRhdGFFbmdpbmUsIG9uVXBkYXRlKTtcclxuICAgICAgICB0aGlzLnN0YW5kYXJkQ29uZmlnID0gbmV3IFN0YW5kYXJkQ29uZmlnKGFwcCwgZGF0YUVuZ2luZSwgb25VcGRhdGUpO1xyXG4gICAgICAgIHRoaXMuYnViYmxlQ29uZmlnID0gbmV3IEJ1YmJsZUNvbmZpZyhhcHAsIG9uVXBkYXRlKTtcclxuICAgICAgICB0aGlzLmFkdmFuY2VkQ29uZmlnID0gbmV3IEFkdmFuY2VkQ29uZmlnKGFwcCwgb25VcGRhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXIoZWw6IEhUTUxFbGVtZW50LCB3OiBDaGFydFdpZGdldCkge1xyXG4gICAgICAgIC8vIFx1NjU3MFx1NjM2RVx1OTYzMlx1NUZBMVxyXG4gICAgICAgIGlmICghdy5kYXRhU291cmNlcyB8fCB3LmRhdGFTb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB3LmRhdGFTb3VyY2VzID0gW3sgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksIGZvbGRlclBhdGg6ICcvJywgZmlsdGVyOiB7IHRhZ3M6IFtdIH0gfV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdy55QXhpc1Byb3BlcnRpZXMpIHcueUF4aXNQcm9wZXJ0aWVzID0gW107XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIDEuIFx1NTdGQVx1Nzg0MFx1OTE0RFx1N0Y2RSAoXHU3QzdCXHU1NzhCICYgXHU2NTcwXHU2MzZFXHU2RTkwKVxyXG4gICAgICAgICAgICB0aGlzLmJhc2VDb25maWcucmVuZGVyKGVsLCB3LCAoKSA9PiB0aGlzLnVwZGF0ZUFsbFN1Z2dlc3RlcnModykpO1xyXG4gICAgICAgICAgICBlbC5jcmVhdGVFbCgnaHInKTtcclxuXHJcbiAgICAgICAgICAgIC8vIDIuIFx1N0M3Qlx1NTc4Qlx1NzI3OVx1NUI5QVx1OTE0RFx1N0Y2RSAoU3BlY2lmaWMgQ29uZmlnKVxyXG4gICAgICAgICAgICBpZiAody5jaGFydFR5cGUgPT09ICdidWJibGUnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ1YmJsZUNvbmZpZy5yZW5kZXIoZWwsIHcpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFsnaGVhdG1hcCcsICdyYWRhcicsICdoaXN0b2dyYW0nXS5pbmNsdWRlcyh3LmNoYXJ0VHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWR2YW5jZWRDb25maWcucmVuZGVyKGVsLCB3KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh3LmNoYXJ0VHlwZSA9PT0gJ2dpdGxpbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBbXHU0RkVFXHU1OTBEXSBHaXRMaW5lIFx1NEUwRFx1OTcwMFx1ODk4MSBYL1kgXHU4Rjc0XHU5MTREXHU3RjZFXHJcbiAgICAgICAgICAgICAgICBlbC5jcmVhdGVEaXYoeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnR2l0TGluZSBcdTZBMjFcdTVGMEZcdUZGMUFcdTgxRUFcdTUyQThcdTY4MzlcdTYzNkVcdTRFRkJcdTUyQTFcdTdGMjlcdThGREJcdTU0OENcdTY3NjVcdTZFOTBcdTY3ODRcdTVFRkFcdTUyMDZcdTY1MkZcdTU2RkVcdTMwMDJcdTRFM0JcdTdFQkZcdTRFM0FcdTY3MkFcdTdGMjlcdThGREJcdTRFRkJcdTUyQTFcdTYyMTZcdTRFRkJcdTUyQTFcdTdCMTRcdThCQjBcdTY3MkNcdThFQUJcdTMwMDInLCBcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogJ2NvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsgZm9udC1zaXplOiAwLjllbTsgcGFkZGluZzogMTBweDsgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpOyBib3JkZXItcmFkaXVzOiA0cHg7JyBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gW1x1NEZFRVx1NTkwRF0gXHU1M0VBXHU2NzA5XHU2ODA3XHU1MUM2XHU1NkZFXHU4ODY4IChCYXIvTGluZS9QaWUvU2NhdHRlcikgXHU2MjREXHU5NzAwXHU4OTgxIFgvWSBcdThGNzRcdTkxNERcdTdGNkVcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRDb25maWcucmVuZGVyKGVsLCB3KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZWwuY3JlYXRlRWwoJ2hyJyk7XHJcblxyXG4gICAgICAgICAgICAvLyAzLiBcdTY2M0VcdTc5M0FcdThCQkVcdTdGNkVcclxuICAgICAgICAgICAgZWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHU2NjNFXHU3OTNBXHU4QkJFXHU3RjZFJyB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEdpdExpbmUgXHU0RTBEXHU5NzAwXHU4OTgxXHU1NkZFXHU0RjhCXHJcbiAgICAgICAgICAgIGlmICh3LmNoYXJ0VHlwZSAhPT0gJ2dpdGxpbmUnKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhlbCkuc2V0TmFtZSgnXHU2NjNFXHU3OTNBXHU1NkZFXHU0RjhCJykuYWRkVG9nZ2xlKHQgPT4gdC5zZXRWYWx1ZSh3LnNob3dMZWdlbmQpLm9uQ2hhbmdlKHYgPT4gdy5zaG93TGVnZW5kID0gdikpO1xyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZWwpLnNldE5hbWUoJ1x1NjYzRVx1NzkzQVx1NjU3MFx1NTAzQycpLmFkZFRvZ2dsZSh0ID0+IHQuc2V0VmFsdWUody5zaG93RGF0YUxhYmVscykub25DaGFuZ2UodiA9PiB3LnNob3dEYXRhTGFiZWxzID0gdikpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gR2l0TGluZSBcdTcyNzlcdTY3MDlcdTY2M0VcdTc5M0FcdThCQkVcdTdGNkUgKFx1NTk4Mlx1NjcwOVx1OTcwMFx1ODk4MVx1NTNFRlx1NTcyOFx1NkI2NFx1NkRGQlx1NTJBMFx1RkYwQ1x1NzZFRVx1NTI0RFx1NzU1OVx1N0E3QSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFbJ2J1YmJsZScsICdoZWF0bWFwJywgJ3JhZGFyJywgJ2dpdGxpbmUnXS5pbmNsdWRlcyh3LmNoYXJ0VHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGVsKS5zZXROYW1lKCdcdTVGRkRcdTc1NjVcdTdBN0FcdTUwM0MnKS5hZGRUb2dnbGUodCA9PiB0LnNldFZhbHVlKHcuaWdub3JlRW1wdHkpLm9uQ2hhbmdlKHYgPT4gdy5pZ25vcmVFbXB0eSA9IHYpKTtcclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGVsKS5zZXROYW1lKCdZXHU4Rjc0XHU4MzAzXHU1NkY0Jykuc2V0RGVzYygnTWluIC8gTWF4JylcclxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ID0+IHQuc2V0UGxhY2Vob2xkZXIoJ01pbicpLnNldFZhbHVlKHcueUF4aXNNaW4gIT09IHVuZGVmaW5lZCA/IFN0cmluZyh3LnlBeGlzTWluKSA6ICcnKS5vbkNoYW5nZSh2ID0+IHcueUF4aXNNaW4gPSB2ID8gTnVtYmVyKHYpIDogdW5kZWZpbmVkKSlcclxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ID0+IHQuc2V0UGxhY2Vob2xkZXIoJ01heCcpLnNldFZhbHVlKHcueUF4aXNNYXggIT09IHVuZGVmaW5lZCA/IFN0cmluZyh3LnlBeGlzTWF4KSA6ICcnKS5vbkNoYW5nZSh2ID0+IHcueUF4aXNNYXggPSB2ID8gTnVtYmVyKHYpIDogdW5kZWZpbmVkKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy51cGRhdGVBbGxTdWdnZXN0ZXJzKHcpLCAxMDApO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkNyaXRpY2FsIENvbmZpZyBFcnJvclwiLCBlKTtcclxuICAgICAgICAgICAgZWwuY3JlYXRlRGl2KHsgdGV4dDogJ1x1OTE0RFx1N0Y2RVx1OTc2Mlx1Njc3Rlx1NkUzMlx1NjdEM1x1OTUxOVx1OEJFRicsIHN0eWxlOiAnY29sb3I6IHJlZCcgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgdXBkYXRlQWxsU3VnZ2VzdGVycyh3OiBDaGFydFdpZGdldCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmICghdy5kYXRhU291cmNlcyB8fCAhdy5kYXRhU291cmNlc1swXSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBjb25zdCBzb3VyY2UgPSB3LmRhdGFTb3VyY2VzWzBdO1xyXG4gICAgICAgICAgICBsZXQgcHJvcHM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgICAgIGxldCB0YWdzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNvdXJjZS50eXBlID09PSAnZmlsZScgJiYgc291cmNlLmZpbGVQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHNvdXJjZS5maWxlUGF0aCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFibGVEYXRhID0gYXdhaXQgdGhpcy5kYXRhRW5naW5lLmdldE1hcmtkb3duVGFibGVEYXRhKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BzID0gdGFibGVEYXRhLmhlYWRlcnM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRoID0gc291cmNlLmZvbGRlclBhdGggfHwgJy8nO1xyXG4gICAgICAgICAgICAgICAgcHJvcHMgPSB0aGlzLmRhdGFFbmdpbmUuZ2V0QXZhaWxhYmxlUHJvcGVydGllcyhwYXRoKTtcclxuICAgICAgICAgICAgICAgIHRhZ3MgPSB0aGlzLmRhdGFFbmdpbmUuZ2V0QXZhaWxhYmxlVGFncyhwYXRoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5iYXNlQ29uZmlnLnVwZGF0ZUZpbHRlckNvbHVtblN1Z2dlc3Rpb25zKHByb3BzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NEVDNVx1NUY1M1x1NkUzMlx1NjdEMyBTdGFuZGFyZENvbmZpZyBcdTY1RjZcdTYyNERcdTY2RjRcdTY1QjBcdTUxNzYgU3VnZ2VzdGVyc1xyXG4gICAgICAgICAgICBpZiAoIVsnYnViYmxlJywgJ2hlYXRtYXAnLCAncmFkYXInLCAnaGlzdG9ncmFtJywgJ2dpdGxpbmUnXS5pbmNsdWRlcyh3LmNoYXJ0VHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcy5zdGFuZGFyZENvbmZpZy5nZXRTdWdnZXN0ZXJzKCk7XHJcbiAgICAgICAgICAgICAgICB4LmZvckVhY2gocyA9PiBzLnNldFN1Z2dlc3Rpb25zKHByb3BzKSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGxldCB0YXJnZXRQcm9wcyA9IHByb3BzO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZS50eXBlICE9PSAnZmlsZScgJiYgdy5lbmFibGVMaW5rUGVuZXRyYXRpb24gJiYgdy54QXhpc1Byb3BlcnR5Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRQcm9wcyA9IHRoaXMuZGF0YUVuZ2luZS5nZXRBdmFpbGFibGVMaW5rZWRQcm9wZXJ0aWVzKHNvdXJjZS5mb2xkZXJQYXRoLCB3LnhBeGlzUHJvcGVydHkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgeS5mb3JFYWNoKHMgPT4gcy5zZXRTdWdnZXN0aW9ucyh0YXJnZXRQcm9wcykpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAody5jaGFydFR5cGUgPT09ICdidWJibGUnKSB0aGlzLmJ1YmJsZUNvbmZpZy51cGRhdGVTdWdnZXN0ZXJzKHByb3BzKTtcclxuICAgICAgICAgICAgaWYgKFsnaGVhdG1hcCcsICdyYWRhcicsICdoaXN0b2dyYW0nXS5pbmNsdWRlcyh3LmNoYXJ0VHlwZSkpIHRoaXMuYWR2YW5jZWRDb25maWcudXBkYXRlU3VnZ2VzdGVycyhwcm9wcywgdGFncyk7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiU3VnZ2VzdGVyIHVwZGF0ZSBmYWlsZWRcIiwgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwgIi8vID09PSBGSUxFOiB1aS9jb25maWdzL0xpc3RDb25maWdWaWV3LnRzID09PVxyXG5pbXBvcnQgeyBBcHAsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IExpc3RXaWRnZXQgfSBmcm9tICcuLi8uLi9jb3JlL3R5cGVzJztcclxuaW1wb3J0IHsgSUNvbmZpZ1ZpZXcgfSBmcm9tICcuL0lDb25maWdWaWV3JztcclxuaW1wb3J0IHsgRm9sZGVyU3VnZ2VzdCwgVGFnU3VnZ2VzdCB9IGZyb20gJy4uL2NvbXBvbmVudHMvU3VnZ2VzdGVycyc7XHJcblxyXG5leHBvcnQgY2xhc3MgTGlzdENvbmZpZ1ZpZXcgaW1wbGVtZW50cyBJQ29uZmlnVmlldzxMaXN0V2lkZ2V0PiB7XHJcbiAgICBwcml2YXRlIGFwcDogQXBwO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKGVsOiBIVE1MRWxlbWVudCwgdzogTGlzdFdpZGdldCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGZvbGRlclNldHRpbmcgPSBuZXcgU2V0dGluZyhlbCkuc2V0TmFtZSgnXHU2NTg3XHU0RUY2XHU1OTM5XHU4REVGXHU1Rjg0Jyk7XHJcbiAgICAgICAgZm9sZGVyU2V0dGluZy5hZGRUZXh0KHQgPT4geyBcclxuICAgICAgICAgICAgdC5zZXRWYWx1ZSh3LmZvbGRlclBhdGgpOyBcclxuICAgICAgICAgICAgbmV3IEZvbGRlclN1Z2dlc3QodGhpcy5hcHAsIHQuaW5wdXRFbCk7IFxyXG4gICAgICAgICAgICB0Lm9uQ2hhbmdlKHYgPT4gdy5mb2xkZXJQYXRoID0gdik7IFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGVsKS5zZXROYW1lKCdcdTY4MDdcdTdCN0VcdThGQzdcdTZFRTQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU1M0VBXHU2NjNFXHU3OTNBXHU1MzA1XHU1NDJCXHU3Mjc5XHU1QjlBXHU2ODA3XHU3QjdFXHU3Njg0XHU3QjE0XHU4QkIwJylcclxuICAgICAgICAgICAgLmFkZFRleHQodCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0LnNldFZhbHVlKHcuZmlsdGVyVGFncyA/IHcuZmlsdGVyVGFncy5qb2luKCcsICcpIDogJycpO1xyXG4gICAgICAgICAgICAgICAgbmV3IFRhZ1N1Z2dlc3QodGhpcy5hcHAsIHQuaW5wdXRFbCk7XHJcbiAgICAgICAgICAgICAgICB0Lm9uQ2hhbmdlKHYgPT4gdy5maWx0ZXJUYWdzID0gdi5zcGxpdCgvWyxcdUZGMENdLykubWFwKHMgPT4gcy50cmltKCkpLmZpbHRlcihCb29sZWFuKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhlbCkuc2V0TmFtZSgnXHU2MzkyXHU1RThGXHU0RjlEXHU2MzZFJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGQgPT4gZFxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbW9kaWZpZWQnLCAnXHU0RkVFXHU2NTM5XHU2NUY2XHU5NUY0JylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NyZWF0ZWQnLCAnXHU1MjFCXHU1RUZBXHU2NUY2XHU5NUY0JylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ25hbWUnLCAnXHU2NTg3XHU0RUY2XHU1NDBEJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh3LnNvcnRCeSkub25DaGFuZ2UodiA9PiB3LnNvcnRCeSA9IHYgYXMgYW55KSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbmV3IFNldHRpbmcoZWwpLnNldE5hbWUoJ1x1NjM5Mlx1NUU4Rlx1NjVCOVx1NUYwRicpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkID0+IGRcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2Rlc2MnLCAnXHU5NjREXHU1RThGIChcdTY3MDBcdTY1QjAvWi1BKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdhc2MnLCAnXHU1MzQ3XHU1RThGIChcdTY3MDBcdTY1RTkvQS1aKScpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUody5zb3J0T3JkZXIpLm9uQ2hhbmdlKHYgPT4gdy5zb3J0T3JkZXIgPSB2IGFzIGFueSkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGVsKS5zZXROYW1lKCdcdTY2M0VcdTc5M0FcdTY1NzBcdTkxQ0YnKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ID0+IHQuc2V0VmFsdWUoU3RyaW5nKHcubGltaXQpKS5vbkNoYW5nZSh2ID0+IHcubGltaXQgPSBOdW1iZXIodikpKTtcclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogdWkvY29uZmlncy9Ub2RvQ29uZmlnVmlldy50cyA9PT1cclxuaW1wb3J0IHsgQXBwLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBUb2RvV2lkZ2V0IH0gZnJvbSAnLi4vLi4vY29yZS90eXBlcyc7XHJcbmltcG9ydCB7IElDb25maWdWaWV3IH0gZnJvbSAnLi9JQ29uZmlnVmlldyc7XHJcbmltcG9ydCB7IEZvbGRlclN1Z2dlc3QsIEZpbGVTdWdnZXN0IH0gZnJvbSAnLi4vY29tcG9uZW50cy9TdWdnZXN0ZXJzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUb2RvQ29uZmlnVmlldyBpbXBsZW1lbnRzIElDb25maWdWaWV3PFRvZG9XaWRnZXQ+IHtcclxuICAgIHByaXZhdGUgYXBwOiBBcHA7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoZWw6IEhUTUxFbGVtZW50LCB3OiBUb2RvV2lkZ2V0KTogdm9pZCB7XHJcbiAgICAgICAgZWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnXHU2NTcwXHU2MzZFXHU2RTkwJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBuZXcgU2V0dGluZyhlbCkuc2V0TmFtZSgnXHU2NTcwXHU2MzZFXHU2RTkwXHU3QzdCXHU1NzhCJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGQgPT4gZFxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZm9sZGVyJywgJ1x1NjU4N1x1NEVGNlx1NTkzOScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdmaWxlJywgJ1x1NTM1NVx1NjU4N1x1NEVGNicpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUody5zb3VyY2VUeXBlIHx8ICdmb2xkZXInKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKHYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHcuc291cmNlVHlwZSA9IHYgYXMgYW55O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaChlbCwgdyk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIGlmICh3LnNvdXJjZVR5cGUgPT09ICdmaWxlJykge1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhlbCkuc2V0TmFtZSgnXHU5MDA5XHU2MkU5XHU2NTg3XHU0RUY2JykuYWRkVGV4dCh0ID0+IHsgXHJcbiAgICAgICAgICAgICAgICB0LnNldFZhbHVlKHcuZmlsZVBhdGggfHwgJycpOyBcclxuICAgICAgICAgICAgICAgIG5ldyBGaWxlU3VnZ2VzdCh0aGlzLmFwcCwgdC5pbnB1dEVsKTsgXHJcbiAgICAgICAgICAgICAgICB0Lm9uQ2hhbmdlKHYgPT4gdy5maWxlUGF0aCA9IHYpOyBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoZWwpLnNldE5hbWUoJ1x1NjI2Qlx1NjNDRlx1NjU4N1x1NEVGNlx1NTkzOScpLmFkZFRleHQodCA9PiB7IFxyXG4gICAgICAgICAgICAgICAgdC5zZXRWYWx1ZSh3LmZvbGRlclBhdGgpOyBcclxuICAgICAgICAgICAgICAgIG5ldyBGb2xkZXJTdWdnZXN0KHRoaXMuYXBwLCB0LmlucHV0RWwpOyBcclxuICAgICAgICAgICAgICAgIHQub25DaGFuZ2UodiA9PiB3LmZvbGRlclBhdGggPSB2KTsgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBlbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdcdTY2M0VcdTc5M0FcdThCQkVcdTdGNkUnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGVsKS5zZXROYW1lKCdcdTUyMDZcdTdFQzRcdTY1QjlcdTVGMEYnKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZCA9PiBkLmFkZE9wdGlvbignbm9uZScsICdcdTRFMERcdTUyMDZcdTdFQzQnKS5hZGRPcHRpb24oJ2ZpbGUnLCAnXHU2MzA5XHU2NTg3XHU0RUY2XHU1MjA2XHU3RUM0Jykuc2V0VmFsdWUody5ncm91cEJ5IHx8ICdub25lJykub25DaGFuZ2UodiA9PiB3Lmdyb3VwQnkgPSB2IGFzIGFueSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhlbCkuc2V0TmFtZSgnXHU2MzkyXHU1RThGXHU2NUI5XHU1RjBGJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGQgPT4gZC5hZGRPcHRpb24oJ2RlZmF1bHQnLCAnXHU5RUQ4XHU4QkE0JykuYWRkT3B0aW9uKCdwcmlvcml0eScsICdcdTYzMDlcdTRGMThcdTUxNDhcdTdFQTcnKS5hZGRPcHRpb24oJ2RhdGUnLCAnXHU2MzA5XHU2MjJBXHU2QjYyXHU2NUU1XHU2NzFGJykuc2V0VmFsdWUody5zb3J0QnkgfHwgJ2RlZmF1bHQnKS5vbkNoYW5nZSh2ID0+IHcuc29ydEJ5ID0gdiBhcyBhbnkpKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoZWwpLnNldE5hbWUoJ1x1OTY5MFx1ODVDRlx1NURGMlx1NUI4Q1x1NjIxMCcpLmFkZFRvZ2dsZSh0ID0+IHQuc2V0VmFsdWUody5oaWRlQ29tcGxldGVkKS5vbkNoYW5nZSh2ID0+IHcuaGlkZUNvbXBsZXRlZCA9IHYpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlZnJlc2goZWw6IEhUTUxFbGVtZW50LCB3OiBUb2RvV2lkZ2V0KSB7XHJcbiAgICAgICAgZWwuZW1wdHkoKTtcclxuICAgICAgICB0aGlzLnJlbmRlcihlbCwgdyk7XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IHVpL2NvbmZpZ3MvTWFya2Rvd25Db25maWdWaWV3LnRzID09PVxyXG5pbXBvcnQgeyBBcHAsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IE1hcmtkb3duV2lkZ2V0IH0gZnJvbSAnLi4vLi4vY29yZS90eXBlcyc7XHJcbmltcG9ydCB7IElDb25maWdWaWV3IH0gZnJvbSAnLi9JQ29uZmlnVmlldyc7XHJcbmltcG9ydCB7IEZpbGVTdWdnZXN0IH0gZnJvbSAnLi4vY29tcG9uZW50cy9TdWdnZXN0ZXJzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBNYXJrZG93bkNvbmZpZ1ZpZXcgaW1wbGVtZW50cyBJQ29uZmlnVmlldzxNYXJrZG93bldpZGdldD4ge1xyXG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcihlbDogSFRNTEVsZW1lbnQsIHc6IE1hcmtkb3duV2lkZ2V0KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZmlsZVNldHRpbmcgPSBuZXcgU2V0dGluZyhlbCkuc2V0TmFtZSgnXHU2NTg3XHU0RUY2XHU4REVGXHU1Rjg0Jyk7XHJcbiAgICAgICAgZmlsZVNldHRpbmcuYWRkVGV4dCh0ID0+IHtcclxuICAgICAgICAgICAgdC5zZXRWYWx1ZSh3LmZpbGVQYXRoKTtcclxuICAgICAgICAgICAgbmV3IEZpbGVTdWdnZXN0KHRoaXMuYXBwLCB0LmlucHV0RWwpO1xyXG4gICAgICAgICAgICB0Lm9uQ2hhbmdlKHYgPT4gdy5maWxlUGF0aCA9IHYpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGVsKS5zZXROYW1lKCdcdTlFRDhcdThCQTRcdTZBMjFcdTVGMEYnKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZCA9PiBkXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdwcmV2aWV3JywgJ1x1OTg4NFx1ODlDOCcpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlZGl0JywgJ1x1N0YxNlx1OEY5MScpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUody5tb2RlKS5vbkNoYW5nZSh2ID0+IHcubW9kZSA9IHYgYXMgYW55KSk7XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IHVpL21vZGFscy9XaWRnZXRDb25maWdNb2RhbC50cyA9PT1cclxuaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZywgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBXaWRnZXQsIFdpZGdldFR5cGUgfSBmcm9tICcuLi8uLi9jb3JlL3R5cGVzJztcclxuaW1wb3J0IHsgRGF0YUVuZ2luZSB9IGZyb20gJy4uLy4uL2NvcmUvRGF0YUVuZ2luZSc7XHJcbmltcG9ydCB7IFdJREdFVF9ERUZBVUxUUyB9IGZyb20gJy4uLy4uL2NvcmUvY29uc3RhbnRzJztcclxuaW1wb3J0IHsgQ2hhcnRDb25maWdWaWV3IH0gZnJvbSAnLi4vY29uZmlncy9DaGFydENvbmZpZ1ZpZXcnO1xyXG5pbXBvcnQgeyBMaXN0Q29uZmlnVmlldyB9IGZyb20gJy4uL2NvbmZpZ3MvTGlzdENvbmZpZ1ZpZXcnO1xyXG5pbXBvcnQgeyBUb2RvQ29uZmlnVmlldyB9IGZyb20gJy4uL2NvbmZpZ3MvVG9kb0NvbmZpZ1ZpZXcnO1xyXG5pbXBvcnQgeyBNYXJrZG93bkNvbmZpZ1ZpZXcgfSBmcm9tICcuLi9jb25maWdzL01hcmtkb3duQ29uZmlnVmlldyc7XHJcbmltcG9ydCB7IFNldHRpbmdzTWFuYWdlciB9IGZyb20gJy4uLy4uL2NvcmUvU2V0dGluZ3NNYW5hZ2VyJzsgLy8gW1x1NjVCMFx1NTg5RV1cclxuXHJcbmV4cG9ydCBjbGFzcyBXaWRnZXRDb25maWdNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHByaXZhdGUgd2lkZ2V0OiBQYXJ0aWFsPFdpZGdldD47XHJcbiAgICBwcml2YXRlIGRhc2hib2FyZElkOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIG9uU3VibWl0OiAod2lkZ2V0OiBXaWRnZXQpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIGRhdGFFbmdpbmU6IERhdGFFbmdpbmU7XHJcbiAgICBwcml2YXRlIHNldHRpbmdzTWFuYWdlcjogU2V0dGluZ3NNYW5hZ2VyOyAvLyBbXHU2NUIwXHU1ODlFXVxyXG4gICAgcHJpdmF0ZSBpc0NyZWF0aW9uTW9kZTogYm9vbGVhbjtcclxuICAgIFxyXG4gICAgcHJpdmF0ZSBjaGFydENvbmZpZzogQ2hhcnRDb25maWdWaWV3O1xyXG4gICAgcHJpdmF0ZSBsaXN0Q29uZmlnOiBMaXN0Q29uZmlnVmlldztcclxuICAgIHByaXZhdGUgdG9kb0NvbmZpZzogVG9kb0NvbmZpZ1ZpZXc7XHJcbiAgICBwcml2YXRlIG1hcmtkb3duQ29uZmlnOiBNYXJrZG93bkNvbmZpZ1ZpZXc7XHJcblxyXG4gICAgLy8gW1x1NEZFRVx1NjUzOV0gXHU2Nzg0XHU5MDIwXHU1MUZEXHU2NTcwXHU3QjdFXHU1NDBEXHVGRjBDXHU1ODlFXHU1MkEwIHNldHRpbmdzTWFuYWdlclxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgYXBwOiBBcHAsIFxyXG4gICAgICAgIGRhc2hib2FyZElkOiBzdHJpbmcsIFxyXG4gICAgICAgIHNldHRpbmdzTWFuYWdlcjogU2V0dGluZ3NNYW5hZ2VyLCBcclxuICAgICAgICBvblN1Ym1pdDogKHdpZGdldDogV2lkZ2V0KSA9PiB2b2lkLCBcclxuICAgICAgICBleGlzdGluZ1dpZGdldD86IFdpZGdldFxyXG4gICAgKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLmRhc2hib2FyZElkID0gZGFzaGJvYXJkSWQ7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIgPSBzZXR0aW5nc01hbmFnZXI7XHJcbiAgICAgICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFtcdTY4MzhcdTVGQzNcdTRGRUVcdTU5MERdIFx1NTIxRFx1NTlDQlx1NTMxNiBEYXRhRW5naW5lIFx1NjVGNlx1NEYyMFx1NTE2NSBzZXR0aW5nc01hbmFnZXJcclxuICAgICAgICB0aGlzLmRhdGFFbmdpbmUgPSBuZXcgRGF0YUVuZ2luZShhcHAsIHNldHRpbmdzTWFuYWdlcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcmVmcmVzaCA9ICgpID0+IHRoaXMub25PcGVuKCk7XHJcbiAgICAgICAgdGhpcy5jaGFydENvbmZpZyA9IG5ldyBDaGFydENvbmZpZ1ZpZXcoYXBwLCB0aGlzLmRhdGFFbmdpbmUsIHJlZnJlc2gpO1xyXG4gICAgICAgIHRoaXMubGlzdENvbmZpZyA9IG5ldyBMaXN0Q29uZmlnVmlldyhhcHApO1xyXG4gICAgICAgIHRoaXMudG9kb0NvbmZpZyA9IG5ldyBUb2RvQ29uZmlnVmlldyhhcHApO1xyXG4gICAgICAgIHRoaXMubWFya2Rvd25Db25maWcgPSBuZXcgTWFya2Rvd25Db25maWdWaWV3KGFwcCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGV4aXN0aW5nV2lkZ2V0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNDcmVhdGlvbk1vZGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy53aWRnZXQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGV4aXN0aW5nV2lkZ2V0KSk7XHJcbiAgICAgICAgICAgIHRoaXMuZW5zdXJlRGVmYXVsdHMoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmlzQ3JlYXRpb25Nb2RlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy53aWRnZXQgPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcclxuICAgICAgICAgICAgICAgIGRhc2hib2FyZElkOiBkYXNoYm9hcmRJZCxcclxuICAgICAgICAgICAgICAgIC4uLldJREdFVF9ERUZBVUxUU1snY2hhcnQnXSgpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZW5zdXJlRGVmYXVsdHMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMud2lkZ2V0LnR5cGUgPT09ICdjaGFydCcpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLndpZGdldC5kYXRhU291cmNlcyB8fCB0aGlzLndpZGdldC5kYXRhU291cmNlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2lkZ2V0LmRhdGFTb3VyY2VzID0gV0lER0VUX0RFRkFVTFRTWydjaGFydCddKCkuZGF0YVNvdXJjZXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLndpZGdldC55QXhpc1Byb3BlcnRpZXMpIHRoaXMud2lkZ2V0LnlBeGlzUHJvcGVydGllcyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRmxleCBMYXlvdXRcclxuICAgICAgICBjb250ZW50RWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICBjb250ZW50RWwuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nO1xyXG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XHJcbiAgICAgICAgY29udGVudEVsLnN0eWxlLm1heEhlaWdodCA9ICc4MHZoJztcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBoZWFkZXJEaXYgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XHJcbiAgICAgICAgY29uc3QgdGl0bGVUZXh0ID0gdGhpcy5pc0NyZWF0aW9uTW9kZSA/ICdcdTZERkJcdTUyQTBcdTdFQzRcdTRFRjYnIDogYFx1N0YxNlx1OEY5MTogJHt0aGlzLndpZGdldC50aXRsZX1gO1xyXG4gICAgICAgIGhlYWRlckRpdi5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHRpdGxlVGV4dCB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoaGVhZGVyRGl2KVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU2ODA3XHU5ODk4JylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0LnNldFZhbHVlKHRoaXMud2lkZ2V0LnRpdGxlIHx8ICcnKS5vbkNoYW5nZSh2YWx1ZSA9PiB0aGlzLndpZGdldC50aXRsZSA9IHZhbHVlKSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzQ3JlYXRpb25Nb2RlKSB7IFxyXG4gICAgICAgICAgICAgbmV3IFNldHRpbmcoaGVhZGVyRGl2KVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1N0M3Qlx1NTc4QicpXHJcbiAgICAgICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcCA9PiBkcm9wXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2hhcnQnLCAnXHU3RURGXHU4QkExXHU1NkZFXHU4ODY4JylcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdsaXN0JywgJ1x1NjU4N1x1NEVGNlx1NTIxN1x1ODg2OCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbigndG9kbycsICdcdTVGODVcdTUyOUVcdTZFMDVcdTUzNTUnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ21hcmtkb3duJywgJ01hcmtkb3duIFx1N0IxNFx1OEJCMCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMud2lkZ2V0LnR5cGUgfHwgJ2NoYXJ0JylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlOiBXaWRnZXRUeXBlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2lkZ2V0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMud2lkZ2V0LmlkLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhc2hib2FyZElkOiB0aGlzLmRhc2hib2FyZElkLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLndpZGdldC50aXRsZSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5XSURHRVRfREVGQVVMVFNbdmFsdWVdKCkgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25PcGVuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY29uZmlnQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdignZGwtY29uZmlnLWNvbnRhaW5lcicpO1xyXG4gICAgICAgIGNvbmZpZ0NvbnRhaW5lci5zdHlsZS5mbGV4ID0gJzEnO1xyXG4gICAgICAgIGNvbmZpZ0NvbnRhaW5lci5zdHlsZS5vdmVyZmxvd1kgPSAnYXV0byc7XHJcbiAgICAgICAgY29uZmlnQ29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAnMTBweCAwJztcclxuICAgICAgICBjb25maWdDb250YWluZXIuc3R5bGUuYm9yZGVyVG9wID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xyXG4gICAgICAgIGNvbmZpZ0NvbnRhaW5lci5zdHlsZS5ib3JkZXJCb3R0b20gPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XHJcbiAgICAgICAgY29uZmlnQ29udGFpbmVyLnN0eWxlLm1hcmdpbiA9ICcxMHB4IDAnO1xyXG5cclxuICAgICAgICB0aGlzLnJlbmRlclNwZWNpZmljQ29uZmlnKGNvbmZpZ0NvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIGNvbnN0IGZvb3RlciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ2RsLW1vZGFsLWZvb3RlcicpO1xyXG4gICAgICAgIGZvb3Rlci5zdHlsZS5mbGV4U2hyaW5rID0gJzAnO1xyXG4gICAgICAgIGZvb3Rlci5zdHlsZS5ib3JkZXJUb3AgPSAnbm9uZSc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgc2F2ZUJ0biA9IGZvb3Rlci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHU0RkREXHU1QjU4JywgY2xzOiAnbW9kLWN0YScgfSk7XHJcbiAgICAgICAgc2F2ZUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMud2lkZ2V0LnRpdGxlKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY4MDdcdTk4OThcdTRFMERcdTgwRkRcdTRFM0FcdTdBN0EnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm9uU3VibWl0KHRoaXMud2lkZ2V0IGFzIFdpZGdldCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyU3BlY2lmaWNDb25maWcoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy53aWRnZXQudHlwZSkgcmV0dXJuO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy53aWRnZXQudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnY2hhcnQnOiB0aGlzLmNoYXJ0Q29uZmlnLnJlbmRlcihjb250YWluZXIsIHRoaXMud2lkZ2V0IGFzIGFueSk7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbGlzdCc6IHRoaXMubGlzdENvbmZpZy5yZW5kZXIoY29udGFpbmVyLCB0aGlzLndpZGdldCBhcyBhbnkpOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3RvZG8nOiB0aGlzLnRvZG9Db25maWcucmVuZGVyKGNvbnRhaW5lciwgdGhpcy53aWRnZXQgYXMgYW55KTsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdtYXJrZG93bic6IHRoaXMubWFya2Rvd25Db25maWcucmVuZGVyKGNvbnRhaW5lciwgdGhpcy53aWRnZXQgYXMgYW55KTsgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDb25maWcgUmVuZGVyIEVycm9yXCIsIGUpO1xyXG4gICAgICAgICAgICBjb250YWluZXIuY3JlYXRlRGl2KHsgdGV4dDogJ1x1OTE0RFx1N0Y2RVx1OTc2Mlx1Njc3Rlx1NkUzMlx1NjdEM1x1NTFGQVx1OTUxOVx1RkYwQ1x1OEJGN1x1NjdFNVx1NzcwQlx1NjNBN1x1NTIzNlx1NTNGMFx1MzAwMicsIHN0eWxlOiAnY29sb3I6IHZhcigtLXRleHQtZXJyb3IpJyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgfVxyXG59IiwgIi8vID09PSBGSUxFOiBtYWluLnRzID09PVxyXG5pbXBvcnQgeyBQbHVnaW4sIFdvcmtzcGFjZUxlYWYsIGRlYm91bmNlLCBURmlsZSwgTm90aWNlLCBFZGl0b3IsIE1hcmtkb3duVmlldyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgU2V0dGluZ3NNYW5hZ2VyIH0gZnJvbSAnLi9jb3JlL1NldHRpbmdzTWFuYWdlcic7XHJcbmltcG9ydCB7IEZvcm11bGFNYW5hZ2VyIH0gZnJvbSAnLi9jb3JlL0Zvcm11bGFNYW5hZ2VyJztcclxuaW1wb3J0IHsgTWFpblZpZXcsIFZJRVdfVFlQRV9ESUdJVEFMX0xJRkUgfSBmcm9tICcuL3VpL01haW5WaWV3JztcclxuaW1wb3J0IHsgRGlnaXRhbExpZmVTZXR0aW5nVGFiIH0gZnJvbSAnLi91aS9EaWdpdGFsTGlmZVNldHRpbmdUYWInO1xyXG5pbXBvcnQgeyBQcm9wZXJ0eVZpc2liaWxpdHlNb2RhbCB9IGZyb20gJy4vdWkvbW9kYWxzL1Byb3BlcnR5VmlzaWJpbGl0eU1vZGFsJztcclxuaW1wb3J0IHsgTm90ZUNyZWF0b3JNb2RhbCB9IGZyb20gJy4vdWkvbW9kYWxzL05vdGVDcmVhdG9yTW9kYWwnO1xyXG5pbXBvcnQgeyBDc3ZTZWxlY3Rpb25Nb2RhbCwgQ29sdW1uU2VsZWN0aW9uTW9kYWwgfSBmcm9tICcuL3VpL21vZGFscy9Dc3ZJbXBvcnRNb2RhbCc7XHJcbmltcG9ydCB7IENzdlBhcnNlciB9IGZyb20gJy4vY29yZS91dGlscy9Dc3ZQYXJzZXInO1xyXG5pbXBvcnQgeyBRdWlja1Rhc2tNb2RhbCB9IGZyb20gJy4vdWkvbW9kYWxzL1F1aWNrVGFza01vZGFsJzsgXHJcbmltcG9ydCB7IFNlYXJjaE1vZGFsIH0gZnJvbSAnLi91aS9tb2RhbHMvU2VhcmNoTW9kYWwnO1xyXG5pbXBvcnQgeyBUYXNrU2VydmljZSB9IGZyb20gJy4vY29yZS9zZXJ2aWNlcy9UYXNrU2VydmljZSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEaWdpdGFsTGlmZVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcbiAgICBwdWJsaWMgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXI7XHJcbiAgICBwdWJsaWMgZm9ybXVsYU1hbmFnZXI6IEZvcm11bGFNYW5hZ2VyO1xyXG4gICAgcHVibGljIHRhc2tTZXJ2aWNlOiBUYXNrU2VydmljZTtcclxuICAgIHByaXZhdGUgZGVib3VuY2VkQ2FsY3VsYXRlOiAoZmlsZTogVEZpbGUpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIGRlYm91bmNlZEF1dG9DYXB0dXJlOiAoZmlsZTogVEZpbGUpID0+IHZvaWQ7IC8vIFtcdTY1QjBcdTU4OUVdXHJcblxyXG4gICAgYXN5bmMgb25sb2FkKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdMb2FkaW5nIERpZ2l0YWwgTGlmZSBQbHVnaW4gdjEuMy4wJyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyID0gbmV3IFNldHRpbmdzTWFuYWdlcih0aGlzKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5sb2FkU2V0dGluZ3MoKTtcclxuXHJcbiAgICAgICAgdGhpcy5mb3JtdWxhTWFuYWdlciA9IG5ldyBGb3JtdWxhTWFuYWdlcih0aGlzLmFwcCwgdGhpcy5zZXR0aW5nc01hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMuZm9ybXVsYU1hbmFnZXIudXBkYXRlSGlkZGVuUHJvcGVydGllc0NTUygpO1xyXG5cclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlID0gbmV3IFRhc2tTZXJ2aWNlKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzTWFuYWdlcik7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxyXG4gICAgICAgICAgICBWSUVXX1RZUEVfRElHSVRBTF9MSUZFLFxyXG4gICAgICAgICAgICAobGVhZjogV29ya3NwYWNlTGVhZikgPT4gbmV3IE1haW5WaWV3KGxlYWYsIHRoaXMuc2V0dGluZ3NNYW5hZ2VyKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgRGlnaXRhbExpZmVTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbignaG9tZScsICdcdTYyNTNcdTVGMDBcdTY1NzBcdTVCNTdcdTRFQkFcdTc1MUZcdTRFRUFcdTg4NjhcdTc2RDgnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZhdGVWaWV3KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIC0tLSBDb21tYW5kcyAtLS1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ29wZW4tZGlnaXRhbC1saWZlLWRhc2hib2FyZCcsXHJcbiAgICAgICAgICAgIG5hbWU6ICdcdTYyNTNcdTVGMDBcdTRFRUFcdTg4NjhcdTc2RDggKE9wZW4gRGFzaGJvYXJkKScsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7IHRoaXMuYWN0aXZhdGVWaWV3KCk7IH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdkaWdpdGFsLWxpZmUtcXVpY2stdGFzay1jbWQnLFxyXG4gICAgICAgICAgICBuYW1lOiAnXHU1RkVCXHU5MDFGXHU1MjFCXHU1RUZBXHU0RUZCXHU1MkExIChTbWFydCBUYXNrKScsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXcgUXVpY2tUYXNrTW9kYWwodGhpcy5hcHAsIGFzeW5jICh0YXNrTGluZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudGFza1NlcnZpY2UucXVpY2tBZGRUYXNrKHRhc2tMaW5lKTtcclxuICAgICAgICAgICAgICAgIH0pLm9wZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ2NyZWF0ZS1uZXctbm90ZS1tb2RhbCcsXHJcbiAgICAgICAgICAgIG5hbWU6ICdcdTY1QjBcdTVFRkFcdTdCMTRcdThCQjAgKFx1NEVDRVx1NkEyMVx1Njc3Rlx1NTIxQlx1NUVGQSknLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4geyBuZXcgTm90ZUNyZWF0b3JNb2RhbCh0aGlzLmFwcCwgdGhpcy5zZXR0aW5nc01hbmFnZXIpLm9wZW4oKTsgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ2luc2VydC1jc3YtYXMtdGFibGUnLFxyXG4gICAgICAgICAgICBuYW1lOiAnXHU1QkZDXHU1MTY1IENTViBcdTRFM0EgTWFya2Rvd24gXHU4ODY4XHU2ODNDJyxcclxuICAgICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3IsIHZpZXcpID0+IHtcclxuICAgICAgICAgICAgICAgIG5ldyBDc3ZTZWxlY3Rpb25Nb2RhbCh0aGlzLmFwcCwgYXN5bmMgKGZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IENzdlBhcnNlci5nZXRIZWFkZXJzKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVycy5sZW5ndGggPT09IDApIHsgbmV3IE5vdGljZSgnQ1NWIFx1NjU4N1x1NEVGNlx1NEUzQVx1N0E3QVx1NjIxNlx1NjgzQ1x1NUYwRlx1NjVFMFx1NjU0OCcpOyByZXR1cm47IH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IENvbHVtblNlbGVjdGlvbk1vZGFsKHRoaXMuYXBwLCBoZWFkZXJzLCAoc2VsZWN0ZWRJbmRpY2VzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRJbmRpY2VzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2Rvd25UYWJsZSA9IENzdlBhcnNlci5jb252ZXJ0VG9NYXJrZG93bihjb250ZW50LCBzZWxlY3RlZEluZGljZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24obWFya2Rvd25UYWJsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLm9wZW4oKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgeyBjb25zb2xlLmVycm9yKCdDU1YgXHU1OTA0XHU3NDA2XHU1OTMxXHU4RDI1JywgZXJyb3IpOyBuZXcgTm90aWNlKCdcdTVCRkNcdTUxNjVcdTU5MzFcdThEMjUnKTsgfVxyXG4gICAgICAgICAgICAgICAgfSkub3BlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnbWFuYWdlLWhpZGRlbi1wcm9wZXJ0aWVzJyxcclxuICAgICAgICAgICAgbmFtZTogJ1x1N0JBMVx1NzQwNlx1NUY1M1x1NTI0RFx1N0IxNFx1OEJCMFx1NUM1RVx1NjAyN1x1NjYzRVx1OTY5MCcsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuICAgICAgICAgICAgICAgIGlmKGYpIG5ldyBQcm9wZXJ0eVZpc2liaWxpdHlNb2RhbCh0aGlzLmFwcCwgdGhpcy5zZXR0aW5nc01hbmFnZXIsIHRoaXMuZm9ybXVsYU1hbmFnZXIsIGYpLm9wZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ21hbnVhbC1jYWxjdWxhdGUteWFtbCcsXHJcbiAgICAgICAgICAgIG5hbWU6ICdcdTYyNEJcdTUyQThcdThCQTFcdTdCOTcgWUFNTCBcdTUxNkNcdTVGMEYnLFxyXG4gICAgICAgICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvciwgdmlldykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZpZXcuZmlsZSkgdGhpcy5mb3JtdWxhTWFuYWdlci5jYWxjdWxhdGVGb3JtdWxhcyh2aWV3LmZpbGUsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnc2VhcmNoLWRpZ2l0YWwtbGlmZScsXHJcbiAgICAgICAgICAgIG5hbWU6ICdcdTY0MUNcdTdEMjInLFxyXG4gICAgICAgICAgICBob3RrZXlzOiBbXHJcbiAgICAgICAgICAgICAgICB7IG1vZGlmaWVyczogWydDdHJsJ10sIGtleTogJ3AnIH1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIG5ldyBTZWFyY2hNb2RhbCh0aGlzLmFwcCkub3BlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIC0tLSBFdmVudHMgLS0tXHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5kZWJvdW5jZWRDYWxjdWxhdGUgPSBkZWJvdW5jZSgoZmlsZTogVEZpbGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5mb3JtdWxhTWFuYWdlci5jYWxjdWxhdGVGb3JtdWxhcyhmaWxlLCBmYWxzZSk7XHJcbiAgICAgICAgfSwgMTAwMCwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIC8vIFtcdTY1QjBcdTU4OUVdIFx1ODFFQVx1NTJBOFx1NjM1NVx1ODNCN1x1OTYzMlx1NjI5NlxyXG4gICAgICAgIHRoaXMuZGVib3VuY2VkQXV0b0NhcHR1cmUgPSBkZWJvdW5jZShhc3luYyAoZmlsZTogVEZpbGUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGFza1NldHRpbmdzID0gdGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZ3MoKS50YXNrTWFuYWdlbWVudDtcclxuICAgICAgICAgICAgaWYgKHRhc2tTZXR0aW5ncy5hdXRvQ2FwdHVyZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU0RTBEXHU0RjIwXHU1MTY1IGNvbmZpZ1x1RkYwQ1x1NTM3M1x1NjI2Qlx1NjNDRlx1NTE2OFx1NUU5M1x1RkYwOFRhc2tTZXJ2aWNlIFx1NTE4NVx1OTBFOFx1NEYxQVx1OEZDN1x1NkVFNCBJbmJveC9BcmNoaXZlXHVGRjA5XHJcbiAgICAgICAgICAgICAgICAvLyBcdTRGMThcdTUzMTZcdUZGMUFcdTRFQzVcdTYyNkJcdTYzQ0ZcdTVGNTNcdTUyNERcdTUzRDhcdTY2RjRcdTc2ODRcdTY1ODdcdTRFRjZcdUZGMUZcclxuICAgICAgICAgICAgICAgIC8vIGNhcHR1cmVUYXNrcyBcdTYzQTVcdTUzRTNcdTc2RUVcdTUyNERcdThCQkVcdThCQTFcdTRFM0FcdTYyNkJcdTYzQ0ZcdTY1ODdcdTRFRjZcdTU5MzlcdUZGMENcdThGRDlcdTkxQ0NcdTYyMTFcdTRFRUNcdTRGMjBcdTUxNjUgY29uZmlnIFx1NEUzQSBudWxsIFx1ODlFNlx1NTNEMVx1NTE2OFx1NUM0MFx1NjI2Qlx1NjNDRlxyXG4gICAgICAgICAgICAgICAgLy8gXHU0RTNBXHU0RTg2XHU2MDI3XHU4MEZEXHVGRjBDXHU2NzAwXHU1OTdEXHU0RkVFXHU2NTM5IGNhcHR1cmVUYXNrcyBcdTY1MkZcdTYzMDFcdTUzNTVcdTY1ODdcdTRFRjZcdUZGMENcdTRGNDZcdTc2RUVcdTUyNERcdTRFM0FcdTRFODZcdTdCODBcdTUzMTZcdUZGMENcdTYyMTFcdTRFRUNcdTRFQzVcdTU3MjhcdTRGRUVcdTY1MzlcdTY1ODdcdTRFRjZcdTRFMERcdTY2MkYgSW5ib3gvQXJjaGl2ZSBcdTY1RjZcdTg5RTZcdTUzRDFcclxuICAgICAgICAgICAgICAgIGlmIChmaWxlLnBhdGggIT09IHRhc2tTZXR0aW5ncy5jYXB0dXJlSW5ib3hQYXRoICYmIGZpbGUucGF0aCAhPT0gdGFza1NldHRpbmdzLmFyY2hpdmVQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50YXNrU2VydmljZS5jYXB0dXJlVGFza3MobnVsbCk7IFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMzAwMCwgdHJ1ZSk7IC8vIDNcdTc5RDJcdTk2MzJcdTYyOTZcdUZGMENcdTkwN0ZcdTUxNERcdTk4OTFcdTdFNDFcdTg5RTZcdTUzRDFcclxuXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUub24oJ2NoYW5nZWQnLCAoZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuICAgICAgICAgICAgLy8gXHU1MTZDXHU1RjBGXHU4QkExXHU3Qjk3XHJcbiAgICAgICAgICAgIGlmIChhY3RpdmVGaWxlICYmIGZpbGUucGF0aCA9PT0gYWN0aXZlRmlsZS5wYXRoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlYm91bmNlZENhbGN1bGF0ZShhY3RpdmVGaWxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBcdTgxRUFcdTUyQThcdTYzNTVcdTgzQjdcclxuICAgICAgICAgICAgdGhpcy5kZWJvdW5jZWRBdXRvQ2FwdHVyZShmaWxlKTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgb251bmxvYWQoKSB7fVxyXG5cclxuICAgIGFzeW5jIGFjdGl2YXRlVmlldygpIHtcclxuICAgICAgICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XHJcbiAgICAgICAgbGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcclxuICAgICAgICBjb25zdCBsZWF2ZXMgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9ESUdJVEFMX0xJRkUpO1xyXG4gICAgICAgIGlmIChsZWF2ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBsZWFmID0gbGVhdmVzWzBdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKTsgXHJcbiAgICAgICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogVklFV19UWVBFX0RJR0lUQUxfTElGRSwgYWN0aXZlOiB0cnVlIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGVhZikgeyB3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTsgfVxyXG4gICAgfVxyXG59XHJcbiIsICIvLyA9PT0gRklMRTogY29yZS90eXBlcy50cyA9PT1cclxuaW1wb3J0IHsgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vLyAtLS0gRmlsdGVyIC0tLVxyXG5leHBvcnQgdHlwZSBGaWx0ZXJPcGVyYXRvciA9ICdlcScgfCAnbmVxJyB8ICdjb250YWlucycgfCAnbm90X2NvbnRhaW5zJyB8ICdndCcgfCAnbHQnIHwgJ2d0ZScgfCAnbHRlJztcclxuZXhwb3J0IHR5cGUgRmlsdGVyTG9naWMgPSAnQU5EJyB8ICdPUic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEZpbHRlckNvbmRpdGlvbiB7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgY29sdW1uOiBzdHJpbmc7XHJcbiAgICBvcGVyYXRvcjogRmlsdGVyT3BlcmF0b3I7XHJcbiAgICB2YWx1ZTogc3RyaW5nO1xyXG4gICAgZW5hYmxlZDogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBGaWx0ZXJDb25maWcge1xyXG4gICAgbG9naWM6IEZpbHRlckxvZ2ljO1xyXG4gICAgY29uZGl0aW9uczogRmlsdGVyQ29uZGl0aW9uW107XHJcbiAgICBlbmFibGVTcGxpdFNlcmllcz86IGJvb2xlYW47XHJcbn1cclxuXHJcbi8vIC0tLSBEYXRhU291cmNlIC0tLVxyXG5leHBvcnQgaW50ZXJmYWNlIERhdGFTb3VyY2Uge1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIHR5cGU/OiAnZm9sZGVyJyB8ICdmaWxlJzsgXHJcbiAgICBmb2xkZXJQYXRoOiBzdHJpbmc7XHJcbiAgICBmaWxlUGF0aD86IHN0cmluZztcclxuICAgIFxyXG4gICAgLy8gXHU5QUQ4XHU3RUE3XHU4RkM3XHU2RUU0XHU5MTREXHU3RjZFXHJcbiAgICBmaWx0ZXJDb25maWc/OiBGaWx0ZXJDb25maWc7XHJcbiAgICBcclxuICAgIC8vIFx1NTE3Q1x1NUJCOVx1NjVFN1x1NUI1N1x1NkJCNVxyXG4gICAgdGFibGVGaWx0ZXJDb2x1bW4/OiBzdHJpbmc7XHJcbiAgICB0YWJsZUZpbHRlclZhbHVlPzogc3RyaW5nO1xyXG4gICAgXHJcbiAgICBmaWx0ZXI6IERhdGFTb3VyY2VGaWx0ZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvcGVydHlDb25maWcgeyBcclxuICAgIHR5cGU6ICdmaWVsZCcgfCAndGFnJzsgXHJcbiAgICBuYW1lOiBzdHJpbmc7IFxyXG4gICAgYWdncmVnYXRpb246IEFnZ3JlZ2F0aW9uVHlwZTsgXHJcbiAgICBjb2xvcj86IHN0cmluZzsgXHJcbiAgICBlbmFibGVQZXJjZW50YWdlPzogYm9vbGVhbjtcclxuICAgIGZpbHRlckNvbmZpZz86IEZpbHRlckNvbmZpZztcclxufVxyXG5cclxuLy8gLS0tIFtcdTY1QjBcdTU4OUVdIFx1NEVGQlx1NTJBMVx1N0JBMVx1NzQwNlx1NTE2OFx1NUM0MFx1OTE0RFx1N0Y2RSAtLS1cclxuZXhwb3J0IGludGVyZmFjZSBUYXNrTWFuYWdlbWVudFNldHRpbmdzIHtcclxuICAgIGNhcHR1cmVJbmJveFBhdGg6IHN0cmluZztcclxuICAgIGFyY2hpdmVQYXRoOiBzdHJpbmc7XHJcbiAgICB0YXNrTm90ZUF0dHJpYnV0ZTogc3RyaW5nOyAvLyBlLmcuIFwidHlwZT10YXNrXCJcclxuICAgIGF1dG9BcmNoaXZlOiBib29sZWFuO1xyXG4gICAgYXV0b0NhcHR1cmU6IGJvb2xlYW47IC8vIFtcdTY1QjBcdTU4OUVdIFx1ODFFQVx1NTJBOFx1NjM1NVx1ODNCN1x1NUYwMFx1NTE3M1xyXG59XHJcblxyXG4vLyAtLS0gU2V0dGluZ3MgLS0tXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGlnaXRhbExpZmVQbHVnaW5TZXR0aW5ncyB7XHJcbiAgICBkYXNoYm9hcmRzOiBEYXNoYm9hcmRbXTtcclxuICAgIHdpZGdldHM6IFdpZGdldFtdO1xyXG4gICAgYWN0aXZlRGFzaGJvYXJkSWQ6IHN0cmluZyB8IG51bGw7XHJcbiAgICBub3RlQ3JlYXRvcjogeyB0ZW1wbGF0ZVBhdGg6IHN0cmluZzsgc2F2ZVBhdGg6IHN0cmluZzsgfTtcclxuICAgIGZvcm11bGE6IHsgaGlkZGVuUHJvcGVydGllczogc3RyaW5nW107IGlzSGlkaW5nRW5hYmxlZDogYm9vbGVhbjsgZW5hYmxlUm91bmRpbmc6IGJvb2xlYW47IHJvdW5kaW5nUHJlY2lzaW9uOiBudW1iZXI7IH07XHJcbiAgICBcclxuICAgIC8vIFtcdTY1QjBcdTU4OUVdXHJcbiAgICB0YXNrTWFuYWdlbWVudDogVGFza01hbmFnZW1lbnRTZXR0aW5ncztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEYXNoYm9hcmQgeyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmc7IGxheW91dDogTGF5b3V0SXRlbVtdOyBjcmVhdGVkQXQ6IG51bWJlcjsgdXBkYXRlZEF0OiBudW1iZXI7IGlzUGlubmVkPzogYm9vbGVhbjsgfVxyXG5leHBvcnQgaW50ZXJmYWNlIExheW91dEl0ZW0geyBpOiBzdHJpbmc7IHg6IG51bWJlcjsgeTogbnVtYmVyOyB3OiBudW1iZXI7IGg6IG51bWJlcjsgd2lkZ2V0SWQ6IHN0cmluZzsgfVxyXG5leHBvcnQgdHlwZSBXaWRnZXRUeXBlID0gJ2NoYXJ0JyB8ICdsaXN0JyB8ICd0b2RvJyB8ICdtYXJrZG93bic7XHJcbmV4cG9ydCBpbnRlcmZhY2UgV2lkZ2V0QmFzZSB7IGlkOiBzdHJpbmc7IHR5cGU6IFdpZGdldFR5cGU7IHRpdGxlOiBzdHJpbmc7IGRhc2hib2FyZElkOiBzdHJpbmc7IH1cclxuXHJcbi8vIFtcdTRGRUVcdTY1MzldIFx1NTg5RVx1NTJBMCBnaXRsaW5lIFx1N0M3Qlx1NTc4QlxyXG5leHBvcnQgdHlwZSBDaGFydFR5cGUgPSAnbGluZScgfCAnYmFyJyB8ICdzY2F0dGVyJyB8ICdwaWUnIHwgJ3JhZGFyJyB8ICdoZWF0bWFwJyB8ICdoaXN0b2dyYW0nIHwgJ2dpdGxpbmUnO1xyXG5leHBvcnQgdHlwZSBBZ2dyZWdhdGlvblR5cGUgPSAnc3VtJyB8ICdjb3VudCcgfCAnbWF4JyB8ICdtaW4nIHwgJ2F2ZycgfCAncmF3JztcclxuZXhwb3J0IHR5cGUgWEF4aXNNb2RlID0gJ2Zyb250bWF0dGVyJyB8ICdjcmVhdGVkJyB8ICdtb2RpZmllZCcgfCAnZmlsZW5hbWUnIHwgJ3RhZ3MnO1xyXG5leHBvcnQgaW50ZXJmYWNlIERhdGFTb3VyY2VGaWx0ZXIgeyB0YWdzOiBzdHJpbmdbXTsgfVxyXG5leHBvcnQgaW50ZXJmYWNlIFJlZkxpbmUgeyB2YWx1ZTogbnVtYmVyOyBsYWJlbD86IHN0cmluZzsgY29sb3I/OiBzdHJpbmc7IGVuYWJsZVJlZ2lvbj86IGJvb2xlYW47IHJlZ2lvbkNvbG9yPzogc3RyaW5nOyByZWdpb25Qb3NpdGlvbj86ICdhYm92ZScgfCAnYmVsb3cnOyB9XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENoYXJ0V2lkZ2V0IGV4dGVuZHMgV2lkZ2V0QmFzZSB7XHJcbiAgICB0eXBlOiAnY2hhcnQnO1xyXG4gICAgY2hhcnRUeXBlOiBDaGFydFR5cGU7XHJcbiAgICBpc0RvbnV0PzogYm9vbGVhbjtcclxuICAgIGRhdGFTb3VyY2VzOiBEYXRhU291cmNlW107XHJcbiAgICB4QXhpc01vZGU6IFhBeGlzTW9kZTtcclxuICAgIHhBeGlzUHJvcGVydHk6IHN0cmluZ1tdOyBcclxuICAgIHhBeGlzQ29sb3JzPzogc3RyaW5nW107XHJcbiAgICBlbmFibGVMaW5rUGVuZXRyYXRpb24/OiBib29sZWFuOyBcclxuICAgIHNlcGFyYXRlQXhlcz86IGJvb2xlYW47IFxyXG4gICAgZW5hYmxlVHJhbnNwb3NlPzogYm9vbGVhbjtcclxuICAgIGlzVG90YWxDb3VudD86IGJvb2xlYW47IFxyXG4gICAgaXNDdW11bGF0aXZlPzogYm9vbGVhbjtcclxuICAgIHlBeGlzUHJvcGVydGllczogUHJvcGVydHlDb25maWdbXTsgXHJcbiAgICB5QXhpc01vZGU/OiBYQXhpc01vZGU7IFxyXG4gICAgeUF4aXNQcm9wZXJ0eT86IHN0cmluZzsgXHJcbiAgICBidWJibGVTaXplUHJvcGVydHk/OiBzdHJpbmc7IFxyXG4gICAgYnViYmxlTGFiZWxQcm9wZXJ0eT86IHN0cmluZzsgXHJcbiAgICBidWJibGVDb2xvcj86IHN0cmluZzsgXHJcbiAgICBiaW5TaXplPzogbnVtYmVyO1xyXG4gICAgeUF4aXNNaW4/OiBudW1iZXI7XHJcbiAgICB5QXhpc01heD86IG51bWJlcjsgXHJcbiAgICByZWZMaW5lczogUmVmTGluZVtdO1xyXG4gICAgZW5hYmxlUmVmTGluZVpvbmVzPzogYm9vbGVhbjtcclxuICAgIGVuYWJsZVRvb2x0aXA6IGJvb2xlYW47XHJcbiAgICBzaG93TGVnZW5kOiBib29sZWFuO1xyXG4gICAgc2hvd0RhdGFMYWJlbHM6IGJvb2xlYW47XHJcbiAgICBlbmFibGVTbW9vdGhDdXJ2ZTogYm9vbGVhbjtcclxuICAgIGlnbm9yZUVtcHR5OiBib29sZWFuO1xyXG4gICAgaXNTdGFja2VkPzogYm9vbGVhbjtcclxuICAgIGlzSG9yaXpvbnRhbD86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTGlzdFdpZGdldCBleHRlbmRzIFdpZGdldEJhc2UgeyB0eXBlOiAnbGlzdCc7IGZvbGRlclBhdGg6IHN0cmluZzsgZmlsdGVyVGFnczogc3RyaW5nW107IHNvcnRCeTogJ2NyZWF0ZWQnIHwgJ21vZGlmaWVkJyB8ICduYW1lJzsgc29ydE9yZGVyOiAnYXNjJyB8ICdkZXNjJzsgbGltaXQ6IG51bWJlcjsgfVxyXG5leHBvcnQgaW50ZXJmYWNlIE1hcmtkb3duV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0QmFzZSB7IHR5cGU6ICdtYXJrZG93bic7IGZpbGVQYXRoOiBzdHJpbmc7IG1vZGU6ICdwcmV2aWV3JyB8ICdlZGl0JzsgfVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUb2RvV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0QmFzZSB7IFxyXG4gICAgdHlwZTogJ3RvZG8nOyBcclxuICAgIFxyXG4gICAgc291cmNlVHlwZT86ICdmb2xkZXInIHwgJ2ZpbGUnOyBcclxuICAgIGZvbGRlclBhdGg6IHN0cmluZzsgXHJcbiAgICBmaWxlUGF0aD86IHN0cmluZztcclxuXHJcbiAgICBpbmNsdWRlU3ViZm9sZGVyczogYm9vbGVhbjsgXHJcbiAgICBoaWRlQ29tcGxldGVkOiBib29sZWFuOyBcclxuICAgIFxyXG4gICAgZ3JvdXBCeT86ICdmaWxlJyB8ICdub25lJzsgXHJcbiAgICBzb3J0Qnk/OiAncHJpb3JpdHknIHwgJ2RhdGUnIHwgJ2RlZmF1bHQnO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRhc2tJdGVtIHtcclxuICAgIGlkOiBzdHJpbmc7XHJcbiAgICB0ZXh0OiBzdHJpbmc7XHJcbiAgICBjb21wbGV0ZWQ6IGJvb2xlYW47XHJcbiAgICBmaWxlOiBURmlsZTtcclxuICAgIGxpbmU6IG51bWJlcjtcclxuICAgIHByaW9yaXR5PzogJ2hpZ2gnIHwgJ21lZGl1bScgfCAnbG93JztcclxuICAgIGR1ZURhdGU/OiBzdHJpbmc7XHJcbiAgICBpc1Rhc2tOb3RlU3VidGFzaz86IGJvb2xlYW47IFxyXG4gICAgaW5kZW50YXRpb24/OiBudW1iZXI7IC8vIFtcdTY1QjBcdTU4OUVdIFx1NzUyOFx1NEU4RSBHaXRMaW5lIFx1N0VEOFx1NTIzNlx1NUM0Mlx1N0VBN1xyXG4gICAgLyoqIEdpdHRvIFx1OEJFRFx1NEU0OSAqL1xyXG4gICAgYnJhbmNoU3RhcnQ/OiBib29sZWFuOyAgLy8gXHU2NjJGXHU1NDI2XHU1RjAwXHU1NDJGXHU2NUIwXHU1MjA2XHU2NTJGXHJcbiAgICBicmFuY2hFbmQ/OiBib29sZWFuOyAgICAvLyBcdTY2MkZcdTU0MjZcdTdFRDNcdTY3NUZcdTVGNTNcdTUyNERcdTUyMDZcdTY1MkZcdUZGMDhtZXJnZVx1RkYwOVxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBXaWRnZXQgPSBDaGFydFdpZGdldCB8IExpc3RXaWRnZXQgfCBUb2RvV2lkZ2V0IHwgTWFya2Rvd25XaWRnZXQ7XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRGlnaXRhbExpZmVQbHVnaW5TZXR0aW5ncyA9IHtcclxuICAgIGRhc2hib2FyZHM6IFtdLCB3aWRnZXRzOiBbXSwgYWN0aXZlRGFzaGJvYXJkSWQ6IG51bGwsXHJcbiAgICBub3RlQ3JlYXRvcjogeyB0ZW1wbGF0ZVBhdGg6ICcnLCBzYXZlUGF0aDogJycgfSxcclxuICAgIGZvcm11bGE6IHsgaGlkZGVuUHJvcGVydGllczogW10sIGlzSGlkaW5nRW5hYmxlZDogdHJ1ZSwgZW5hYmxlUm91bmRpbmc6IHRydWUsIHJvdW5kaW5nUHJlY2lzaW9uOiAyIH0sXHJcbiAgICB0YXNrTWFuYWdlbWVudDogeyBjYXB0dXJlSW5ib3hQYXRoOiAnJywgYXJjaGl2ZVBhdGg6ICcnLCB0YXNrTm90ZUF0dHJpYnV0ZTogJycsIGF1dG9BcmNoaXZlOiBmYWxzZSwgYXV0b0NhcHR1cmU6IGZhbHNlIH1cclxufTsiLCAiLy8gPT09IEZJTEU6IGNvcmUvU2V0dGluZ3NNYW5hZ2VyLnRzID09PVxyXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IERpZ2l0YWxMaWZlUGx1Z2luU2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MsIERhc2hib2FyZCwgV2lkZ2V0LCBMYXlvdXRJdGVtIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU2V0dGluZ3NNYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgcGx1Z2luOiBQbHVnaW47XHJcbiAgICBwcml2YXRlIHNldHRpbmdzOiBEaWdpdGFsTGlmZVBsdWdpblNldHRpbmdzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IERFRkFVTFRfU0VUVElOR1M7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IGxvYWRlZERhdGEgPSBhd2FpdCB0aGlzLnBsdWdpbi5sb2FkRGF0YSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBsb2FkZWREYXRhKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTc4NkVcdTRGRERcdTZERjFcdTVDNDJcdTVCRjlcdThDNjFcdTVCNThcdTU3MjhcclxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZm9ybXVsYSkgdGhpcy5zZXR0aW5ncy5mb3JtdWxhID0geyAuLi5ERUZBVUxUX1NFVFRJTkdTLmZvcm11bGEgfTtcclxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MudGFza01hbmFnZW1lbnQpIHRoaXMuc2V0dGluZ3MudGFza01hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfU0VUVElOR1MudGFza01hbmFnZW1lbnQgfTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAobG9hZGVkRGF0YT8uZm9ybXVsYSkgdGhpcy5zZXR0aW5ncy5mb3JtdWxhID0geyAuLi5ERUZBVUxUX1NFVFRJTkdTLmZvcm11bGEsIC4uLmxvYWRlZERhdGEuZm9ybXVsYSB9O1xyXG4gICAgICAgIGlmIChsb2FkZWREYXRhPy50YXNrTWFuYWdlbWVudCkgdGhpcy5zZXR0aW5ncy50YXNrTWFuYWdlbWVudCA9IHsgLi4uREVGQVVMVF9TRVRUSU5HUy50YXNrTWFuYWdlbWVudCwgLi4ubG9hZGVkRGF0YS50YXNrTWFuYWdlbWVudCB9O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTZXR0aW5ncygpOiBEaWdpdGFsTGlmZVBsdWdpblNldHRpbmdzIHsgcmV0dXJuIHRoaXMuc2V0dGluZ3M7IH1cclxuICAgIGdldERhc2hib2FyZHMoKTogRGFzaGJvYXJkW10geyByZXR1cm4gdGhpcy5zZXR0aW5ncy5kYXNoYm9hcmRzOyB9XHJcbiAgICBnZXREYXNoYm9hcmQoaWQ6IHN0cmluZyk6IERhc2hib2FyZCB8IHVuZGVmaW5lZCB7IHJldHVybiB0aGlzLnNldHRpbmdzLmRhc2hib2FyZHMuZmluZChkID0+IGQuaWQgPT09IGlkKTsgfVxyXG4gICAgZ2V0V2lkZ2V0KGlkOiBzdHJpbmcpOiBXaWRnZXQgfCB1bmRlZmluZWQgeyByZXR1cm4gdGhpcy5zZXR0aW5ncy53aWRnZXRzLmZpbmQodyA9PiB3LmlkID09PSBpZCk7IH1cclxuXHJcbiAgICAvLyAuLi4gKEFkZC9SZW1vdmUgRGFzaGJvYXJkL1dpZGdldC9MYXlvdXQgXHU2NUI5XHU2Q0Q1XHU0RkREXHU2MzAxXHU0RTBEXHU1M0Q4XHVGRjBDXHU3NzAxXHU3NTY1XHU0RUU1XHU4MjgyXHU3NzAxXHU3QTdBXHU5NUY0KSAuLi5cclxuICAgIGFzeW5jIGFkZERhc2hib2FyZChuYW1lOiBzdHJpbmcpOiBQcm9taXNlPERhc2hib2FyZD4ge1xyXG4gICAgICAgIGNvbnN0IG5ld0Rhc2hib2FyZDogRGFzaGJvYXJkID0geyBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSwgbmFtZSwgbGF5b3V0OiBbXSwgY3JlYXRlZEF0OiBEYXRlLm5vdygpLCB1cGRhdGVkQXQ6IERhdGUubm93KCksIGlzUGlubmVkOiBmYWxzZSB9O1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MuZGFzaGJvYXJkcy5wdXNoKG5ld0Rhc2hib2FyZCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmFjdGl2ZURhc2hib2FyZElkKSB0aGlzLnNldHRpbmdzLmFjdGl2ZURhc2hib2FyZElkID0gbmV3RGFzaGJvYXJkLmlkO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7IHJldHVybiBuZXdEYXNoYm9hcmQ7XHJcbiAgICB9XHJcbiAgICBhc3luYyByZW5hbWVEYXNoYm9hcmQoaWQ6IHN0cmluZywgbmV3TmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7IGNvbnN0IGQgPSB0aGlzLmdldERhc2hib2FyZChpZCk7IGlmIChkKSB7IGQubmFtZSA9IG5ld05hbWU7IGQudXBkYXRlZEF0ID0gRGF0ZS5ub3coKTsgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTsgfSB9XHJcbiAgICBhc3luYyB0b2dnbGVQaW5EYXNoYm9hcmQoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4geyBjb25zdCBkID0gdGhpcy5nZXREYXNoYm9hcmQoaWQpOyBpZiAoZCkgeyBkLmlzUGlubmVkID0gIWQuaXNQaW5uZWQ7IHRoaXMuc29ydERhc2hib2FyZHNCeVBpblN0YXR1cygpOyBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpOyB9IH1cclxuICAgIGFzeW5jIHVwZGF0ZURhc2hib2FyZFByb3BlcnRpZXMoaWQ6IHN0cmluZywgcHJvcHM6IFBhcnRpYWw8RGFzaGJvYXJkPik6IFByb21pc2U8dm9pZD4geyBjb25zdCBkID0gdGhpcy5nZXREYXNoYm9hcmQoaWQpOyBpZiAoZCkgeyBPYmplY3QuYXNzaWduKGQsIHByb3BzKTsgZC51cGRhdGVkQXQgPSBEYXRlLm5vdygpOyBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpOyB9IH1cclxuICAgIHByaXZhdGUgc29ydERhc2hib2FyZHNCeVBpblN0YXR1cygpIHsgdGhpcy5zZXR0aW5ncy5kYXNoYm9hcmRzLnNvcnQoKGEsIGIpID0+IHsgaWYgKGEuaXNQaW5uZWQgPT09IGIuaXNQaW5uZWQpIHJldHVybiAwOyByZXR1cm4gYS5pc1Bpbm5lZCA/IC0xIDogMTsgfSk7IH1cclxuICAgIGFzeW5jIHJlb3JkZXJEYXNoYm9hcmRzKG5ld09yZGVySWRzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRNYXAgPSBuZXcgTWFwKHRoaXMuc2V0dGluZ3MuZGFzaGJvYXJkcy5tYXAoZCA9PiBbZC5pZCwgZF0pKTtcclxuICAgICAgICBjb25zdCBuZXdEYXNoYm9hcmRzOiBEYXNoYm9hcmRbXSA9IFtdO1xyXG4gICAgICAgIG5ld09yZGVySWRzLmZvckVhY2goaWQgPT4geyBjb25zdCBkID0gY3VycmVudE1hcC5nZXQoaWQpOyBpZiAoZCkgbmV3RGFzaGJvYXJkcy5wdXNoKGQpOyB9KTtcclxuICAgICAgICB0aGlzLnNldHRpbmdzLmRhc2hib2FyZHMuZm9yRWFjaChkID0+IHsgaWYgKCFuZXdEYXNoYm9hcmRzLmluY2x1ZGVzKGQpKSBuZXdEYXNoYm9hcmRzLnB1c2goZCk7IH0pO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MuZGFzaGJvYXJkcyA9IG5ld0Rhc2hib2FyZHM7IGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyByZW1vdmVEYXNoYm9hcmQoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MuZGFzaGJvYXJkcyA9IHRoaXMuc2V0dGluZ3MuZGFzaGJvYXJkcy5maWx0ZXIoZCA9PiBkLmlkICE9PSBpZCk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYWN0aXZlRGFzaGJvYXJkSWQgPT09IGlkKSB0aGlzLnNldHRpbmdzLmFjdGl2ZURhc2hib2FyZElkID0gdGhpcy5zZXR0aW5ncy5kYXNoYm9hcmRzLmxlbmd0aCA+IDAgPyB0aGlzLnNldHRpbmdzLmRhc2hib2FyZHNbMF0uaWQgOiBudWxsO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBzZXRBY3RpdmVEYXNoYm9hcmQoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4geyBpZiAodGhpcy5zZXR0aW5ncy5kYXNoYm9hcmRzLnNvbWUoZCA9PiBkLmlkID09PSBpZCkpIHsgdGhpcy5zZXR0aW5ncy5hY3RpdmVEYXNoYm9hcmRJZCA9IGlkOyBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpOyB9IH1cclxuICAgIGFzeW5jIHNhdmVXaWRnZXQod2lkZ2V0OiBXaWRnZXQpOiBQcm9taXNlPHZvaWQ+IHsgY29uc3QgaW5kZXggPSB0aGlzLnNldHRpbmdzLndpZGdldHMuZmluZEluZGV4KHcgPT4gdy5pZCA9PT0gd2lkZ2V0LmlkKTsgaWYgKGluZGV4ID49IDApIHRoaXMuc2V0dGluZ3Mud2lkZ2V0c1tpbmRleF0gPSB3aWRnZXQ7IGVsc2UgdGhpcy5zZXR0aW5ncy53aWRnZXRzLnB1c2god2lkZ2V0KTsgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTsgfVxyXG4gICAgYXN5bmMgcmVtb3ZlV2lkZ2V0KGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHsgdGhpcy5zZXR0aW5ncy53aWRnZXRzID0gdGhpcy5zZXR0aW5ncy53aWRnZXRzLmZpbHRlcih3ID0+IHcuaWQgIT09IGlkKTsgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTsgfVxyXG4gICAgYXN5bmMgYWRkTGF5b3V0SXRlbShkYXNoYm9hcmRJZDogc3RyaW5nLCBpdGVtOiBMYXlvdXRJdGVtKTogUHJvbWlzZTx2b2lkPiB7IGNvbnN0IGQgPSB0aGlzLmdldERhc2hib2FyZChkYXNoYm9hcmRJZCk7IGlmIChkKSB7IGQubGF5b3V0LnB1c2goaXRlbSk7IGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7IH0gfVxyXG4gICAgYXN5bmMgdXBkYXRlTGF5b3V0KGRhc2hib2FyZElkOiBzdHJpbmcsIGxheW91dDogTGF5b3V0SXRlbVtdKTogUHJvbWlzZTx2b2lkPiB7IGNvbnN0IGQgPSB0aGlzLmdldERhc2hib2FyZChkYXNoYm9hcmRJZCk7IGlmIChkKSB7IGQubGF5b3V0ID0gbGF5b3V0OyBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpOyB9IH1cclxuICAgIGFzeW5jIG1vdmVXaWRnZXRUb0Rhc2hib2FyZCh3aWRnZXRJZDogc3RyaW5nLCB0YXJnZXREYXNoYm9hcmRJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3Qgd2lkZ2V0ID0gdGhpcy5nZXRXaWRnZXQod2lkZ2V0SWQpOyBpZiAoIXdpZGdldCkgcmV0dXJuOyBjb25zdCBzb3VyY2VEYXNoYm9hcmRJZCA9IHdpZGdldC5kYXNoYm9hcmRJZDsgaWYgKHNvdXJjZURhc2hib2FyZElkID09PSB0YXJnZXREYXNoYm9hcmRJZCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHNvdXJjZURhc2hib2FyZCA9IHRoaXMuZ2V0RGFzaGJvYXJkKHNvdXJjZURhc2hib2FyZElkKTsgY29uc3QgdGFyZ2V0RGFzaGJvYXJkID0gdGhpcy5nZXREYXNoYm9hcmQodGFyZ2V0RGFzaGJvYXJkSWQpO1xyXG4gICAgICAgIGlmIChzb3VyY2VEYXNoYm9hcmQgJiYgdGFyZ2V0RGFzaGJvYXJkKSB7XHJcbiAgICAgICAgICAgIHNvdXJjZURhc2hib2FyZC5sYXlvdXQgPSBzb3VyY2VEYXNoYm9hcmQubGF5b3V0LmZpbHRlcihpID0+IGkud2lkZ2V0SWQgIT09IHdpZGdldElkKTtcclxuICAgICAgICAgICAgY29uc3QgeSA9IHRhcmdldERhc2hib2FyZC5sYXlvdXQucmVkdWNlKChtYXgsIGl0ZW0pID0+IE1hdGgubWF4KG1heCwgaXRlbS55ICsgaXRlbS5oKSwgMCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0xheW91dEl0ZW06IExheW91dEl0ZW0gPSB7IGk6IGNyeXB0by5yYW5kb21VVUlEKCksIHg6IDAsIHk6IHksIHc6IDEyLCBoOiA2LCB3aWRnZXRJZDogd2lkZ2V0SWQgfTtcclxuICAgICAgICAgICAgdGFyZ2V0RGFzaGJvYXJkLmxheW91dC5wdXNoKG5ld0xheW91dEl0ZW0pOyB3aWRnZXQuZGFzaGJvYXJkSWQgPSB0YXJnZXREYXNoYm9hcmRJZDsgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IGNvcmUvRm9ybXVsYU1hbmFnZXIudHMgPT09XHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIE5vdGljZSwgcGFyc2VZYW1sIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBTZXR0aW5nc01hbmFnZXIgfSBmcm9tICcuL1NldHRpbmdzTWFuYWdlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgRm9ybXVsYU1hbmFnZXIge1xyXG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcclxuICAgIHByaXZhdGUgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHNldHRpbmdzTWFuYWdlcjogU2V0dGluZ3NNYW5hZ2VyKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIgPSBzZXR0aW5nc01hbmFnZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZUhpZGRlblByb3BlcnRpZXNDU1MoKSB7XHJcbiAgICAgICAgY29uc3QgZ2hvc3RTdHlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd5YW1sLWZvcm11bGEtaGlkZGVuLXByb3BzJyk7XHJcbiAgICAgICAgaWYgKGdob3N0U3R5bGUpIGdob3N0U3R5bGUucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZ3MoKS5mb3JtdWxhO1xyXG4gICAgICAgIGNvbnN0IHN0eWxlSWQgPSAnZGwtaGlkZGVuLXByb3BzJztcclxuICAgICAgICBsZXQgc3R5bGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0eWxlSWQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghc3R5bGVFbCkge1xyXG4gICAgICAgICAgICBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcclxuICAgICAgICAgICAgc3R5bGVFbC5pZCA9IHN0eWxlSWQ7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXNldHRpbmdzLmlzSGlkaW5nRW5hYmxlZCB8fCAhQXJyYXkuaXNBcnJheShzZXR0aW5ncy5oaWRkZW5Qcm9wZXJ0aWVzKSkge1xyXG4gICAgICAgICAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBzZXR0aW5ncy5oaWRkZW5Qcm9wZXJ0aWVzXHJcbiAgICAgICAgICAgIC5tYXAoa2V5ID0+IGAubWV0YWRhdGEtcHJvcGVydHlbZGF0YS1wcm9wZXJ0eS1rZXk9XCIke2tleS50b0xvd2VyQ2FzZSgpfVwiXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfWApXHJcbiAgICAgICAgICAgIC5qb2luKCdcXG4nKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgY2FsY3VsYXRlRm9ybXVsYXModGFyZ2V0RmlsZTogVEZpbGUsIG1hbnVhbCA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKCF0YXJnZXRGaWxlIHx8IHRhcmdldEZpbGUuZXh0ZW5zaW9uICE9PSAnbWQnKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSh0YXJnZXRGaWxlKTtcclxuICAgICAgICBpZiAoIWNhY2hlPy5mcm9udG1hdHRlcikgcmV0dXJuO1xyXG5cclxuICAgICAgICBsZXQgc291cmNlTGlua3MgPSBjYWNoZS5mcm9udG1hdHRlci5mb3JtdWxhX3NyYyB8fCBjYWNoZS5mcm9udG1hdHRlci5mb3JtdWxhX3NvdXJjZTtcclxuICAgICAgICBpZiAoIXNvdXJjZUxpbmtzKSB7IGlmIChtYW51YWwpIG5ldyBOb3RpY2UoJ1x1NjcyQVx1OEJCRVx1N0Y2RSBmb3JtdWxhX3NyYycpOyByZXR1cm47IH1cclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc291cmNlTGlua3MpKSBzb3VyY2VMaW5rcyA9IFtzb3VyY2VMaW5rc107XHJcblxyXG4gICAgICAgIGxldCBjb21iaW5lZEZvcm11bGFzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XHJcbiAgICAgICAgbGV0IGZvdW5kQW55ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgbGlua1RleHQgb2Ygc291cmNlTGlua3MpIHtcclxuICAgICAgICAgICAgY29uc3Qgc291cmNlRmlsZSA9IHRoaXMucmVzb2x2ZUZpbGUobGlua1RleHQsIHRhcmdldEZpbGUucGF0aCk7XHJcbiAgICAgICAgICAgIGlmIChzb3VyY2VGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtdWxhcyA9IGF3YWl0IHRoaXMuZ2V0Rm9ybXVsYXNGcm9tTm90ZShzb3VyY2VGaWxlKTtcclxuICAgICAgICAgICAgICAgIGlmIChmb3JtdWxhcykgeyBPYmplY3QuYXNzaWduKGNvbWJpbmVkRm9ybXVsYXMsIGZvcm11bGFzKTsgZm91bmRBbnkgPSB0cnVlOyB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWFudWFsKSBjb25zb2xlLndhcm4oYFx1NjVFMFx1NkNENVx1ODlFM1x1Njc5MFx1NTE2Q1x1NUYwRlx1NkU5MDogJHtsaW5rVGV4dH1gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghZm91bmRBbnkpIHsgaWYgKG1hbnVhbCkgbmV3IE5vdGljZShgXHU2NzJBXHU2MjdFXHU1MjMwXHU2NzA5XHU2NTQ4XHU3Njg0XHU1MTZDXHU1RjBGXHU1QjlBXHU0RTQ5YCk7IHJldHVybjsgfVxyXG5cclxuICAgICAgICBsZXQgaGFzQ2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5ncygpLmZvcm11bGE7XHJcblxyXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcih0YXJnZXRGaWxlLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0RGF0YSA9IHsgLi4uZGF0YSB9O1xyXG4gICAgICAgICAgICBkZWxldGUgY29udGV4dERhdGEuZm9ybXVsYV9zcmM7IGRlbGV0ZSBjb250ZXh0RGF0YS5mb3JtdWxhX3NvdXJjZTsgZGVsZXRlIGNvbnRleHREYXRhLnBvc2l0aW9uO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCB0YXJnZXRLZXkgb2YgT2JqZWN0LmtleXMoY29tYmluZWRGb3JtdWxhcykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSBjb21iaW5lZEZvcm11bGFzW3RhcmdldEtleV07XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByYXdSZXN1bHQgPSB0aGlzLmV2YWx1YXRlRm9ybXVsYShleHByZXNzaW9uLCBjb250ZXh0RGF0YSwgdGFyZ2V0RmlsZS5wYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJhd1Jlc3VsdCA9PT0gJ251bWJlcicgJiYgc2V0dGluZ3MuZW5hYmxlUm91bmRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFjdG9yID0gTWF0aC5wb3coMTAsIHNldHRpbmdzLnJvdW5kaW5nUHJlY2lzaW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmF3UmVzdWx0ID0gTWF0aC5yb3VuZChyYXdSZXN1bHQgKiBmYWN0b3IpIC8gZmFjdG9yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoZGF0YVt0YXJnZXRLZXldKSAhPT0gSlNPTi5zdHJpbmdpZnkocmF3UmVzdWx0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW3RhcmdldEtleV0gPSByYXdSZXN1bHQ7IGhhc0NoYW5nZSA9IHRydWU7IGNvbnRleHREYXRhW3RhcmdldEtleV0gPSByYXdSZXN1bHQ7IFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHU4QkExXHU3Qjk3XHU5NTE5XHU4QkVGIFske3RhcmdldEtleX1dOmAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWFudWFsKSBuZXcgTm90aWNlKGBcdThCQTFcdTdCOTdcdTk1MTlcdThCRUYgWyR7dGFyZ2V0S2V5fV06ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChtYW51YWwpIG5ldyBOb3RpY2UoaGFzQ2hhbmdlID8gJ1x1MjcwNSBcdThCQTFcdTdCOTdcdTVCOENcdTYyMTAnIDogJ1x1NjU3MFx1NTAzQ1x1NjVFMFx1NTNEOFx1NTMxNicpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVzb2x2ZUZpbGUobGlua1RleHQ6IHN0cmluZywgc291cmNlUGF0aDogc3RyaW5nKTogVEZpbGUgfCBudWxsIHtcclxuICAgICAgICBpZiAoIWxpbmtUZXh0KSByZXR1cm4gbnVsbDtcclxuICAgICAgICBsZXQgY2xlYW5OYW1lID0gU3RyaW5nKGxpbmtUZXh0KS5yZXBsYWNlKC9bXFxbXFxdXCJdL2csICcnKS5zcGxpdCgnfCcpWzBdO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGNsZWFuTmFtZSwgc291cmNlUGF0aCkgYXMgVEZpbGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRGb3JtdWxhc0Zyb21Ob3RlKGZpbGU6IFRGaWxlKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHwgbnVsbD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IGNvbnRlbnQubWF0Y2goL2BgYCg/OmZvcm11bGFzfHlhbWwpXFxzKlxcbihbXFxzXFxTXSo/KVxcblxccypgYGAvaSk7XHJcbiAgICAgICAgICAgIHJldHVybiAobWF0Y2ggJiYgbWF0Y2hbMV0pID8gcGFyc2VZYW1sKG1hdGNoWzFdKSA6IG51bGw7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyByZXR1cm4gbnVsbDsgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZXZhbHVhdGVGb3JtdWxhKGV4cHJlc3Npb246IHN0cmluZywgY29udGV4dDogYW55LCBzb3VyY2VQYXRoOiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICAgIE9iamVjdC5rZXlzKGNvbnRleHQpLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbG93ZXJLZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgaWYgKGxvd2VyS2V5ICE9PSBrZXkgJiYgY29udGV4dFtsb3dlcktleV0gPT09IHVuZGVmaW5lZCkgY29udGV4dFtsb3dlcktleV0gPSBjb250ZXh0W2tleV07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGdldFNpbmdsZUxpbmtWYWx1ZSA9IChsaW5rVGV4dDogc3RyaW5nLCB0YXJnZXRQcm9wTmFtZTogc3RyaW5nKTogbnVtYmVyID0+IHtcclxuICAgICAgICAgICAgaWYgKCFsaW5rVGV4dCkgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldEZpbGUgPSB0aGlzLnJlc29sdmVGaWxlKGxpbmtUZXh0LCBzb3VyY2VQYXRoKTtcclxuICAgICAgICAgICAgaWYgKCF0YXJnZXRGaWxlKSByZXR1cm4gMDtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0Q2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSh0YXJnZXRGaWxlKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsID0gdGFyZ2V0Q2FjaGU/LmZyb250bWF0dGVyPy5bdGFyZ2V0UHJvcE5hbWVdO1xyXG4gICAgICAgICAgICBjb25zdCBudW0gPSBwYXJzZUZsb2F0KHZhbCk7XHJcbiAgICAgICAgICAgIHJldHVybiBpc05hTihudW0pID8gMCA6IG51bTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBsaW5rID0gKGZpZWxkOiBzdHJpbmcsIHRhcmdldFByb3A6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB2YWwgPSBjb250ZXh0W2ZpZWxkXSB8fCBjb250ZXh0W2ZpZWxkLnRvTG93ZXJDYXNlKCldO1xyXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSByZXR1cm4gZ2V0U2luZ2xlTGlua1ZhbHVlKHZhbFswXSwgdGFyZ2V0UHJvcCk7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXRTaW5nbGVMaW5rVmFsdWUodmFsLCB0YXJnZXRQcm9wKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBzdW0gPSAoZmllbGQ6IHN0cmluZywgdGFyZ2V0UHJvcDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbCA9IGNvbnRleHRbZmllbGRdIHx8IGNvbnRleHRbZmllbGQudG9Mb3dlckNhc2UoKV07XHJcbiAgICAgICAgICAgIGlmICghdmFsKSByZXR1cm4gMDtcclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkgcmV0dXJuIHZhbC5yZWR1Y2UoKGFjYzogbnVtYmVyLCBjdXJyTGluazogc3RyaW5nKSA9PiBhY2MgKyBnZXRTaW5nbGVMaW5rVmFsdWUoY3VyckxpbmssIHRhcmdldFByb3ApLCAwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGdldFNpbmdsZUxpbmtWYWx1ZSh2YWwsIHRhcmdldFByb3ApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHByb3AgPSAoa2V5OiBzdHJpbmcpID0+IGNvbnRleHRba2V5XTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCByb3VuZCA9IChudW06IG51bWJlciwgZGVjaW1hbHM/OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBudW0gIT09ICdudW1iZXInKSByZXR1cm4gbnVtO1xyXG4gICAgICAgICAgICBjb25zdCBkID0gZGVjaW1hbHMgIT09IHVuZGVmaW5lZCA/IGRlY2ltYWxzIDogdGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZ3MoKS5mb3JtdWxhLnJvdW5kaW5nUHJlY2lzaW9uO1xyXG4gICAgICAgICAgICBjb25zdCBmYWN0b3IgPSBNYXRoLnBvdygxMCwgZCk7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKG51bSAqIGZhY3RvcikgLyBmYWN0b3I7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgaXNWYWxpZFZhck5hbWUgPSAobmFtZTogc3RyaW5nKSA9PiAvXltcXHB7TH1fJF1bXFxwe0x9MC05XyRdKiQvdS50ZXN0KG5hbWUpO1xyXG4gICAgICAgIGNvbnN0IHZhbGlkS2V5cyA9IE9iamVjdC5rZXlzKGNvbnRleHQpLmZpbHRlcihpc1ZhbGlkVmFyTmFtZSk7XHJcbiAgICAgICAgY29uc3QgdmFsaWRWYWx1ZXMgPSB2YWxpZEtleXMubWFwKGsgPT4gY29udGV4dFtrXSk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZ1bmMgPSBuZXcgRnVuY3Rpb24oLi4udmFsaWRLZXlzLCAnTWF0aCcsICdtb21lbnQnLCAncHJvcCcsICdyb3VuZCcsICdsaW5rJywgJ3N1bScsICdjdHgnLCBgXCJ1c2Ugc3RyaWN0XCI7IHJldHVybiAoJHtleHByZXNzaW9ufSk7YCk7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmMoLi4udmFsaWRWYWx1ZXMsIE1hdGgsIHdpbmRvdy5tb21lbnQsIHByb3AsIHJvdW5kLCBsaW5rLCBzdW0sIGNvbnRleHQpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgdGhyb3cgZTsgfVxyXG4gICAgfVxyXG59IiwgIi8vID09PSBGSUxFOiB1aS9NYWluVmlldy50cyA9PT1cclxuaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIE5vdGljZSwgUGxhdGZvcm0gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IFNldHRpbmdzTWFuYWdlciB9IGZyb20gJy4uL2NvcmUvU2V0dGluZ3NNYW5hZ2VyJztcclxuaW1wb3J0IHsgRGF0YUVuZ2luZSB9IGZyb20gJy4uL2NvcmUvRGF0YUVuZ2luZSc7XHJcbmltcG9ydCB7IFNpZGViYXIgfSBmcm9tICcuL2NvbXBvbmVudHMvU2lkZWJhcic7XHJcbmltcG9ydCB7IEhlYWRlciB9IGZyb20gJy4vY29tcG9uZW50cy9IZWFkZXInO1xyXG5pbXBvcnQgeyBHcmlkQ2FudmFzIH0gZnJvbSAnLi9jb21wb25lbnRzL0dyaWRDYW52YXMnO1xyXG5pbXBvcnQgeyBXaWRnZXRGYWN0b3J5IH0gZnJvbSAnLi93aWRnZXRzL1dpZGdldEZhY3RvcnknO1xyXG5pbXBvcnQgeyBNb3ZlV2lkZ2V0TW9kYWwgfSBmcm9tICcuL21vZGFscy9Nb3ZlV2lkZ2V0TW9kYWwnO1xyXG5cclxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9ESUdJVEFMX0xJRkUgPSAnZGlnaXRhbC1saWZlLWRhc2hib2FyZC12aWV3JztcclxuXHJcbmV4cG9ydCBjbGFzcyBNYWluVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcclxuICAgIHByaXZhdGUgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXI7XHJcbiAgICBwcml2YXRlIGRhdGFFbmdpbmU6IERhdGFFbmdpbmU7XHJcbiAgICBwcml2YXRlIHdpZGdldEZhY3Rvcnk6IFdpZGdldEZhY3Rvcnk7XHJcbiAgICBcclxuICAgIHByaXZhdGUgc2lkZWJhcjogU2lkZWJhcjtcclxuICAgIHByaXZhdGUgaGVhZGVyOiBIZWFkZXI7XHJcbiAgICBwcml2YXRlIGdyaWRDYW52YXM6IEdyaWRDYW52YXM7XHJcbiAgICBcclxuICAgIHByaXZhdGUgaXNTaWRlYmFyQ29sbGFwc2VkID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXIpIHtcclxuICAgICAgICBzdXBlcihsZWFmKTtcclxuICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlciA9IHNldHRpbmdzTWFuYWdlcjtcclxuICAgICAgICBcclxuICAgICAgICAvLyBbXHU2ODM4XHU1RkMzXHU0RkVFXHU1OTBEXSBcdTVGQzVcdTk4N0JcdTRGMjBcdTUxNjUgc2V0dGluZ3NNYW5hZ2VyXHVGRjBDXHU1NDI2XHU1MjE5IEdpdExpbmVQcm9jZXNzb3IgXHU0RTBEXHU0RjFBXHU1MjFEXHU1OUNCXHU1MzE2XHJcbiAgICAgICAgdGhpcy5kYXRhRW5naW5lID0gbmV3IERhdGFFbmdpbmUodGhpcy5hcHAsIHRoaXMuc2V0dGluZ3NNYW5hZ2VyKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLndpZGdldEZhY3RvcnkgPSBuZXcgV2lkZ2V0RmFjdG9yeShcclxuICAgICAgICAgICAgdGhpcy5hcHAsXHJcbiAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YUVuZ2luZSxcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIsIFxyXG4gICAgICAgICAgICAoaWQpID0+IHRoaXMuaGFuZGxlRGVsZXRlV2lkZ2V0KGlkKSxcclxuICAgICAgICAgICAgKGlkKSA9PiB0aGlzLmhhbmRsZUVkaXRXaWRnZXQoaWQpLFxyXG4gICAgICAgICAgICAoaWQpID0+IHRoaXMuaGFuZGxlTW92ZVdpZGdldChpZClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7IHJldHVybiBWSUVXX1RZUEVfRElHSVRBTF9MSUZFOyB9XHJcbiAgICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcgeyByZXR1cm4gJ1x1NjU3MFx1NUI1N1x1NEVCQVx1NzUxRic7IH1cclxuICAgIGdldEljb24oKTogc3RyaW5nIHsgcmV0dXJuICdob21lJzsgfVxyXG5cclxuICAgIGFzeW5jIG9uT3BlbigpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCByb290ID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICByb290LmVtcHR5KCk7XHJcbiAgICAgICAgcm9vdC5hZGRDbGFzcygnZGwtbWFpbi1jb250YWluZXInKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoUGxhdGZvcm0uaXNNb2JpbGUpIHtcclxuICAgICAgICAgICAgcm9vdC5hZGRDbGFzcygnaXMtbW9iaWxlJyk7XHJcbiAgICAgICAgICAgIHRoaXMuaXNTaWRlYmFyQ29sbGFwc2VkID0gdHJ1ZTsgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBoZWFkZXJFbCA9IHJvb3QuY3JlYXRlRGl2KCk7XHJcbiAgICAgICAgdGhpcy5oZWFkZXIgPSBuZXcgSGVhZGVyKFxyXG4gICAgICAgICAgICBoZWFkZXJFbCwgXHJcbiAgICAgICAgICAgIHRoaXMuYXBwLCBcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIsXHJcbiAgICAgICAgICAgICgpID0+IHRoaXMudG9nZ2xlU2lkZWJhcigpLFxyXG4gICAgICAgICAgICAoKSA9PiB0aGlzLnRvZ2dsZUVkaXRNb2RlKCksXHJcbiAgICAgICAgICAgICgpID0+IHRoaXMuZ3JpZENhbnZhcy5vcGVuQWRkV2lkZ2V0TW9kYWwoKSAvLyBcdThGRDlcdTkxQ0NcdTg5RTZcdTUzRDFcdTY1QjBcdTU4OUVcdTVGMzlcdTdBOTdcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuaGVhZGVyLnJlbmRlcigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGJvZHlDb250YWluZXIgPSByb290LmNyZWF0ZURpdignZGwtYm9keS1jb250YWluZXInKTtcclxuXHJcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU0RkE3XHU4RkI5XHU2ODBGXHJcbiAgICAgICAgY29uc3Qgc2lkZWJhckVsID0gYm9keUNvbnRhaW5lci5jcmVhdGVEaXYoKTtcclxuICAgICAgICB0aGlzLnNpZGViYXIgPSBuZXcgU2lkZWJhcihzaWRlYmFyRWwsIHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzTWFuYWdlcixcclxuICAgICAgICAgICAgKGlkKSA9PiB0aGlzLmdyaWRDYW52YXMubG9hZERhc2hib2FyZChpZCkpO1xyXG4gICAgICAgIHRoaXMuc2lkZWJhci5yZW5kZXIoKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoUGxhdGZvcm0uaXNNb2JpbGUpIHtcclxuICAgICAgICAgICAgdGhpcy5zaWRlYmFyLnRvZ2dsZUNvbGxhcHNlKHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU1MTg1XHU1QkI5XHU1MzNBXHU1N0RGXHJcbiAgICAgICAgY29uc3QgY29udGVudEFyZWEgPSBib2R5Q29udGFpbmVyLmNyZWF0ZURpdignZGwtY29udGVudC1hcmVhJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU5MDZFXHU3RjY5XHU1QzQyXHJcbiAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGJvZHlDb250YWluZXIuY3JlYXRlRGl2KCdkbC1vdmVybGF5Jyk7XHJcbiAgICAgICAgb3ZlcmxheS5vbmNsaWNrID0gKCkgPT4gdGhpcy50b2dnbGVTaWRlYmFyKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1MjFEXHU1OUNCXHU3MkI2XHU2MDAxXHU0RTBCXHU5NjkwXHU4NUNGXHU5MDZFXHU3RjY5XHU1QzQyXHJcbiAgICAgICAgLy8gXHU5MDZFXHU3RjY5XHU1QzQyXHU0RTNCXHU4OTgxXHU3NTI4XHU0RThFXHU3OUZCXHU1MkE4XHU3QUVGXHVGRjBDXHU2ODRDXHU5NzYyXHU3QUVGXHU5RUQ4XHU4QkE0XHU5NjkwXHU4NUNGXHJcbiAgICAgICAgaWYgKHRoaXMuaXNTaWRlYmFyQ29sbGFwc2VkIHx8ICFQbGF0Zm9ybS5pc01vYmlsZSkge1xyXG4gICAgICAgICAgICBvdmVybGF5LmFkZENsYXNzKCdpcy1oaWRkZW4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZ3JpZEVsID0gY29udGVudEFyZWEuY3JlYXRlRGl2KCk7XHJcbiAgICAgICAgdGhpcy5ncmlkQ2FudmFzID0gbmV3IEdyaWRDYW52YXMoZ3JpZEVsLCB0aGlzLmFwcCwgdGhpcy5zZXR0aW5nc01hbmFnZXIsIHRoaXMud2lkZ2V0RmFjdG9yeSk7XHJcbiAgICAgICAgdGhpcy5ncmlkQ2FudmFzLnJlbmRlcigpO1xyXG5cclxuICAgICAgICBjb25zdCBhY3RpdmVJZCA9IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmdzKCkuYWN0aXZlRGFzaGJvYXJkSWQ7XHJcbiAgICAgICAgaWYgKGFjdGl2ZUlkKSB0aGlzLmdyaWRDYW52YXMubG9hZERhc2hib2FyZChhY3RpdmVJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgb25DbG9zZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAodGhpcy5zaWRlYmFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2lkZWJhci5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdG9nZ2xlU2lkZWJhcigpIHtcclxuICAgICAgICB0aGlzLmlzU2lkZWJhckNvbGxhcHNlZCA9ICF0aGlzLmlzU2lkZWJhckNvbGxhcHNlZDtcclxuICAgICAgICB0aGlzLnNpZGViYXIudG9nZ2xlQ29sbGFwc2UodGhpcy5pc1NpZGViYXJDb2xsYXBzZWQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjNBN1x1NTIzNlx1OTA2RVx1N0Y2OVx1NUM0Mlx1NjYzRVx1NzkzQS9cdTk2OTBcdTg1Q0ZcclxuICAgICAgICBjb25zdCBvdmVybGF5ID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcuZGwtb3ZlcmxheScpO1xyXG4gICAgICAgIGlmIChvdmVybGF5KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2lkZWJhckNvbGxhcHNlZCkge1xyXG4gICAgICAgICAgICAgICAgb3ZlcmxheS5hZGRDbGFzcygnaXMtaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvdmVybGF5LnJlbW92ZUNsYXNzKCdpcy1oaWRkZW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRvZ2dsZUVkaXRNb2RlKCkge1xyXG4gICAgICAgIGlmIChQbGF0Zm9ybS5pc01vYmlsZSkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdTc5RkJcdTUyQThcdTdBRUZcdTY2ODJcdTRFMERcdTY1MkZcdTYzMDFcdTVFMDNcdTVDNDBcdTdGMTZcdThGOTFcdUZGMENcdThCRjdcdTU3MjhcdTY4NENcdTk3NjJcdTdBRUZcdThDMDNcdTY1NzRcdTMwMDInKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpc0VkaXRpbmcgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcuZGwtZ3JpZC1jYW52YXMuaXMtZWRpdGluZycpICE9PSBudWxsO1xyXG4gICAgICAgIHRoaXMuZ3JpZENhbnZhcy5zZXRFZGl0TW9kZSghaXNFZGl0aW5nKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZURlbGV0ZVdpZGdldCh3aWRnZXRJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aXZlSWQgPSB0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5ncygpLmFjdGl2ZURhc2hib2FyZElkO1xyXG4gICAgICAgIGlmKCFhY3RpdmVJZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBkYXNoYm9hcmQgPSB0aGlzLnNldHRpbmdzTWFuYWdlci5nZXREYXNoYm9hcmQoYWN0aXZlSWQpO1xyXG4gICAgICAgIGlmKGRhc2hib2FyZCkge1xyXG4gICAgICAgICAgICBkYXNoYm9hcmQubGF5b3V0ID0gZGFzaGJvYXJkLmxheW91dC5maWx0ZXIoaSA9PiBpLndpZGdldElkICE9PSB3aWRnZXRJZCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5yZW1vdmVXaWRnZXQod2lkZ2V0SWQpO1xyXG4gICAgICAgICAgICB0aGlzLmdyaWRDYW52YXMubG9hZERhc2hib2FyZChhY3RpdmVJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlRWRpdFdpZGdldCh3aWRnZXRJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aXZlSWQgPSB0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5ncygpLmFjdGl2ZURhc2hib2FyZElkO1xyXG4gICAgICAgIGlmKCFhY3RpdmVJZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCB3aWRnZXQgPSB0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRXaWRnZXQod2lkZ2V0SWQpO1xyXG4gICAgICAgIGlmKCF3aWRnZXQpIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gXHU1MkE4XHU2MDAxXHU1QkZDXHU1MTY1XHJcbiAgICAgICAgY29uc3QgeyBXaWRnZXRDb25maWdNb2RhbCB9ID0gYXdhaXQgaW1wb3J0KCcuL21vZGFscy9XaWRnZXRDb25maWdNb2RhbCcpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFtcdTY4MzhcdTVGQzNcdTRGRUVcdTU5MERdIFx1NEYyMFx1NTE2NSB0aGlzLnNldHRpbmdzTWFuYWdlclxyXG4gICAgICAgIG5ldyBXaWRnZXRDb25maWdNb2RhbChcclxuICAgICAgICAgICAgdGhpcy5hcHAsIFxyXG4gICAgICAgICAgICBhY3RpdmVJZCwgXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLCAvLyBBZGQgdGhpc1xyXG4gICAgICAgICAgICBhc3luYyAodXBkYXRlZFdpZGdldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2F2ZVdpZGdldCh1cGRhdGVkV2lkZ2V0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ3JpZENhbnZhcy5sb2FkRGFzaGJvYXJkKGFjdGl2ZUlkKTtcclxuICAgICAgICAgICAgfSwgXHJcbiAgICAgICAgICAgIHdpZGdldFxyXG4gICAgICAgICkub3BlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlTW92ZVdpZGdldCh3aWRnZXRJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aXZlSWQgPSB0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5ncygpLmFjdGl2ZURhc2hib2FyZElkO1xyXG4gICAgICAgIGlmICghYWN0aXZlSWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgZGFzaGJvYXJkcyA9IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldERhc2hib2FyZHMoKTtcclxuICAgICAgICBpZiAoZGFzaGJvYXJkcy5sZW5ndGggPD0gMSkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY2ODJcdTY1RTBcdTUxNzZcdTRFRDZcdTc3MEJcdTY3N0ZcdTUzRUZcdTRGOUJcdTc5RkJcdTUyQTgnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbmV3IE1vdmVXaWRnZXRNb2RhbCh0aGlzLmFwcCwgZGFzaGJvYXJkcywgYWN0aXZlSWQsIGFzeW5jICh0YXJnZXREYXNoYm9hcmRJZCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5tb3ZlV2lkZ2V0VG9EYXNoYm9hcmQod2lkZ2V0SWQsIHRhcmdldERhc2hib2FyZElkKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU3RUM0XHU0RUY2XHU1REYyXHU3OUZCXHU1MkE4Jyk7XHJcbiAgICAgICAgICAgIHRoaXMuZ3JpZENhbnZhcy5sb2FkRGFzaGJvYXJkKGFjdGl2ZUlkKTtcclxuICAgICAgICB9KS5vcGVuKCk7XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IHVpL2NvbXBvbmVudHMvU2lkZWJhci50cyA9PT1cclxuaW1wb3J0IHsgQXBwLCBNZW51LCBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBTZXR0aW5nc01hbmFnZXIgfSBmcm9tICcuLi8uLi9jb3JlL2NyX21hbl9zZXRfc3RvcmUnO1xyXG5pbXBvcnQgeyBEYXNoYm9hcmQgfSBmcm9tICcuLi8uLi9jb3JlL2NyX2RlZl90eXBlX21haW4nO1xyXG5pbXBvcnQgeyBSZW5hbWVNb2RhbCB9IGZyb20gJy4uL21vZGFscy9SZW5hbWVNb2RhbCc7XHJcblxyXG5leHBvcnQgY2xhc3MgU2lkZWJhciB7XHJcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGFwcDogQXBwO1xyXG4gICAgcHJpdmF0ZSBzZXR0aW5nc01hbmFnZXI6IFNldHRpbmdzTWFuYWdlcjtcclxuICAgIHByaXZhdGUgcGlubmVkQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgc3RhbmRhcmRDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBvbkRhc2hib2FyZFN3aXRjaDogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgICBcclxuICAgIC8vIERyYWcgc3RhdGVcclxuICAgIHByaXZhdGUgZHJhZ2dlZElkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LCBcclxuICAgICAgICBhcHA6IEFwcCwgXHJcbiAgICAgICAgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXIsXHJcbiAgICAgICAgb25EYXNoYm9hcmRTd2l0Y2g6IChpZDogc3RyaW5nKSA9PiB2b2lkXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlciA9IHNldHRpbmdzTWFuYWdlcjtcclxuICAgICAgICB0aGlzLm9uRGFzaGJvYXJkU3dpdGNoID0gb25EYXNoYm9hcmRTd2l0Y2g7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENsYXNzKCdkbC1zaWRlYmFyJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSGVhZGVyXHJcbiAgICAgICAgY29uc3QgaGVhZGVyID0gdGhpcy5jb250YWluZXIuY3JlYXRlRGl2KCdkbC1zaWRlYmFyLWhlYWRlcicpO1xyXG4gICAgICAgIGhlYWRlci5jcmVhdGVTcGFuKHsgdGV4dDogJ1x1NzcwQlx1Njc3Rlx1NTIxN1x1ODg2OCcgfSk7XHJcbiAgICAgICAgY29uc3QgYWRkQnRuID0gaGVhZGVyLmNyZWF0ZVNwYW4oJ2RsLWljb24tYnRuJyk7XHJcbiAgICAgICAgc2V0SWNvbihhZGRCdG4sICdwbHVzJyk7XHJcbiAgICAgICAgYWRkQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmhhbmRsZUNyZWF0ZURhc2hib2FyZCgpO1xyXG4gICAgICAgIGFkZEJ0bi50aXRsZSA9IFwiXHU2NUIwXHU1RUZBXHU3NzBCXHU2NzdGXCI7XHJcblxyXG4gICAgICAgIC8vIFNjcm9sbGFibGUgQ29udGVudCBBcmVhXHJcbiAgICAgICAgY29uc3QgY29udGVudCA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZURpdignZGwtc2lkZWJhci1jb250ZW50Jyk7XHJcblxyXG4gICAgICAgIC8vIFBpbm5lZCBTZWN0aW9uXHJcbiAgICAgICAgdGhpcy5waW5uZWRDb250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdignZGwtZGFzaGJvYXJkLWxpc3QgZGwtcGlubmVkLWxpc3QnKTtcclxuICAgICAgICB0aGlzLnBpbm5lZENvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2VjdGlvbicsICdwaW5uZWQnKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBTZXBhcmF0b3IgKENTUyBoYW5kbGVzIHZpc2liaWxpdHkpXHJcbiAgICAgICAgY29udGVudC5jcmVhdGVEaXYoJ2RsLWxpc3Qtc2VwYXJhdG9yJyk7XHJcblxyXG4gICAgICAgIC8vIFN0YW5kYXJkIFNlY3Rpb25cclxuICAgICAgICB0aGlzLnN0YW5kYXJkQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoJ2RsLWRhc2hib2FyZC1saXN0IGRsLXN0YW5kYXJkLWxpc3QnKTtcclxuICAgICAgICB0aGlzLnN0YW5kYXJkQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1zZWN0aW9uJywgJ3N0YW5kYXJkJyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0dXBEcmFnRHJvcCh0aGlzLnBpbm5lZENvbnRhaW5lcik7XHJcbiAgICAgICAgdGhpcy5zZXR1cERyYWdEcm9wKHRoaXMuc3RhbmRhcmRDb250YWluZXIpO1xyXG5cclxuICAgICAgICB0aGlzLnJlZnJlc2hMaXN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVmcmVzaExpc3QoKSB7XHJcbiAgICAgICAgdGhpcy5waW5uZWRDb250YWluZXIuZW1wdHkoKTtcclxuICAgICAgICB0aGlzLnN0YW5kYXJkQ29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZGFzaGJvYXJkcyA9IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldERhc2hib2FyZHMoKTtcclxuICAgICAgICBjb25zdCBhY3RpdmVJZCA9IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmdzKCkuYWN0aXZlRGFzaGJvYXJkSWQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU29ydDogUGlubmVkIGZpcnN0ICh0aG91Z2ggVUkgc2VwYXJhdGVzIHRoZW0pLCB0aGVuIHVzZXIgb3JkZXJcclxuICAgICAgICBjb25zdCBwaW5uZWQgPSBkYXNoYm9hcmRzLmZpbHRlcihkID0+IGQuaXNQaW5uZWQpO1xyXG4gICAgICAgIGNvbnN0IHN0YW5kYXJkID0gZGFzaGJvYXJkcy5maWx0ZXIoZCA9PiAhZC5pc1Bpbm5lZCk7XHJcblxyXG4gICAgICAgIGlmIChwaW5uZWQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnBpbm5lZENvbnRhaW5lci5jcmVhdGVEaXYoeyB0ZXh0OiAnXHU3RjZFXHU5ODc2JywgY2xzOiAnZGwtbGlzdC1oZWFkZXInIH0pO1xyXG4gICAgICAgICAgICBwaW5uZWQuZm9yRWFjaChkID0+IHRoaXMucmVuZGVySXRlbSh0aGlzLnBpbm5lZENvbnRhaW5lciwgZCwgYWN0aXZlSWQpKTtcclxuICAgICAgICAgICAgdGhpcy5waW5uZWRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5waW5uZWRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzdGFuZGFyZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIE9ubHkgc2hvdyAnQWxsJyBoZWFkZXIgaWYgdGhlcmUgYXJlIHBpbm5lZCBpdGVtcyB0byBkaXN0aW5ndWlzaFxyXG4gICAgICAgICAgICBpZiAocGlubmVkLmxlbmd0aCA+IDApIHRoaXMuc3RhbmRhcmRDb250YWluZXIuY3JlYXRlRGl2KHsgdGV4dDogJ1x1NTE2OFx1OTBFOCcsIGNsczogJ2RsLWxpc3QtaGVhZGVyJyB9KTtcclxuICAgICAgICAgICAgc3RhbmRhcmQuZm9yRWFjaChkID0+IHRoaXMucmVuZGVySXRlbSh0aGlzLnN0YW5kYXJkQ29udGFpbmVyLCBkLCBhY3RpdmVJZCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlckl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZGFzaGJvYXJkOiBEYXNoYm9hcmQsIGFjdGl2ZUlkOiBzdHJpbmcgfCBudWxsKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2RsLWRhc2hib2FyZC1pdGVtJyk7XHJcbiAgICAgICAgaXRlbS5zZXRBdHRyaWJ1dGUoJ2RyYWdnYWJsZScsICd0cnVlJyk7XHJcbiAgICAgICAgaXRlbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBkYXNoYm9hcmQuaWQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChkYXNoYm9hcmQuaWQgPT09IGFjdGl2ZUlkKSBpdGVtLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcclxuXHJcbiAgICAgICAgLy8gSWNvblxyXG4gICAgICAgIGNvbnN0IGljb24gPSBpdGVtLmNyZWF0ZVNwYW4oJ2RsLWl0ZW0taWNvbicpO1xyXG4gICAgICAgIHNldEljb24oaWNvbiwgZGFzaGJvYXJkLmlzUGlubmVkID8gJ3BpbicgOiAnbGF5b3V0LWRhc2hib2FyZCcpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE5hbWVcclxuICAgICAgICBjb25zdCBuYW1lU3BhbiA9IGl0ZW0uY3JlYXRlU3Bhbih7IHRleHQ6IGRhc2hib2FyZC5uYW1lLCBjbHM6ICdkbC1pdGVtLW5hbWUnIH0pO1xyXG5cclxuICAgICAgICAvLyBDbGljayB0byBzd2l0Y2hcclxuICAgICAgICBpdGVtLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkYXNoYm9hcmQuaWQgIT09IGFjdGl2ZUlkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRBY3RpdmVEYXNoYm9hcmQoZGFzaGJvYXJkLmlkKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGFzaGJvYXJkU3dpdGNoKGRhc2hib2FyZC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBDb250ZXh0IE1lbnVcclxuICAgICAgICBpdGVtLm9uY29udGV4dG1lbnUgPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0NvbnRleHRNZW51KGV2dCwgZGFzaGJvYXJkKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBEcmFnIEV2ZW50cyBmb3IgSXRlbVxyXG4gICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kcmFnZ2VkSWQgPSBkYXNoYm9hcmQuaWQ7XHJcbiAgICAgICAgICAgIGl0ZW0uYWRkQ2xhc3MoJ2lzLWRyYWdnaW5nJyk7XHJcbiAgICAgICAgICAgIGlmKGUuZGF0YVRyYW5zZmVyKSB7XHJcbiAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ21vdmUnO1xyXG4gICAgICAgICAgICAgICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIGRhc2hib2FyZC5pZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpdGVtLnJlbW92ZUNsYXNzKCdpcy1kcmFnZ2luZycpO1xyXG4gICAgICAgICAgICB0aGlzLmRyYWdnZWRJZCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kbC1kcm9wLXRhcmdldCcpLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlQ2xhc3MoJ2RsLWRyb3AtdGFyZ2V0JykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0dXBEcmFnRHJvcChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBBbGxvdyBkcm9wXHJcbiAgICAgICAgICAgIGlmIChlLmRhdGFUcmFuc2ZlcikgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdtb3ZlJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnLmRsLWRhc2hib2FyZC1pdGVtJyk7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQgJiYgdGFyZ2V0ICE9PSBjb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIFZpc3VhbCBmZWVkYmFjayBjb3VsZCBnbyBoZXJlIChlLmcuIGJvcmRlci1ib3R0b20pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBhc3luYyAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRyYWdnZWRJZCA9IGUuZGF0YVRyYW5zZmVyPy5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XHJcbiAgICAgICAgICAgIGlmICghZHJhZ2dlZElkKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRTZWN0aW9uID0gY29udGFpbmVyLmdldEF0dHJpYnV0ZSgnZGF0YS1zZWN0aW9uJyk7IC8vICdwaW5uZWQnIG9yICdzdGFuZGFyZCdcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0SXRlbSA9IChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnLmRsLWRhc2hib2FyZC1pdGVtJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAxLiBDYWxjdWxhdGUgbmV3IG9yZGVyXHJcbiAgICAgICAgICAgIGNvbnN0IGRhc2hib2FyZHMgPSB0aGlzLnNldHRpbmdzTWFuYWdlci5nZXREYXNoYm9hcmRzKCk7XHJcbiAgICAgICAgICAgIGxldCBuZXdPcmRlciA9IFsuLi5kYXNoYm9hcmRzXTtcclxuICAgICAgICAgICAgY29uc3QgZHJhZ2dlZERhc2hib2FyZCA9IG5ld09yZGVyLmZpbmQoZCA9PiBkLmlkID09PSBkcmFnZ2VkSWQpO1xyXG4gICAgICAgICAgICBpZiAoIWRyYWdnZWREYXNoYm9hcmQpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBkcmFnZ2VkIGl0ZW0gZnJvbSBvbGQgcG9zaXRpb25cclxuICAgICAgICAgICAgbmV3T3JkZXIgPSBuZXdPcmRlci5maWx0ZXIoZCA9PiBkLmlkICE9PSBkcmFnZ2VkSWQpO1xyXG5cclxuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIGluc2VydCBpbmRleFxyXG4gICAgICAgICAgICBsZXQgaW5zZXJ0SW5kZXggPSAtMTtcclxuICAgICAgICAgICAgaWYgKHRhcmdldEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldElkID0gdGFyZ2V0SXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEluZGV4ID0gbmV3T3JkZXIuZmluZEluZGV4KGQgPT4gZC5pZCA9PT0gdGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgLy8gSW5zZXJ0IGJlZm9yZSB0YXJnZXQgZm9yIHNpbXBsaWNpdHlcclxuICAgICAgICAgICAgICAgIGluc2VydEluZGV4ID0gdGFyZ2V0SW5kZXg7IFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gRHJvcCBvbiBjb250YWluZXIgKGVtcHR5IHNwYWNlKSAtPiBBcHBlbmQgdG8gc2VjdGlvblxyXG4gICAgICAgICAgICAgICAgLy8gSWYgZHJvcHBlZCBpbiBwaW5uZWQgY29udGFpbmVyLCBhcHBlbmQgYWZ0ZXIgbGFzdCBwaW5uZWQgaXRlbVxyXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldFNlY3Rpb24gPT09ICdwaW5uZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdFBpbm5lZEluZGV4ID0gbmV3T3JkZXIuZmluZExhc3RJbmRleChkID0+IGQuaXNQaW5uZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluc2VydEluZGV4ID0gbGFzdFBpbm5lZEluZGV4ICsgMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU3RhbmRhcmQgY29udGFpbmVyLCBhcHBlbmQgdG8gZW5kXHJcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0SW5kZXggPSBuZXdPcmRlci5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChpbnNlcnRJbmRleCA9PT0gLTEpIGluc2VydEluZGV4ID0gMDsgLy8gRmFsbGJhY2tcclxuXHJcbiAgICAgICAgICAgIC8vIDIuIFVwZGF0ZSBQaW5uZWQgU3RhdGUgYmFzZWQgb24gVGFyZ2V0IFNlY3Rpb25cclxuICAgICAgICAgICAgY29uc3QgaXNOb3dQaW5uZWQgPSB0YXJnZXRTZWN0aW9uID09PSAncGlubmVkJztcclxuICAgICAgICAgICAgZHJhZ2dlZERhc2hib2FyZC5pc1Bpbm5lZCA9IGlzTm93UGlubmVkO1xyXG5cclxuICAgICAgICAgICAgLy8gMy4gUmUtaW5zZXJ0XHJcbiAgICAgICAgICAgIG5ld09yZGVyLnNwbGljZShpbnNlcnRJbmRleCwgMCwgZHJhZ2dlZERhc2hib2FyZCk7XHJcblxyXG4gICAgICAgICAgICAvLyA0LiBTYXZlXHJcbiAgICAgICAgICAgIC8vIFdlIHVwZGF0ZSB0aGUgd2hvbGUgbGlzdCBvcmRlciArIHByb3BlcnR5IG9mIHRoZSBkcmFnZ2VkIGl0ZW1cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIudXBkYXRlRGFzaGJvYXJkUHJvcGVydGllcyhkcmFnZ2VkSWQsIHsgaXNQaW5uZWQ6IGlzTm93UGlubmVkIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5yZW9yZGVyRGFzaGJvYXJkcyhuZXdPcmRlci5tYXAoZCA9PiBkLmlkKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hMaXN0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDcmVhdGVEYXNoYm9hcmQoKSB7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IGBcdTc3MEJcdTY3N0YgJHt0aGlzLnNldHRpbmdzTWFuYWdlci5nZXREYXNoYm9hcmRzKCkubGVuZ3RoICsgMX1gO1xyXG4gICAgICAgIGNvbnN0IG5ld0Rhc2ggPSBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5hZGREYXNoYm9hcmQobmFtZSk7XHJcbiAgICAgICAgdGhpcy5vbkRhc2hib2FyZFN3aXRjaChuZXdEYXNoLmlkKTtcclxuICAgICAgICB0aGlzLnJlZnJlc2hMaXN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Q29udGV4dE1lbnUoZXZ0OiBNb3VzZUV2ZW50LCBkYXNoYm9hcmQ6IERhc2hib2FyZCkge1xyXG4gICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFBpbiAvIFVucGluXHJcbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoZGFzaGJvYXJkLmlzUGlubmVkID8gJ1x1NTNENlx1NkQ4OFx1N0Y2RVx1OTg3NicgOiAnXHU3RjZFXHU5ODc2JylcclxuICAgICAgICAgICAgICAgIC5zZXRJY29uKCdwaW4nKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnRvZ2dsZVBpbkRhc2hib2FyZChkYXNoYm9hcmQuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaExpc3QoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xyXG5cclxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZSgnXHU5MUNEXHU1NDdEXHU1NDBEJylcclxuICAgICAgICAgICAgICAgIC5zZXRJY29uKCdwZW5jaWwnKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBSZW5hbWVNb2RhbCh0aGlzLmFwcCwgZGFzaGJvYXJkLm5hbWUsIGFzeW5jIChuZXdOYW1lKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnJlbmFtZURhc2hib2FyZChkYXNoYm9hcmQuaWQsIG5ld05hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hMaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkub3BlbigpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKCdcdTUyMjBcdTk2NjQnKVxyXG4gICAgICAgICAgICAgICAgLnNldEljb24oJ3RyYXNoJylcclxuICAgICAgICAgICAgICAgIC5zZXRXYXJuaW5nKHRydWUpXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIucmVtb3ZlRGFzaGJvYXJkKGRhc2hib2FyZC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUlkID0gdGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZ3MoKS5hY3RpdmVEYXNoYm9hcmRJZDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSWQpIHRoaXMub25EYXNoYm9hcmRTd2l0Y2goYWN0aXZlSWQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbWVudS5zaG93QXRQb3NpdGlvbih7IHg6IGV2dC5jbGllbnRYLCB5OiBldnQuY2xpZW50WSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdG9nZ2xlQ29sbGFwc2UoY29sbGFwc2VkOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIudG9nZ2xlQ2xhc3MoJ2lzLWNvbGxhcHNlZCcsIGNvbGxhcHNlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJlbmFtZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50TmFtZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBvblN1Ym1pdDogKG5ld05hbWU6IHN0cmluZykgPT4gdm9pZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgY3VycmVudE5hbWU6IHN0cmluZywgb25TdWJtaXQ6IChuZXdOYW1lOiBzdHJpbmcpID0+IHZvaWQpIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMuY3VycmVudE5hbWUgPSBjdXJyZW50TmFtZTtcclxuICAgICAgICB0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdTkxQ0RcdTU0N0RcdTU0MERcdTc3MEJcdTY3N0YnIH0pO1xyXG5cclxuICAgICAgICBsZXQgbmFtZVZhbHVlID0gdGhpcy5jdXJyZW50TmFtZTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU1NDBEXHU3OUYwJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUobmFtZVZhbHVlKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IG5hbWVWYWx1ZSA9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB0aGlzLnN1Ym1pdChuYW1lVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBjb25zdCBmb290ZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdkbC1tb2RhbC1mb290ZXInKTtcclxuICAgICAgICBjb25zdCBidG4gPSBmb290ZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1Nzg2RVx1OEJBNCcsIGNsczogJ21vZC1jdGEnIH0pO1xyXG4gICAgICAgIGJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zdWJtaXQobmFtZVZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN1Ym1pdChuYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAobmFtZS50cmltKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5vblN1Ym1pdChuYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgQXBwLCBzZXRJY29uLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgTm90ZUNyZWF0b3JNb2RhbCB9IGZyb20gJy4uL21vZGFscy9Ob3RlQ3JlYXRvck1vZGFsJztcclxuaW1wb3J0IHsgU2V0dGluZ3NNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vY29yZS9jcl9tYW5fc2V0X3N0b3JlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBIZWFkZXIge1xyXG4gICAgcHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcclxuICAgIHByaXZhdGUgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXI7XHJcbiAgICBwcml2YXRlIG9uVG9nZ2xlU2lkZWJhcjogKCkgPT4gdm9pZDtcclxuICAgIHByaXZhdGUgb25FZGl0TGF5b3V0OiAoKSA9PiB2b2lkO1xyXG4gICAgcHJpdmF0ZSBvbkFkZFdpZGdldDogKCkgPT4gdm9pZDtcclxuICAgIFxyXG4gICAgLy8gSW50ZXJuYWwgU3RhdGVcclxuICAgIHByaXZhdGUgaXNFZGl0aW5nID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGlzU2lkZWJhclZpc2libGUgPSB0cnVlO1xyXG4gICAgcHJpdmF0ZSBlZGl0QnRuVGV4dDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgc2lkZWJhckJ0blRleHQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgcHJpdmF0ZSBzZWFyY2hJbnB1dDogSFRNTElucHV0RWxlbWVudDtcclxuICAgIHByaXZhdGUgc2VhcmNoUmVzdWx0c0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkSW5kZXggPSAtMTtcclxuICAgIHByaXZhdGUgbWF0Y2hlZEZpbGVzOiBURmlsZVtdID0gW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuICAgICAgICBhcHA6IEFwcCxcclxuICAgICAgICBzZXR0aW5nc01hbmFnZXI6IFNldHRpbmdzTWFuYWdlcixcclxuICAgICAgICBvblRvZ2dsZVNpZGViYXI6ICgpID0+IHZvaWQsXHJcbiAgICAgICAgb25FZGl0TGF5b3V0OiAoKSA9PiB2b2lkLFxyXG4gICAgICAgIG9uQWRkV2lkZ2V0OiAoKSA9PiB2b2lkXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlciA9IHNldHRpbmdzTWFuYWdlcjtcclxuICAgICAgICB0aGlzLm9uVG9nZ2xlU2lkZWJhciA9IG9uVG9nZ2xlU2lkZWJhcjtcclxuICAgICAgICB0aGlzLm9uRWRpdExheW91dCA9IG9uRWRpdExheW91dDtcclxuICAgICAgICB0aGlzLm9uQWRkV2lkZ2V0ID0gb25BZGRXaWRnZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2xhc3MoJ2RsLWhlYWRlcicpO1xyXG5cclxuICAgICAgICAvLyBMZWZ0XHJcbiAgICAgICAgY29uc3QgbGVmdCA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZURpdignZGwtaGVhZGVyLWxlZnQnKTtcclxuICAgICAgICBjb25zdCBzaWRlYmFyQnRuID0gbGVmdC5jcmVhdGVTcGFuKCdkbC1oZWFkZXItYnRuJyk7XHJcbiAgICAgICAgc2V0SWNvbihzaWRlYmFyQnRuLmNyZWF0ZVNwYW4oJ2RsLWljb24nKSwgJ3BhbmVsLWxlZnQnKTtcclxuICAgICAgICB0aGlzLnNpZGViYXJCdG5UZXh0ID0gc2lkZWJhckJ0bi5jcmVhdGVTcGFuKHsgdGV4dDogJ1x1NjUzNlx1OEQ3N1x1NEZBN1x1OEZCOVx1NjgwRicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2lkZWJhckJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmlzU2lkZWJhclZpc2libGUgPSAhdGhpcy5pc1NpZGViYXJWaXNpYmxlO1xyXG4gICAgICAgICAgICB0aGlzLnNpZGViYXJCdG5UZXh0Py5zZXRUZXh0KHRoaXMuaXNTaWRlYmFyVmlzaWJsZSA/ICdcdTY1MzZcdThENzdcdTRGQTdcdThGQjlcdTY4MEYnIDogJ1x1NUM1NVx1NUYwMFx1NEZBN1x1OEZCOVx1NjgwRicpO1xyXG4gICAgICAgICAgICB0aGlzLm9uVG9nZ2xlU2lkZWJhcigpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFJpZ2h0XHJcbiAgICAgICAgY29uc3QgcmlnaHQgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVEaXYoJ2RsLWhlYWRlci1yaWdodCcpO1xyXG4gICAgICAgIGNvbnN0IGJ0bkdyb3VwID0gcmlnaHQuY3JlYXRlRGl2KCdkbC1idG4tZ3JvdXAnKTtcclxuXHJcbiAgICAgICAgY29uc3QgY3JlYXRlTm90ZUJ0biA9IGJ0bkdyb3VwLmNyZWF0ZURpdignZGwtaGVhZGVyLWJ0bicpO1xyXG4gICAgICAgIHNldEljb24oY3JlYXRlTm90ZUJ0bi5jcmVhdGVTcGFuKCdkbC1pY29uJyksICdmaWxlLXBsdXMnKTtcclxuICAgICAgICBjcmVhdGVOb3RlQnRuLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnXHU2NUIwXHU1RUZBXHU3QjE0XHU4QkIwJyB9KTtcclxuICAgICAgICBjcmVhdGVOb3RlQnRuLm9uY2xpY2sgPSAoKSA9PiBuZXcgTm90ZUNyZWF0b3JNb2RhbCh0aGlzLmFwcCwgdGhpcy5zZXR0aW5nc01hbmFnZXIpLm9wZW4oKTtcclxuXHJcbiAgICAgICAgY29uc3QgYWRkV2lkZ2V0QnRuID0gYnRuR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiAnZGwtaGVhZGVyLWJ0bicsIGF0dHI6IHsgdGl0bGU6ICdcdTZERkJcdTUyQTBcdTdFQzRcdTRFRjYnIH0gfSk7XHJcbiAgICAgICAgc2V0SWNvbihhZGRXaWRnZXRCdG4uY3JlYXRlU3BhbignZGwtaWNvbicpLCAncGx1cy1zcXVhcmUnKTtcclxuICAgICAgICBhZGRXaWRnZXRCdG4uY3JlYXRlU3Bhbih7IHRleHQ6ICdcdTZERkJcdTUyQTBcdTdFQzRcdTRFRjYnIH0pO1xyXG4gICAgICAgIGFkZFdpZGdldEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5vbkFkZFdpZGdldCgpO1xyXG5cclxuICAgICAgICBjb25zdCBlZGl0QnRuID0gYnRuR3JvdXAuY3JlYXRlRGl2KCdkbC1oZWFkZXItYnRuJyk7XHJcbiAgICAgICAgc2V0SWNvbihlZGl0QnRuLmNyZWF0ZVNwYW4oJ2RsLWljb24nKSwgJ2VkaXQnKTtcclxuICAgICAgICB0aGlzLmVkaXRCdG5UZXh0ID0gZWRpdEJ0bi5jcmVhdGVTcGFuKHsgdGV4dDogJ1x1N0YxNlx1OEY5MVx1NUUwM1x1NUM0MCcgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZWRpdEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmlzRWRpdGluZyA9ICF0aGlzLmlzRWRpdGluZztcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIudG9nZ2xlQ2xhc3MoJ2lzLWVkaXRpbmcnLCB0aGlzLmlzRWRpdGluZyk7XHJcbiAgICAgICAgICAgIHRoaXMuZWRpdEJ0blRleHQhLnNldFRleHQodGhpcy5pc0VkaXRpbmcgPyAnXHU0RkREXHU1QjU4XHU1RTAzXHU1QzQwJyA6ICdcdTdGMTZcdThGOTFcdTVFMDNcdTVDNDAnKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNFZGl0aW5nKSBlZGl0QnRuLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgZWxzZSBlZGl0QnRuLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgdGhpcy5vbkVkaXRMYXlvdXQoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBTZWFyY2hcclxuICAgICAgICBjb25zdCBzZWFyY2hXcmFwcGVyID0gcmlnaHQuY3JlYXRlRGl2KCdkbC1zZWFyY2gtd3JhcHBlcicpO1xyXG4gICAgICAgIHNlYXJjaFdyYXBwZXIuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoSW5wdXQgPSBzZWFyY2hXcmFwcGVyLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnLCBjbHM6ICdkbC1zZWFyY2gtYm94JywgcGxhY2Vob2xkZXI6ICdcdTY0MUNcdTdEMjJcdTY1ODdcdTRFRjYuLi4nIH0pO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoUmVzdWx0c0NvbnRhaW5lciA9IHNlYXJjaFdyYXBwZXIuY3JlYXRlRGl2KCdkbC1zZWFyY2gtcmVzdWx0cycpO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoUmVzdWx0c0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoUmVzdWx0c0NvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hSZXN1bHRzQ29udGFpbmVyLnN0eWxlLnRvcCA9ICcxMDAlJztcclxuICAgICAgICB0aGlzLnNlYXJjaFJlc3VsdHNDb250YWluZXIuc3R5bGUubGVmdCA9ICcwJztcclxuICAgICAgICB0aGlzLnNlYXJjaFJlc3VsdHNDb250YWluZXIuc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hSZXN1bHRzQ29udGFpbmVyLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KSc7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hSZXN1bHRzQ29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICcxMDAwJztcclxuICAgICAgICB0aGlzLnNlYXJjaFJlc3VsdHNDb250YWluZXIuc3R5bGUubWF4SGVpZ2h0ID0gJzMwMHB4JztcclxuICAgICAgICB0aGlzLnNlYXJjaFJlc3VsdHNDb250YWluZXIuc3R5bGUub3ZlcmZsb3dZID0gJ2F1dG8nO1xyXG5cclxuICAgICAgICB0aGlzLmF0dGFjaFNlYXJjaExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXR0YWNoU2VhcmNoTGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB0aGlzLmhhbmRsZVNlYXJjaCgpKTtcclxuICAgICAgICB0aGlzLnNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdBcnJvd0Rvd24nKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSBNYXRoLm1pbih0aGlzLnNlbGVjdGVkSW5kZXggKyAxLCB0aGlzLm1hdGNoZWRGaWxlcy5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd1VwJykge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gTWF0aC5tYXgodGhpcy5zZWxlY3RlZEluZGV4IC0gMSwgMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5TZWxlY3RlZEZpbGUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWFyY2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnNlYXJjaElucHV0LmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpICYmICF0aGlzLnNlYXJjaFJlc3VsdHNDb250YWluZXIuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWFyY2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlU2VhcmNoKCkge1xyXG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5zZWFyY2hJbnB1dC52YWx1ZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGlmIChxdWVyeS5sZW5ndGggPCAyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTZWFyY2goKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhbGxGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuICAgICAgICB0aGlzLm1hdGNoZWRGaWxlcyA9IGFsbEZpbGVzXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZiA9PiBmLmJhc2VuYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8IGYucGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSlcclxuICAgICAgICAgICAgLnNsaWNlKDAsIDEwKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMucmVuZGVyU2VhcmNoUmVzdWx0cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyU2VhcmNoUmVzdWx0cygpIHtcclxuICAgICAgICB0aGlzLnNlYXJjaFJlc3VsdHNDb250YWluZXIuZW1wdHkoKTtcclxuICAgICAgICBpZiAodGhpcy5tYXRjaGVkRmlsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaFJlc3VsdHNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgICAgIHRoaXMubWF0Y2hlZEZpbGVzLmZvckVhY2goKGZpbGUsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5zZWFyY2hSZXN1bHRzQ29udGFpbmVyLmNyZWF0ZURpdignZGwtc2VhcmNoLWl0ZW0nKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gdGhpcy5zZWxlY3RlZEluZGV4KSBpdGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKSc7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmNyZWF0ZURpdih7IHRleHQ6IGZpbGUuYmFzZW5hbWUsIHN0eWxlOiAnZm9udC13ZWlnaHQ6IGJvbGQnIH0pO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5jcmVhdGVEaXYoeyB0ZXh0OiBmaWxlLnBhdGgsIHN0eWxlOiAnZm9udC1zaXplOiAwLjhlbTsgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpJyB9KTtcclxuICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlblNlbGVjdGVkRmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoUmVzdWx0c0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVNlbGVjdGlvbigpIHtcclxuICAgICAgICBjb25zdCBpdGVtcyA9IHRoaXMuc2VhcmNoUmVzdWx0c0NvbnRhaW5lci5jaGlsZHJlbjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIChpdGVtc1tpXSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXHJcbiAgICAgICAgICAgICAgICBpID09PSB0aGlzLnNlbGVjdGVkSW5kZXggPyAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3ZlciknIDogJ3RyYW5zcGFyZW50JztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvcGVuU2VsZWN0ZWRGaWxlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSW5kZXggPj0gMCAmJiB0aGlzLnNlbGVjdGVkSW5kZXggPCB0aGlzLm1hdGNoZWRGaWxlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMubWF0Y2hlZEZpbGVzW3RoaXMuc2VsZWN0ZWRJbmRleF07XHJcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKS5vcGVuRmlsZShmaWxlKTtcclxuICAgICAgICAgICAgdGhpcy5jbGVhclNlYXJjaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNsZWFyU2VhcmNoKCkge1xyXG4gICAgICAgIHRoaXMubWF0Y2hlZEZpbGVzID0gW107XHJcbiAgICAgICAgdGhpcy5zZWFyY2hSZXN1bHRzQ29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hSZXN1bHRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gLTE7XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IHVpL21vZGFscy9Ob3RlQ3JlYXRvck1vZGFsLnRzID09PVxyXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBOb3RpY2UsIFRGaWxlLCBub3JtYWxpemVQYXRoLCBBYnN0cmFjdElucHV0U3VnZ2VzdCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgU2V0dGluZ3NNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vY29yZS9jcl9tYW5fc2V0X3N0b3JlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBOb3RlQ3JlYXRvck1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcHJpdmF0ZSBzZXR0aW5nc01hbmFnZXI6IFNldHRpbmdzTWFuYWdlcjtcclxuICAgIHByaXZhdGUgdGVtcGxhdGVzOiBURmlsZVtdID0gW107XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkVGVtcGxhdGU6IFRGaWxlIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIG5ld0ZpbGVOYW1lOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXIpIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyID0gc2V0dGluZ3NNYW5hZ2VyO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG9uT3BlbigpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRUZW1wbGF0ZXMoKTtcclxuICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgbG9hZFRlbXBsYXRlcygpIHtcclxuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZ3MoKS5ub3RlQ3JlYXRvci50ZW1wbGF0ZVBhdGg7XHJcbiAgICAgICAgaWYgKCFwYXRoKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcclxuICAgICAgICBpZiAoZm9sZGVyKSB7XHJcbiAgICAgICAgICAgIGlmICgnY2hpbGRyZW4nIGluIGZvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZXMgPSBmb2xkZXIuY2hpbGRyZW4uZmlsdGVyKGYgPT4gZiBpbnN0YW5jZW9mIFRGaWxlICYmIGYuZXh0ZW5zaW9uID09PSAnbWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHU1MjFCXHU1RUZBXHU2NUIwXHU3QjE0XHU4QkIwJyB9KTtcclxuXHJcbiAgICAgICAgLy8gMS4gRmlsZW5hbWUgSW5wdXQgKFx1NEYxOFx1NTE0OFx1NjYzRVx1NzkzQSlcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTY1ODdcdTRFRjZcdTU0MEQnKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcclxuICAgICAgICAgICAgICAgIHRleHQuc2V0UGxhY2Vob2xkZXIoJ1x1OEJGN1x1OEY5M1x1NTE2NVx1N0IxNFx1OEJCMFx1NTQwRFx1NzlGMCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKHZhbCA9PiB0aGlzLm5ld0ZpbGVOYW1lID0gdmFsKTtcclxuICAgICAgICAgICAgICAgIC8vIFx1ODFFQVx1NTJBOFx1ODA1QVx1NzEyNlxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0ZXh0LmlucHV0RWwuZm9jdXMoKSwgNTApO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gMi4gVGVtcGxhdGUgU2VsZWN0b3IgKFx1NEY3Rlx1NzUyOFx1ODg2NVx1NTE2OFx1NjZGRlx1NEVFM1x1NEUwQlx1NjJDOVx1Njg0NilcclxuICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHU5MDA5XHU2MkU5XHU2QTIxXHU2NzdGJylcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKCdcdTY1MkZcdTYzMDFcdTY0MUNcdTdEMjInKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcignXHU4RjkzXHU1MTY1XHU2QTIxXHU2NzdGXHU1NDBEXHU3OUYwLi4uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKHZhbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTc1MjhcdTYyMzdcdTZFMDVcdTdBN0FcdTRFODZcdThGOTNcdTUxNjVcdUZGMENcdTkxQ0RcdTdGNkVcdTkwMDlcdTYyRTlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmFsKSB0aGlzLnNlbGVjdGVkVGVtcGxhdGUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTdFRDFcdTVCOUFcdTg4NjVcdTUxNjhcdTU2NjhcclxuICAgICAgICAgICAgICAgICAgICBuZXcgVGVtcGxhdGVTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwsIHRoaXMudGVtcGxhdGVzLCAoZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVGVtcGxhdGUgPSBmaWxlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKGZpbGUuYmFzZW5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZURpdih7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogJ1x1NjcyQVx1NjI3RVx1NTIzMFx1NkEyMVx1Njc3Rlx1RkYwQ1x1OEJGN1x1NTE0OFx1NTcyOFx1OEJCRVx1N0Y2RVx1NEUyRFx1OTE0RFx1N0Y2RVx1NkEyMVx1Njc3Rlx1OERFRlx1NUY4NFx1MzAwMicsIFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnZGwtZXJyb3ItbXNnJyBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGb290ZXJcclxuICAgICAgICBjb25zdCBmb290ZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdkbC1tb2RhbC1mb290ZXInKTtcclxuICAgICAgICBjb25zdCBidG4gPSBmb290ZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1NTIxQlx1NUVGQScsIGNsczogJ21vZC1jdGEnIH0pO1xyXG4gICAgICAgIGJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5oYW5kbGVDcmVhdGUoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY1MkZcdTYzMDFcdTU2REVcdThGNjZcdTc2RjRcdTYzQTVcdTUyMUJcdTVFRkFcclxuICAgICAgICBjb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiB0aGlzLm5ld0ZpbGVOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNyZWF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDcmVhdGUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm5ld0ZpbGVOYW1lKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1OEJGN1x1OEY5M1x1NTE2NVx1NjU4N1x1NEVGNlx1NTQwRCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzYXZlUGF0aCA9IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmdzKCkubm90ZUNyZWF0b3Iuc2F2ZVBhdGggfHwgJyc7XHJcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3NhdmVQYXRofS8ke3RoaXMubmV3RmlsZU5hbWV9Lm1kYCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbFBhdGgpKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjU4N1x1NEVGNlx1NURGMlx1NUI1OFx1NTcyOCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgY29udGVudCA9ICcnO1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQodGhpcy5zZWxlY3RlZFRlbXBsYXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZnVsbFBhdGgsIGNvbnRlbnQpO1xyXG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSkub3BlbkZpbGUoZmlsZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1MjFCXHU1RUZBXHU2NTg3XHU0RUY2XHU1OTMxXHU4RDI1Jyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdTUxODVcdTkwRThcdTdDN0JcdUZGMUFcdTZBMjFcdTY3N0ZcdTg4NjVcdTUxNjhcdTU2NjhcclxuY2xhc3MgVGVtcGxhdGVTdWdnZXN0IGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Q8VEZpbGU+IHtcclxuICAgIHByaXZhdGUgZmlsZXM6IFRGaWxlW107XHJcbiAgICBwcml2YXRlIG9uU2VsZWN0OiAoZmlsZTogVEZpbGUpID0+IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQsIGZpbGVzOiBURmlsZVtdLCBvblNlbGVjdDogKGZpbGU6IFRGaWxlKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwLCBpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLmZpbGVzID0gZmlsZXM7XHJcbiAgICAgICAgdGhpcy5vblNlbGVjdCA9IG9uU2VsZWN0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBURmlsZVtdIHtcclxuICAgICAgICBjb25zdCBsb3dlciA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsZXMuZmlsdGVyKGYgPT4gXHJcbiAgICAgICAgICAgIGYuYmFzZW5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlcikgfHwgXHJcbiAgICAgICAgICAgIGYucGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyU3VnZ2VzdGlvbihmaWxlOiBURmlsZSwgZWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgZWwuY3JlYXRlRGl2KHsgdGV4dDogZmlsZS5iYXNlbmFtZSwgc3R5bGU6ICdmb250LXdlaWdodDogNTAwOycgfSk7XHJcbiAgICAgICAgZWwuY3JlYXRlRGl2KHsgdGV4dDogZmlsZS5wYXRoLCBzdHlsZTogJ2ZvbnQtc2l6ZTogMC44ZW07IGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGVjdFN1Z2dlc3Rpb24oZmlsZTogVEZpbGUpIHtcclxuICAgICAgICB0aGlzLm9uU2VsZWN0KGZpbGUpO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogdWkvY29tcG9uZW50cy9HcmlkQ2FudmFzLnRzID09PVxyXG5pbXBvcnQgeyBBcHAsIE1lbnUsIE5vdGljZSwgUGxhdGZvcm0gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IFNldHRpbmdzTWFuYWdlciB9IGZyb20gJy4uLy4uL2NvcmUvU2V0dGluZ3NNYW5hZ2VyJztcclxuaW1wb3J0IHsgV2lkZ2V0RmFjdG9yeSB9IGZyb20gJy4uL3dpZGdldHMvV2lkZ2V0RmFjdG9yeSc7XHJcbmltcG9ydCB7IERhc2hib2FyZCwgTGF5b3V0SXRlbSwgV2lkZ2V0IH0gZnJvbSAnLi4vLi4vY29yZS90eXBlcyc7XHJcbmltcG9ydCB7IFdpZGdldENvbmZpZ01vZGFsIH0gZnJvbSAnLi4vbW9kYWxzL1dpZGdldENvbmZpZ01vZGFsJztcclxuXHJcbmludGVyZmFjZSBEcmFnU3RhdGUge1xyXG4gICAgaXNEcmFnZ2luZzogYm9vbGVhbjtcclxuICAgIHN0YXJ0WDogbnVtYmVyO1xyXG4gICAgc3RhcnRZOiBudW1iZXI7XHJcbiAgICBpbml0aWFsWDogbnVtYmVyO1xyXG4gICAgaW5pdGlhbFk6IG51bWJlcjtcclxuICAgIGl0ZW06IEhUTUxFbGVtZW50O1xyXG4gICAgbGF5b3V0SXRlbTogTGF5b3V0SXRlbTtcclxufVxyXG5cclxuaW50ZXJmYWNlIFJlc2l6ZVN0YXRlIHtcclxuICAgIGlzUmVzaXppbmc6IGJvb2xlYW47XHJcbiAgICBzdGFydFg6IG51bWJlcjtcclxuICAgIHN0YXJ0WTogbnVtYmVyO1xyXG4gICAgaW5pdGlhbFc6IG51bWJlcjtcclxuICAgIGluaXRpYWxIOiBudW1iZXI7XHJcbiAgICBpdGVtOiBIVE1MRWxlbWVudDtcclxuICAgIGxheW91dEl0ZW06IExheW91dEl0ZW07XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHcmlkQ2FudmFzIHtcclxuICAgIHByaXZhdGUgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgYXBwOiBBcHA7XHJcbiAgICBwcml2YXRlIHNldHRpbmdzTWFuYWdlcjogU2V0dGluZ3NNYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSB3aWRnZXRGYWN0b3J5OiBXaWRnZXRGYWN0b3J5O1xyXG4gICAgcHJpdmF0ZSBpc0VkaXRNb2RlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGN1cnJlbnREYXNoYm9hcmRJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcbiAgICBcclxuICAgIHByaXZhdGUgZHJhZ1N0YXRlOiBEcmFnU3RhdGUgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgcmVzaXplU3RhdGU6IFJlc2l6ZVN0YXRlIHwgbnVsbCA9IG51bGw7XHJcbiAgICBcclxuICAgIC8vIEdyaWQgQ29uc3RhbnRzXHJcbiAgICBwcml2YXRlIENFTExfSEVJR0hUID0gNTA7XHJcbiAgICBwcml2YXRlIEdBUCA9IDE2O1xyXG4gICAgcHJpdmF0ZSBDT0xTID0gMjQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgYXBwOiBBcHAsIHNldHRpbmdzTWFuYWdlcjogU2V0dGluZ3NNYW5hZ2VyLCB3aWRnZXRGYWN0b3J5OiBXaWRnZXRGYWN0b3J5KSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIgPSBzZXR0aW5nc01hbmFnZXI7XHJcbiAgICAgICAgdGhpcy53aWRnZXRGYWN0b3J5ID0gd2lkZ2V0RmFjdG9yeTtcclxuXHJcbiAgICAgICAgLy8gR2xvYmFsIEV2ZW50IExpc3RlbmVyc1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuaGFuZGxlTW91c2VNb3ZlLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLmhhbmRsZU1vdXNlVXAuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlcigpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5lbXB0eSgpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENsYXNzKCdkbC1ncmlkLWNhbnZhcy1jb250YWluZXInKTtcclxuICAgICAgICBjb25zdCBjYW52YXMgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVEaXYoJ2RsLWdyaWQtY2FudmFzJyk7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFZGl0TW9kZSkgY2FudmFzLmFkZENsYXNzKCdpcy1lZGl0aW5nJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEVkaXRNb2RlKGVuYWJsZWQ6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLmlzRWRpdE1vZGUgPSBlbmFibGVkO1xyXG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5kbC1ncmlkLWNhbnZhcycpO1xyXG4gICAgICAgIGlmIChjYW52YXMpIGNhbnZhcy50b2dnbGVDbGFzcygnaXMtZWRpdGluZycsIGVuYWJsZWQpO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnREYXNoYm9hcmRJZCkgdGhpcy5sb2FkRGFzaGJvYXJkKHRoaXMuY3VycmVudERhc2hib2FyZElkKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbG9hZERhc2hib2FyZChpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50RGFzaGJvYXJkSWQgPSBpZDtcclxuICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRBY3RpdmVEYXNoYm9hcmQoaWQpO1xyXG4gICAgICAgIGNvbnN0IGRhc2hib2FyZCA9IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldERhc2hib2FyZChpZCk7XHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmRsLWdyaWQtY2FudmFzJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCFjYW52YXMgfHwgIWRhc2hib2FyZCkgcmV0dXJuO1xyXG4gICAgICAgIGNhbnZhcy5lbXB0eSgpO1xyXG5cclxuICAgICAgICBkYXNoYm9hcmQubGF5b3V0LmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdpZGdldCA9IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFdpZGdldChpdGVtLndpZGdldElkKTtcclxuICAgICAgICAgICAgaWYgKCF3aWRnZXQpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSBjYW52YXMuY3JlYXRlRGl2KCdkbC1ncmlkLWl0ZW0td3JhcHBlcicpO1xyXG4gICAgICAgICAgICB3cmFwcGVyLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIGl0ZW0uaSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB3cmFwcGVyLnN0eWxlLmdyaWRDb2x1bW5TdGFydCA9IFN0cmluZyhpdGVtLnggKyAxKTtcclxuICAgICAgICAgICAgd3JhcHBlci5zdHlsZS5ncmlkQ29sdW1uRW5kID0gU3RyaW5nKGl0ZW0ueCArIGl0ZW0udyArIDEpO1xyXG4gICAgICAgICAgICB3cmFwcGVyLnN0eWxlLmdyaWRSb3dTdGFydCA9IFN0cmluZyhpdGVtLnkgKyAxKTtcclxuICAgICAgICAgICAgd3JhcHBlci5zdHlsZS5ncmlkUm93RW5kID0gU3RyaW5nKGl0ZW0ueSArIGl0ZW0uaCArIDEpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0gdGhpcy53aWRnZXRGYWN0b3J5LmNyZWF0ZSh3aWRnZXQpO1xyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50ICYmIHR5cGVvZiBjb21wb25lbnQucmVuZGVyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQucmVuZGVyKHdyYXBwZXIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb21wb25lbnQucmVuZGVyQ29udGVudCA9PT0gJ2Z1bmN0aW9uJykgY29tcG9uZW50LnJlbmRlckNvbnRlbnQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNFZGl0TW9kZSAmJiAhUGxhdGZvcm0uaXNNb2JpbGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc2l6ZUhhbmRsZSA9IHdyYXBwZXIuY3JlYXRlRGl2KCdkbC1yZXNpemUtaGFuZGxlJyk7XHJcbiAgICAgICAgICAgICAgICByZXNpemVIYW5kbGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHRoaXMuaW5pdFJlc2l6ZShlLCB3cmFwcGVyLCBpdGVtKSk7XHJcbiAgICAgICAgICAgICAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB0aGlzLmluaXREcmFnKGUsIHdyYXBwZXIsIGl0ZW0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBvcGVuQWRkV2lkZ2V0TW9kYWwoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnREYXNoYm9hcmRJZCkgeyBuZXcgTm90aWNlKCdcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTYyMTZcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTc3MEJcdTY3N0YnKTsgcmV0dXJuOyB9XHJcbiAgICAgICAgbmV3IFdpZGdldENvbmZpZ01vZGFsKFxyXG4gICAgICAgICAgICB0aGlzLmFwcCwgXHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudERhc2hib2FyZElkLCBcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIsIFxyXG4gICAgICAgICAgICBhc3luYyAod2lkZ2V0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zYXZlV2lkZ2V0KHdpZGdldCk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFkZFdpZGdldFRvTGF5b3V0KHdpZGdldC5pZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApLm9wZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGFkZFdpZGdldFRvTGF5b3V0KHdpZGdldElkOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBkYXNoYm9hcmQgPSB0aGlzLnNldHRpbmdzTWFuYWdlci5nZXREYXNoYm9hcmQodGhpcy5jdXJyZW50RGFzaGJvYXJkSWQhKTtcclxuICAgICAgICBpZiAoIWRhc2hib2FyZCkgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCB5ID0gMDtcclxuICAgICAgICBpZiAoZGFzaGJvYXJkLmxheW91dC5sZW5ndGggPiAwKSB5ID0gTWF0aC5tYXgoLi4uZGFzaGJvYXJkLmxheW91dC5tYXAoaSA9PiBpLnkgKyBpLmgpKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBuZXdJdGVtOiBMYXlvdXRJdGVtID0geyBpOiBjcnlwdG8ucmFuZG9tVVVJRCgpLCB4OiAwLCB5OiB5LCB3OiAxMiwgaDogNiwgd2lkZ2V0SWQgfTtcclxuICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5hZGRMYXlvdXRJdGVtKHRoaXMuY3VycmVudERhc2hib2FyZElkISwgbmV3SXRlbSk7XHJcbiAgICAgICAgdGhpcy5sb2FkRGFzaGJvYXJkKHRoaXMuY3VycmVudERhc2hib2FyZElkISk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIEludGVyYWN0aW9uIExvZ2ljIC0tLVxyXG5cclxuICAgIHByaXZhdGUgaW5pdFJlc2l6ZShlOiBNb3VzZUV2ZW50LCBpdGVtOiBIVE1MRWxlbWVudCwgbGF5b3V0SXRlbTogTGF5b3V0SXRlbSkge1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMucmVzaXplU3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGlzUmVzaXppbmc6IHRydWUsXHJcbiAgICAgICAgICAgIHN0YXJ0WDogZS5jbGllbnRYLFxyXG4gICAgICAgICAgICBzdGFydFk6IGUuY2xpZW50WSxcclxuICAgICAgICAgICAgaW5pdGlhbFc6IGl0ZW0uY2xpZW50V2lkdGgsXHJcbiAgICAgICAgICAgIGluaXRpYWxIOiBpdGVtLmNsaWVudEhlaWdodCxcclxuICAgICAgICAgICAgaXRlbTogaXRlbSxcclxuICAgICAgICAgICAgbGF5b3V0SXRlbTogbGF5b3V0SXRlbVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaXRlbS5zdHlsZS56SW5kZXggPSAnMTAwJztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXREcmFnKGU6IE1vdXNlRXZlbnQsIGl0ZW06IEhUTUxFbGVtZW50LCBsYXlvdXRJdGVtOiBMYXlvdXRJdGVtKSB7XHJcbiAgICAgICAgaWYgKChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnYnV0dG9uLCBpbnB1dCwgc2VsZWN0LCAuZGwtcmVzaXplLWhhbmRsZSwgLmRsLWxpc3QtaXRlbScpKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuZHJhZ1N0YXRlID0ge1xyXG4gICAgICAgICAgICBpc0RyYWdnaW5nOiB0cnVlLFxyXG4gICAgICAgICAgICBzdGFydFg6IGUuY2xpZW50WCxcclxuICAgICAgICAgICAgc3RhcnRZOiBlLmNsaWVudFksXHJcbiAgICAgICAgICAgIGluaXRpYWxYOiBpdGVtLm9mZnNldExlZnQsXHJcbiAgICAgICAgICAgIGluaXRpYWxZOiBpdGVtLm9mZnNldFRvcCxcclxuICAgICAgICAgICAgaXRlbTogaXRlbSxcclxuICAgICAgICAgICAgbGF5b3V0SXRlbTogbGF5b3V0SXRlbVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaXRlbS5zdHlsZS56SW5kZXggPSAnMTAwJztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZU1vdXNlTW92ZShlOiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVzaXplU3RhdGUgJiYgdGhpcy5yZXNpemVTdGF0ZS5pc1Jlc2l6aW5nKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGR4ID0gZS5jbGllbnRYIC0gdGhpcy5yZXNpemVTdGF0ZS5zdGFydFg7XHJcbiAgICAgICAgICAgIGNvbnN0IGR5ID0gZS5jbGllbnRZIC0gdGhpcy5yZXNpemVTdGF0ZS5zdGFydFk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplU3RhdGUuaXRlbS5zdHlsZS53aWR0aCA9IGAke3RoaXMucmVzaXplU3RhdGUuaW5pdGlhbFcgKyBkeH1weGA7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplU3RhdGUuaXRlbS5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLnJlc2l6ZVN0YXRlLmluaXRpYWxIICsgZHl9cHhgO1xyXG4gICAgICAgIH0gXHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5kcmFnU3RhdGUgJiYgdGhpcy5kcmFnU3RhdGUuaXNEcmFnZ2luZykge1xyXG4gICAgICAgICAgICBjb25zdCBkeCA9IGUuY2xpZW50WCAtIHRoaXMuZHJhZ1N0YXRlLnN0YXJ0WDtcclxuICAgICAgICAgICAgY29uc3QgZHkgPSBlLmNsaWVudFkgLSB0aGlzLmRyYWdTdGF0ZS5zdGFydFk7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0YXRlLml0ZW0uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke2R4fXB4LCAke2R5fXB4KWA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlTW91c2VVcChlOiBNb3VzZUV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50RGFzaGJvYXJkSWQpIHJldHVybjtcbiAgICAgICAgY29uc3QgZGFzaGJvYXJkID0gdGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0RGFzaGJvYXJkKHRoaXMuY3VycmVudERhc2hib2FyZElkKTtcbiAgICAgICAgaWYgKCFkYXNoYm9hcmQpIHJldHVybjtcblxuICAgICAgICBjb25zdCBjYW52YXMgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZGwtZ3JpZC1jYW52YXMnKTtcbiAgICAgICAgaWYgKCFjYW52YXMpIHJldHVybjtcbiAgICAgICAgY29uc3QgY2FudmFzUmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgY29sV2lkdGggPSAoY2FudmFzUmVjdC53aWR0aCAtICh0aGlzLkNPTFMgLSAxKSAqIHRoaXMuR0FQKSAvIHRoaXMuQ09MUztcblxuICAgICAgICBpZiAodGhpcy5yZXNpemVTdGF0ZSAmJiB0aGlzLnJlc2l6ZVN0YXRlLmlzUmVzaXppbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaXRlbSwgbGF5b3V0SXRlbSB9ID0gdGhpcy5yZXNpemVTdGF0ZTtcbiAgICAgICAgICAgIGl0ZW0uc3R5bGUuekluZGV4ID0gJyc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IG5ld1BpeGVsVyA9IGl0ZW0uY2xpZW50V2lkdGg7XG4gICAgICAgICAgICBjb25zdCBuZXdQaXhlbEggPSBpdGVtLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IHcgPSBNYXRoLnJvdW5kKChuZXdQaXhlbFcgKyB0aGlzLkdBUCkgLyAoY29sV2lkdGggKyB0aGlzLkdBUCkpO1xuICAgICAgICAgICAgbGV0IGggPSBNYXRoLnJvdW5kKChuZXdQaXhlbEggKyB0aGlzLkdBUCkgLyAodGhpcy5DRUxMX0hFSUdIVCArIHRoaXMuR0FQKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHcgPSBNYXRoLm1heCgyLCBNYXRoLm1pbih3LCB0aGlzLkNPTFMgLSBsYXlvdXRJdGVtLngpKTtcbiAgICAgICAgICAgIGggPSBNYXRoLm1heCgyLCBoKTtcblxuICAgICAgICAgICAgbGF5b3V0SXRlbS53ID0gdztcbiAgICAgICAgICAgIGxheW91dEl0ZW0uaCA9IGg7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGl0ZW0uc3R5bGUud2lkdGggPSAnJztcbiAgICAgICAgICAgIGl0ZW0uc3R5bGUuaGVpZ2h0ID0gJyc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OTFDRFx1NTNFMFx1NjhDMFx1NkQ0Qlx1NTQ4Q1x1NjNBOFx1NjMyNFx1OTAzQlx1OEY5MVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZXNvbHZlT3ZlcmxhcHMoZGFzaGJvYXJkLCBsYXlvdXRJdGVtKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgdGhpcy5sb2FkRGFzaGJvYXJkKHRoaXMuY3VycmVudERhc2hib2FyZElkKTtcbiAgICAgICAgICAgIHRoaXMucmVzaXplU3RhdGUgPSBudWxsO1xuICAgICAgICB9IFxuICAgICAgICBlbHNlIGlmICh0aGlzLmRyYWdTdGF0ZSAmJiB0aGlzLmRyYWdTdGF0ZS5pc0RyYWdnaW5nKSB7XG4gICAgICAgICAgICBjb25zdCB7IGl0ZW0sIGxheW91dEl0ZW0sIHN0YXJ0WCwgc3RhcnRZIH0gPSB0aGlzLmRyYWdTdGF0ZTtcbiAgICAgICAgICAgIGl0ZW0uc3R5bGUuekluZGV4ID0gJyc7XG4gICAgICAgICAgICBpdGVtLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuXG4gICAgICAgICAgICBjb25zdCBkeCA9IGUuY2xpZW50WCAtIHN0YXJ0WDtcbiAgICAgICAgICAgIGNvbnN0IGR5ID0gZS5jbGllbnRZIC0gc3RhcnRZO1xuXG4gICAgICAgICAgICBjb25zdCBkQ29sID0gTWF0aC5yb3VuZChkeCAvIChjb2xXaWR0aCArIHRoaXMuR0FQKSk7XG4gICAgICAgICAgICBjb25zdCBkUm93ID0gTWF0aC5yb3VuZChkeSAvICh0aGlzLkNFTExfSEVJR0hUICsgdGhpcy5HQVApKTtcblxuICAgICAgICAgICAgbGV0IG5ld1ggPSBsYXlvdXRJdGVtLnggKyBkQ29sO1xuICAgICAgICAgICAgbGV0IG5ld1kgPSBsYXlvdXRJdGVtLnkgKyBkUm93O1xuXG4gICAgICAgICAgICBuZXdYID0gTWF0aC5tYXgoMCwgTWF0aC5taW4obmV3WCwgdGhpcy5DT0xTIC0gbGF5b3V0SXRlbS53KSk7XG4gICAgICAgICAgICBuZXdZID0gTWF0aC5tYXgoMCwgbmV3WSk7XG5cbiAgICAgICAgICAgIGxheW91dEl0ZW0ueCA9IG5ld1g7XG4gICAgICAgICAgICBsYXlvdXRJdGVtLnkgPSBuZXdZO1xuXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTkxQ0RcdTUzRTBcdTY4QzBcdTZENEJcdTU0OENcdTYzQThcdTYzMjRcdTkwM0JcdThGOTFcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVzb2x2ZU92ZXJsYXBzKGRhc2hib2FyZCwgbGF5b3V0SXRlbSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIHRoaXMubG9hZERhc2hib2FyZCh0aGlzLmN1cnJlbnREYXNoYm9hcmRJZCk7XG4gICAgICAgICAgICB0aGlzLmRyYWdTdGF0ZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHJlc29sdmVPdmVybGFwcyhkYXNoYm9hcmQ6IERhc2hib2FyZCwgYWN0aXZlSXRlbTogTGF5b3V0SXRlbSkge1xuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTRFMzRcdTY1RjZcdTVFMDNcdTVDNDBcdTUyNkZcdTY3MkNcdUZGMENcdTc1MjhcdTRFOEVcdThCQTFcdTdCOTdcdTY3MDBcdTdFQzhcdTRGNERcdTdGNkVcbiAgICAgICAgY29uc3QgbGF5b3V0ID0gWy4uLmRhc2hib2FyZC5sYXlvdXRdO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2ODA3XHU4QkIwXHU5NzAwXHU4OTgxXHU5MUNEXHU2NUIwXHU4QkExXHU3Qjk3XHU0RjREXHU3RjZFXHU3Njg0XHU3RUM0XHU0RUY2XG4gICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgICAgdXBkYXRlZC5hZGQoYWN0aXZlSXRlbS5pKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NUZBQVx1NzNBRlx1NTkwNFx1NzQwNlx1RkYwQ1x1NzZGNFx1NTIzMFx1NkNBMVx1NjcwOVx1OTFDRFx1NTNFMFxuICAgICAgICBsZXQgaGFzT3ZlcmxhcCA9IHRydWU7XG4gICAgICAgIGxldCBpdGVyYXRpb25zID0gMDtcbiAgICAgICAgY29uc3QgbWF4SXRlcmF0aW9ucyA9IDEwMDtcbiAgICAgICAgXG4gICAgICAgIHdoaWxlIChoYXNPdmVybGFwICYmIGl0ZXJhdGlvbnMgPCBtYXhJdGVyYXRpb25zKSB7XG4gICAgICAgICAgICBoYXNPdmVybGFwID0gZmFsc2U7XG4gICAgICAgICAgICBpdGVyYXRpb25zKys7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NjMwOVx1NzE2NyBZIFx1NTc1MFx1NjgwN1x1NjM5Mlx1NUU4Rlx1RkYwQ1x1NEVDRSB0b3AgXHU1MjMwIGJvdHRvbSBcdTU5MDRcdTc0MDZcbiAgICAgICAgICAgIGNvbnN0IHNvcnRlZCA9IFsuLi5sYXlvdXRdLnNvcnQoKGEsIGIpID0+IGEueSAtIGIueSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjI0MFx1NjcwOVx1N0VDNFx1NEVGNlx1NUJGOVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3J0ZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBBID0gc29ydGVkW2ldO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBpICsgMTsgaiA8IHNvcnRlZC5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBCID0gc29ydGVkW2pdO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU5MUNEXHU1M0UwXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG92ZXJsYXBzID0gXG4gICAgICAgICAgICAgICAgICAgICAgICBBLnggPCBCLnggKyBCLncgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICBBLnggKyBBLncgPiBCLnggJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICBBLnkgPCBCLnkgKyBCLmggJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICBBLnkgKyBBLmggPiBCLnk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAob3ZlcmxhcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc092ZXJsYXAgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTc4NkVcdTVCOUFcdTU0RUFcdTRFMkFcdTdFQzRcdTRFRjZcdTVFOTRcdThCRTVcdTg4QUJcdTYzQThcdTYzMjRcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwdXNoZXIsIHB1c2hlZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1MTc2XHU0RTJEXHU0RTAwXHU0RTJBXHU2NjJGXHU2RDNCXHU1MkE4XHU3RUM0XHU0RUY2XHVGRjBDXHU2RDNCXHU1MkE4XHU3RUM0XHU0RUY2XHU0RjE4XHU1MTQ4XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQS5pID09PSBhY3RpdmVJdGVtLmkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXNoZXIgPSBBO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hlZSA9IEI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKEIuaSA9PT0gYWN0aXZlSXRlbS5pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVzaGVyID0gQjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXNoZWUgPSBBO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTQyNlx1NTIxOVx1RkYwQ1x1NEUwQVx1NjVCOVx1NzY4NFx1N0VDNFx1NEVGNlx1NEYxOFx1NTE0OFxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoQS55IDwgQi55KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVzaGVyID0gQTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXNoZWUgPSBCO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTQwQ1x1NEUwMFx1ODg0Q1x1RkYwQ1x1NURFNlx1NEZBN1x1NzY4NFx1N0VDNFx1NEVGNlx1NEYxOFx1NTE0OFxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoQS55ID09PSBCLnkgJiYgQS54IDwgQi54KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVzaGVyID0gQTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXNoZWUgPSBCO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTE3Nlx1NEVENlx1NjBDNVx1NTFCNVx1RkYwQ1x1NEZERFx1NjMwMVx1NzNCMFx1NzJCNlxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NUMwNlx1ODhBQlx1NjNBOFx1NjMyNFx1NzY4NFx1N0VDNFx1NEVGNlx1NTQxMVx1NEUwQlx1NzlGQlx1NTJBOFxuICAgICAgICAgICAgICAgICAgICAgICAgcHVzaGVlLnkgPSBwdXNoZXIueSArIHB1c2hlci5oO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZC5hZGQocHVzaGVlLmkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTUzOUZcdTU5Q0JcdTVFMDNcdTVDNDBcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGRhc2hib2FyZC5sYXlvdXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBsYXlvdXQuZmluZChpID0+IGkuaSA9PT0gaXRlbS5pKTtcbiAgICAgICAgICAgIGlmICh0ZW1wKSB7XG4gICAgICAgICAgICAgICAgaXRlbS54ID0gdGVtcC54O1xuICAgICAgICAgICAgICAgIGl0ZW0ueSA9IHRlbXAueTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU4RkI5XHU3NTRDXHU0RkREXHU2MkE0XG4gICAgICAgICAgICBpdGVtLnggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihpdGVtLngsIHRoaXMuQ09MUyAtIGl0ZW0udykpO1xuICAgICAgICAgICAgaXRlbS55ID0gTWF0aC5tYXgoMCwgaXRlbS55KTtcbiAgICAgICAgfVxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogdWkvd2lkZ2V0cy9CYXNlV2lkZ2V0LnRzID09PVxyXG5pbXBvcnQgeyBXaWRnZXQgfSBmcm9tICcuLi8uLi9jb3JlL2NyX2RlZl90eXBlX21haW4nO1xyXG5pbXBvcnQgeyBzZXRJY29uLCBNZW51IH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VXaWRnZXQge1xyXG4gICAgcHVibGljIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcm90ZWN0ZWQgd2lkZ2V0OiBXaWRnZXQ7XHJcbiAgICBwcm90ZWN0ZWQgY29udGVudEVsOiBIVE1MRWxlbWVudDtcclxuICAgIHByb3RlY3RlZCBvbkRlbGV0ZTogKCkgPT4gdm9pZDtcclxuICAgIHByb3RlY3RlZCBvbkVkaXQ6ICgpID0+IHZvaWQ7XHJcbiAgICBwcm90ZWN0ZWQgb25Nb3ZlOiAoKSA9PiB2b2lkOyAvLyBbXHU2NUIwXHU1ODlFXVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHdpZGdldDogV2lkZ2V0LCBcclxuICAgICAgICBvbkRlbGV0ZTogKCkgPT4gdm9pZCwgXHJcbiAgICAgICAgb25FZGl0OiAoKSA9PiB2b2lkLFxyXG4gICAgICAgIG9uTW92ZTogKCkgPT4gdm9pZCAvLyBbXHU2NUIwXHU1ODlFXVxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy53aWRnZXQgPSB3aWRnZXQ7XHJcbiAgICAgICAgdGhpcy5vbkRlbGV0ZSA9IG9uRGVsZXRlO1xyXG4gICAgICAgIHRoaXMub25FZGl0ID0gb25FZGl0O1xyXG4gICAgICAgIHRoaXMub25Nb3ZlID0gb25Nb3ZlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXIocGFyZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gcGFyZW50LmNyZWF0ZURpdignZGwtd2lkZ2V0LWNhcmQnKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCB0aGlzLndpZGdldC5pZCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVySGVhZGVyKCk7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVEaXYoJ2RsLXdpZGdldC1jb250ZW50Jyk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJDb250ZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlbmRlckhlYWRlcigpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBoZWFkZXIgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVEaXYoJ2RsLXdpZGdldC1oZWFkZXInKTtcclxuICAgICAgICBoZWFkZXIuY3JlYXRlU3Bhbih7IGNsczogJ2RsLXdpZGdldC10aXRsZScsIHRleHQ6IHRoaXMud2lkZ2V0LnRpdGxlIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjb250cm9scyA9IGhlYWRlci5jcmVhdGVEaXYoJ2RsLXdpZGdldC1jb250cm9scycpO1xyXG5cclxuICAgICAgICBjb25zdCBtZW51QnRuID0gY29udHJvbHMuY3JlYXRlU3BhbignZGwtaWNvbi1idG4nKTtcclxuICAgICAgICBzZXRJY29uKG1lbnVCdG4sICdtb3JlLXZlcnRpY2FsJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbWVudUJ0bi5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoJ1x1N0YxNlx1OEY5MVx1N0VDNFx1NEVGNicpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oJ3BlbmNpbCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5vbkVkaXQoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gW1x1NjVCMFx1NTg5RV0gXHU3OUZCXHU1MkE4XHU5MDA5XHU5ODc5XHJcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZSgnXHU3OUZCXHU1MkE4XHU1MjMwXHU1MTc2XHU0RUQ2XHU3NzBCXHU2NzdGJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbignYXJyb3ctcmlnaHQtY2lyY2xlJylcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLm9uTW92ZSgpKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xyXG5cclxuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKCdcdTUyMjBcdTk2NjQnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCd0cmFzaCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFdhcm5pbmcodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLm9uRGVsZXRlKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIG1lbnUuc2hvd0F0UG9zaXRpb24oeyB4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WSB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCByZW5kZXJDb250ZW50KCk6IFByb21pc2U8dm9pZD47XHJcbiAgICBcclxuICAgIHB1YmxpYyB1cGRhdGUod2lkZ2V0OiBXaWRnZXQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLndpZGdldCA9IHdpZGdldDtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZGwtd2lkZ2V0LXRpdGxlJykhLnNldFRleHQod2lkZ2V0LnRpdGxlKTtcclxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyQ29udGVudCgpO1xyXG4gICAgfVxyXG59IiwgIi8vID09PSBGSUxFOiB1aS93aWRnZXRzL0NoYXJ0V2lkZ2V0LnRzID09PVxyXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBCYXNlV2lkZ2V0IH0gZnJvbSAnLi9CYXNlV2lkZ2V0JztcbmltcG9ydCB7IENoYXJ0V2lkZ2V0IGFzIElDaGFydFdpZGdldCB9IGZyb20gJy4uLy4uL2NvcmUvdHlwZXMnO1xuaW1wb3J0IHsgRGF0YUVuZ2luZSB9IGZyb20gJy4uLy4uL2NvcmUvRGF0YUVuZ2luZSc7XG5pbXBvcnQgeyBSZW5kZXJEYXRhc2V0IH0gZnJvbSAnLi4vcmVuZGVyZXJzL0Jhc2VDaGFydFJlbmRlcmVyJztcbmltcG9ydCB7IFBsYXRmb3JtIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQ29sb3JVdGlscyB9IGZyb20gJy4uLy4uL2NvcmUvdXRpbHMvQ29sb3JVdGlscyc7XG5pbXBvcnQgeyBDaGFydExlZ2VuZE1hbmFnZXIgfSBmcm9tICcuL0NoYXJ0TGVnZW5kTWFuYWdlcic7XG5pbXBvcnQgeyBDaGFydFRvb2x0aXBNYW5hZ2VyIH0gZnJvbSAnLi9DaGFydFRvb2x0aXBNYW5hZ2VyJztcbmltcG9ydCB7IENoYXJ0UmVuZGVyZXJGYWN0b3J5IH0gZnJvbSAnLi9DaGFydFJlbmRlcmVyRmFjdG9yeSc7XG5cbmV4cG9ydCBjbGFzcyBDaGFydFdpZGdldCBleHRlbmRzIEJhc2VXaWRnZXQge1xuICAgIHByaXZhdGUgYXBwOiBBcHA7XG4gICAgcHJpdmF0ZSBkYXRhRW5naW5lOiBEYXRhRW5naW5lO1xuICAgIHByaXZhdGUgbGVnZW5kTWFuYWdlcjogQ2hhcnRMZWdlbmRNYW5hZ2VyO1xuICAgIHByaXZhdGUgdG9vbHRpcE1hbmFnZXI6IENoYXJ0VG9vbHRpcE1hbmFnZXI7XG4gICAgcHJpdmF0ZSByZW5kZXJlckZhY3Rvcnk6IENoYXJ0UmVuZGVyZXJGYWN0b3J5O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHdpZGdldDogSUNoYXJ0V2lkZ2V0LFxuICAgICAgICBhcHA6IEFwcCxcbiAgICAgICAgZGF0YUVuZ2luZTogRGF0YUVuZ2luZSxcbiAgICAgICAgb25EZWxldGU6ICgpID0+IHZvaWQsXG4gICAgICAgIG9uRWRpdDogKCkgPT4gdm9pZCxcbiAgICAgICAgb25Nb3ZlOiAoKSA9PiB2b2lkXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKHdpZGdldCwgb25EZWxldGUsIG9uRWRpdCwgb25Nb3ZlKTtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMuZGF0YUVuZ2luZSA9IGRhdGFFbmdpbmU7XG4gICAgICAgIHRoaXMubGVnZW5kTWFuYWdlciA9IG5ldyBDaGFydExlZ2VuZE1hbmFnZXIodGhpcy5jb250ZW50RWwpO1xuICAgICAgICB0aGlzLnRvb2x0aXBNYW5hZ2VyID0gbmV3IENoYXJ0VG9vbHRpcE1hbmFnZXIoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlckZhY3RvcnkgPSBuZXcgQ2hhcnRSZW5kZXJlckZhY3RvcnkoYXBwKTtcbiAgICB9XHJcblxyXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgLy8gXHU2ODM4XHU1RkMzXHU2RTMyXHU2N0QzXHU1MTY1XHU1M0UzXHJcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICBwdWJsaWMgYXN5bmMgcmVuZGVyQ29udGVudCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCB3ID0gdGhpcy53aWRnZXQgYXMgSUNoYXJ0V2lkZ2V0O1xyXG4gICAgICAgIGNvbnN0IHJlZkxpbmVzID0gdy5yZWZMaW5lcyB8fCBbXTtcclxuICAgICAgICBjb25zdCB5QXhpc1Byb3BzID0gdy55QXhpc1Byb3BlcnRpZXMgfHwgW107XHJcbiAgICAgICAgY29uc3Qgc2hvd0RhdGFMYWJlbHMgPSB3LnNob3dEYXRhTGFiZWxzIHx8IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBcdTc4NkVcdTRGRERsZWdlbmRNYW5hZ2VyXHU3Njg0Y29udGFpbmVyXHU1REYyXHU2QjYzXHU3ODZFXHU4QkJFXHU3RjZFXHJcbiAgICAgICAgdGhpcy5sZWdlbmRNYW5hZ2VyLnNldENvbnRhaW5lcih0aGlzLmNvbnRlbnRFbCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICB0aGlzLmxlZ2VuZE1hbmFnZXIucmVtb3ZlRXhpc3RpbmdMZWdlbmQoKTtcclxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5hZGRDbGFzcygnZGwtd2lkZ2V0LWNvbnRlbnQnKTtcclxuXHJcbiAgICAgICAgaWYgKCF3LmRhdGFTb3VyY2VzIHx8IHcuZGF0YVNvdXJjZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IHRleHQ6ICdcdTY3MkFcdTkxNERcdTdGNkVcdTY1NzBcdTYzNkVcdTZFOTAnLCBjbHM6ICdkbC1uby1kYXRhJyB9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuYWRkQ2xhc3MoJ2lzLWxvYWRpbmcnKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmNvbnRlbnRFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgbGV0IHdpZHRoID0gcmVjdC53aWR0aDtcclxuICAgICAgICAgICAgbGV0IGhlaWdodCA9IHJlY3QuaGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgaWYgKFBsYXRmb3JtLmlzTW9iaWxlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGVpZ2h0IDwgMTAwKSBoZWlnaHQgPSAyNjA7XHJcbiAgICAgICAgICAgICAgICBpZiAod2lkdGggPCA1MCkgd2lkdGggPSB0aGlzLmNvbnRhaW5lci5jbGllbnRXaWR0aCB8fCB3aW5kb3cuaW5uZXJXaWR0aCAtIDMyO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhlaWdodCA8IDUwKSBoZWlnaHQgPSAyMDA7XHJcbiAgICAgICAgICAgICAgICBpZiAod2lkdGggPCA1MCkgd2lkdGggPSAzMDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdkbC1jaGFydC13cmFwcGVyJyB9KTtcclxuICAgICAgICAgICAgbGV0IHN2ZzogU1ZHU1ZHRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLy8gXHU0RjlCIGxlZ2VuZCBcdTU5MERcdTc1MjhcdTc2ODRcdTY1NzBcdTYzNkVcclxuICAgICAgICAgICAgbGV0IHN0YW5kYXJkRGF0YXNldHM6IGFueVtdID0gW107XHJcbiAgICAgICAgICAgIGxldCBzdGFuZGFyZExhYmVsczogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIC8vID09PT09IEdpdExpbmUgPT09PT1cclxuICAgICAgICAgICAgaWYgKHcuY2hhcnRUeXBlID09PSAnZ2l0bGluZScpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tzID0gYXdhaXQgdGhpcy5kYXRhRW5naW5lLmdldEdpdExpbmVEYXRhKHcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWwucmVtb3ZlQ2xhc3MoJ2lzLWxvYWRpbmcnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRhc2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogJ1x1NjVFMFx1NEVGQlx1NTJBMVx1NjU3MFx1NjM2RScsIGNsczogJ2RsLW5vLWRhdGEnIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFydEVsID0gdGhpcy5yZW5kZXJlckZhY3RvcnkuZ2V0R2l0TGluZVJlbmRlcmVyKCkucmVuZGVyKHRhc2tzLCB3aWR0aCwgaGVpZ2h0LCB3LmlzSG9yaXpvbnRhbCk7XHJcbiAgICAgICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGNoYXJ0RWwpO1xyXG4gICAgICAgICAgICAgICAgd3JhcHBlci5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyA9PT09PSBCdWJibGUgPT09PT1cclxuICAgICAgICAgICAgaWYgKHcuY2hhcnRUeXBlID09PSAnYnViYmxlJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBwb2ludHMsIHhMYWJlbHMsIHlMYWJlbHMgfSA9IGF3YWl0IHRoaXMuZGF0YUVuZ2luZS5nZXRCdWJibGVEYXRhKHcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWwucmVtb3ZlQ2xhc3MoJ2lzLWxvYWRpbmcnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXBvaW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6ICdcdTY1RTBcdTY1NzBcdTYzNkUnLCBjbHM6ICdkbC1uby1kYXRhJyB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc3ZnID0gdGhpcy5yZW5kZXJlckZhY3RvcnkuZ2V0QnViYmxlUmVuZGVyZXIoKS5yZW5kZXIocG9pbnRzLCB4TGFiZWxzLCB5TGFiZWxzLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gPT09PT0gSGVhdG1hcCA9PT09PVxyXG4gICAgICAgICAgICBlbHNlIGlmICh3LmNoYXJ0VHlwZSA9PT0gJ2hlYXRtYXAnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5kYXRhRW5naW5lLmdldEhlYXRtYXBEYXRhKHcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWwucmVtb3ZlQ2xhc3MoJ2lzLWxvYWRpbmcnKTtcclxuICAgICAgICAgICAgICAgIHN2ZyA9IHRoaXMucmVuZGVyZXJGYWN0b3J5LmdldEhlYXRtYXBSZW5kZXJlcigpLnJlbmRlcihkYXRhLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gPT09PT0gXHU2ODA3XHU1MUM2XHU1NkZFXHU4ODY4ID09PT09XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5kYXRhRW5naW5lLmdldENoYXJ0RGF0YSh3KTtcclxuICAgICAgICAgICAgICAgIHN0YW5kYXJkTGFiZWxzID0gcmVzdWx0LmxhYmVscztcclxuICAgICAgICAgICAgICAgIHN0YW5kYXJkRGF0YXNldHMgPSByZXN1bHQuZGF0YXNldHM7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWwucmVtb3ZlQ2xhc3MoJ2lzLWxvYWRpbmcnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzdGFuZGFyZERhdGFzZXRzLmZvckVhY2goKGQsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWQuY29sb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZC5jb2xvciA9IHlBeGlzUHJvcHNbaV0/LmNvbG9yIHx8IENvbG9yVXRpbHMuZ2V0Q29sb3IoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFzdGFuZGFyZERhdGFzZXRzLnNvbWUoZCA9PiBkLmRhdGEuc29tZSgodjogYW55KSA9PiB2ICE9PSBudWxsKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6ICdcdTY1RTBcdTY1NzBcdTYzNkUnLCBjbHM6ICdkbC1uby1kYXRhJyB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHcuY2hhcnRUeXBlID09PSAncGllJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVHJhbnNwb3NlID0gc3RhbmRhcmREYXRhc2V0cy5sZW5ndGggPT09IDEgJiYgc3RhbmRhcmRMYWJlbHMubGVuZ3RoID4gMTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwaWVEYXRhID0gaXNUcmFuc3Bvc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzdGFuZGFyZERhdGFzZXRzWzBdLmRhdGEubWFwKCh2OiBhbnkpID0+IHYgfHwgMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBzdGFuZGFyZERhdGFzZXRzLm1hcChkcyA9PiBkcy5kYXRhLnJlZHVjZSgoYTogYW55LCBiOiBhbnkpID0+IChhIHx8IDApICsgKGIgfHwgMCksIDApKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGllTGFiZWxzID0gaXNUcmFuc3Bvc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzdGFuZGFyZExhYmVsc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHN0YW5kYXJkRGF0YXNldHMubWFwKGRzID0+IGRzLmxhYmVsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGllQ29sb3JzID0gcGllTGFiZWxzLm1hcCgoXywgaSkgPT4gQ29sb3JVdGlscy5nZXRDb2xvcihpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2luZ2xlOiBSZW5kZXJEYXRhc2V0ID0geyBsYWJlbDogJ1RvdGFsJywgZGF0YTogcGllRGF0YSwgY29sb3I6ICcnIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHN2ZyA9IHRoaXMucmVuZGVyZXJGYWN0b3J5LmdldFBpZVJlbmRlcmVyKCkucmVuZGVyKHNpbmdsZSwgcGllTGFiZWxzLCB3aWR0aCwgaGVpZ2h0LCBwaWVDb2xvcnMsIHcuaXNEb251dCwgc2hvd0RhdGFMYWJlbHMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh3LmNoYXJ0VHlwZSA9PT0gJ2xpbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ZnID0gdGhpcy5yZW5kZXJlckZhY3RvcnkuZ2V0TGluZVJlbmRlcmVyKCkucmVuZGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFuZGFyZERhdGFzZXRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFuZGFyZExhYmVscyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmTGluZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dEYXRhTGFiZWxzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3LmVuYWJsZVNtb290aEN1cnZlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3LnlBeGlzTWluLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3LnlBeGlzTWF4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3LmVuYWJsZVJlZkxpbmVab25lc1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHcuY2hhcnRUeXBlID09PSAnc2NhdHRlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdmcgPSB0aGlzLnJlbmRlcmVyRmFjdG9yeS5nZXRTY2F0dGVyUmVuZGVyZXIoKS5yZW5kZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YW5kYXJkRGF0YXNldHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YW5kYXJkTGFiZWxzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZMaW5lcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0RhdGFMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHcueUF4aXNNaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHcueUF4aXNNYXhcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh3LmNoYXJ0VHlwZSA9PT0gJ3JhZGFyJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHN2ZyA9IHRoaXMucmVuZGVyZXJGYWN0b3J5LmdldFJhZGFyUmVuZGVyZXIoKS5yZW5kZXIoc3RhbmRhcmREYXRhc2V0cywgc3RhbmRhcmRMYWJlbHMsIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzdmcgPSB0aGlzLnJlbmRlcmVyRmFjdG9yeS5nZXRCYXJSZW5kZXJlcigpLnJlbmRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhbmRhcmREYXRhc2V0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhbmRhcmRMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZkxpbmVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93RGF0YUxhYmVscyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdy55QXhpc01pbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdy55QXhpc01heCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdy5pc1N0YWNrZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHcuaXNIb3Jpem9udGFsXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gPT09PT0gU1ZHICsgTGVnZW5kID09PT09XHJcbiAgICAgICAgICAgIGlmIChzdmcpIHtcclxuICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc3ZnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcE1hbmFnZXIuYXR0YWNoVG9vbHRpcChzdmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMubGVnZW5kTWFuYWdlci5yZW1vdmVFeGlzdGluZ0xlZ2VuZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh3LnNob3dMZWdlbmQgJiYgIVsnYnViYmxlJywgJ2hlYXRtYXAnLCAnZ2l0bGluZSddLmluY2x1ZGVzKHcuY2hhcnRUeXBlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVscyA9IHN0YW5kYXJkRGF0YXNldHMubWFwKGQgPT4gZC5sYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sb3JzID0gc3RhbmRhcmREYXRhc2V0cy5tYXAoZCA9PiBkLmNvbG9yKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbmFsTGFiZWxzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbmFsQ29sb3JzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsYWJlbHMuZm9yRWFjaCgobCwgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBsPy50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgJiYgIXNlZW4uaGFzKGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZW4uYWRkKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbExhYmVscy5wdXNoKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbENvbG9ycy5wdXNoKGNvbG9yc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWdlbmRNYW5hZ2VyLnJlbmRlckxlZ2VuZChmaW5hbExhYmVscywgZmluYWxDb2xvcnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDaGFydCBSZW5kZXIgRXJyb3I6JywgZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IHRleHQ6ICdcdTU2RkVcdTg4NjhcdTZFMzJcdTY3RDNcdTk1MTlcdThCRUYnLCBjbHM6ICdkbC1lcnJvci1tc2cnIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCAiLy8gPT09IEZJTEU6IHVpL3dpZGdldHMvQ2hhcnRMZWdlbmRNYW5hZ2VyLnRzID09PVxuZXhwb3J0IGNsYXNzIENoYXJ0TGVnZW5kTWFuYWdlciB7XG4gICAgcHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXI/OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldENvbnRhaW5lcihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIH1cblxuICAgIHJlbW92ZUV4aXN0aW5nTGVnZW5kKCkge1xuICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyKSByZXR1cm47XG4gICAgICAgIGNvbnN0IG9sZCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5kbC1jaGFydC1sZWdlbmQtY29udGFpbmVyJyk7XG4gICAgICAgIGlmIChvbGQpIG9sZC5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICByZW5kZXJMZWdlbmQobGFiZWxzOiBzdHJpbmdbXSwgY29sb3JzOiBzdHJpbmdbXSkge1xuICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGxlZ2VuZEVsID0gdGhpcy5jb250YWluZXIuY3JlYXRlRGl2KCdkbC1jaGFydC1sZWdlbmQtY29udGFpbmVyJyk7XG5cbiAgICAgICAgbGVnZW5kRWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgbGVnZW5kRWwuc3R5bGUuZmxleFdyYXAgPSAnd3JhcCc7XG4gICAgICAgIGxlZ2VuZEVsLnN0eWxlLmdhcCA9ICcxNXB4JztcbiAgICAgICAgbGVnZW5kRWwuc3R5bGUuZm9udFNpemUgPSAnMC44ZW0nO1xuICAgICAgICBsZWdlbmRFbC5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG4gICAgICAgIGxlZ2VuZEVsLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7XG4gICAgICAgIGxlZ2VuZEVsLnN0eWxlLnBhZGRpbmcgPSAnOHB4JztcbiAgICAgICAgbGVnZW5kRWwuc3R5bGUuYm9yZGVyVG9wID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xuXG4gICAgICAgIGxhYmVscy5mb3JFYWNoKChsYWJlbCwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGxlZ2VuZEVsLmNyZWF0ZURpdih7IGNsczogJ2RsLWxlZ2VuZC1pdGVtJyB9KTtcbiAgICAgICAgICAgIGl0ZW0uc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgICAgIGl0ZW0uc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgICAgICAgICAgaXRlbS5zdHlsZS5nYXAgPSAnNXB4JztcblxuICAgICAgICAgICAgY29uc3QgZG90ID0gaXRlbS5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgIGRvdC5zdHlsZS53aWR0aCA9ICc4cHgnO1xuICAgICAgICAgICAgZG90LnN0eWxlLmhlaWdodCA9ICc4cHgnO1xuICAgICAgICAgICAgZG90LnN0eWxlLmJvcmRlclJhZGl1cyA9ICc1MCUnO1xuICAgICAgICAgICAgZG90LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yc1tpXSB8fCAnI2NjYyc7XG5cbiAgICAgICAgICAgIGl0ZW0uY3JlYXRlU3Bhbih7IHRleHQ6IGxhYmVsIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59IiwgIi8vID09PSBGSUxFOiB1aS93aWRnZXRzL0NoYXJ0VG9vbHRpcE1hbmFnZXIudHMgPT09XG5leHBvcnQgY2xhc3MgQ2hhcnRUb29sdGlwTWFuYWdlciB7XG4gICAgcHJpdmF0ZSB0b29sdGlwOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG4gICAgYXR0YWNoVG9vbHRpcChzdmc6IFNWR1NWR0VsZW1lbnQpIHtcbiAgICAgICAgc3ZnLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCB2YWwgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRvb2x0aXAtdmFsdWUnKTtcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS10b29sdGlwLWxhYmVsJyk7XG5cbiAgICAgICAgICAgIGlmICh2YWwgJiYgbGFiZWwpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudG9vbHRpcCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXAgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZURpdignZGwtdG9vbHRpcCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXAuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgdGhpcy50b29sdGlwLnN0eWxlLmxlZnQgPSBgJHtlLmNsaWVudFggKyAxMH1weGA7XG4gICAgICAgICAgICAgICAgdGhpcy50b29sdGlwLnN0eWxlLnRvcCA9IGAke2UuY2xpZW50WSArIDEwfXB4YDtcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXAuaW5uZXJIVE1MID0gYDxzdHJvbmc+JHtsYWJlbH08L3N0cm9uZz48YnIvPiR7dmFsfWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudG9vbHRpcCkge1xuICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBzdmcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRvb2x0aXApIHRoaXMudG9vbHRpcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjbGVhbnVwKCkge1xuICAgICAgICBpZiAodGhpcy50b29sdGlwKSB7XG4gICAgICAgICAgICB0aGlzLnRvb2x0aXAucmVtb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLnRvb2x0aXAgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufSIsICIvLyA9PT0gRklMRTogdWkvcmVuZGVyZXJzL2hlbHBlcnMvQXhpc0dlbmVyYXRvci50cyA9PT1cclxuZXhwb3J0IGNsYXNzIEF4aXNHZW5lcmF0b3Ige1xyXG4gICAgcHJpdmF0ZSBucyA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XHJcblxyXG4gICAgcHVibGljIGRyYXdBeGVzKFxyXG4gICAgICAgIHN2ZzogU1ZHU1ZHRWxlbWVudCwgXHJcbiAgICAgICAgbGFiZWxzOiBzdHJpbmdbXSwgXHJcbiAgICAgICAgbWF4OiBudW1iZXIsIFxyXG4gICAgICAgIG1pbjogbnVtYmVyLCBcclxuICAgICAgICB3OiBudW1iZXIsIFxyXG4gICAgICAgIGg6IG51bWJlciwgXHJcbiAgICAgICAgcGFkOiBudW1iZXIsIFxyXG4gICAgICAgIGlzSG9yaXpvbnRhbCA9IGZhbHNlXHJcbiAgICApIHtcclxuICAgICAgICBjb25zdCB4QXhpc1kgPSBoIC0gcGFkO1xyXG4gICAgICAgIGNvbnN0IHlBeGlzWCA9IHBhZDtcclxuICAgICAgICBjb25zdCBjaGFydFcgPSB3IC0gcGFkICogMjtcclxuICAgICAgICBjb25zdCBjaGFydEggPSBoIC0gcGFkICogMjtcclxuXHJcbiAgICAgICAgLy8gRHJhdyBMaW5lc1xyXG4gICAgICAgIHRoaXMuZHJhd0xpbmUoc3ZnLCBwYWQsIHhBeGlzWSwgdyAtIHBhZCwgeEF4aXNZKTsgLy8gWCBBeGlzXHJcbiAgICAgICAgdGhpcy5kcmF3TGluZShzdmcsIHlBeGlzWCwgcGFkLCB5QXhpc1gsIHhBeGlzWSk7IC8vIFkgQXhpc1xyXG5cclxuICAgICAgICBpZiAoaXNIb3Jpem9udGFsKSB7XHJcbiAgICAgICAgICAgIC8vIFkgQXhpcyA9IExhYmVsc1xyXG4gICAgICAgICAgICBpZiAobGFiZWxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0ZXBIID0gY2hhcnRIIC8gbGFiZWxzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGxhYmVscy5mb3JFYWNoKChsYWJlbCwgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBwYWQgKyBpICogc3RlcEggKyBzdGVwSCAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3VGV4dChzdmcsIHlBeGlzWCAtIDUsIHkgKyA0LCBsYWJlbCwgJ2VuZCcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gWCBBeGlzID0gVmFsdWVzXHJcbiAgICAgICAgICAgIGNvbnN0IHN0ZXBzID0gNTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gc3RlcHM7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsID0gbWluICsgKG1heCAtIG1pbikgKiAoaSAvIHN0ZXBzKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHggPSBwYWQgKyAoaSAvIHN0ZXBzKSAqIGNoYXJ0VztcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1RleHQoc3ZnLCB4LCB4QXhpc1kgKyAxNSwgTWF0aC5yb3VuZCh2YWwpLnRvU3RyaW5nKCksICdtaWRkbGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFggQXhpcyA9IExhYmVscyAoT3B0aW1pemVkKVxyXG4gICAgICAgICAgICBpZiAobGFiZWxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1heExhYmVsTGVuID0gbGFiZWxzLnJlZHVjZSgobWF4LCBsKSA9PiBNYXRoLm1heChtYXgsIChsIHx8ICcnKS5sZW5ndGgpLCAwKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVzdExhYmVsV2lkdGggPSBNYXRoLm1heCgzMCwgbWF4TGFiZWxMZW4gKiA3KTsgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXhWaXNpYmxlTGFiZWxzID0gTWF0aC5tYXgoMSwgTWF0aC5mbG9vcihjaGFydFcgLyAoZXN0TGFiZWxXaWR0aCArIDE1KSkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RlcCA9IE1hdGguY2VpbChsYWJlbHMubGVuZ3RoIC8gbWF4VmlzaWJsZUxhYmVscyk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGFiZWxzLmZvckVhY2goKGxhYmVsLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgJSBzdGVwID09PSAwKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB4ID0gcGFkICsgKGkgLyAobGFiZWxzLmxlbmd0aCAtIDEgfHwgMSkpICogY2hhcnRXO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdUZXh0KHN2ZywgeCwgeEF4aXNZICsgMTUsIGxhYmVsLCAnbWlkZGxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gWSBBeGlzID0gVmFsdWVzXHJcbiAgICAgICAgICAgIGNvbnN0IHN0ZXBzID0gNTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gc3RlcHM7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsID0gbWluICsgKG1heCAtIG1pbikgKiAoaSAvIHN0ZXBzKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHkgPSB4QXhpc1kgLSAoaSAvIHN0ZXBzKSAqIGNoYXJ0SDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1RleHQoc3ZnLCB5QXhpc1ggLSA1LCB5ICsgNCwgTWF0aC5yb3VuZCh2YWwpLnRvU3RyaW5nKCksICdlbmQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRyYXdMaW5lKHN2ZzogU1ZHU1ZHRWxlbWVudCwgeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMubnMsICdsaW5lJyk7XHJcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCd4MScsIHgxLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgneTEnLCB5MS50b1N0cmluZygpKTtcclxuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3gyJywgeDIudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCd5MicsIHkyLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZGwtYXhpcy1saW5lJyk7XHJcbiAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGVsKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRyYXdUZXh0KHN2ZzogU1ZHU1ZHRWxlbWVudCwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHRleHQ6IHN0cmluZywgYW5jaG9yOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5zLCAndGV4dCcpO1xyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgneCcsIHgudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCd5JywgeS50b1N0cmluZygpKTtcclxuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3RleHQtYW5jaG9yJywgYW5jaG9yKTtcclxuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2RsLWF4aXMtdGV4dCcpO1xyXG4gICAgICAgIGVsLnRleHRDb250ZW50ID0gdGV4dDtcclxuICAgICAgICBzdmcuYXBwZW5kQ2hpbGQoZWwpO1xyXG4gICAgfVxyXG59IiwgIi8vID09PSBGSUxFOiB1aS9yZW5kZXJlcnMvQmFzZUNoYXJ0UmVuZGVyZXIudHMgPT09XHJcbmltcG9ydCB7IFJlZkxpbmUgfSBmcm9tICcuLi8uLi9jb3JlL3R5cGVzJztcclxuaW1wb3J0IHsgQXhpc0dlbmVyYXRvciB9IGZyb20gJy4vaGVscGVycy9BeGlzR2VuZXJhdG9yJzsgLy8gW1x1NjVCMFx1NTg5RV1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmVuZGVyRGF0YXNldCB7XHJcbiAgICBsYWJlbDogc3RyaW5nO1xyXG4gICAgZGF0YTogKG51bWJlciB8IG51bGwpW107XHJcbiAgICBjb2xvcjogc3RyaW5nO1xyXG4gICAgZW5hYmxlUGVyY2VudGFnZT86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCYXNlQ2hhcnRSZW5kZXJlciB7XHJcbiAgICBwcm90ZWN0ZWQgbnMgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnO1xyXG4gICAgcHJvdGVjdGVkIGF4aXNHZW5lcmF0b3I6IEF4aXNHZW5lcmF0b3I7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5heGlzR2VuZXJhdG9yID0gbmV3IEF4aXNHZW5lcmF0b3IoKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVTdmcod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiBTVkdTVkdFbGVtZW50IHtcclxuICAgICAgICBjb25zdCBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy5ucywgJ3N2ZycpO1xyXG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJzEwMCUnKTtcclxuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAnMTAwJScpO1xyXG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCBgMCAwICR7d2lkdGh9ICR7aGVpZ2h0fWApO1xyXG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQgbWVldCcpO1xyXG4gICAgICAgIHJldHVybiBzdmc7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU0RUUzXHU3NDA2XHU3RUQ4XHU1MjM2XHU2NUI5XHU2Q0Q1XHVGRjBDXHU0RkREXHU2MzAxXHU1MzlGXHU2NzA5XHU1QjUwXHU3QzdCXHU1MTdDXHU1QkI5XHU2MDI3XHJcbiAgICBwcm90ZWN0ZWQgZHJhd0F4ZXMoc3ZnOiBTVkdTVkdFbGVtZW50LCBsYWJlbHM6IHN0cmluZ1tdLCBtYXg6IG51bWJlciwgbWluOiBudW1iZXIsIHc6IG51bWJlciwgaDogbnVtYmVyLCBwYWQ6IG51bWJlciwgeUxhYmVscz86IHN0cmluZ1tdLCBpc0hvcml6b250YWwgPSBmYWxzZSkge1xyXG4gICAgICAgIHRoaXMuYXhpc0dlbmVyYXRvci5kcmF3QXhlcyhzdmcsIGxhYmVscywgbWF4LCBtaW4sIHcsIGgsIHBhZCwgaXNIb3Jpem9udGFsKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZHJhd1RleHQoc3ZnOiBTVkdTVkdFbGVtZW50LCB4OiBudW1iZXIsIHk6IG51bWJlciwgdGV4dDogc3RyaW5nLCBhbmNob3I6IHN0cmluZywgY2xzID0gJ2RsLWNoYXJ0LXRleHQnLCBmaWxsPzogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy5ucywgJ3RleHQnKTtcclxuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3gnLCB4LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgneScsIHkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCd0ZXh0LWFuY2hvcicsIGFuY2hvcik7XHJcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNscyk7XHJcbiAgICAgICAgaWYgKGZpbGwpIGVsLnN0eWxlLmZpbGwgPSBmaWxsO1xyXG4gICAgICAgIGVsLnRleHRDb250ZW50ID0gdGV4dDtcclxuICAgICAgICBzdmcuYXBwZW5kQ2hpbGQoZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRSYW5nZShkYXRhc2V0czogUmVuZGVyRGF0YXNldFtdLCByZWZMaW5lczogUmVmTGluZVtdLCB1c2VyTWluPzogbnVtYmVyLCB1c2VyTWF4PzogbnVtYmVyKTogeyBtYXg6IG51bWJlciwgbWluOiBudW1iZXIgfSB7XHJcbiAgICAgICAgY29uc3QgaXNBbGxQZXJjZW50ID0gZGF0YXNldHMuZXZlcnkoZCA9PiBkLmVuYWJsZVBlcmNlbnRhZ2UpO1xyXG4gICAgICAgIGlmIChpc0FsbFBlcmNlbnQpIHJldHVybiB7IG1heDogMTAwLCBtaW46IDAgfTtcclxuXHJcbiAgICAgICAgbGV0IGFsbFZhbHVlczogbnVtYmVyW10gPSBbXTtcclxuICAgICAgICBkYXRhc2V0cy5mb3JFYWNoKGQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWQuZW5hYmxlUGVyY2VudGFnZSkge1xyXG4gICAgICAgICAgICAgICAgZC5kYXRhLmZvckVhY2godiA9PiB7IGlmICh2ICE9PSBudWxsKSBhbGxWYWx1ZXMucHVzaCh2KTsgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZWZMaW5lcy5mb3JFYWNoKHIgPT4gYWxsVmFsdWVzLnB1c2goci52YWx1ZSkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBtYXggPSB1c2VyTWF4ICE9PSB1bmRlZmluZWQgPyB1c2VyTWF4IDogKGFsbFZhbHVlcy5sZW5ndGggPyBNYXRoLm1heCguLi5hbGxWYWx1ZXMpIDogMTAwKTtcclxuICAgICAgICBsZXQgbWluID0gdXNlck1pbiAhPT0gdW5kZWZpbmVkID8gdXNlck1pbiA6IChhbGxWYWx1ZXMubGVuZ3RoID8gTWF0aC5taW4oLi4uYWxsVmFsdWVzKSA6IDApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChtYXggPT09IG1pbikge1xyXG4gICAgICAgICAgICBtYXggKz0gNTtcclxuICAgICAgICAgICAgbWluIC09IDU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IG1heCwgbWluIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGRyYXdSZWZMaW5lcyhzdmc6IFNWR1NWR0VsZW1lbnQsIHJlZkxpbmVzOiBSZWZMaW5lW10sIG1heDogbnVtYmVyLCBtaW46IG51bWJlciwgdzogbnVtYmVyLCBoOiBudW1iZXIsIHBhZDogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgY2hhcnRIID0gaCAtIHBhZCAqIDI7XHJcbiAgICAgICAgY29uc3QgcmFuZ2UgPSBtYXggLSBtaW4gfHwgMTtcclxuXHJcbiAgICAgICAgcmVmTGluZXMuZm9yRWFjaChsaW5lID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeSA9IGggLSBwYWQgLSAoKGxpbmUudmFsdWUgLSBtaW4pIC8gcmFuZ2UpICogY2hhcnRIO1xyXG4gICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5zLCAnbGluZScpO1xyXG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3gxJywgcGFkLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3kxJywgeS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCd4MicsICh3IC0gcGFkKS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCd5MicsIHkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGVsLnN0eWxlLnN0cm9rZSA9IGxpbmUuY29sb3IgfHwgJ3ZhcigtLXRleHQtZXJyb3IpJztcclxuICAgICAgICAgICAgZWwuc3R5bGUuc3Ryb2tlV2lkdGggPSAnMSc7XHJcbiAgICAgICAgICAgIGVsLnN0eWxlLnN0cm9rZURhc2hhcnJheSA9ICc0IDInO1xyXG4gICAgICAgICAgICBzdmcuYXBwZW5kQ2hpbGQoZWwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwgIi8vID09PSBGSUxFOiB1aS9yZW5kZXJlcnMvQmFyQ2hhcnRSZW5kZXJlci50cyA9PT1cclxuaW1wb3J0IHsgQmFzZUNoYXJ0UmVuZGVyZXIsIFJlbmRlckRhdGFzZXQgfSBmcm9tICcuL0Jhc2VDaGFydFJlbmRlcmVyJztcclxuaW1wb3J0IHsgUmVmTGluZSB9IGZyb20gJy4uLy4uL2NvcmUvY3JfZGVmX3R5cGVfbWFpbic7XHJcblxyXG5leHBvcnQgY2xhc3MgQmFyQ2hhcnRSZW5kZXJlciBleHRlbmRzIEJhc2VDaGFydFJlbmRlcmVyIHtcclxuICAgIFxyXG4gICAgLy8gW1x1NEZFRVx1NjUzOV0gXHU1ODlFXHU1MkEwIGlzSGlzdG9ncmFtIFx1NTNDMlx1NjU3MFxyXG4gICAgcmVuZGVyKGRhdGFzZXRzOiBSZW5kZXJEYXRhc2V0W10sIGxhYmVsczogc3RyaW5nW10sIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCByZWZMaW5lczogUmVmTGluZVtdLCBzaG93TGFiZWxzID0gZmFsc2UsIHVzZXJNaW4/OiBudW1iZXIsIHVzZXJNYXg/OiBudW1iZXIsIGlzU3RhY2tlZCA9IGZhbHNlLCBpc0hvcml6b250YWwgPSBmYWxzZSwgaXNIaXN0b2dyYW0gPSBmYWxzZSk6IFNWR1NWR0VsZW1lbnQge1xyXG4gICAgICAgIGNvbnN0IHN2ZyA9IHRoaXMuY3JlYXRlU3ZnKHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgIGNvbnN0IHBhZGRpbmcgPSA0MDtcclxuICAgICAgICBjb25zdCBjaGFydFcgPSB3aWR0aCAtIHBhZGRpbmcgKiAyO1xyXG4gICAgICAgIGNvbnN0IGNoYXJ0SCA9IGhlaWdodCAtIHBhZGRpbmcgKiAyO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBtYXgsIG1pbjtcclxuICAgICAgICBpZiAoaXNTdGFja2VkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN1bXMgPSBsYWJlbHMubWFwKChfLCBpKSA9PiBkYXRhc2V0cy5yZWR1Y2UoKGFjYywgZCkgPT4gYWNjICsgKGQuZGF0YVtpXSB8fCAwKSwgMCkpO1xyXG4gICAgICAgICAgICBtYXggPSB1c2VyTWF4ICE9PSB1bmRlZmluZWQgPyB1c2VyTWF4IDogTWF0aC5tYXgoLi4uc3VtcywgMCk7XHJcbiAgICAgICAgICAgIG1pbiA9IHVzZXJNaW4gIT09IHVuZGVmaW5lZCA/IHVzZXJNaW4gOiAwOyBcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCByID0gdGhpcy5nZXRSYW5nZShkYXRhc2V0cywgcmVmTGluZXMsIHVzZXJNaW4sIHVzZXJNYXgpO1xyXG4gICAgICAgICAgICBtYXggPSByLm1heDsgbWluID0gci5taW47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmRyYXdBeGVzKHN2ZywgbGFiZWxzLCBtYXgsIG1pbiwgd2lkdGgsIGhlaWdodCwgcGFkZGluZywgdW5kZWZpbmVkLCBpc0hvcml6b250YWwpO1xyXG4gICAgICAgIGlmICghaXNIb3Jpem9udGFsKSB0aGlzLmRyYXdSZWZMaW5lcyhzdmcsIHJlZkxpbmVzLCBtYXgsIG1pbiwgd2lkdGgsIGhlaWdodCwgcGFkZGluZyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGl0ZW1Db3VudCA9IGxhYmVscy5sZW5ndGggfHwgMTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoaXNIb3Jpem9udGFsKSB7XHJcbiAgICAgICAgICAgIC8vIFx1NkMzNFx1NUU3M1x1Njc2MVx1NUY2Mlx1NTZGRVx1OTAzQlx1OEY5MVx1NEZERFx1NjMwMVx1NEUwRFx1NTNEOCAoXHU3NkY0XHU2NUI5XHU1NkZFXHU5MDFBXHU1RTM4XHU2NjJGXHU1NzgyXHU3NkY0XHU3Njg0KVxyXG4gICAgICAgICAgICBjb25zdCBncm91cEhlaWdodCA9IGNoYXJ0SCAvIGl0ZW1Db3VudDtcclxuICAgICAgICAgICAgY29uc3QgYmFySGVpZ2h0ID0gaXNTdGFja2VkID8gZ3JvdXBIZWlnaHQgKiAwLjYgOiAoZ3JvdXBIZWlnaHQgKiAwLjgpIC8gZGF0YXNldHMubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgZGF0YXNldHMuZm9yRWFjaCgoZGF0YXNldCwgc2V0SW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGRhdGFzZXQuZGF0YS5mb3JFYWNoKCh2YWwsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsID09PSBudWxsKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxlZnRWYWwgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1N0YWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrPTA7IGs8c2V0SW5kZXg7IGsrKykgbGVmdFZhbCArPSAoZGF0YXNldHNba10uZGF0YVtpXSB8fCAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmlnaHRWYWwgPSBsZWZ0VmFsICsgdmFsO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyaWdodFZhbCA8IG1pbiB8fCBsZWZ0VmFsID4gbWF4KSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpc2libGVMZWZ0ID0gTWF0aC5tYXgobWluLCBNYXRoLm1pbihtYXgsIGxlZnRWYWwpKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2aXNpYmxlUmlnaHQgPSBNYXRoLm1heChtaW4sIE1hdGgubWluKG1heCwgcmlnaHRWYWwpKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3VG90YWwgPSAoKHZpc2libGVSaWdodCAtIG1pbikgLyAobWF4IC0gbWluIHx8IDEpKSAqIGNoYXJ0VztcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3U3RhcnQgPSAoKHZpc2libGVMZWZ0IC0gbWluKSAvIChtYXggLSBtaW4gfHwgMSkpICogY2hhcnRXO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBiYXJXID0gTWF0aC5hYnMod1RvdGFsIC0gd1N0YXJ0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCAhPT0gMCAmJiBiYXJXIDwgNSkgYmFyVyA9IDU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHlHcm91cCA9IHBhZGRpbmcgKyBpICogZ3JvdXBIZWlnaHQgKyAoZ3JvdXBIZWlnaHQgKiAwLjEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBpc1N0YWNrZWQgPyB5R3JvdXAgKyAoZ3JvdXBIZWlnaHQgKiAwLjIpIDogeUdyb3VwICsgc2V0SW5kZXggKiBiYXJIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeCA9IHBhZGRpbmcgKyB3U3RhcnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy5ucywgJ3JlY3QnKTtcclxuICAgICAgICAgICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZSgneCcsIHgudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3knLCB5LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKCd3aWR0aCcsIE1hdGgubWF4KDAsIGJhclcpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBiYXJIZWlnaHQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2RsLWNoYXJ0LWJhcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlY3Quc3R5bGUuZmlsbCA9IGRhdGFzZXQuY29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbHRpcC12YWx1ZScsIHZhbC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZSgnZGF0YS10b29sdGlwLWxhYmVsJywgYCR7bGFiZWxzW2ldfSAtICR7ZGF0YXNldC5sYWJlbH1gKTtcclxuICAgICAgICAgICAgICAgICAgICBzdmcuYXBwZW5kQ2hpbGQocmVjdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG93TGFiZWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsWCA9IHggKyBiYXJXO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFiZWxYID49IHBhZGRpbmcgJiYgbGFiZWxYIDw9IHdpZHRoIC0gcGFkZGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3VGV4dChzdmcsIGxhYmVsWCArIDUsIHkgKyBiYXJIZWlnaHQvMiArIDQsIHZhbC50b1N0cmluZygpLCAnc3RhcnQnLCAnZGwtY2hhcnQtdGV4dCcsICd2YXIoLS10ZXh0LW5vcm1hbCknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBncm91cFdpZHRoID0gY2hhcnRXIC8gaXRlbUNvdW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gW1x1NjgzOFx1NUZDM1x1NEZFRVx1NjUzOV0gXHU3NkY0XHU2NUI5XHU1NkZFXHU2QTIxXHU1RjBGXHU0RTBCXHVGRjBDXHU1M0JCXHU5NjY0XHU5NUY0XHU5Njk5XHJcbiAgICAgICAgICAgIGxldCBiYXJXaWR0aDogbnVtYmVyO1xyXG4gICAgICAgICAgICBsZXQgZ3JvdXBQYWRkaW5nID0gMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChpc0hpc3RvZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgYmFyV2lkdGggPSBncm91cFdpZHRoOyAvLyBcdTUzNjBcdTZFRTFcdTY1NzRcdTRFMkFcdTUyMDZcdTdFQzRcdTVCQkRcdTVFQTZcclxuICAgICAgICAgICAgICAgIGdyb3VwUGFkZGluZyA9IDA7ICAgICAgLy8gXHU2NUUwXHU1MTg1XHU4RkI5XHU4REREXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTY2NkVcdTkwMUFcdTY3RjFcdTcyQjZcdTU2RkVcdTRGRERcdTYzMDFcdTUzOUZcdTY3MDlcdTk1RjRcdTk2OTlcclxuICAgICAgICAgICAgICAgIGJhcldpZHRoID0gaXNTdGFja2VkID8gZ3JvdXBXaWR0aCAqIDAuNiA6IChncm91cFdpZHRoICogMC44KSAvIGRhdGFzZXRzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGdyb3VwUGFkZGluZyA9IGdyb3VwV2lkdGggKiAwLjE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGRhdGFzZXRzLmZvckVhY2goKGRhdGFzZXQsIHNldEluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkYXRhc2V0LmRhdGEuZm9yRWFjaCgodmFsLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBib3R0b21WYWwgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1N0YWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrPTA7IGs8c2V0SW5kZXg7IGsrKykgYm90dG9tVmFsICs9IChkYXRhc2V0c1trXS5kYXRhW2ldIHx8IDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b3BWYWwgPSBib3R0b21WYWwgKyB2YWw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0b3BWYWwgPCBtaW4gfHwgYm90dG9tVmFsID4gbWF4KSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpc2libGVCb3R0b20gPSBNYXRoLm1heChtaW4sIE1hdGgubWluKG1heCwgYm90dG9tVmFsKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmlzaWJsZVRvcCA9IE1hdGgubWF4KG1pbiwgTWF0aC5taW4obWF4LCB0b3BWYWwpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFyVG9wSCA9ICgodmlzaWJsZVRvcCAtIG1pbikgLyAobWF4IC0gbWluIHx8IDEpKSAqIGNoYXJ0SDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBiYXJCb3R0b21IID0gKCh2aXNpYmxlQm90dG9tIC0gbWluKSAvIChtYXggLSBtaW4gfHwgMSkpICogY2hhcnRIO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBiYXJIID0gYmFyVG9wSCAtIGJhckJvdHRvbUg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWwgIT09IDAgJiYgYmFySCA8IDUpIGJhckggPSA1O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBcdThCQTFcdTdCOTcgWCBcdTU3NTBcdTY4MDdcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cFggPSBwYWRkaW5nICsgaSAqIGdyb3VwV2lkdGggKyBncm91cFBhZGRpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU3NkY0XHU2NUI5XHU1NkZFXHU1M0VBXHU2NzA5XHU0RTAwXHU0RTJBXHU3Q0ZCXHU1MjE3XHVGRjBDc2V0SW5kZXg9MFx1RkYwQ1x1NzZGNFx1NjNBNVx1NEY3Rlx1NzUyOCBncm91cFhcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB4ID0gKGlzU3RhY2tlZCB8fCBpc0hpc3RvZ3JhbSkgPyBncm91cFggOiBncm91cFggKyBzZXRJbmRleCAqIGJhcldpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSAoaGVpZ2h0IC0gcGFkZGluZyAtIGJhckJvdHRvbUgpIC0gYmFySDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5zLCAncmVjdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKCd4JywgeC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZSgneScsIHkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgYmFyV2lkdGgudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIE1hdGgubWF4KDAsIGJhckgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKCdjbGFzcycsICdkbC1jaGFydC1iYXInKTtcclxuICAgICAgICAgICAgICAgICAgICByZWN0LnN0eWxlLmZpbGwgPSBkYXRhc2V0LmNvbG9yO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFtcdTY1QjBcdTU4OUVdIFx1NzZGNFx1NjVCOVx1NTZGRVx1NjNDRlx1OEZCOVx1RkYxQVx1NzUyOFx1ODBDQ1x1NjY2Rlx1ODI3Mlx1NjNDRlx1OEZCOVx1RkYwQ1x1NTMzQVx1NTIwNlx1NzZGOFx1OTBCQlx1NjdGMVx1NUI1MFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0hpc3RvZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWN0LnN0eWxlLnN0cm9rZSA9ICd2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdC5zdHlsZS5zdHJva2VXaWR0aCA9ICcxJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKCdkYXRhLXRvb2x0aXAtdmFsdWUnLCB2YWwudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbHRpcC1sYWJlbCcsIGAke2xhYmVsc1tpXX0gLSAke2RhdGFzZXQubGFiZWx9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKHJlY3QpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvd0xhYmVscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdUZXh0KHN2ZywgeCArIGJhcldpZHRoIC8gMiwgeSAtIDUsIHZhbC50b1N0cmluZygpLCAnbWlkZGxlJywgJ2RsLWNoYXJ0LXRleHQnLCAndmFyKC0tdGV4dC1ub3JtYWwpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHN2ZztcclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBCYXNlQ2hhcnRSZW5kZXJlciwgUmVuZGVyRGF0YXNldCB9IGZyb20gJy4vQmFzZUNoYXJ0UmVuZGVyZXInO1xyXG5pbXBvcnQgeyBSZWZMaW5lIH0gZnJvbSAnLi4vLi4vY29yZS9jcl9kZWZfdHlwZV9tYWluJztcclxuXHJcbmV4cG9ydCBjbGFzcyBMaW5lQ2hhcnRSZW5kZXJlciBleHRlbmRzIEJhc2VDaGFydFJlbmRlcmVyIHtcclxuICAgIFxyXG4gICAgLy8gU29mdCBNYWNhcm9vbiBQYWxldHRlIChMb3cgLT4gSGlnaClcclxuICAgIHByaXZhdGUgem9uZUNvbG9ycyA9IFtcclxuICAgICAgICAncmdiYSgxNTUsIDI0NiwgMjU1LCAwLjQpJywgLy8gQ3lhblxyXG4gICAgICAgICdyZ2JhKDIwMiwgMjU1LCAxOTEsIDAuNCknLCAvLyBHcmVlblxyXG4gICAgICAgICdyZ2JhKDI1MywgMjU1LCAxODIsIDAuNCknLCAvLyBZZWxsb3dcclxuICAgICAgICAncmdiYSgyNTUsIDIxNCwgMTY1LCAwLjQpJywgLy8gT3JhbmdlXHJcbiAgICAgICAgJ3JnYmEoMjU1LCAxNzMsIDE3MywgMC40KScsIC8vIFJlZFxyXG4gICAgICAgICdyZ2JhKDE4OSwgMTc4LCAyNTUsIDAuNCknLCAvLyBQdXJwbGVcclxuICAgICAgICAncmdiYSgyNTUsIDE5OCwgMjU1LCAwLjQpJyAgLy8gUGlua1xyXG4gICAgXTtcclxuXHJcbiAgICBwcml2YXRlIGdldFkodmFsOiBudW1iZXIsIG1heDogbnVtYmVyLCBtaW46IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHBhZGRpbmc6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3QgcmFuZ2UgPSBtYXggLSBtaW4gfHwgMTtcclxuICAgICAgICByZXR1cm4gaGVpZ2h0IC0gcGFkZGluZyAtICgodmFsIC0gbWluKSAvIHJhbmdlKSAqIChoZWlnaHQgLSBwYWRkaW5nICogMik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKGRhdGFzZXRzOiBSZW5kZXJEYXRhc2V0W10sIGxhYmVsczogc3RyaW5nW10sIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCByZWZMaW5lczogUmVmTGluZVtdLCBzaG93TGFiZWxzID0gZmFsc2UsIHNtb290aCA9IGZhbHNlLCB1c2VyTWluPzogbnVtYmVyLCB1c2VyTWF4PzogbnVtYmVyLCBlbmFibGVab25lcyA9IGZhbHNlKTogU1ZHU1ZHRWxlbWVudCB7XHJcbiAgICAgICAgY29uc3Qgc3ZnID0gdGhpcy5jcmVhdGVTdmcod2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgY29uc3QgcGFkZGluZyA9IDMwO1xyXG4gICAgICAgIGNvbnN0IGNoYXJ0VyA9IHdpZHRoIC0gcGFkZGluZyAqIDI7XHJcbiAgICAgICAgY29uc3QgeyBtYXgsIG1pbiB9ID0gdGhpcy5nZXRSYW5nZShkYXRhc2V0cywgcmVmTGluZXMsIHVzZXJNaW4sIHVzZXJNYXgpO1xyXG5cclxuICAgICAgICAvLyAxLiBEcmF3IEF4ZXMgKEJhY2tncm91bmQpXHJcbiAgICAgICAgdGhpcy5kcmF3QXhlcyhzdmcsIGxhYmVscywgbWF4LCBtaW4sIHdpZHRoLCBoZWlnaHQsIHBhZGRpbmcpO1xyXG5cclxuICAgICAgICAvLyAyLiBBdXRvbWF0aWMgWm9uZSBDb2xvcmluZyAoQ2xpcHBlZCBBcmVhcylcclxuICAgICAgICBpZiAoZW5hYmxlWm9uZXMgJiYgcmVmTGluZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBTb3J0IGJvdW5kYXJpZXM6IE1pbiAtPiBSZWYxIC0+IFJlZjIgLT4gTWF4XHJcbiAgICAgICAgICAgIGNvbnN0IGJvdW5kcyA9IFttaW4sIC4uLnJlZkxpbmVzLm1hcChyID0+IHIudmFsdWUpLCBtYXhdLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcclxuICAgICAgICAgICAgY29uc3QgdW5pcXVlQm91bmRzID0gWy4uLm5ldyBTZXQoYm91bmRzKV07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkZWZzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMubnMsICdkZWZzJyk7XHJcbiAgICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChkZWZzKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdW5pcXVlQm91bmRzLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYkJvdHRvbSA9IHVuaXF1ZUJvdW5kc1tpXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJUb3AgPSB1bmlxdWVCb3VuZHNbaSsxXTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGJUb3AgPD0gYkJvdHRvbSkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRGVmaW5lIHRoZSBab25lIFN0cmlwIGFzIGEgQ2xpcFBhdGhcclxuICAgICAgICAgICAgICAgIGNvbnN0IHlCb3R0b21QeCA9IHRoaXMuZ2V0WShiQm90dG9tLCBtYXgsIG1pbiwgaGVpZ2h0LCBwYWRkaW5nKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHlUb3BQeCA9IHRoaXMuZ2V0WShiVG9wLCBtYXgsIG1pbiwgaGVpZ2h0LCBwYWRkaW5nKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2xpcElkID0gYHpvbmUtc3RyaXAtJHtpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLDUpfWA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjbGlwUGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5zLCAnY2xpcFBhdGgnKTtcclxuICAgICAgICAgICAgICAgIGNsaXBQYXRoLnNldEF0dHJpYnV0ZSgnaWQnLCBjbGlwSWQpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMubnMsICdyZWN0Jyk7XHJcbiAgICAgICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZSgneCcsIHBhZGRpbmcudG9TdHJpbmcoKSk7IC8vIFJlc3RyaWN0IHRvIGNoYXJ0IGFyZWFcclxuICAgICAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKCd3aWR0aCcsIGNoYXJ0Vy50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKCd5JywgeVRvcFB4LnRvU3RyaW5nKCkpOyBcclxuICAgICAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBNYXRoLm1heCgwLCB5Qm90dG9tUHggLSB5VG9wUHgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjbGlwUGF0aC5hcHBlbmRDaGlsZChyZWN0KTtcclxuICAgICAgICAgICAgICAgIGRlZnMuYXBwZW5kQ2hpbGQoY2xpcFBhdGgpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIERyYXcgdGhlIEFyZWEgUGF0aCBmb3IgZWFjaCBkYXRhc2V0LCBjbGlwcGVkIGJ5IHRoaXMgc3RyaXBcclxuICAgICAgICAgICAgICAgIGRhdGFzZXRzLmZvckVhY2goZHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgY2xvc2VkIHBhdGggZnJvbSBsaW5lIGRvd24gdG8gdGhlIGNoYXJ0IGJvdHRvbSAobWluKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHVzZSAnbWluJyBhcyB0aGUgYmFzZSBmb3IgdGhlIGFyZWEsIHNvIGl0IGZpbGxzIGV2ZXJ5dGhpbmcgdXAgdG8gdGhlIGxpbmVcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB5QmFzZSA9IHRoaXMuZ2V0WShtaW4sIG1heCwgbWluLCBoZWlnaHQsIHBhZGRpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGQgPSB0aGlzLmdlbmVyYXRlQXJlYVBhdGgoZHMsIGxhYmVscy5sZW5ndGgsIGNoYXJ0VywgaGVpZ2h0LCBwYWRkaW5nLCBtYXgsIG1pbiwgc21vb3RoLCB5QmFzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5zLCAncGF0aCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoLnNldEF0dHJpYnV0ZSgnZCcsIGQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoLnN0eWxlLmZpbGwgPSB0aGlzLnpvbmVDb2xvcnNbaSAlIHRoaXMuem9uZUNvbG9ycy5sZW5ndGhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoLnN0eWxlLnN0cm9rZSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG1hZ2ljOiBDbGlwIHRoZSBmdWxsIGFyZWEgcGF0aCB0byBqdXN0IHRoaXMgaG9yaXpvbnRhbCBzdHJpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoLnNldEF0dHJpYnV0ZSgnY2xpcC1wYXRoJywgYHVybCgjJHtjbGlwSWR9KWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdmcuYXBwZW5kQ2hpbGQocGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIDMuIERyYXcgUmVmIExpbmVzXHJcbiAgICAgICAgcmVmTGluZXMuZm9yRWFjaChsaW5lID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMuZ2V0WShsaW5lLnZhbHVlLCBtYXgsIG1pbiwgaGVpZ2h0LCBwYWRkaW5nKTtcclxuICAgICAgICAgICAgaWYgKHkgPiBoZWlnaHQgLSBwYWRkaW5nIHx8IHkgPCBwYWRkaW5nKSByZXR1cm47IC8vIENsaXAgcmVmIGxpbmVzIHRvb1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy5ucywgJ2xpbmUnKTtcclxuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCd4MScsIHBhZGRpbmcudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgneTEnLCB5LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3gyJywgKHdpZHRoIC0gcGFkZGluZykudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgneTInLCB5LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICBlbC5zdHlsZS5zdHJva2UgPSBsaW5lLmNvbG9yIHx8ICcjZmYwMDAwJztcclxuICAgICAgICAgICAgZWwuc3R5bGUuc3Ryb2tlV2lkdGggPSAnMS41JztcclxuICAgICAgICAgICAgZWwuc3R5bGUuc3Ryb2tlRGFzaGFycmF5ID0gJzQgMic7XHJcbiAgICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChlbCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobGluZS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3VGV4dChzdmcsIHdpZHRoIC0gcGFkZGluZyArIDUsIHkgKyAzLCBsaW5lLmxhYmVsLCAnc3RhcnQnLCAnZGwtYXhpcy10ZXh0JywgbGluZS5jb2xvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gNC4gRHJhdyBMaW5lcyBhbmQgUG9pbnRzIChGb3JlZ3JvdW5kKVxyXG4gICAgICAgIGRhdGFzZXRzLmZvckVhY2goZGF0YXNldCA9PiB7XHJcbiAgICAgICAgICAgIGxldCBkc01heCA9IG1heCwgZHNNaW4gPSBtaW47XHJcbiAgICAgICAgICAgIGlmIChkYXRhc2V0LmVuYWJsZVBlcmNlbnRhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkID0gZGF0YXNldC5kYXRhLmZpbHRlcih2ID0+IHYgIT09IG51bGwpIGFzIG51bWJlcltdO1xyXG4gICAgICAgICAgICAgICAgZHNNYXggPSB2YWxpZC5sZW5ndGggPyBNYXRoLm1heCguLi52YWxpZCkgOiAxMDA7XHJcbiAgICAgICAgICAgICAgICBkc01pbiA9IHZhbGlkLmxlbmd0aCA/IE1hdGgubWluKC4uLnZhbGlkKSA6IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoZHNNYXggPT09IGRzTWluKSBkc01heCArPSAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwb2ludHM6IHt4OiBudW1iZXIsIHk6IG51bWJlciwgdmFsOiBudW1iZXIsIGxhYmVsOiBzdHJpbmd9W10gPSBbXTtcclxuICAgICAgICAgICAgZGF0YXNldC5kYXRhLmZvckVhY2goKHZhbCwgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgbGV0IG5vcm1WYWwgPSB2YWw7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudE1heCA9IG1heCwgY3VycmVudE1pbiA9IG1pbjtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhc2V0LmVuYWJsZVBlcmNlbnRhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByYW5nZSA9IGRzTWF4IC0gZHNNaW4gfHwgMTtcclxuICAgICAgICAgICAgICAgICAgICBub3JtVmFsID0gKCh2YWwgLSBkc01pbikgLyByYW5nZSkgKiAxMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudE1heCA9IDEwMDsgY3VycmVudE1pbiA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXYgPSBsYWJlbHMubGVuZ3RoID4gMSA/IGxhYmVscy5sZW5ndGggLSAxIDogMTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHggPSBwYWRkaW5nICsgKGkgLyBkaXYpICogY2hhcnRXO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMuZ2V0WShub3JtVmFsLCBjdXJyZW50TWF4LCBjdXJyZW50TWluLCBoZWlnaHQsIHBhZGRpbmcpO1xyXG4gICAgICAgICAgICAgICAgcG9pbnRzLnB1c2goeyB4LCB5LCB2YWwsIGxhYmVsOiBsYWJlbHNbaV0gfHwgJycgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBvaW50cy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNtb290aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGQgPSBgTSAke3BvaW50c1swXS54fSAke3BvaW50c1swXS55fWA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHAwID0gcG9pbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwMSA9IHBvaW50c1tpICsgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNwMXggPSBwMC54ICsgKHAxLnggLSBwMC54KSAqIDAuNTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3AyeCA9IHAxLnggLSAocDEueCAtIHAwLngpICogMC41O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkICs9IGAgQyAke2NwMXh9ICR7cDAueX0sICR7Y3AyeH0gJHtwMS55fSwgJHtwMS54fSAke3AxLnl9YDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGQgPSBwb2ludHMubWFwKChwLCBpKSA9PiBgJHtpID09PSAwID8gJ00nIDogJ0wnfSAke3AueH0gJHtwLnl9YCkuam9pbignICcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5zLCAncGF0aCcpO1xyXG4gICAgICAgICAgICAgICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ2QnLCBkKTtcclxuICAgICAgICAgICAgICAgIHBhdGguc2V0QXR0cmlidXRlKCdjbGFzcycsICdkbC1jaGFydC1saW5lJyk7XHJcbiAgICAgICAgICAgICAgICBwYXRoLnN0eWxlLmZpbGwgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICBwYXRoLnN0eWxlLnN0cm9rZSA9IGRhdGFzZXQuY29sb3I7XHJcbiAgICAgICAgICAgICAgICBwYXRoLnN0eWxlLnN0cm9rZVdpZHRoID0gJzInO1xyXG4gICAgICAgICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKHBhdGgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwb2ludHMuZm9yRWFjaChwID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNpcmNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5zLCAnY2lyY2xlJyk7XHJcbiAgICAgICAgICAgICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdjeCcsIHAueC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ2N5JywgcC55LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgncicsICczJyk7XHJcbiAgICAgICAgICAgICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdjbGFzcycsICdkbC1jaGFydC1wb2ludCcpO1xyXG4gICAgICAgICAgICAgICAgY2lyY2xlLnN0eWxlLmZpbGwgPSAndmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KSc7XHJcbiAgICAgICAgICAgICAgICBjaXJjbGUuc3R5bGUuc3Ryb2tlID0gZGF0YXNldC5jb2xvcjtcclxuICAgICAgICAgICAgICAgIGNpcmNsZS5zdHlsZS5zdHJva2VXaWR0aCA9ICcyJztcclxuICAgICAgICAgICAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbHRpcC12YWx1ZScsIHAudmFsLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnZGF0YS10b29sdGlwLWxhYmVsJywgYCR7cC5sYWJlbH0gLSAke2RhdGFzZXQubGFiZWx9YCk7XHJcbiAgICAgICAgICAgICAgICBzdmcuYXBwZW5kQ2hpbGQoY2lyY2xlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc2hvd0xhYmVscykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd1RleHQoc3ZnLCBwLngsIHAueSAtIDgsIHAudmFsLnRvU3RyaW5nKCksICdtaWRkbGUnLCAnZGwtY2hhcnQtdGV4dCcsICd2YXIoLS10ZXh0LW5vcm1hbCknKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBzdmc7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUFyZWFQYXRoKGRhdGFzZXQ6IFJlbmRlckRhdGFzZXQsIGNvdW50OiBudW1iZXIsIHc6IG51bWJlciwgaDogbnVtYmVyLCBwYWQ6IG51bWJlciwgbWF4OiBudW1iZXIsIG1pbjogbnVtYmVyLCBzbW9vdGg6IGJvb2xlYW4sIHlCYXNlOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHBvaW50czoge3g6IG51bWJlciwgeTogbnVtYmVyfVtdID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGRzTWF4ID0gbWF4LCBkc01pbiA9IG1pbjtcclxuICAgICAgICBpZiAoZGF0YXNldC5lbmFibGVQZXJjZW50YWdlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkID0gZGF0YXNldC5kYXRhLmZpbHRlcih2ID0+IHYgIT09IG51bGwpIGFzIG51bWJlcltdO1xyXG4gICAgICAgICAgICBkc01heCA9IHZhbGlkLmxlbmd0aCA/IE1hdGgubWF4KC4uLnZhbGlkKSA6IDEwMDtcclxuICAgICAgICAgICAgZHNNaW4gPSB2YWxpZC5sZW5ndGggPyBNYXRoLm1pbiguLi52YWxpZCkgOiAwO1xyXG4gICAgICAgICAgICBpZiAoZHNNYXggPT09IGRzTWluKSBkc01heCArPSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGF0YXNldC5kYXRhLmZvckVhY2goKHZhbCwgaSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodmFsID09PSBudWxsKSByZXR1cm47XHJcbiAgICAgICAgICAgIGxldCBub3JtVmFsID0gdmFsO1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudE1heCA9IG1heCwgY3VycmVudE1pbiA9IG1pbjtcclxuICAgICAgICAgICAgaWYgKGRhdGFzZXQuZW5hYmxlUGVyY2VudGFnZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSBkc01heCAtIGRzTWluIHx8IDE7XHJcbiAgICAgICAgICAgICAgICBub3JtVmFsID0gKCh2YWwgLSBkc01pbikgLyByYW5nZSkgKiAxMDA7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50TWF4ID0gMTAwOyBjdXJyZW50TWluID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBkaXYgPSBjb3VudCA+IDEgPyBjb3VudCAtIDEgOiAxO1xyXG4gICAgICAgICAgICBjb25zdCB4ID0gcGFkICsgKGkgLyBkaXYpICogdztcclxuICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMuZ2V0WShub3JtVmFsLCBjdXJyZW50TWF4LCBjdXJyZW50TWluLCBoLCBwYWQpO1xyXG4gICAgICAgICAgICBwb2ludHMucHVzaCh7IHgsIHkgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChwb2ludHMubGVuZ3RoIDwgMikgcmV0dXJuICcnO1xyXG5cclxuICAgICAgICAvLyBTdGFydCBwYXRoIGF0IGJvdHRvbS1sZWZ0IChhdCBiYXNlIFkpXHJcbiAgICAgICAgbGV0IGQgPSBgTSAke3BvaW50c1swXS54fSAke3lCYXNlfSBMICR7cG9pbnRzWzBdLnh9ICR7cG9pbnRzWzBdLnl9YDtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoc21vb3RoKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcDAgPSBwb2ludHNbaV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwMSA9IHBvaW50c1tpICsgMV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjcDF4ID0gcDAueCArIChwMS54IC0gcDAueCkgKiAwLjU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjcDJ4ID0gcDEueCAtIChwMS54IC0gcDAueCkgKiAwLjU7XHJcbiAgICAgICAgICAgICAgICBkICs9IGAgQyAke2NwMXh9ICR7cDAueX0sICR7Y3AyeH0gJHtwMS55fSwgJHtwMS54fSAke3AxLnl9YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSBkICs9IGAgTCAke3BvaW50c1tpXS54fSAke3BvaW50c1tpXS55fWA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDbG9zZSBwYXRoIHRvIGJvdHRvbS1yaWdodCB0aGVuIGJhY2sgdG8gYm90dG9tLWxlZnRcclxuICAgICAgICBkICs9IGAgTCAke3BvaW50c1twb2ludHMubGVuZ3RoLTFdLnh9ICR7eUJhc2V9IFpgO1xyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IEJhc2VDaGFydFJlbmRlcmVyLCBSZW5kZXJEYXRhc2V0IH0gZnJvbSAnLi9CYXNlQ2hhcnRSZW5kZXJlcic7XHJcbmltcG9ydCB7IFJlZkxpbmUgfSBmcm9tICcuLi8uLi9jb3JlL2NyX2RlZl90eXBlX21haW4nO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNjYXR0ZXJDaGFydFJlbmRlcmVyIGV4dGVuZHMgQmFzZUNoYXJ0UmVuZGVyZXIge1xyXG4gICAgXHJcbiAgICBwcml2YXRlIGdldFkodmFsOiBudW1iZXIsIG1heDogbnVtYmVyLCBtaW46IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHBhZGRpbmc6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3QgcmFuZ2UgPSBtYXggLSBtaW4gfHwgMTtcclxuICAgICAgICByZXR1cm4gaGVpZ2h0IC0gcGFkZGluZyAtICgodmFsIC0gbWluKSAvIHJhbmdlKSAqIChoZWlnaHQgLSBwYWRkaW5nICogMik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKGRhdGFzZXRzOiBSZW5kZXJEYXRhc2V0W10sIGxhYmVsczogc3RyaW5nW10sIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCByZWZMaW5lczogUmVmTGluZVtdLCBzaG93TGFiZWxzID0gZmFsc2UsIHVzZXJNaW4/OiBudW1iZXIsIHVzZXJNYXg/OiBudW1iZXIpOiBTVkdTVkdFbGVtZW50IHtcclxuICAgICAgICBjb25zdCBzdmcgPSB0aGlzLmNyZWF0ZVN2Zyh3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICBjb25zdCBwYWRkaW5nID0gMzA7XHJcbiAgICAgICAgY29uc3QgY2hhcnRXID0gd2lkdGggLSBwYWRkaW5nICogMjtcclxuICAgICAgICBjb25zdCB7IG1heCwgbWluIH0gPSB0aGlzLmdldFJhbmdlKGRhdGFzZXRzLCByZWZMaW5lcywgdXNlck1pbiwgdXNlck1heCk7XHJcblxyXG4gICAgICAgIHRoaXMuZHJhd0F4ZXMoc3ZnLCBsYWJlbHMsIG1heCwgbWluLCB3aWR0aCwgaGVpZ2h0LCBwYWRkaW5nKTtcclxuICAgICAgICB0aGlzLmRyYXdSZWZMaW5lcyhzdmcsIHJlZkxpbmVzLCBtYXgsIG1pbiwgd2lkdGgsIGhlaWdodCwgcGFkZGluZyk7XHJcblxyXG4gICAgICAgIGRhdGFzZXRzLmZvckVhY2goZGF0YXNldCA9PiB7XHJcbiAgICAgICAgICAgIGRhdGFzZXQuZGF0YS5mb3JFYWNoKCh2YWwsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWwgPT09IG51bGwpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gbGFiZWxzLmxlbmd0aCA+IDEgPyBsYWJlbHMubGVuZ3RoIC0gMSA6IDE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB4ID0gcGFkZGluZyArIChpIC8gZGl2KSAqIGNoYXJ0VztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHkgPSB0aGlzLmdldFkodmFsLCBtYXgsIG1pbiwgaGVpZ2h0LCBwYWRkaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy5ucywgJ2NpcmNsZScpO1xyXG4gICAgICAgICAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnY3gnLCB4LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnY3knLCB5LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgncicsICc0Jyk7XHJcbiAgICAgICAgICAgICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdjbGFzcycsICdkbC1jaGFydC1wb2ludCcpO1xyXG4gICAgICAgICAgICAgICAgY2lyY2xlLnN0eWxlLmZpbGwgPSBkYXRhc2V0LmNvbG9yO1xyXG4gICAgICAgICAgICAgICAgY2lyY2xlLnN0eWxlLm9wYWNpdHkgPSAnMC43JztcclxuICAgICAgICAgICAgICAgIGNpcmNsZS5zdHlsZS5zdHJva2UgPSBkYXRhc2V0LmNvbG9yO1xyXG4gICAgICAgICAgICAgICAgY2lyY2xlLnN0eWxlLnN0cm9rZVdpZHRoID0gJzAnO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdkYXRhLXRvb2x0aXAtdmFsdWUnLCB2YWwudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdkYXRhLXRvb2x0aXAtbGFiZWwnLCBgJHtsYWJlbHNbaV0gfHwgJyd9IC0gJHtkYXRhc2V0LmxhYmVsfWApO1xyXG4gICAgICAgICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGNpcmNsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNob3dMYWJlbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdUZXh0KHN2ZywgeCwgeSAtIDgsIHZhbC50b1N0cmluZygpLCAnbWlkZGxlJywgJ2RsLWNoYXJ0LXRleHQnLCAndmFyKC0tdGV4dC1ub3JtYWwpJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBzdmc7XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IHVpL3JlbmRlcmVycy9SYWRhckNoYXJ0UmVuZGVyZXIudHMgPT09XHJcbmltcG9ydCB7IEJhc2VDaGFydFJlbmRlcmVyLCBSZW5kZXJEYXRhc2V0IH0gZnJvbSAnLi9CYXNlQ2hhcnRSZW5kZXJlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgUmFkYXJDaGFydFJlbmRlcmVyIGV4dGVuZHMgQmFzZUNoYXJ0UmVuZGVyZXIge1xyXG4gICAgcmVuZGVyKGRhdGFzZXRzOiBSZW5kZXJEYXRhc2V0W10sIGxhYmVsczogc3RyaW5nW10sIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogU1ZHU1ZHRWxlbWVudCB7XHJcbiAgICAgICAgY29uc3Qgc3ZnID0gdGhpcy5jcmVhdGVTdmcod2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgY29uc3QgY3ggPSB3aWR0aCAvIDI7XHJcbiAgICAgICAgY29uc3QgY3kgPSBoZWlnaHQgLyAyO1xyXG4gICAgICAgIGNvbnN0IHIgPSBNYXRoLm1pbihjeCwgY3kpIC0gNDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gW1x1NEZFRVx1NTkwRF0gXHU5NjMyXHU2QjYyXHU5NjY0XHU5NkY2XHVGRjBDXHU4MUYzXHU1QzExXHU4OUM2XHU0RTNBIDEgXHU0RTJBXHU3RUY0XHU1RUE2XHJcbiAgICAgICAgY29uc3QgY291bnQgPSBNYXRoLm1heCgxLCBsYWJlbHMubGVuZ3RoKTtcclxuICAgICAgICBjb25zdCBhbmdsZVN0ZXAgPSAoTWF0aC5QSSAqIDIpIC8gY291bnQ7XHJcblxyXG4gICAgICAgIC8vIDEuIERyYXcgV2ViIChHcmlkKVxyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTNFQVx1NjcwOSAxIFx1NEUyQVx1N0VGNFx1NUVBNlx1RkYwQ1x1NzUzQlx1NTQwQ1x1NUZDM1x1NTcwNlx1OEY3NFx1ODAwQ1x1NEUwRFx1NjYyRlx1NTkxQVx1OEZCOVx1NUY2Mlx1N0Y1MVxyXG4gICAgICAgIGlmIChjb3VudCA9PT0gMSkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBsZXZlbCA9IDE7IGxldmVsIDw9IDU7IGxldmVsKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxldmVsUiA9IHIgKiAobGV2ZWwgLyA1KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNpcmNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5zLCAnY2lyY2xlJyk7XHJcbiAgICAgICAgICAgICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdjeCcsIGN4LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnY3knLCBjeS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ3InLCBsZXZlbFIudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICBjaXJjbGUuc3R5bGUuZmlsbCA9ICdub25lJztcclxuICAgICAgICAgICAgICAgIGNpcmNsZS5zdHlsZS5zdHJva2UgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xyXG4gICAgICAgICAgICAgICAgY2lyY2xlLnN0eWxlLnN0cm9rZU9wYWNpdHkgPSAnMC4xJztcclxuICAgICAgICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChjaXJjbGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gXHU1OTFBXHU0RTJBXHU3RUY0XHU1RUE2XHU3NTNCXHU4NzE4XHU4NkRCXHU3RjUxXHJcbiAgICAgICAgICAgIGZvciAobGV0IGxldmVsID0gMTsgbGV2ZWwgPD0gNTsgbGV2ZWwrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGV2ZWxSID0gciAqIChsZXZlbCAvIDUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcG9pbnRzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5nbGUgPSBpICogYW5nbGVTdGVwIC0gTWF0aC5QSSAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeCA9IGN4ICsgbGV2ZWxSICogTWF0aC5jb3MoYW5nbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBjeSArIGxldmVsUiAqIE1hdGguc2luKGFuZ2xlKTtcclxuICAgICAgICAgICAgICAgICAgICBwb2ludHMucHVzaChgJHt4fSwke3l9YCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwb2x5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMubnMsICdwb2x5Z29uJyk7XHJcbiAgICAgICAgICAgICAgICBwb2x5LnNldEF0dHJpYnV0ZSgncG9pbnRzJywgcG9pbnRzLmpvaW4oJyAnKSk7XHJcbiAgICAgICAgICAgICAgICBwb2x5LnN0eWxlLmZpbGwgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICBwb2x5LnN0eWxlLnN0cm9rZSA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XHJcbiAgICAgICAgICAgICAgICBwb2x5LnN0eWxlLnN0cm9rZU9wYWNpdHkgPSAnMC4yJztcclxuICAgICAgICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChwb2x5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gMi4gQXhpcyBMaW5lcyAmIExhYmVsc1xyXG4gICAgICAgIGxhYmVscy5mb3JFYWNoKChsLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gaSAqIGFuZ2xlU3RlcCAtIE1hdGguUEkgLyAyO1xyXG4gICAgICAgICAgICBjb25zdCBseCA9IGN4ICsgKHIgKyAyMCkgKiBNYXRoLmNvcyhhbmdsZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGx5ID0gY3kgKyAociArIDIwKSAqIE1hdGguc2luKGFuZ2xlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGF4ID0gY3ggKyByICogTWF0aC5jb3MoYW5nbGUpO1xyXG4gICAgICAgICAgICBjb25zdCBheSA9IGN5ICsgciAqIE1hdGguc2luKGFuZ2xlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy5ucywgJ2xpbmUnKTtcclxuICAgICAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3gxJywgY3gudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGxpbmUuc2V0QXR0cmlidXRlKCd5MScsIGN5LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICBsaW5lLnNldEF0dHJpYnV0ZSgneDInLCBheC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3kyJywgYXkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGxpbmUuc3R5bGUuc3Ryb2tlID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcclxuICAgICAgICAgICAgbGluZS5zdHlsZS5zdHJva2VPcGFjaXR5ID0gJzAuMic7XHJcbiAgICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChsaW5lKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZHJhd1RleHQoc3ZnLCBseCwgbHksIGwsICdtaWRkbGUnLCAnZGwtYXhpcy10ZXh0Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIDMuIERhdGEgUG9seWdvbnMgJiBQb2ludHNcclxuICAgICAgICBkYXRhc2V0cy5mb3JFYWNoKChkcykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB2YWxpZERhdGEgPSBkcy5kYXRhLm1hcCh2ID0+IHYgfHwgMCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1heFZhbCA9IE1hdGgubWF4KC4uLnZhbGlkRGF0YSwgMSk7IFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcG9pbnRzOiB7eDpudW1iZXIsIHk6bnVtYmVyfVtdID0gW107XHJcbiAgICAgICAgICAgIHZhbGlkRGF0YS5mb3JFYWNoKCh2YWwsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vcm0gPSB2YWwgLyBtYXhWYWw7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhbmdsZSA9IGkgKiBhbmdsZVN0ZXAgLSBNYXRoLlBJIC8gMjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHggPSBjeCArIChyICogbm9ybSkgKiBNYXRoLmNvcyhhbmdsZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB5ID0gY3kgKyAociAqIG5vcm0pICogTWF0aC5zaW4oYW5nbGUpO1xyXG4gICAgICAgICAgICAgICAgcG9pbnRzLnB1c2goe3gsIHl9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBcdTdFRDhcdTUyMzZcdTUzM0FcdTU3REYgKFx1NUJCOVx1OTUxOVx1NTkwNFx1NzQwNilcclxuICAgICAgICAgICAgaWYgKGNvdW50ID4gMikge1xyXG4gICAgICAgICAgICAgICAgLy8gMysgXHU3RUY0XHU1RUE2XHVGRjFBXHU3NTNCXHU1OTFBXHU4RkI5XHU1RjYyXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwb2x5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMubnMsICdwb2x5Z29uJyk7XHJcbiAgICAgICAgICAgICAgICBwb2x5LnNldEF0dHJpYnV0ZSgncG9pbnRzJywgcG9pbnRzLm1hcChwID0+IGAke3AueH0sJHtwLnl9YCkuam9pbignICcpKTtcclxuICAgICAgICAgICAgICAgIHBvbHkuc3R5bGUuZmlsbCA9IGRzLmNvbG9yO1xyXG4gICAgICAgICAgICAgICAgcG9seS5zdHlsZS5maWxsT3BhY2l0eSA9ICcwLjMnO1xyXG4gICAgICAgICAgICAgICAgcG9seS5zdHlsZS5zdHJva2UgPSBkcy5jb2xvcjtcclxuICAgICAgICAgICAgICAgIHBvbHkuc3R5bGUuc3Ryb2tlV2lkdGggPSAnMic7XHJcbiAgICAgICAgICAgICAgICBzdmcuYXBwZW5kQ2hpbGQocG9seSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY291bnQgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIC8vIDIgXHU3RUY0XHU1RUE2XHVGRjFBXHU3NTNCXHU0RTAwXHU2NzYxXHU3RUJGXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMubnMsICdwb2x5bGluZScpO1xyXG4gICAgICAgICAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3BvaW50cycsIHBvaW50cy5tYXAocCA9PiBgJHtwLnh9LCR7cC55fWApLmpvaW4oJyAnKSk7XHJcbiAgICAgICAgICAgICAgICBsaW5lLnN0eWxlLmZpbGwgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICBsaW5lLnN0eWxlLnN0cm9rZSA9IGRzLmNvbG9yO1xyXG4gICAgICAgICAgICAgICAgbGluZS5zdHlsZS5zdHJva2VXaWR0aCA9ICcyJztcclxuICAgICAgICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChsaW5lKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIDEgXHU3RUY0XHU1RUE2XHVGRjFBXHU3NTNCXHU0RTAwXHU2NzYxXHU0RUNFXHU0RTJEXHU1RkMzXHU1MjMwXHU3MEI5XHU3Njg0XHU3RUJGXHVGRjA4XHU1QzA0XHU3RUJGXHVGRjA5XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMubnMsICdsaW5lJyk7XHJcbiAgICAgICAgICAgICAgICBsaW5lLnNldEF0dHJpYnV0ZSgneDEnLCBjeC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIGxpbmUuc2V0QXR0cmlidXRlKCd5MScsIGN5LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3gyJywgcG9pbnRzWzBdLngudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICBsaW5lLnNldEF0dHJpYnV0ZSgneTInLCBwb2ludHNbMF0ueS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIGxpbmUuc3R5bGUuc3Ryb2tlID0gZHMuY29sb3I7XHJcbiAgICAgICAgICAgICAgICBsaW5lLnN0eWxlLnN0cm9rZVdpZHRoID0gJzQnO1xyXG4gICAgICAgICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGxpbmUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBbXHU2NUIwXHU1ODlFXSBcdTdFRDhcdTUyMzZcdTY1NzBcdTYzNkVcdTcwQjlcdTU3MDZcdTcwQjkgKFx1NTg5RVx1NUYzQVx1NTNFRlx1ODlDMVx1NjAyNylcclxuICAgICAgICAgICAgcG9pbnRzLmZvckVhY2goKHAsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRvdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5zLCAnY2lyY2xlJyk7XHJcbiAgICAgICAgICAgICAgICBkb3Quc2V0QXR0cmlidXRlKCdjeCcsIHAueC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIGRvdC5zZXRBdHRyaWJ1dGUoJ2N5JywgcC55LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgZG90LnNldEF0dHJpYnV0ZSgncicsICc0Jyk7XHJcbiAgICAgICAgICAgICAgICBkb3Quc3R5bGUuZmlsbCA9IGRzLmNvbG9yO1xyXG4gICAgICAgICAgICAgICAgZG90LnN0eWxlLnN0cm9rZSA9ICd2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpJztcclxuICAgICAgICAgICAgICAgIGRvdC5zdHlsZS5zdHJva2VXaWR0aCA9ICcxJztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gVG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsID0gdmFsaWREYXRhW2ldO1xyXG4gICAgICAgICAgICAgICAgZG90LnNldEF0dHJpYnV0ZSgnZGF0YS10b29sdGlwLXZhbHVlJywgdmFsLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgZG90LnNldEF0dHJpYnV0ZSgnZGF0YS10b29sdGlwLWxhYmVsJywgbGFiZWxzW2ldKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGRvdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gc3ZnO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IEJhc2VDaGFydFJlbmRlcmVyIH0gZnJvbSAnLi9CYXNlQ2hhcnRSZW5kZXJlcic7XHJcbmltcG9ydCB7IEhlYXRtYXBEYXRhUmVzdWx0IH0gZnJvbSAnLi4vLi4vY29yZS9jcl9lbmdfZGF0YV9mbG93JztcclxuXHJcbmV4cG9ydCBjbGFzcyBIZWF0bWFwQ2hhcnRSZW5kZXJlciBleHRlbmRzIEJhc2VDaGFydFJlbmRlcmVyIHtcclxuICAgIHJlbmRlcihkYXRhOiBIZWF0bWFwRGF0YVJlc3VsdCwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiBTVkdTVkdFbGVtZW50IHtcclxuICAgICAgICBjb25zdCBzdmcgPSB0aGlzLmNyZWF0ZVN2Zyh3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICBjb25zdCBwYWRkaW5nID0gNDA7XHJcbiAgICAgICAgY29uc3QgY2hhcnRXID0gd2lkdGggLSBwYWRkaW5nICogMjtcclxuICAgICAgICBjb25zdCBjaGFydEggPSBoZWlnaHQgLSBwYWRkaW5nICogMjtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjb2xzID0gTWF0aC5tYXgoMSwgZGF0YS54TGFiZWxzLmxlbmd0aCk7XHJcbiAgICAgICAgY29uc3Qgcm93cyA9IE1hdGgubWF4KDEsIGRhdGEueUxhYmVscy5sZW5ndGgpO1xyXG4gICAgICAgIGNvbnN0IGNlbGxXID0gY2hhcnRXIC8gY29scztcclxuICAgICAgICBjb25zdCBjZWxsSCA9IGNoYXJ0SCAvIHJvd3M7XHJcblxyXG4gICAgICAgIHRoaXMuZHJhd0F4ZXMoc3ZnLCBkYXRhLnhMYWJlbHMsIHJvd3MsIDAsIHdpZHRoLCBoZWlnaHQsIHBhZGRpbmcsIGRhdGEueUxhYmVscyk7XHJcblxyXG4gICAgICAgIGRhdGEubWF0cml4LmZvckVhY2goKHJvdywgaSkgPT4ge1xyXG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCBqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsID09PSAwKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBjb25zdCByYXRpbyA9ICh2YWwgLSBkYXRhLm1pbikgLyAoZGF0YS5tYXggLSBkYXRhLm1pbiB8fCAxKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5zLCAncmVjdCcpO1xyXG4gICAgICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3gnLCAocGFkZGluZyArIGogKiBjZWxsVykudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZSgneScsIChoZWlnaHQgLSBwYWRkaW5nIC0gKGkrMSkgKiBjZWxsSCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBjZWxsVy50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBjZWxsSC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIHJlY3Quc3R5bGUuZmlsbCA9ICd2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpJztcclxuICAgICAgICAgICAgICAgIHJlY3Quc3R5bGUuZmlsbE9wYWNpdHkgPSBTdHJpbmcoMC4yICsgcmF0aW8gKiAwLjgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZSgnZGF0YS10b29sdGlwLXZhbHVlJywgdmFsLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbHRpcC1sYWJlbCcsIGAke2RhdGEueExhYmVsc1tqXX0gLyAke2RhdGEueUxhYmVsc1tpXX1gKTtcclxuICAgICAgICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChyZWN0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHN2ZztcclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogdWkvcmVuZGVyZXJzL1BpZUNoYXJ0UmVuZGVyZXIudHMgPT09XHJcbmltcG9ydCB7IEJhc2VDaGFydFJlbmRlcmVyLCBSZW5kZXJEYXRhc2V0IH0gZnJvbSAnLi9CYXNlQ2hhcnRSZW5kZXJlcic7XHJcblxyXG5pbnRlcmZhY2UgTGFiZWxQb3MgeyBcclxuICAgIHg6IG51bWJlcjsgeTogbnVtYmVyOyB0ZXh0OiBzdHJpbmc7IGFsaWduOiBzdHJpbmc7IFxyXG4gICAgaXNSaWdodDogYm9vbGVhbjsgYW5nbGU6IG51bWJlcjsgYW5jaG9yUjogbnVtYmVyOyB0YXJnZXRSOiBudW1iZXI7IHdpZHRoOiBudW1iZXI7IFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUGllQ2hhcnRSZW5kZXJlciBleHRlbmRzIEJhc2VDaGFydFJlbmRlcmVyIHtcclxuICAgIHJlbmRlcihkYXRhc2V0OiBSZW5kZXJEYXRhc2V0LCBsYWJlbHM6IHN0cmluZ1tdLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgY29sb3JzOiBzdHJpbmdbXSwgaXNEb251dCA9IGZhbHNlLCBzaG93TGFiZWxzID0gZmFsc2UpOiBTVkdTVkdFbGVtZW50IHtcclxuICAgICAgICBjb25zdCBzdmcgPSB0aGlzLmNyZWF0ZVN2Zyh3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICBjb25zdCBkYXRhID0gZGF0YXNldC5kYXRhLm1hcCh2ID0+IHYgfHwgMCk7XHJcbiAgICAgICAgY29uc3QgdG90YWwgPSBkYXRhLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApO1xyXG4gICAgICAgIGlmICh0b3RhbCA9PT0gMCkgcmV0dXJuIHN2ZztcclxuXHJcbiAgICAgICAgbGV0IGN1cnJlbnRBbmdsZSA9IDA7XHJcbiAgICAgICAgY29uc3QgY3ggPSB3aWR0aCAvIDI7XHJcbiAgICAgICAgY29uc3QgY3kgPSBoZWlnaHQgLyAyO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFtcdTRGRUVcdTU5MERdIFx1NTRDRFx1NUU5NFx1NUYwRlx1OEZCOVx1OERERFx1RkYxQVx1NTk4Mlx1Njc5Q1x1NUJCRFx1NUVBNlx1NTkyQVx1NUMwRlx1RkYwQ1x1N0YyOVx1NUMwRlx1OEZCOVx1OERERFx1RkYwQ1x1NEYxOFx1NTE0OFx1NEZERFx1OEJDMVx1NTZGRVx1ODg2OFx1NEUzQlx1NEY1M1x1NjYzRVx1NzkzQVxyXG4gICAgICAgIGxldCBtYXJnaW4gPSBzaG93TGFiZWxzID8gMTAwIDogMjA7XHJcbiAgICAgICAgaWYgKHdpZHRoIDwgMzUwKSBtYXJnaW4gPSBzaG93TGFiZWxzID8gNjAgOiAxMDsgLy8gXHU3OUZCXHU1MkE4XHU3QUVGXHU3RDI3XHU1MUQxXHU2QTIxXHU1RjBGXHJcblxyXG4gICAgICAgIGNvbnN0IHIgPSBNYXRoLm1pbihjeCwgY3kpIC0gbWFyZ2luOyBcclxuICAgICAgICBpZiAociA8PSAwKSByZXR1cm4gc3ZnOyAvLyBcdTdBN0FcdTk1RjRcdTRFMERcdThEQjNcdTRFMERcdTdFRDhcdTUyMzZcclxuXHJcbiAgICAgICAgY29uc3QgaW5uZXJSID0gaXNEb251dCA/IHIgKiAwLjYgOiAwO1xyXG4gICAgICAgIGNvbnN0IGxhYmVsSXRlbXM6IExhYmVsUG9zW10gPSBbXTtcclxuXHJcbiAgICAgICAgZGF0YS5mb3JFYWNoKCh2YWwsIGkpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc2xpY2VBbmdsZSA9ICh2YWwgLyB0b3RhbCkgKiAyICogTWF0aC5QSTtcclxuICAgICAgICAgICAgY29uc3QgbGFyZ2VBcmMgPSBzbGljZUFuZ2xlID4gTWF0aC5QSSA/IDEgOiAwO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgeDEgPSBjeCArIHIgKiBNYXRoLmNvcyhjdXJyZW50QW5nbGUpO1xyXG4gICAgICAgICAgICBjb25zdCB5MSA9IGN5ICsgciAqIE1hdGguc2luKGN1cnJlbnRBbmdsZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHgyID0gY3ggKyByICogTWF0aC5jb3MoY3VycmVudEFuZ2xlICsgc2xpY2VBbmdsZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHkyID0gY3kgKyByICogTWF0aC5zaW4oY3VycmVudEFuZ2xlICsgc2xpY2VBbmdsZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHgzID0gY3ggKyBpbm5lclIgKiBNYXRoLmNvcyhjdXJyZW50QW5nbGUgKyBzbGljZUFuZ2xlKTtcclxuICAgICAgICAgICAgY29uc3QgeTMgPSBjeSArIGlubmVyUiAqIE1hdGguc2luKGN1cnJlbnRBbmdsZSArIHNsaWNlQW5nbGUpO1xyXG4gICAgICAgICAgICBjb25zdCB4NCA9IGN4ICsgaW5uZXJSICogTWF0aC5jb3MoY3VycmVudEFuZ2xlKTtcclxuICAgICAgICAgICAgY29uc3QgeTQgPSBjeSArIGlubmVyUiAqIE1hdGguc2luKGN1cnJlbnRBbmdsZSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgZCA9IGlzRG9udXQgXHJcbiAgICAgICAgICAgICAgICA/IGBNICR7eDR9ICR7eTR9IEwgJHt4MX0gJHt5MX0gQSAke3J9ICR7cn0gMCAke2xhcmdlQXJjfSAxICR7eDJ9ICR7eTJ9IEwgJHt4M30gJHt5M30gQSAke2lubmVyUn0gJHtpbm5lclJ9IDAgJHtsYXJnZUFyY30gMCAke3g0fSAke3k0fSBaYFxyXG4gICAgICAgICAgICAgICAgOiBgTSAke2N4fSAke2N5fSBMICR7eDF9ICR7eTF9IEEgJHtyfSAke3J9IDAgJHtsYXJnZUFyY30gMSAke3gyfSAke3kyfSBaYDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy5ucywgJ3BhdGgnKTtcclxuICAgICAgICAgICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ2QnLCBkKTtcclxuICAgICAgICAgICAgcGF0aC5zdHlsZS5maWxsID0gY29sb3JzW2kgJSBjb2xvcnMubGVuZ3RoXTtcclxuICAgICAgICAgICAgcGF0aC5zdHlsZS5zdHJva2UgPSAndmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KSc7XHJcbiAgICAgICAgICAgIHBhdGguc3R5bGUuc3Ryb2tlV2lkdGggPSAnMSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCB0b29sdGlwVmFsID0gdmFsLnRvRml4ZWQoMik7XHJcbiAgICAgICAgICAgIGNvbnN0IHBlcmNlbnQgPSAodmFsIC8gdG90YWwgKiAxMDApLnRvRml4ZWQoMSk7XHJcbiAgICAgICAgICAgIHBhdGguc2V0QXR0cmlidXRlKCdkYXRhLXRvb2x0aXAtdmFsdWUnLCBgJHt0b29sdGlwVmFsfSAoJHtwZXJjZW50fSUpYCk7XHJcbiAgICAgICAgICAgIHBhdGguc2V0QXR0cmlidXRlKCdkYXRhLXRvb2x0aXAtbGFiZWwnLCBsYWJlbHNbaV0gfHwgJycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKHBhdGgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNob3dMYWJlbHMgJiYgc2xpY2VBbmdsZSA+IDAuMDgpIHsgLy8gXHU3NTY1XHU1RkFFXHU1ODlFXHU1MkEwXHU2NzAwXHU1QzBGXHU4OUQyXHU1RUE2XHU5NjA4XHU1MDNDXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaWRBbmdsZSA9IGN1cnJlbnRBbmdsZSArIHNsaWNlQW5nbGUgLyAyO1xyXG4gICAgICAgICAgICAgICAgbGV0IGxhYmVsVGV4dCA9IGxhYmVsc1tpXSB8fCAnJztcclxuICAgICAgICAgICAgICAgIC8vIFx1NzlGQlx1NTJBOFx1N0FFRlx1NjIyQVx1NjVBRFx1NjU4N1x1NUI1N1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWF4TGVuID0gd2lkdGggPCAzNTAgPyA0IDogODtcclxuICAgICAgICAgICAgICAgIGlmIChsYWJlbFRleHQubGVuZ3RoID4gbWF4TGVuKSBsYWJlbFRleHQgPSBsYWJlbFRleHQuc3Vic3RyaW5nKDAsIG1heExlbikgKyAnLi4nO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwZXJjZW50U3RyID0gKHZhbC90b3RhbCoxMDApLnRvRml4ZWQoMCkgKyAnJSc7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYCR7bGFiZWxUZXh0fSAke3BlcmNlbnRTdHJ9YDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IHRleHRXID0gMDtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgYyBvZiB0ZXh0KSB0ZXh0VyArPSAoYy5jaGFyQ29kZUF0KDApID4gMjU1ID8gMTIgOiA3KTtcclxuICAgICAgICAgICAgICAgIHRleHRXICs9IDY7IFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1NzlGQlx1NTJBOFx1N0FFRlx1N0YyOVx1NzdFRFx1NUYxNVx1NUJGQ1x1N0VCRlxyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFiZWxSID0gd2lkdGggPCAzNTAgPyByICsgNSA6IHIgKyAxNTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGx4ID0gY3ggKyBsYWJlbFIgKiBNYXRoLmNvcyhtaWRBbmdsZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBseSA9IGN5ICsgbGFiZWxSICogTWF0aC5zaW4obWlkQW5nbGUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNSaWdodCA9IE1hdGguY29zKG1pZEFuZ2xlKSA+PSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGxhYmVsSXRlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogbHgsIHk6IGx5LCB0ZXh0LCBhbGlnbjogaXNSaWdodCA/ICdzdGFydCcgOiAnZW5kJywgaXNSaWdodCxcclxuICAgICAgICAgICAgICAgICAgICBhbmdsZTogbWlkQW5nbGUsIGFuY2hvclI6IHIsIHRhcmdldFI6IGxhYmVsUiwgd2lkdGg6IHRleHRXXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJyZW50QW5nbGUgKz0gc2xpY2VBbmdsZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5yZXNvbHZlQ29sbGlzaW9ucyhsYWJlbEl0ZW1zKTtcclxuXHJcbiAgICAgICAgbGFiZWxJdGVtcy5mb3JFYWNoKGwgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzeCA9IGN4ICsgKGwuYW5jaG9yUiArIDIpICogTWF0aC5jb3MobC5hbmdsZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHN5ID0gY3kgKyAobC5hbmNob3JSICsgMikgKiBNYXRoLnNpbihsLmFuZ2xlKTtcclxuICAgICAgICAgICAgY29uc3QgbXggPSBjeCArIChsLnRhcmdldFIgKyA1KSAqIE1hdGguY29zKGwuYW5nbGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcGFkZGluZyA9IDU7XHJcbiAgICAgICAgICAgIGxldCBzYWZlWCA9IGwueDtcclxuICAgICAgICAgICAgaWYgKGwuaXNSaWdodCkgc2FmZVggPSBNYXRoLm1pbih3aWR0aCAtIGwud2lkdGggLSBwYWRkaW5nLCBNYXRoLm1heChteCArIDUsIGwueCkpO1xyXG4gICAgICAgICAgICBlbHNlIHNhZmVYID0gTWF0aC5tYXgobC53aWR0aCArIHBhZGRpbmcsIE1hdGgubWluKG14IC0gNSwgbC54KSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBsaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMubnMsICdwb2x5bGluZScpO1xyXG4gICAgICAgICAgICBsaW5lLnNldEF0dHJpYnV0ZSgncG9pbnRzJywgYCR7c3h9LCR7c3l9ICR7bXh9LCR7bC55fSAke3NhZmVYfSwke2wueX1gKTtcclxuICAgICAgICAgICAgbGluZS5zdHlsZS5zdHJva2UgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xyXG4gICAgICAgICAgICBsaW5lLnN0eWxlLmZpbGwgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIGxpbmUuc3R5bGUuc3Ryb2tlV2lkdGggPSAnMSc7XHJcbiAgICAgICAgICAgIGxpbmUuc3R5bGUub3BhY2l0eSA9ICcwLjUnO1xyXG4gICAgICAgICAgICBzdmcuYXBwZW5kQ2hpbGQobGluZSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBiZ1ggPSBsLmlzUmlnaHQgPyBzYWZlWCArIDIgOiBzYWZlWCAtIGwud2lkdGggLSAyO1xyXG4gICAgICAgICAgICBjb25zdCBiZ1JlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy5ucywgJ3JlY3QnKTtcclxuICAgICAgICAgICAgYmdSZWN0LnNldEF0dHJpYnV0ZSgneCcsIGJnWC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgYmdSZWN0LnNldEF0dHJpYnV0ZSgneScsIChsLnkgLSAxMCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGJnUmVjdC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgbC53aWR0aC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgYmdSZWN0LnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgJzE0Jyk7XHJcbiAgICAgICAgICAgIGJnUmVjdC5zdHlsZS5maWxsID0gJ3ZhcigtLWJhY2tncm91bmQtcHJpbWFyeSknO1xyXG4gICAgICAgICAgICBiZ1JlY3Quc3R5bGUub3BhY2l0eSA9ICcwLjYnO1xyXG4gICAgICAgICAgICBiZ1JlY3Quc2V0QXR0cmlidXRlKCdyeCcsICcyJyk7XHJcbiAgICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChiZ1JlY3QpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdGV4dFggPSBsLmlzUmlnaHQgPyBzYWZlWCArIDQgOiBzYWZlWCAtIDQ7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd1RleHQoc3ZnLCB0ZXh0WCwgbC55ICsgMywgbC50ZXh0LCBsLmFsaWduLCAnZGwtY2hhcnQtdGV4dCcsICd2YXIoLS10ZXh0LW5vcm1hbCknKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHN2ZztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlc29sdmVDb2xsaXNpb25zKGxhYmVsczogTGFiZWxQb3NbXSkge1xyXG4gICAgICAgIGNvbnN0IGxlZnQgPSBsYWJlbHMuZmlsdGVyKGwgPT4gIWwuaXNSaWdodCkuc29ydCgoYSwgYikgPT4gYS55IC0gYi55KTtcclxuICAgICAgICBjb25zdCByaWdodCA9IGxhYmVscy5maWx0ZXIobCA9PiBsLmlzUmlnaHQpLnNvcnQoKGEsIGIpID0+IGEueSAtIGIueSk7XHJcbiAgICAgICAgY29uc3QgbWluU3BhY2luZyA9IDE0OyBcclxuICAgICAgICBjb25zdCBhZGp1c3QgPSAoZ3JvdXA6IExhYmVsUG9zW10pID0+IHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBncm91cC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJldiA9IGdyb3VwW2ktMV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyID0gZ3JvdXBbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoY3Vyci55IDwgcHJldi55ICsgbWluU3BhY2luZykgY3Vyci55ID0gcHJldi55ICsgbWluU3BhY2luZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgYWRqdXN0KGxlZnQpOyBhZGp1c3QocmlnaHQpO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IEJhc2VDaGFydFJlbmRlcmVyIH0gZnJvbSAnLi9CYXNlQ2hhcnRSZW5kZXJlcic7XHJcbmltcG9ydCB7IEJ1YmJsZVBvaW50IH0gZnJvbSAnLi4vLi4vY29yZS9jcl9lbmdfZGF0YV9mbG93JztcclxuXHJcbmV4cG9ydCBjbGFzcyBCdWJibGVDaGFydFJlbmRlcmVyIGV4dGVuZHMgQmFzZUNoYXJ0UmVuZGVyZXIge1xyXG4gICAgcmVuZGVyKHBvaW50czogQnViYmxlUG9pbnRbXSwgeExhYmVsczogc3RyaW5nW10gfCB1bmRlZmluZWQsIHlMYWJlbHM6IHN0cmluZ1tdIHwgdW5kZWZpbmVkLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgb3BhY2l0eTogbnVtYmVyID0gMC42KTogU1ZHU1ZHRWxlbWVudCB7XHJcbiAgICAgICAgY29uc3Qgc3ZnID0gdGhpcy5jcmVhdGVTdmcod2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgY29uc3QgcGFkZGluZyA9IDQwO1xyXG4gICAgICAgIGNvbnN0IGNoYXJ0VyA9IHdpZHRoIC0gcGFkZGluZyAqIDI7XHJcbiAgICAgICAgY29uc3QgY2hhcnRIID0gaGVpZ2h0IC0gcGFkZGluZyAqIDI7XHJcblxyXG4gICAgICAgIC8vIFJhbmdlc1xyXG4gICAgICAgIGNvbnN0IHhWYWx1ZXMgPSBwb2ludHMubWFwKHAgPT4gcC54KTtcclxuICAgICAgICBjb25zdCB5VmFsdWVzID0gcG9pbnRzLm1hcChwID0+IHAueSk7XHJcbiAgICAgICAgY29uc3QgclZhbHVlcyA9IHBvaW50cy5tYXAocCA9PiBwLnIpO1xyXG5cclxuICAgICAgICBjb25zdCB4TWF4ID0geExhYmVscyA/IHhMYWJlbHMubGVuZ3RoIC0gMSA6IE1hdGgubWF4KC4uLnhWYWx1ZXMsIDEwMCk7XHJcbiAgICAgICAgY29uc3QgeE1pbiA9IHhMYWJlbHMgPyAwIDogTWF0aC5taW4oLi4ueFZhbHVlcywgMCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgeU1heCA9IHlMYWJlbHMgPyB5TGFiZWxzLmxlbmd0aCAtIDEgOiBNYXRoLm1heCguLi55VmFsdWVzLCAxMDApO1xyXG4gICAgICAgIGNvbnN0IHlNaW4gPSB5TGFiZWxzID8gMCA6IE1hdGgubWluKC4uLnlWYWx1ZXMsIDApO1xyXG5cclxuICAgICAgICBjb25zdCByTWF4ID0gTWF0aC5tYXgoLi4uclZhbHVlcywgMSk7XHJcbiAgICAgICAgY29uc3Qgck1pbiA9IE1hdGgubWluKC4uLnJWYWx1ZXMsIDApO1xyXG5cclxuICAgICAgICAvLyBEcmF3IEF4ZXNcclxuICAgICAgICBjb25zdCBheGlzWExhYmVscyA9IHhMYWJlbHMgfHwgW107XHJcbiAgICAgICAgY29uc3QgYXhpc1lMYWJlbHMgPSB5TGFiZWxzIHx8IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuZHJhd0F4ZXMoc3ZnLCBheGlzWExhYmVscywgeU1heCwgeU1pbiwgd2lkdGgsIGhlaWdodCwgcGFkZGluZywgYXhpc1lMYWJlbHMpO1xyXG5cclxuICAgICAgICBwb2ludHMuZm9yRWFjaChwID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeFJhdGlvID0gKHAueCAtIHhNaW4pIC8gKHhNYXggLSB4TWluIHx8IDEpO1xyXG4gICAgICAgICAgICBjb25zdCB5UmF0aW8gPSAocC55IC0geU1pbikgLyAoeU1heCAtIHlNaW4gfHwgMSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjeCA9IHBhZGRpbmcgKyB4UmF0aW8gKiBjaGFydFc7XHJcbiAgICAgICAgICAgIGNvbnN0IGN5ID0gaGVpZ2h0IC0gcGFkZGluZyAtIHlSYXRpbyAqIGNoYXJ0SDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJSYXRpbyA9IChwLnIgLSByTWluKSAvIChyTWF4IC0gck1pbiB8fCAxKTtcclxuICAgICAgICAgICAgY29uc3QgcmFkaXVzID0gNSArIHJSYXRpbyAqIDM1OyAvLyA1cHggdG8gNDBweFxyXG5cclxuICAgICAgICAgICAgY29uc3QgY2lyY2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMubnMsICdjaXJjbGUnKTtcclxuICAgICAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnY3gnLCBjeC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnY3knLCBjeS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgncicsIHJhZGl1cy50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZGwtY2hhcnQtYnViYmxlJyk7XHJcbiAgICAgICAgICAgIGNpcmNsZS5zdHlsZS5maWxsID0gJ3ZhcigtLWludGVyYWN0aXZlLWFjY2VudCknO1xyXG4gICAgICAgICAgICBjaXJjbGUuc3R5bGUuZmlsbE9wYWNpdHkgPSBTdHJpbmcob3BhY2l0eSk7IC8vIEFwcGx5IHRyYW5zcGFyZW5jeVxyXG4gICAgICAgICAgICBjaXJjbGUuc3R5bGUuc3Ryb2tlID0gJ3ZhcigtLWludGVyYWN0aXZlLWFjY2VudCknO1xyXG4gICAgICAgICAgICBjaXJjbGUuc3R5bGUuc3Ryb2tlV2lkdGggPSAnMSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCB0b29sdGlwTGFiZWwgPSBgJHtwLmxhYmVsfTxici8+WDogJHtwLnJhd1h9PGJyLz5ZOiAke3AucmF3WX08YnIvPlNpemU6ICR7cC5yfWA7XHJcbiAgICAgICAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbHRpcC12YWx1ZScsICcgJyk7XHJcbiAgICAgICAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbHRpcC1sYWJlbCcsIHRvb2x0aXBMYWJlbCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBzdmcuYXBwZW5kQ2hpbGQoY2lyY2xlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHN2ZztcclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogdWkvcmVuZGVyZXJzL0dpdExpbmVEcmF3ZXIudHMgPT09XG5leHBvcnQgY2xhc3MgR2l0TGluZURyYXdlciB7XG4gICAgcHJpdmF0ZSBucyA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XG5cbiAgICBkcmF3TGluZShcbiAgICAgICAgZzogU1ZHR0VsZW1lbnQsXG4gICAgICAgIHgxOiBudW1iZXIsXG4gICAgICAgIHkxOiBudW1iZXIsXG4gICAgICAgIHgyOiBudW1iZXIsXG4gICAgICAgIHkyOiBudW1iZXIsXG4gICAgICAgIGNvbG9yOiBzdHJpbmcsXG4gICAgICAgIGRhc2hlZDogYm9vbGVhblxuICAgICkge1xuICAgICAgICBjb25zdCBsaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMubnMsICdsaW5lJyk7XG4gICAgICAgIGxpbmUuc2V0QXR0cmlidXRlKCd4MScsIFN0cmluZyh4MSkpO1xuICAgICAgICBsaW5lLnNldEF0dHJpYnV0ZSgneTEnLCBTdHJpbmcoeTEpKTtcbiAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3gyJywgU3RyaW5nKHgyKSk7XG4gICAgICAgIGxpbmUuc2V0QXR0cmlidXRlKCd5MicsIFN0cmluZyh5MikpO1xuICAgICAgICBsaW5lLnN0eWxlLnN0cm9rZSA9IGNvbG9yO1xuICAgICAgICBsaW5lLnN0eWxlLnN0cm9rZVdpZHRoID0gJzInO1xuICAgICAgICBpZiAoZGFzaGVkKSBsaW5lLnN0eWxlLnN0cm9rZURhc2hhcnJheSA9ICc0LDMnO1xuICAgICAgICBnLmFwcGVuZENoaWxkKGxpbmUpO1xuICAgIH1cblxuICAgIGRyYXdPcnRob2dvbmFsTGluZShcbiAgICAgICAgZzogU1ZHR0VsZW1lbnQsXG4gICAgICAgIHgxOiBudW1iZXIsXG4gICAgICAgIHkxOiBudW1iZXIsXG4gICAgICAgIHgyOiBudW1iZXIsXG4gICAgICAgIHkyOiBudW1iZXIsXG4gICAgICAgIGNvbG9yOiBzdHJpbmcsXG4gICAgICAgIGlzSG9yaXpvbnRhbDogYm9vbGVhblxuICAgICkge1xuICAgICAgICBjb25zdCBkID0gaXNIb3Jpem9udGFsXG4gICAgICAgICAgICA/IGBNICR7eDF9ICR7eTF9IEwgJHt4MX0gJHt5Mn0gTCAke3gyfSAke3kyfWBcbiAgICAgICAgICAgIDogYE0gJHt4MX0gJHt5MX0gTCAke3gyfSAke3kxfSBMICR7eDJ9ICR7eTJ9YDtcbiAgICAgICAgdGhpcy5kcmF3UGF0aChnLCBkLCBjb2xvciwgZmFsc2UpO1xuICAgIH1cblxuICAgIGRyYXdQYXRoKGc6IFNWR0dFbGVtZW50LCBkOiBzdHJpbmcsIGNvbG9yOiBzdHJpbmcsIGRhc2hlZDogYm9vbGVhbik6IFNWR1BhdGhFbGVtZW50IHtcbiAgICAgICAgY29uc3QgcGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5zLCAncGF0aCcpO1xuICAgICAgICBwYXRoLnNldEF0dHJpYnV0ZSgnZCcsIGQpO1xuICAgICAgICBwYXRoLnN0eWxlLnN0cm9rZSA9IGNvbG9yO1xuICAgICAgICBwYXRoLnN0eWxlLnN0cm9rZVdpZHRoID0gJzInO1xuICAgICAgICBwYXRoLnN0eWxlLmZpbGwgPSAnbm9uZSc7XG4gICAgICAgIGlmIChkYXNoZWQpIHBhdGguc3R5bGUuc3Ryb2tlRGFzaGFycmF5ID0gJzQsMyc7XG4gICAgICAgIGcuYXBwZW5kQ2hpbGQocGF0aCk7XG4gICAgICAgIHJldHVybiBwYXRoO1xuICAgIH1cblxuICAgIGRyYXdOb2RlKFxuICAgICAgICBnOiBTVkdHRWxlbWVudCxcbiAgICAgICAgY3g6IG51bWJlcixcbiAgICAgICAgY3k6IG51bWJlcixcbiAgICAgICAgcjogbnVtYmVyLFxuICAgICAgICBjb2xvcjogc3RyaW5nLFxuICAgICAgICBmaWxsZWQ6IGJvb2xlYW5cbiAgICApOiBTVkdDaXJjbGVFbGVtZW50IHtcbiAgICAgICAgY29uc3QgYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5zLCAnY2lyY2xlJyk7XG4gICAgICAgIGMuc2V0QXR0cmlidXRlKCdjeCcsIFN0cmluZyhjeCkpO1xuICAgICAgICBjLnNldEF0dHJpYnV0ZSgnY3knLCBTdHJpbmcoY3kpKTtcbiAgICAgICAgYy5zZXRBdHRyaWJ1dGUoJ3InLCBTdHJpbmcocikpO1xuICAgICAgICBjLnN0eWxlLnN0cm9rZSA9IGNvbG9yO1xuICAgICAgICBjLnN0eWxlLnN0cm9rZVdpZHRoID0gJzInO1xuICAgICAgICBjLnN0eWxlLmZpbGwgPSBmaWxsZWQgPyBjb2xvciA6ICd2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpJztcbiAgICAgICAgZy5hcHBlbmRDaGlsZChjKTtcbiAgICAgICAgcmV0dXJuIGM7XG4gICAgfVxuXG4gICAgZHJhd1RleHQoXG4gICAgICAgIGc6IFNWR0dFbGVtZW50LFxuICAgICAgICB0ZXh0OiBzdHJpbmcsXG4gICAgICAgIHg6IG51bWJlcixcbiAgICAgICAgeTogbnVtYmVyLFxuICAgICAgICBjb21wbGV0ZWQ6IGJvb2xlYW4sXG4gICAgICAgIGlzSG9yaXpvbnRhbDogYm9vbGVhblxuICAgICkge1xuICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5zLCAndGV4dCcpO1xuICAgICAgICBlbC50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgICAgIGVsLnN0eWxlLmZvbnRTaXplID0gJzEycHgnO1xuICAgICAgICBlbC5zdHlsZS5maWxsID0gY29tcGxldGVkID8gJ3ZhcigtLXRleHQtbXV0ZWQpJyA6ICd2YXIoLS10ZXh0LW5vcm1hbCknO1xuICAgICAgICBpZiAoY29tcGxldGVkKSBlbC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdsaW5lLXRocm91Z2gnO1xuXG4gICAgICAgIGlmIChpc0hvcml6b250YWwpIHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgneCcsIFN0cmluZyh4KSk7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3knLCBTdHJpbmcoeSAtIDEwKSk7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScsIGByb3RhdGUoLTMwLCAke3h9LCAke3kgLSAxMH0pYCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3gnLCBTdHJpbmcoeCArIDE1KSk7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3knLCBTdHJpbmcoeSArIDQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGcuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIH1cbn0iLCAiLy8gPT09IEZJTEU6IHVpL3JlbmRlcmVycy9HaXRMaW5lSW50ZXJhY3Rpb25zLnRzID09PVxuZXhwb3J0IGNsYXNzIEdpdExpbmVJbnRlcmFjdGlvbnMge1xuICAgIHByaXZhdGUgc2NhbGUgPSAxO1xuICAgIHByaXZhdGUgdHJhbnNsYXRlWCA9IDIwO1xuICAgIHByaXZhdGUgdHJhbnNsYXRlWSA9IDIwO1xuICAgIHByaXZhdGUgc3ZnR3JvdXA6IFNWR0dFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cbiAgICBzZXRTdmdHcm91cChncm91cDogU1ZHR0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5zdmdHcm91cCA9IGdyb3VwO1xuICAgIH1cblxuICAgIHNldHVwSW50ZXJhY3Rpb25zKHdyYXBwZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGxldCBpc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgIGxldCBzdGFydFggPSAwO1xuICAgICAgICBsZXQgc3RhcnRZID0gMDtcblxuICAgICAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBjb25zdCBkZWx0YSA9IGUuZGVsdGFZID4gMCA/IDAuOSA6IDEuMTtcbiAgICAgICAgICAgIHRoaXMuc2NhbGUgPSBNYXRoLm1pbihNYXRoLm1heCgwLjEsIHRoaXMuc2NhbGUgKiBkZWx0YSksIDUpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgd3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBlID0+IHtcbiAgICAgICAgICAgIGlmIChlLmJ1dHRvbiAhPT0gMCkgcmV0dXJuO1xuICAgICAgICAgICAgaXNEcmFnZ2luZyA9IHRydWU7XG4gICAgICAgICAgICBzdGFydFggPSBlLmNsaWVudFggLSB0aGlzLnRyYW5zbGF0ZVg7XG4gICAgICAgICAgICBzdGFydFkgPSBlLmNsaWVudFkgLSB0aGlzLnRyYW5zbGF0ZVk7XG4gICAgICAgICAgICB3cmFwcGVyLnN0eWxlLmN1cnNvciA9ICdncmFiYmluZyc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBlID0+IHtcbiAgICAgICAgICAgIGlmICghaXNEcmFnZ2luZykgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVYID0gZS5jbGllbnRYIC0gc3RhcnRYO1xuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVZID0gZS5jbGllbnRZIC0gc3RhcnRZO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoKSA9PiB7XG4gICAgICAgICAgICBpc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB3cmFwcGVyLnN0eWxlLmN1cnNvciA9ICdncmFiJztcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVzZXRab29tKCkge1xuICAgICAgICB0aGlzLnNjYWxlID0gMTtcbiAgICAgICAgdGhpcy50cmFuc2xhdGVYID0gMjA7XG4gICAgICAgIHRoaXMudHJhbnNsYXRlWSA9IDIwO1xuICAgICAgICB0aGlzLnVwZGF0ZVRyYW5zZm9ybSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlVHJhbnNmb3JtKCkge1xuICAgICAgICBpZiAodGhpcy5zdmdHcm91cCkge1xuICAgICAgICAgICAgdGhpcy5zdmdHcm91cC5zZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgJ3RyYW5zZm9ybScsXG4gICAgICAgICAgICAgICAgYHRyYW5zbGF0ZSgke3RoaXMudHJhbnNsYXRlWH0sICR7dGhpcy50cmFuc2xhdGVZfSkgc2NhbGUoJHt0aGlzLnNjYWxlfSlgXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufSIsICIvLyA9PT0gRklMRTogdWkvcmVuZGVyZXJzL0dpdExpbmVDaGFydFJlbmRlcmVyLnRzID09PVxyXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEJhc2VDaGFydFJlbmRlcmVyIH0gZnJvbSAnLi9CYXNlQ2hhcnRSZW5kZXJlcic7XHJcbmltcG9ydCB7IFRhc2tJdGVtIH0gZnJvbSAnLi4vLi4vY29yZS90eXBlcyc7XHJcbmltcG9ydCB7IEdpdExpbmVEcmF3ZXIgfSBmcm9tICcuL0dpdExpbmVEcmF3ZXInO1xyXG5pbXBvcnQgeyBHaXRMaW5lSW50ZXJhY3Rpb25zIH0gZnJvbSAnLi9HaXRMaW5lSW50ZXJhY3Rpb25zJztcclxuXHJcbnR5cGUgU2lkZSA9IC0xIHwgMCB8IDE7XHJcblxyXG50eXBlIE5vZGUgPSB7XHJcbiAgICBpbmRleDogbnVtYmVyO1xyXG4gICAgdGFzazogVGFza0l0ZW07XHJcblxyXG4gICAgLy8gPSB0YXNrLmluZGVudGF0aW9uLCBcdTY1ODdcdTRFRjZcdTgyODJcdTcwQjlcdTRFM0EgLTFcclxuICAgIGRlcHRoOiBudW1iZXI7XHJcblxyXG4gICAgcGFyZW50SW5kZXg6IG51bWJlciB8IG51bGw7XHJcblxyXG4gICAgLy8gXHU1NDBDXHU2NTg3XHU0RUY2XHU1MTg1XHU1QjUwXHU2ODExXHU3RUQzXHU2NzVGIGluZGV4XHVGRjA4XHU2MzA5XHU2NTg3XHU2ODYzXHU5ODdBXHU1RThGXHU2MjZCXHU2M0NGXHVGRjA5XHJcbiAgICBzdWJ0cmVlRW5kOiBudW1iZXI7XHJcblxyXG4gICAgLy8gXHU4MUVBXHU1REYxICsgXHU2MjQwXHU2NzA5XHU1NDBFXHU0RUUzXHU2NjJGXHU1NDI2XHU5MEZEIGNvbXBsZXRlZFxyXG4gICAgc3VidHJlZURvbmU6IGJvb2xlYW47XHJcblxyXG4gICAgLy8gXHU1QjUwXHU2ODExXHU4MjgyXHU3MEI5XHU2NTcwXHU5MUNGXHVGRjA4XHU3NTI4XHU0RThFXHU1REU2XHU1M0YzXHU1RTczXHU4ODYxXHVGRjA5XHJcbiAgICBzdWJ0cmVlU2l6ZTogbnVtYmVyO1xyXG5cclxuICAgIC8vIFx1NUI1MFx1NjgxMVx1NjcwMFx1NTkyN1x1NkRGMVx1NUVBNlx1RkYwOFx1NzUyOFx1NEU4RVx1NUMwNFx1N0VCRlx1N0VEM1x1Njc1Rlx1NEY0RFx1N0Y2RVx1RkYwOVxyXG4gICAgc3VidHJlZU1heERlcHRoOiBudW1iZXI7XHJcblxyXG4gICAgLy8gXHU2MDFEXHU3RUY0XHU1QkZDXHU1NkZFXHU1REU2XHU1M0YzXHU0RkE3XHVGRjFBcm9vdD0wLCBcdTVERTY9LTEsIFx1NTNGMz0rMVxyXG4gICAgc2lkZTogU2lkZTtcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBHaXRMaW5lQ2hhcnRSZW5kZXJlciBleHRlbmRzIEJhc2VDaGFydFJlbmRlcmVyIHtcclxuICAgIHByaXZhdGUgZHJhd2VyID0gbmV3IEdpdExpbmVEcmF3ZXIoKTtcclxuICAgIHByaXZhdGUgaW50ZXJhY3Rpb25zID0gbmV3IEdpdExpbmVJbnRlcmFjdGlvbnMoKTtcclxuICAgIHByaXZhdGUgYXBwOiBBcHA7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcihyYXdUYXNrczogVGFza0l0ZW1bXSk6IEhUTUxFbGVtZW50IHtcclxuICAgICAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgd3JhcHBlci5zdHlsZS5vdmVyZmxvdyA9ICdhdXRvJztcclxuXHJcbiAgICAgICAgY29uc3Qgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMubnMsICdzdmcnKTtcclxuICAgICAgICBjb25zdCBnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMubnMsICdnJyk7XHJcbiAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAnMTAwJScpO1xyXG4gICAgICAgIHN2Zy5hcHBlbmRDaGlsZChnKTtcclxuICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHN2Zyk7XHJcblxyXG4gICAgICAgIC8vID09PT09IDEpIFx1NTM1NVx1NjU4N1x1NEVGNlx1OTY1MFx1NTIzNiA9PT09PVxyXG4gICAgICAgIGNvbnN0IHRhc2tzID0gKHJhd1Rhc2tzIHx8IFtdKS5zbGljZSgpLnNvcnQoKGEsIGIpID0+IChhLmxpbmUgPz8gMCkgLSAoYi5saW5lID8/IDApKTtcclxuICAgICAgICBjb25zdCB0YXJnZXRGaWxlID0gdGFza3NbMF0/LmZpbGU/LnBhdGg7XHJcblxyXG4gICAgICAgIGlmICghdGFyZ2V0RmlsZSkge1xyXG4gICAgICAgICAgICBzdmcuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAnMjAwJyk7XHJcbiAgICAgICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCAnMCAwIDgwMCAyMDAnKTtcclxuICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGlvbnMuc2V0U3ZnR3JvdXAoZyk7XHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJhY3Rpb25zLnNldHVwSW50ZXJhY3Rpb25zKHdyYXBwZXIpO1xyXG4gICAgICAgICAgICByZXR1cm4gd3JhcHBlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNpbmdsZUZpbGVUYXNrcyA9IHRhc2tzLmZpbHRlcih0ID0+IHQuZmlsZT8ucGF0aCA9PT0gdGFyZ2V0RmlsZSk7XHJcblxyXG4gICAgICAgIC8vID09PT09IDIpIFx1NjU4N1x1NEVGNlx1NEUzQlx1ODI4Mlx1NzBCOVx1RkYwOFJvb3RcdUZGMDkgPT09PT1cclxuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IHRhcmdldEZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCB0YXJnZXRGaWxlO1xyXG4gICAgICAgIGNvbnN0IGZpbGVOb2RlOiBOb2RlID0ge1xyXG4gICAgICAgICAgICBpbmRleDogMCxcclxuICAgICAgICAgICAgdGFzazoge1xyXG4gICAgICAgICAgICAgICAgaWQ6IGBmaWxlLSR7dGFyZ2V0RmlsZX1gLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogZmlsZU5hbWUsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZmlsZTogc2luZ2xlRmlsZVRhc2tzWzBdPy5maWxlLFxyXG4gICAgICAgICAgICAgICAgbGluZTogMCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVwdGg6IC0xLFxyXG4gICAgICAgICAgICBwYXJlbnRJbmRleDogbnVsbCxcclxuICAgICAgICAgICAgc3VidHJlZUVuZDogc2luZ2xlRmlsZVRhc2tzLmxlbmd0aCxcclxuICAgICAgICAgICAgc3VidHJlZURvbmU6IGZhbHNlLFxyXG4gICAgICAgICAgICBzdWJ0cmVlU2l6ZTogMSxcclxuICAgICAgICAgICAgc3VidHJlZU1heERlcHRoOiAtMSxcclxuICAgICAgICAgICAgc2lkZTogMCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyA9PT09PSAzKSBcdTRFRkJcdTUyQTFcdTgyODJcdTcwQjlcdUZGMDhcdTdEMjJcdTVGMTVcdTRFQ0UxXHU1RjAwXHU1OUNCXHVGRjA5ID09PT09XHJcbiAgICAgICAgY29uc3QgdGFza05vZGVzOiBOb2RlW10gPSBzaW5nbGVGaWxlVGFza3MubWFwKCh0LCBpKSA9PiAoe1xyXG4gICAgICAgICAgICBpbmRleDogaSArIDEsXHJcbiAgICAgICAgICAgIHRhc2s6IHQsXHJcbiAgICAgICAgICAgIGRlcHRoOiBNYXRoLm1heCgwLCB0LmluZGVudGF0aW9uID8/IDApLFxyXG4gICAgICAgICAgICBwYXJlbnRJbmRleDogbnVsbCxcclxuICAgICAgICAgICAgc3VidHJlZUVuZDogaSArIDEsXHJcbiAgICAgICAgICAgIHN1YnRyZWVEb25lOiBmYWxzZSxcclxuICAgICAgICAgICAgc3VidHJlZVNpemU6IDEsXHJcbiAgICAgICAgICAgIHN1YnRyZWVNYXhEZXB0aDogTWF0aC5tYXgoMCwgdC5pbmRlbnRhdGlvbiA/PyAwKSxcclxuICAgICAgICAgICAgc2lkZTogMCxcclxuICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5vZGVzOiBOb2RlW10gPSBbZmlsZU5vZGUsIC4uLnRhc2tOb2Rlc107XHJcblxyXG4gICAgICAgIC8vID09PT09IDQpIHBhcmVudCAvIHN1YnRyZWUgLyBjaGlsZHJlbiA9PT09PVxyXG4gICAgICAgIGJ1aWxkUGFyZW50SW5kZXhCeUluZGVudGF0aW9uKG5vZGVzKTtcclxuICAgICAgICBjb21wdXRlU3VidHJlZUVuZEJ5SW5kZW50YXRpb24obm9kZXMpO1xyXG5cclxuICAgICAgICBjb25zdCBjaGlsZHJlbk1hcCA9IGJ1aWxkQ2hpbGRyZW5NYXAobm9kZXMpO1xyXG5cclxuICAgICAgICBjb21wdXRlU3VidHJlZVNpemUobm9kZXMsIGNoaWxkcmVuTWFwKTtcclxuICAgICAgICBjb21wdXRlU3VidHJlZURvbmUobm9kZXMsIGNoaWxkcmVuTWFwKTtcclxuICAgICAgICBjb21wdXRlU3VidHJlZU1heERlcHRoKG5vZGVzLCBjaGlsZHJlbk1hcCk7XHJcblxyXG4gICAgICAgIC8vID09PT09IDUpIFx1NURFNlx1NTNGM1x1NTIwNlx1OTE0RFx1RkYxQXJvb3QgY2hpbGRyZW4gXHU1REU2XHU1M0YzXHU1RTczXHU4ODYxXHVGRjBDXHU1NDBFXHU0RUUzXHU3RUU3XHU2MjdGXHU3MjM2XHU0RkE3ID09PT09XHJcbiAgICAgICAgYXNzaWduTWluZG1hcFNpZGVzKG5vZGVzLCBjaGlsZHJlbk1hcCk7XHJcblxyXG4gICAgICAgIC8vID09PT09IDYpIFx1OTFEMVx1NUI1N1x1NTg1NFx1NUUwM1x1NUM0MFx1RkYxQVx1NTQwQ1x1NUM0Mlx1NTQwQ1x1NEUwMFx1NjM5Mlx1RkYwOHk9bGV2ZWxcdUZGMDlcdUZGMEN4PVx1NUI1MFx1NjgxMVx1NUJCRFx1NUVBNlx1NTIwNlx1OTE0RCArIFx1NURFNlx1NTNGM1x1OTU1Q1x1NTBDRiA9PT09PVxyXG4gICAgICAgIGNvbnN0IHBhZGRpbmdYID0gNzA7XHJcbiAgICAgICAgY29uc3QgcGFkZGluZ1kgPSA3MDtcclxuXHJcbiAgICAgICAgY29uc3QgbGV2ZWxTdGVwID0gOTA7ICAgICAgLy8gXHUyMDFDXHU1QzQyXHU3RUE3XHU4ODRDXHU4REREXHUyMDFEXHVGRjA4XHU1NDBDXHU1QzQyXHU1NDBDeVx1RkYwOVxyXG4gICAgICAgIGNvbnN0IHNsb3RTdGVwID0gMTUwOyAgICAgIC8vIFx1MjAxQ1x1NTQwQ1x1NEZBN1x1NkEyQVx1NTQxMVx1NjlGRFx1NEY0RFx1NUJCRFx1NUVBNlx1MjAxRFxyXG4gICAgICAgIGNvbnN0IGJhc2VHYXAgPSAxMjA7ICAgICAgIC8vIHJvb3QgXHU1MjMwXHU1REU2XHU1M0YzXHU1MzNBXHU1N0RGXHU3Njg0XHU5NUY0XHU5Njk0XHJcbiAgICAgICAgY29uc3QgbGFiZWxQYWQgPSAyMjA7ICAgICAgLy8gXHU5ODg0XHU3NTU5XHU2NTg3XHU2NzJDXHU3QTdBXHU5NUY0XHVGRjA4XHU5NjMyXHU2QjYyIHZpZXdCb3ggXHU4OEMxXHU1MjA3XHVGRjA5XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbG9ycyA9IFsnI2UwNmM3NScsICcjOThjMzc5JywgJyM2MWFmZWYnLCAnI2U1YzA3YicsICcjYzY3OGRkJywgJyM1NmI2YzInXTtcclxuICAgICAgICBjb25zdCBub2RlUmFkaXVzID0gNjtcclxuXHJcbiAgICAgICAgY29uc3QgbWF4RGVwdGggPSBub2Rlcy5yZWR1Y2UoKG0sIG4pID0+IE1hdGgubWF4KG0sIG4uZGVwdGgpLCAwKTtcclxuXHJcbiAgICAgICAgLy8gXHU4QkExXHU3Qjk3XHU2QkNGXHU0RkE3XHU1MzYwXHU3NTI4XHU3Njg0XHUyMDFDXHU2OUZEXHU0RjREXHU2MDNCXHU1QkJEXHUyMDFEXHJcbiAgICAgICAgY29uc3Qgcm9vdEtpZHMgPSBjaGlsZHJlbk1hcC5nZXQoMCkgPz8gW107XHJcbiAgICAgICAgY29uc3QgbGVmdEtpZHMgPSByb290S2lkcy5maWx0ZXIoaSA9PiBub2Rlc1tpXS5zaWRlID09PSAtMSk7XHJcbiAgICAgICAgY29uc3QgcmlnaHRLaWRzID0gcm9vdEtpZHMuZmlsdGVyKGkgPT4gbm9kZXNbaV0uc2lkZSA9PT0gMSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHdpZHRoTWVtbyA9IG5ldyBNYXA8bnVtYmVyLCBudW1iZXI+KCk7XHJcbiAgICAgICAgY29uc3Qgc2xvdENlbnRlciA9IG5ldyBNYXA8bnVtYmVyLCBudW1iZXI+KCk7IC8vIFx1NEVDNVx1NUJGOVx1OTc1RXJvb3RcdTY3MDlcdTYxMEZcdTRFNDlcdUZGMDhcdTU0MENcdTRGQTdcdTVDNDBcdTkwRThcdTU3NTBcdTY4MDdcdUZGMDlcclxuXHJcbiAgICAgICAgY29uc3Qgc3VidHJlZVdpZHRoID0gKGk6IG51bWJlcik6IG51bWJlciA9PiB7XHJcbiAgICAgICAgICAgIGlmICh3aWR0aE1lbW8uaGFzKGkpKSByZXR1cm4gd2lkdGhNZW1vLmdldChpKSE7XHJcbiAgICAgICAgICAgIGNvbnN0IGtpZHMgPSBjaGlsZHJlbk1hcC5nZXQoaSkgPz8gW107XHJcbiAgICAgICAgICAgIGlmIChraWRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgd2lkdGhNZW1vLnNldChpLCAxKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBzdW0gPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGMgb2Yga2lkcykgc3VtICs9IHN1YnRyZWVXaWR0aChjKTtcclxuICAgICAgICAgICAgY29uc3QgdyA9IE1hdGgubWF4KDEsIHN1bSk7XHJcbiAgICAgICAgICAgIHdpZHRoTWVtby5zZXQoaSwgdyk7XHJcbiAgICAgICAgICAgIHJldHVybiB3O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGFzc2lnblNsb3RzID0gKGk6IG51bWJlciwgc3RhcnQ6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB3ID0gc3VidHJlZVdpZHRoKGkpO1xyXG4gICAgICAgICAgICBzbG90Q2VudGVyLnNldChpLCBzdGFydCArIHcgLyAyKTtcclxuICAgICAgICAgICAgbGV0IGN1ciA9IHN0YXJ0O1xyXG4gICAgICAgICAgICBjb25zdCBraWRzID0gY2hpbGRyZW5NYXAuZ2V0KGkpID8/IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGMgb2Yga2lkcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3cgPSBzdWJ0cmVlV2lkdGgoYyk7XHJcbiAgICAgICAgICAgICAgICBhc3NpZ25TbG90cyhjLCBjdXIpO1xyXG4gICAgICAgICAgICAgICAgY3VyICs9IGN3O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IGxlZnRTbG90cyA9IDA7XHJcbiAgICAgICAgZm9yIChjb25zdCBrIG9mIGxlZnRLaWRzKSBsZWZ0U2xvdHMgKz0gc3VidHJlZVdpZHRoKGspO1xyXG4gICAgICAgIGxldCByaWdodFNsb3RzID0gMDtcclxuICAgICAgICBmb3IgKGNvbnN0IGsgb2YgcmlnaHRLaWRzKSByaWdodFNsb3RzICs9IHN1YnRyZWVXaWR0aChrKTtcclxuXHJcbiAgICAgICAgLy8gXHU3RUQ5XHU1REU2XHU1M0YzXHU0RTI0XHU0RkE3XHU1MjA2XHU1MjJCXHU0RUNFMFx1NUYwMFx1NTlDQlx1NTIwNlx1OTE0RFx1NjlGRFx1NEY0RFx1RkYwOFx1NUM0MFx1OTBFOFx1NTc1MFx1NjgwN1x1RkYwOVxyXG4gICAgICAgIGxldCBhY2MgPSAwO1xyXG4gICAgICAgIGZvciAoY29uc3QgayBvZiBsZWZ0S2lkcykge1xyXG4gICAgICAgICAgICBhc3NpZ25TbG90cyhrLCBhY2MpO1xyXG4gICAgICAgICAgICBhY2MgKz0gc3VidHJlZVdpZHRoKGspO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhY2MgPSAwO1xyXG4gICAgICAgIGZvciAoY29uc3QgayBvZiByaWdodEtpZHMpIHtcclxuICAgICAgICAgICAgYXNzaWduU2xvdHMoaywgYWNjKTtcclxuICAgICAgICAgICAgYWNjICs9IHN1YnRyZWVXaWR0aChrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGxlZnRTcGFuID0gYmFzZUdhcCArIGxlZnRTbG90cyAqIHNsb3RTdGVwICsgbGFiZWxQYWQ7XHJcbiAgICAgICAgY29uc3QgcmlnaHRTcGFuID0gYmFzZUdhcCArIHJpZ2h0U2xvdHMgKiBzbG90U3RlcCArIGxhYmVsUGFkO1xyXG5cclxuICAgICAgICBjb25zdCByb290WCA9IHBhZGRpbmdYICsgbGVmdFNwYW47XHJcblxyXG4gICAgICAgIGNvbnN0IHlPZkRlcHRoID0gKGRlcHRoOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGV2ZWwgPSBkZXB0aCArIDE7IC8vIGRlcHRoPS0xID0+IGxldmVsMCAocm9vdClcclxuICAgICAgICAgICAgcmV0dXJuIHBhZGRpbmdZICsgbGV2ZWwgKiBsZXZlbFN0ZXA7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3Qgbm9kZUNvbG9yID0gKG46IE5vZGUpID0+IGNvbG9yc1soTWF0aC5tYXgoMCwgbi5kZXB0aCkgKyAxKSAlIGNvbG9ycy5sZW5ndGhdO1xyXG5cclxuICAgICAgICBjb25zdCBwb3MgPSAobjogTm9kZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobi5kZXB0aCA9PT0gLTEpIHJldHVybiB7IHg6IHJvb3RYLCB5OiB5T2ZEZXB0aCgtMSkgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNjID0gc2xvdENlbnRlci5nZXQobi5pbmRleCkgPz8gMC41OyAvLyBsZWFmXHU5RUQ4XHU4QkE0MC41XHJcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsWCA9IHNjICogc2xvdFN0ZXA7XHJcblxyXG4gICAgICAgICAgICBpZiAobi5zaWRlID09PSAxKSByZXR1cm4geyB4OiByb290WCArIGJhc2VHYXAgKyBsb2NhbFgsIHk6IHlPZkRlcHRoKG4uZGVwdGgpIH07XHJcbiAgICAgICAgICAgIGlmIChuLnNpZGUgPT09IC0xKSByZXR1cm4geyB4OiByb290WCAtIChiYXNlR2FwICsgbG9jYWxYKSwgeTogeU9mRGVwdGgobi5kZXB0aCkgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIFx1Njc4MVx1N0FFRlx1NTE1Q1x1NUU5NVx1RkYxQVx1NkNBMVx1NTIwNlx1OTE0RFx1NTIzMHNpZGVcdTc2ODRcdTgyODJcdTcwQjlcclxuICAgICAgICAgICAgcmV0dXJuIHsgeDogcm9vdFggKyBiYXNlR2FwICsgbG9jYWxYLCB5OiB5T2ZEZXB0aChuLmRlcHRoKSB9O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGJvdHRvbVkgPSB5T2ZEZXB0aChtYXhEZXB0aCkgKyAxNDA7XHJcblxyXG4gICAgICAgIC8vID09PT09IEEpIFx1NkJDRlx1NEUyQVx1ODI4Mlx1NzBCOVx1ODFFQVx1NURGMVx1NzY4NFx1MjAxQ1x1NUI5RVx1N0VCRlx1NUMwNFx1N0VCRlx1MjAxRCA9PT09PVxyXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBub2Rlcykge1xyXG4gICAgICAgICAgICBjb25zdCBwID0gcG9zKG4pO1xyXG4gICAgICAgICAgICBjb25zdCBjb2xvciA9IG5vZGVDb2xvcihuKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFx1NjcyQVx1NUI4Q1x1NjIxMFx1NUI1MFx1NjgxMVx1RkYxQVx1NUVGNlx1NEYzOFx1NTIzMFx1NUU5NVx1RkYxQlx1NUI1MFx1NjgxMVx1NUI4Q1x1NjIxMFx1RkYxQVx1NTIzMFx1NUI1MFx1NjgxMVx1NjcwMFx1NkRGMVx1NUM0MlxyXG4gICAgICAgICAgICBsZXQgZW5kWSA9IGJvdHRvbVk7XHJcbiAgICAgICAgICAgIGlmIChuLmRlcHRoICE9PSAtMSAmJiBuLnN1YnRyZWVEb25lKSB7XHJcbiAgICAgICAgICAgICAgICBlbmRZID0geU9mRGVwdGgobi5zdWJ0cmVlTWF4RGVwdGgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyByb290IFx1NEUzQlx1NUMwNFx1N0VCRlx1NTlDQlx1N0VDOFx1NTIzMFx1NUU5NVxyXG4gICAgICAgICAgICBpZiAobi5kZXB0aCA9PT0gLTEpIGVuZFkgPSBib3R0b21ZO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kcmF3ZXIuZHJhd1BhdGgoZywgYE0gJHtwLnh9ICR7cC55fSBMICR7cC54fSAke2VuZFl9YCwgY29sb3IsIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vID09PT09IEIpIFx1NTIwNlx1NTNDOVx1OEZERVx1N0VCRlx1RkYxQVx1NzIzNlx1NUMwNFx1N0VCRlx1NjYyMFx1NUMwNFx1NzBCOSAtPiBcdTVCNTBcdTgyODJcdTcwQjlcdUZGMDhcdTVCOUVcdTdFQkZcdUZGMDkgPT09PT1cclxuICAgICAgICBmb3IgKGNvbnN0IG4gb2Ygbm9kZXMpIHtcclxuICAgICAgICAgICAgaWYgKG4ucGFyZW50SW5kZXggPT0gbnVsbCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGlmIChuLmRlcHRoID09PSAtMSkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBub2Rlc1tuLnBhcmVudEluZGV4XTtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50UG9zID0gcG9zKHBhcmVudCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkUG9zID0gcG9zKG4pO1xyXG5cclxuICAgICAgICAgICAgLy8gXHU3MjM2XHU1QzA0XHU3RUJGXHU1NzI4IGNoaWxkLnkgXHU3Njg0XHU2NjIwXHU1QzA0XHU3MEI5XHJcbiAgICAgICAgICAgIGNvbnN0IG1hcFggPSBwYXJlbnRQb3MueDtcclxuICAgICAgICAgICAgY29uc3QgeSA9IGNoaWxkUG9zLnk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRyYXdlci5kcmF3UGF0aChnLCBgTSAke21hcFh9ICR7eX0gTCAke2NoaWxkUG9zLnh9ICR7eX1gLCBub2RlQ29sb3IocGFyZW50KSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gPT09PT0gQykgXHU1NkRFXHU2NTM2XHU3RUJGXHVGRjFBXHU0RUM1XHU1QjhDXHU2MjEwXHU2NUY2XHVGRjBDXHU1NkRFXHU1MjMwXHUyMDFDXHU0RTBBXHU0RTAwXHU1QzQyXHU1QzA0XHU3RUJGXHU2NjIwXHU1QzA0XHU3MEI5XHUyMDFEXHVGRjA4XHU4NjVBXHU3RUJGXHVGRjA5ID09PT09XHJcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIG5vZGVzKSB7XHJcbiAgICAgICAgICAgIGlmIChuLnBhcmVudEluZGV4ID09IG51bGwpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBpZiAobi5kZXB0aCA9PT0gLTEpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgLy8gXHUyNzA1IFx1OUVEOFx1OEJBNFx1RkYxQVx1NUI1MFx1NjgxMVx1NUI4Q1x1NjIxMFx1NjI0RFx1NTZERVx1NjUzNlx1RkYwOFx1NjZGNFx1N0EzM1x1NUI5QVx1RkYwOVxyXG4gICAgICAgICAgICBpZiAoIW4uc3VidHJlZURvbmUpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU0RjYwXHU1NzVBXHU2MzAxXHUyMDFDXHU1M0VBXHU4OTgxXHU1RjUzXHU1MjREXHU4MjgyXHU3MEI5IGNvbXBsZXRlZCBcdTVDMzFcdTU2REVcdTY1MzZcdTIwMURcdUZGMENcdTY1MzlcdTYyMTBcdUZGMUFcclxuICAgICAgICAgICAgLy8gaWYgKCFuLnRhc2suY29tcGxldGVkKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG5vZGVzW24ucGFyZW50SW5kZXhdO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJlbnRQb3MgPSBwb3MocGFyZW50KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGVuZFkgPSB5T2ZEZXB0aChuLnN1YnRyZWVNYXhEZXB0aCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZyb21YID0gcG9zKG4pLng7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvWCA9IHBhcmVudFBvcy54O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kcmF3ZXIuZHJhd1BhdGgoZywgYE0gJHtmcm9tWH0gJHtlbmRZfSBMICR7dG9YfSAke2VuZFl9YCwgbm9kZUNvbG9yKG4pLCB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vID09PT09IEQpIFx1ODI4Mlx1NzBCOSArIFx1NjU4N1x1NjcyQ1x1RkYwOFx1NURFNlx1NTNGM1x1NEZBN1x1NTIwNlx1NTIyQlx1NURFNlx1NTNGM1x1NUJGOVx1OUY1MFx1RkYwOSA9PT09PVxyXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBub2Rlcykge1xyXG4gICAgICAgICAgICBjb25zdCBwID0gcG9zKG4pO1xyXG4gICAgICAgICAgICBjb25zdCBjb2xvciA9IG5vZGVDb2xvcihuKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuLmRlcHRoID09PSAtMSA/IG5vZGVSYWRpdXMgKyAyIDogbm9kZVJhZGl1cztcclxuICAgICAgICAgICAgdGhpcy5kcmF3ZXIuZHJhd05vZGUoZywgcC54LCBwLnksIHIsIGNvbG9yLCAhIW4udGFzay5jb21wbGV0ZWQpO1xyXG5cclxuICAgICAgICAgICAgZHJhd0xhYmVsKGcsIG4sIHAueCwgcC55KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vID09PT09IEUpIHZpZXdCb3ggLyBcdTVDM0FcdTVCRjhcdUZGMDhcdTkwN0ZcdTUxNERcdTg4QzFcdTUyMDdcdUZGMDkgPT09PT1cclxuICAgICAgICBjb25zdCB0b3RhbEhlaWdodCA9IGJvdHRvbVkgKyBwYWRkaW5nWTtcclxuICAgICAgICBjb25zdCB0b3RhbFdpZHRoID0gcGFkZGluZ1ggKyBsZWZ0U3BhbiArIHJpZ2h0U3BhbiArIHBhZGRpbmdYO1xyXG5cclxuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBgJHt0b3RhbEhlaWdodH1gKTtcclxuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKCd2aWV3Qm94JywgYDAgMCAke3RvdGFsV2lkdGh9ICR7dG90YWxIZWlnaHR9YCk7XHJcbiAgICAgICAgd3JhcHBlci5zdHlsZS5tYXhIZWlnaHQgPSAnMTAwJSc7XHJcblxyXG4gICAgICAgIHRoaXMuaW50ZXJhY3Rpb25zLnNldFN2Z0dyb3VwKGcpO1xyXG4gICAgICAgIHRoaXMuaW50ZXJhY3Rpb25zLnNldHVwSW50ZXJhY3Rpb25zKHdyYXBwZXIpO1xyXG5cclxuICAgICAgICByZXR1cm4gd3JhcHBlcjtcclxuICAgIH1cclxufVxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLSBsYWJlbCAtLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5mdW5jdGlvbiBkcmF3TGFiZWwoZzogU1ZHR0VsZW1lbnQsIG46IE5vZGUsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICBjb25zdCB0ZXh0ID0gbi50YXNrLnRleHQgfHwgJyc7XHJcbiAgICBpZiAoIXRleHQpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICd0ZXh0Jyk7XHJcblxyXG4gICAgY29uc3QgaXNSb290ID0gbi5kZXB0aCA9PT0gLTE7XHJcbiAgICBjb25zdCBzaWRlID0gaXNSb290ID8gMSA6IG4uc2lkZTtcclxuXHJcbiAgICBjb25zdCBkeCA9IGlzUm9vdCA/IDE0IDogKHNpZGUgPT09IC0xID8gLTE0IDogMTQpO1xyXG5cclxuICAgIHQuc2V0QXR0cmlidXRlKCd4JywgU3RyaW5nKHggKyBkeCkpO1xyXG4gICAgdC5zZXRBdHRyaWJ1dGUoJ3knLCBTdHJpbmcoeSkpO1xyXG4gICAgdC5zZXRBdHRyaWJ1dGUoJ2RvbWluYW50LWJhc2VsaW5lJywgJ21pZGRsZScpO1xyXG4gICAgdC5zZXRBdHRyaWJ1dGUoJ3RleHQtYW5jaG9yJywgc2lkZSA9PT0gLTEgPyAnZW5kJyA6ICdzdGFydCcpO1xyXG5cclxuICAgIHQuc3R5bGUuZm9udFNpemUgPSAnMTRweCc7XHJcbiAgICB0LnN0eWxlLnVzZXJTZWxlY3QgPSAnbm9uZSc7XHJcbiAgICB0LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XHJcblxyXG4gICAgaWYgKG4udGFzay5jb21wbGV0ZWQpIHtcclxuICAgICAgICB0LnN0eWxlLm9wYWNpdHkgPSAnMC41NSc7XHJcbiAgICAgICAgdC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdsaW5lLXRocm91Z2gnO1xyXG4gICAgfVxyXG5cclxuICAgIHQudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gICAgZy5hcHBlbmRDaGlsZCh0KTtcclxufVxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLSBwYXJlbnQgLyBzdWJ0cmVlIC8gY2hpbGRyZW4gLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZnVuY3Rpb24gYnVpbGRQYXJlbnRJbmRleEJ5SW5kZW50YXRpb24obm9kZXM6IE5vZGVbXSkge1xyXG4gICAgY29uc3Qgc3RhY2s6IEFycmF5PHsgZGVwdGg6IG51bWJlcjsgaW5kZXg6IG51bWJlciB9PiA9IFtdO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBkID0gbm9kZXNbaV0uZGVwdGg7XHJcblxyXG4gICAgICAgIGlmIChkID09PSAtMSkge1xyXG4gICAgICAgICAgICBub2Rlc1tpXS5wYXJlbnRJbmRleCA9IG51bGw7XHJcbiAgICAgICAgICAgIHN0YWNrLnB1c2goeyBkZXB0aDogZCwgaW5kZXg6IGkgfSk7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCAmJiBzdGFja1tzdGFjay5sZW5ndGggLSAxXS5kZXB0aCA+PSBkKSBzdGFjay5wb3AoKTtcclxuXHJcbiAgICAgICAgbGV0IHBhcmVudEluZGV4OiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuICAgICAgICBjb25zdCB0YXJnZXRQYXJlbnREZXB0aCA9IGQgLSAxO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBzID0gc3RhY2subGVuZ3RoIC0gMTsgcyA+PSAwOyBzLS0pIHtcclxuICAgICAgICAgICAgaWYgKHN0YWNrW3NdLmRlcHRoID09PSB0YXJnZXRQYXJlbnREZXB0aCkge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50SW5kZXggPSBzdGFja1tzXS5pbmRleDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBub2Rlc1tpXS5wYXJlbnRJbmRleCA9IHBhcmVudEluZGV4O1xyXG4gICAgICAgIHN0YWNrLnB1c2goeyBkZXB0aDogZCwgaW5kZXg6IGkgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbXB1dGVTdWJ0cmVlRW5kQnlJbmRlbnRhdGlvbihub2RlczogTm9kZVtdKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgZCA9IG5vZGVzW2ldLmRlcHRoO1xyXG4gICAgICAgIGNvbnN0IGZpbGUgPSBub2Rlc1tpXS50YXNrLmZpbGU/LnBhdGggPz8gJyc7XHJcblxyXG4gICAgICAgIGxldCBlbmQgPSBpO1xyXG4gICAgICAgIGZvciAobGV0IGogPSBpICsgMTsgaiA8IG5vZGVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVKID0gbm9kZXNbal0udGFzay5maWxlPy5wYXRoID8/ICcnO1xyXG4gICAgICAgICAgICBpZiAoZmlsZUogIT09IGZpbGUpIGJyZWFrO1xyXG4gICAgICAgICAgICBpZiAobm9kZXNbal0uZGVwdGggPD0gZCkgYnJlYWs7XHJcbiAgICAgICAgICAgIGVuZCA9IGo7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5vZGVzW2ldLnN1YnRyZWVFbmQgPSBlbmQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJ1aWxkQ2hpbGRyZW5NYXAobm9kZXM6IE5vZGVbXSkge1xyXG4gICAgY29uc3QgbWFwID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcltdPigpO1xyXG4gICAgZm9yIChjb25zdCBuIG9mIG5vZGVzKSB7XHJcbiAgICAgICAgaWYgKG4ucGFyZW50SW5kZXggPT0gbnVsbCkgY29udGludWU7XHJcbiAgICAgICAgY29uc3QgYXJyID0gbWFwLmdldChuLnBhcmVudEluZGV4KSA/PyBbXTtcclxuICAgICAgICBhcnIucHVzaChuLmluZGV4KTtcclxuICAgICAgICBtYXAuc2V0KG4ucGFyZW50SW5kZXgsIGFycik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWFwO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjb21wdXRlU3VidHJlZVNpemUobm9kZXM6IE5vZGVbXSwgY2hpbGRyZW5NYXA6IE1hcDxudW1iZXIsIG51bWJlcltdPikge1xyXG4gICAgY29uc3QgbWVtbyA9IG5ldyBNYXA8bnVtYmVyLCBudW1iZXI+KCk7XHJcblxyXG4gICAgY29uc3QgZGZzID0gKGk6IG51bWJlcik6IG51bWJlciA9PiB7XHJcbiAgICAgICAgaWYgKG1lbW8uaGFzKGkpKSByZXR1cm4gbWVtby5nZXQoaSkhO1xyXG4gICAgICAgIGNvbnN0IGtpZHMgPSBjaGlsZHJlbk1hcC5nZXQoaSkgPz8gW107XHJcbiAgICAgICAgbGV0IHNpemUgPSAxO1xyXG4gICAgICAgIGZvciAoY29uc3QgYyBvZiBraWRzKSBzaXplICs9IGRmcyhjKTtcclxuICAgICAgICBtZW1vLnNldChpLCBzaXplKTtcclxuICAgICAgICBub2Rlc1tpXS5zdWJ0cmVlU2l6ZSA9IHNpemU7XHJcbiAgICAgICAgcmV0dXJuIHNpemU7XHJcbiAgICB9O1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIGRmcyhpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY29tcHV0ZVN1YnRyZWVEb25lKG5vZGVzOiBOb2RlW10sIGNoaWxkcmVuTWFwOiBNYXA8bnVtYmVyLCBudW1iZXJbXT4pIHtcclxuICAgIGNvbnN0IG1lbW8gPSBuZXcgTWFwPG51bWJlciwgYm9vbGVhbj4oKTtcclxuXHJcbiAgICBjb25zdCBkZnMgPSAoaTogbnVtYmVyKTogYm9vbGVhbiA9PiB7XHJcbiAgICAgICAgaWYgKG1lbW8uaGFzKGkpKSByZXR1cm4gbWVtby5nZXQoaSkhO1xyXG5cclxuICAgICAgICBjb25zdCBzZWxmRG9uZSA9ICEhbm9kZXNbaV0udGFzay5jb21wbGV0ZWQ7XHJcbiAgICAgICAgY29uc3Qga2lkcyA9IGNoaWxkcmVuTWFwLmdldChpKSA/PyBbXTtcclxuXHJcbiAgICAgICAgbGV0IG9rID0gc2VsZkRvbmU7XHJcbiAgICAgICAgZm9yIChjb25zdCBjIG9mIGtpZHMpIG9rID0gb2sgJiYgZGZzKGMpO1xyXG5cclxuICAgICAgICBtZW1vLnNldChpLCBvayk7XHJcbiAgICAgICAgbm9kZXNbaV0uc3VidHJlZURvbmUgPSBvaztcclxuICAgICAgICByZXR1cm4gb2s7XHJcbiAgICB9O1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIGRmcyhpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY29tcHV0ZVN1YnRyZWVNYXhEZXB0aChub2RlczogTm9kZVtdLCBjaGlsZHJlbk1hcDogTWFwPG51bWJlciwgbnVtYmVyW10+KSB7XHJcbiAgICBjb25zdCBtZW1vID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcj4oKTtcclxuXHJcbiAgICBjb25zdCBkZnMgPSAoaTogbnVtYmVyKTogbnVtYmVyID0+IHtcclxuICAgICAgICBpZiAobWVtby5oYXMoaSkpIHJldHVybiBtZW1vLmdldChpKSE7XHJcbiAgICAgICAgY29uc3Qga2lkcyA9IGNoaWxkcmVuTWFwLmdldChpKSA/PyBbXTtcclxuICAgICAgICBsZXQgbWQgPSBub2Rlc1tpXS5kZXB0aDtcclxuICAgICAgICBmb3IgKGNvbnN0IGMgb2Yga2lkcykgbWQgPSBNYXRoLm1heChtZCwgZGZzKGMpKTtcclxuICAgICAgICBtZW1vLnNldChpLCBtZCk7XHJcbiAgICAgICAgbm9kZXNbaV0uc3VidHJlZU1heERlcHRoID0gbWQ7XHJcbiAgICAgICAgcmV0dXJuIG1kO1xyXG4gICAgfTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSBkZnMoaSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiByb290IGNoaWxkcmVuIFx1NURFNlx1NTNGM1x1NUU3M1x1ODg2MVx1NTIwNlx1OTE0RFx1RkYwQ1x1NTQwRVx1NEVFM1x1N0VFN1x1NjI3Rlx1NzIzNlx1NEZBN1xyXG4gKi9cclxuZnVuY3Rpb24gYXNzaWduTWluZG1hcFNpZGVzKG5vZGVzOiBOb2RlW10sIGNoaWxkcmVuTWFwOiBNYXA8bnVtYmVyLCBudW1iZXJbXT4pIHtcclxuICAgIG5vZGVzWzBdLnNpZGUgPSAwO1xyXG5cclxuICAgIGNvbnN0IHJvb3RLaWRzID0gY2hpbGRyZW5NYXAuZ2V0KDApID8/IFtdO1xyXG4gICAgbGV0IGxlZnRXID0gMDtcclxuICAgIGxldCByaWdodFcgPSAwO1xyXG5cclxuICAgIGZvciAoY29uc3Qga2lkIG9mIHJvb3RLaWRzKSB7XHJcbiAgICAgICAgY29uc3QgdyA9IG5vZGVzW2tpZF0uc3VidHJlZVNpemUgfHwgMTtcclxuICAgICAgICBjb25zdCBzaWRlOiBTaWRlID0gbGVmdFcgPD0gcmlnaHRXID8gLTEgOiAxO1xyXG5cclxuICAgICAgICBub2Rlc1traWRdLnNpZGUgPSBzaWRlO1xyXG4gICAgICAgIGlmIChzaWRlID09PSAtMSkgbGVmdFcgKz0gdztcclxuICAgICAgICBlbHNlIHJpZ2h0VyArPSB3O1xyXG5cclxuICAgICAgICBwcm9wYWdhdGUoa2lkLCBzaWRlKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwcm9wYWdhdGUoaTogbnVtYmVyLCBzaWRlOiBTaWRlKSB7XHJcbiAgICAgICAgY29uc3Qga2lkcyA9IGNoaWxkcmVuTWFwLmdldChpKSA/PyBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IGMgb2Yga2lkcykge1xyXG4gICAgICAgICAgICBub2Rlc1tjXS5zaWRlID0gc2lkZTtcclxuICAgICAgICAgICAgcHJvcGFnYXRlKGMsIHNpZGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCAiLy8gPT09IEZJTEU6IHVpL3dpZGdldHMvQ2hhcnRSZW5kZXJlckZhY3RvcnkudHMgPT09XG5pbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBCYXJDaGFydFJlbmRlcmVyIH0gZnJvbSAnLi4vcmVuZGVyZXJzL0JhckNoYXJ0UmVuZGVyZXInO1xuaW1wb3J0IHsgTGluZUNoYXJ0UmVuZGVyZXIgfSBmcm9tICcuLi9yZW5kZXJlcnMvTGluZUNoYXJ0UmVuZGVyZXInO1xuaW1wb3J0IHsgU2NhdHRlckNoYXJ0UmVuZGVyZXIgfSBmcm9tICcuLi9yZW5kZXJlcnMvU2NhdHRlckNoYXJ0UmVuZGVyZXInO1xuaW1wb3J0IHsgUmFkYXJDaGFydFJlbmRlcmVyIH0gZnJvbSAnLi4vcmVuZGVyZXJzL1JhZGFyQ2hhcnRSZW5kZXJlcic7XG5pbXBvcnQgeyBIZWF0bWFwQ2hhcnRSZW5kZXJlciB9IGZyb20gJy4uL3JlbmRlcmVycy9IZWF0bWFwQ2hhcnRSZW5kZXJlcic7XG5pbXBvcnQgeyBQaWVDaGFydFJlbmRlcmVyIH0gZnJvbSAnLi4vcmVuZGVyZXJzL1BpZUNoYXJ0UmVuZGVyZXInO1xuaW1wb3J0IHsgQnViYmxlQ2hhcnRSZW5kZXJlciB9IGZyb20gJy4uL3JlbmRlcmVycy9CdWJibGVDaGFydFJlbmRlcmVyJztcbmltcG9ydCB7IEdpdExpbmVDaGFydFJlbmRlcmVyIH0gZnJvbSAnLi4vcmVuZGVyZXJzL0dpdExpbmVDaGFydFJlbmRlcmVyJztcblxuZXhwb3J0IGNsYXNzIENoYXJ0UmVuZGVyZXJGYWN0b3J5IHtcbiAgICBwcml2YXRlIGJhclJlbmRlcmVyID0gbmV3IEJhckNoYXJ0UmVuZGVyZXIoKTtcbiAgICBwcml2YXRlIGxpbmVSZW5kZXJlciA9IG5ldyBMaW5lQ2hhcnRSZW5kZXJlcigpO1xuICAgIHByaXZhdGUgc2NhdHRlclJlbmRlcmVyID0gbmV3IFNjYXR0ZXJDaGFydFJlbmRlcmVyKCk7XG4gICAgcHJpdmF0ZSByYWRhclJlbmRlcmVyID0gbmV3IFJhZGFyQ2hhcnRSZW5kZXJlcigpO1xuICAgIHByaXZhdGUgaGVhdG1hcFJlbmRlcmVyID0gbmV3IEhlYXRtYXBDaGFydFJlbmRlcmVyKCk7XG4gICAgcHJpdmF0ZSBwaWVSZW5kZXJlciA9IG5ldyBQaWVDaGFydFJlbmRlcmVyKCk7XG4gICAgcHJpdmF0ZSBidWJibGVSZW5kZXJlciA9IG5ldyBCdWJibGVDaGFydFJlbmRlcmVyKCk7XG4gICAgcHJpdmF0ZSBnaXRMaW5lUmVuZGVyZXI6IEdpdExpbmVDaGFydFJlbmRlcmVyO1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgYXBwOiBBcHApIHtcbiAgICAgICAgdGhpcy5naXRMaW5lUmVuZGVyZXIgPSBuZXcgR2l0TGluZUNoYXJ0UmVuZGVyZXIoYXBwKTtcbiAgICB9XG5cbiAgICBnZXRCYXJSZW5kZXJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFyUmVuZGVyZXI7XG4gICAgfVxuXG4gICAgZ2V0TGluZVJlbmRlcmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5saW5lUmVuZGVyZXI7XG4gICAgfVxuXG4gICAgZ2V0U2NhdHRlclJlbmRlcmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2F0dGVyUmVuZGVyZXI7XG4gICAgfVxuXG4gICAgZ2V0UmFkYXJSZW5kZXJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFkYXJSZW5kZXJlcjtcbiAgICB9XG5cbiAgICBnZXRIZWF0bWFwUmVuZGVyZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhlYXRtYXBSZW5kZXJlcjtcbiAgICB9XG5cbiAgICBnZXRQaWVSZW5kZXJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGllUmVuZGVyZXI7XG4gICAgfVxuXG4gICAgZ2V0QnViYmxlUmVuZGVyZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1YmJsZVJlbmRlcmVyO1xuICAgIH1cblxuICAgIGdldEdpdExpbmVSZW5kZXJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2l0TGluZVJlbmRlcmVyO1xuICAgIH1cbn0iLCAiLy8gPT09IEZJTEU6IHVpL3dpZGdldHMvTGlzdFdpZGdldC50cyA9PT1cclxuaW1wb3J0IHsgQXBwLCBURmlsZSwgZ2V0QWxsVGFncyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQmFzZVdpZGdldCB9IGZyb20gJy4vQmFzZVdpZGdldCc7XHJcbmltcG9ydCB7IExpc3RXaWRnZXQgYXMgSUxpc3RXaWRnZXQgfSBmcm9tICcuLi8uLi9jb3JlL2NyX2RlZl90eXBlX21haW4nO1xyXG5cclxuZXhwb3J0IGNsYXNzIExpc3RXaWRnZXQgZXh0ZW5kcyBCYXNlV2lkZ2V0IHtcclxuICAgIHByaXZhdGUgYXBwOiBBcHA7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgd2lkZ2V0OiBJTGlzdFdpZGdldCwgXHJcbiAgICAgICAgYXBwOiBBcHAsXHJcbiAgICAgICAgb25EZWxldGU6ICgpID0+IHZvaWQsIFxyXG4gICAgICAgIG9uRWRpdDogKCkgPT4gdm9pZCxcclxuICAgICAgICBvbk1vdmU6ICgpID0+IHZvaWQgLy8gW1x1NjVCMFx1NTg5RV1cclxuICAgICkge1xyXG4gICAgICAgIHN1cGVyKHdpZGdldCwgb25EZWxldGUsIG9uRWRpdCwgb25Nb3ZlKTtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgcmVuZGVyQ29udGVudCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAvLyAuLi4gKFx1NEZERFx1NjMwMVx1NTM5Rlx1NjcwOVx1NUI5RVx1NzNCMFx1NEUwRFx1NTNEOClcclxuICAgICAgICBjb25zdCBsaXN0V2lkZ2V0ID0gdGhpcy53aWRnZXQgYXMgSUxpc3RXaWRnZXQ7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5hZGRDbGFzcygnZGwtbGlzdC13aWRnZXQtY29udGFpbmVyJyk7XHJcblxyXG4gICAgICAgIC8vIDEuIEZpbHRlciBGaWxlc1xyXG4gICAgICAgIGxldCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuXHJcbiAgICAgICAgaWYgKGxpc3RXaWRnZXQuZm9sZGVyUGF0aCAmJiBsaXN0V2lkZ2V0LmZvbGRlclBhdGggIT09ICcvJykge1xyXG4gICAgICAgICAgICBmaWxlcyA9IGZpbGVzLmZpbHRlcihmID0+IGYucGF0aC5zdGFydHNXaXRoKGxpc3RXaWRnZXQuZm9sZGVyUGF0aCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGxpc3RXaWRnZXQuZmlsdGVyVGFncyAmJiBsaXN0V2lkZ2V0LmZpbHRlclRhZ3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmaWxlcyA9IGZpbGVzLmZpbHRlcihmID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YWdzID0gZ2V0QWxsVGFncyhjYWNoZSkgfHwgW107XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdFdpZGdldC5maWx0ZXJUYWdzLnNvbWUodGFnID0+IHRhZ3MuaW5jbHVkZXModGFnKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gMi4gU29ydCBGaWxlc1xyXG4gICAgICAgIGZpbGVzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgbGV0IHZhbEE6IGFueSwgdmFsQjogYW55O1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGxpc3RXaWRnZXQuc29ydEJ5KSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdjcmVhdGVkJzpcclxuICAgICAgICAgICAgICAgICAgICB2YWxBID0gYS5zdGF0LmN0aW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbEIgPSBiLnN0YXQuY3RpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdtb2RpZmllZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsQSA9IGEuc3RhdC5tdGltZTtcclxuICAgICAgICAgICAgICAgICAgICB2YWxCID0gYi5zdGF0Lm10aW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbmFtZSc6XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHZhbEEgPSBhLmJhc2VuYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbEIgPSBiLmJhc2VuYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobGlzdFdpZGdldC5zb3J0T3JkZXIgPT09ICdkZXNjJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbEEgPiB2YWxCID8gLTEgOiAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB2YWxBID4gdmFsQiA/IDEgOiAtMTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gMy4gTGltaXRcclxuICAgICAgICBpZiAobGlzdFdpZGdldC5saW1pdCA+IDApIHtcclxuICAgICAgICAgICAgZmlsZXMgPSBmaWxlcy5zbGljZSgwLCBsaXN0V2lkZ2V0LmxpbWl0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIDQuIFJlbmRlclxyXG4gICAgICAgIGlmIChmaWxlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgdGV4dDogJ1x1NjcyQVx1NjI3RVx1NTIzMFx1N0IyNlx1NTQwOFx1Njc2MVx1NEVGNlx1NzY4NFx1N0IxNFx1OEJCMCcsIGNsczogJ2RsLW5vLWRhdGEnIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB1bCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCd1bCcsIHsgY2xzOiAnZGwtbGlzdC1pdGVtcycgfSk7XHJcblxyXG4gICAgICAgIGZpbGVzLmZvckVhY2goZmlsZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpID0gdWwuY3JlYXRlRWwoJ2xpJywgeyBjbHM6ICdkbC1saXN0LWl0ZW0nIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gSWNvblxyXG4gICAgICAgICAgICBjb25zdCBpY29uU3BhbiA9IGxpLmNyZWF0ZVNwYW4oJ2RsLWxpc3QtaXRlbS1pY29uJyk7XHJcbiAgICAgICAgICAgIGljb25TcGFuLnNldFRleHQoJ1x1RDgzRFx1RENDNCcpO1xyXG5cclxuICAgICAgICAgICAgLy8gVGV4dCBpbmZvXHJcbiAgICAgICAgICAgIGNvbnN0IGluZm9EaXYgPSBsaS5jcmVhdGVEaXYoJ2RsLWxpc3QtaXRlbS1pbmZvJyk7XHJcbiAgICAgICAgICAgIGluZm9EaXYuY3JlYXRlRGl2KHsgY2xzOiAnZGwtbGlzdC1pdGVtLXRpdGxlJywgdGV4dDogZmlsZS5iYXNlbmFtZSB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBuZXcgRGF0ZShmaWxlLnN0YXQubXRpbWUpLnRvTG9jYWxlRGF0ZVN0cmluZygnemgtQ04nKTtcclxuICAgICAgICAgICAgY29uc3QgbWV0YVRleHQgPSBgJHtkYXRlU3RyfSBcdTAwQjcgJHtmaWxlLnBhcmVudD8ubmFtZSB8fCAnXHU2ODM5XHU3NkVFXHU1RjU1J31gO1xyXG4gICAgICAgICAgICBpbmZvRGl2LmNyZWF0ZURpdih7IGNsczogJ2RsLWxpc3QtaXRlbS1tZXRhJywgdGV4dDogbWV0YVRleHQgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBDbGljayBpbnRlcmFjdGlvblxyXG4gICAgICAgICAgICBsaS5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpLm9wZW5GaWxlKGZpbGUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwgIi8vID09PSBGSUxFOiB1aS93aWRnZXRzL1RvZG9XaWRnZXQudHMgPT09XHJcbmltcG9ydCB7IEFwcCwgc2V0SWNvbiwgTWVudSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQmFzZVdpZGdldCB9IGZyb20gJy4vQmFzZVdpZGdldCc7XHJcbmltcG9ydCB7IFRvZG9XaWRnZXQgYXMgSVRvZG9XaWRnZXQsIFRhc2tJdGVtIH0gZnJvbSAnLi4vLi4vY29yZS90eXBlcyc7XHJcbmltcG9ydCB7IFRhc2tTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vY29yZS9zZXJ2aWNlcy9UYXNrU2VydmljZSc7XHJcbmltcG9ydCB7IFNldHRpbmdzTWFuYWdlciB9IGZyb20gJy4uLy4uL2NvcmUvU2V0dGluZ3NNYW5hZ2VyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUb2RvV2lkZ2V0IGV4dGVuZHMgQmFzZVdpZGdldCB7XHJcbiAgICBwcml2YXRlIGFwcDogQXBwO1xyXG4gICAgcHJpdmF0ZSB0YXNrU2VydmljZTogVGFza1NlcnZpY2U7XHJcbiAgICBwcml2YXRlIGl0ZW1zOiBUYXNrSXRlbVtdID0gW107XHJcbiAgICBwcml2YXRlIHNldHRpbmdzTWFuYWdlcjogU2V0dGluZ3NNYW5hZ2VyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHdpZGdldDogSVRvZG9XaWRnZXQsIFxyXG4gICAgICAgIGFwcDogQXBwLFxyXG4gICAgICAgIHNldHRpbmdzTWFuYWdlcjogU2V0dGluZ3NNYW5hZ2VyLCBcclxuICAgICAgICBvbkRlbGV0ZTogKCkgPT4gdm9pZCwgXHJcbiAgICAgICAgb25FZGl0OiAoKSA9PiB2b2lkLFxyXG4gICAgICAgIG9uTW92ZTogKCkgPT4gdm9pZFxyXG4gICAgKSB7XHJcbiAgICAgICAgc3VwZXIod2lkZ2V0LCBvbkRlbGV0ZSwgb25FZGl0LCBvbk1vdmUpO1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyID0gc2V0dGluZ3NNYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2UgPSBuZXcgVGFza1NlcnZpY2UoYXBwLCBzZXR0aW5nc01hbmFnZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCByZW5kZXJIZWFkZXIoKTogdm9pZCB7IHN1cGVyLnJlbmRlckhlYWRlcigpOyB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHJlbmRlckNvbnRlbnQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5hZGRDbGFzcygnZGwtdG9kby13aWRnZXQtY29udGFpbmVyJyk7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwuYWRkQ2xhc3MoJ2lzLWxvYWRpbmcnKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgdyA9IHRoaXMud2lkZ2V0IGFzIElUb2RvV2lkZ2V0O1xyXG4gICAgICAgICAgICB0aGlzLml0ZW1zID0gYXdhaXQgdGhpcy50YXNrU2VydmljZS5nZXRUYXNrcyh3KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGdsb2JhbFNldHRpbmdzID0gdGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZ3MoKS50YXNrTWFuYWdlbWVudDtcclxuICAgICAgICAgICAgaWYgKGdsb2JhbFNldHRpbmdzLmF1dG9BcmNoaXZlICYmIHRoaXMuaXRlbXMuc29tZSh0ID0+IHQuY29tcGxldGVkKSkge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50YXNrU2VydmljZS5hcmNoaXZlQ29tcGxldGVkVGFza3Modyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcyA9IGF3YWl0IHRoaXMudGFza1NlcnZpY2UuZ2V0VGFza3Modyk7IFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyTGlzdCh3KTtcclxuICAgICAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckxpc3Qodyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUYXNrIExvYWQgRXJyb3JcIiwgZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IHRleHQ6ICdcdTUyQTBcdThGN0RcdTRFRkJcdTUyQTFcdTU5MzFcdThEMjUnLCBjbHM6ICdkbC1lcnJvci1tc2cnIH0pO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsLnJlbW92ZUNsYXNzKCdpcy1sb2FkaW5nJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyTGlzdCh3OiBJVG9kb1dpZGdldCkge1xyXG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7IFxyXG4gICAgICAgIGlmICh0aGlzLml0ZW1zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyB0ZXh0OiAnXHU2NjgyXHU2NUUwXHU1Rjg1XHU1MjlFXHU0RUZCXHU1MkExJywgY2xzOiAnZGwtbm8tZGF0YScgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGxpc3RDb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoJ2RsLXRvZG8tbGlzdCcpO1xyXG5cclxuICAgICAgICBpZiAody5ncm91cEJ5ID09PSAnZmlsZScgJiYgdy5zb3VyY2VUeXBlICE9PSAnZmlsZScpIHtcclxuICAgICAgICAgICAgY29uc3QgZ3JvdXBzID0gbmV3IE1hcDxzdHJpbmcsIFRhc2tJdGVtW10+KCk7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaCh0ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHQuZmlsZS5iYXNlbmFtZTtcclxuICAgICAgICAgICAgICAgIGlmICghZ3JvdXBzLmhhcyhrZXkpKSBncm91cHMuc2V0KGtleSwgW10pO1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBzLmdldChrZXkpIS5wdXNoKHQpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGdyb3Vwcy5mb3JFYWNoKCh0YXNrcywgZmlsZU5hbWUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwSGVhZGVyID0gbGlzdENvbnRhaW5lci5jcmVhdGVEaXYoJ2RsLXRvZG8tZ3JvdXAtaGVhZGVyJyk7XHJcbiAgICAgICAgICAgICAgICBncm91cEhlYWRlci5jcmVhdGVTcGFuKHsgdGV4dDogZmlsZU5hbWUsIHN0eWxlOiAnZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMC44NWVtOyBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7JyB9KTtcclxuICAgICAgICAgICAgICAgIGdyb3VwSGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgICgke3Rhc2tzLmxlbmd0aH0pYCwgc3R5bGU6ICdmb250LXNpemU6IDAuOGVtOyBvcGFjaXR5OiAwLjc7JyB9KTtcclxuICAgICAgICAgICAgICAgIHRhc2tzLmZvckVhY2godCA9PiB0aGlzLnJlbmRlclRhc2tJdGVtKGxpc3RDb250YWluZXIsIHQsIHcpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKHQgPT4gdGhpcy5yZW5kZXJUYXNrSXRlbShsaXN0Q29udGFpbmVyLCB0LCB3KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyVGFza0l0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgaXRlbTogVGFza0l0ZW0sIGNvbmZpZzogSVRvZG9XaWRnZXQpIHtcclxuICAgICAgICBjb25zdCByb3cgPSBjb250YWluZXIuY3JlYXRlRGl2KCdkbC10b2RvLWl0ZW0nKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjaGVja2JveCA9IHJvdy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XHJcbiAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IGl0ZW0uY29tcGxldGVkO1xyXG4gICAgICAgIGNoZWNrYm94Lm9uY2xpY2sgPSBhc3luYyAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBpdGVtLmNvbXBsZXRlZCA9ICFpdGVtLmNvbXBsZXRlZDtcclxuICAgICAgICAgICAgdGV4dFNwYW4udG9nZ2xlQ2xhc3MoJ2lzLWNvbXBsZXRlZCcsIGl0ZW0uY29tcGxldGVkKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy50YXNrU2VydmljZS50b2dnbGVUYXNrKGl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZ2xvYmFsU2V0dGluZ3MgPSB0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5ncygpLnRhc2tNYW5hZ2VtZW50O1xyXG4gICAgICAgICAgICBpZiAoaXRlbS5jb21wbGV0ZWQgJiYgZ2xvYmFsU2V0dGluZ3MuYXV0b0FyY2hpdmUpIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudGFza1NlcnZpY2UuYXJjaGl2ZUNvbXBsZXRlZFRhc2tzKGNvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDb250ZW50KCk7XHJcbiAgICAgICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgY29udGVudERpdiA9IHJvdy5jcmVhdGVEaXYoeyBjbHM6ICdkbC10b2RvLWNvbnRlbnQnIH0pO1xyXG4gICAgICAgIGNvbnRlbnREaXYuc3R5bGUuZmxleCA9ICcxJztcclxuICAgICAgICBjb250ZW50RGl2LnN0eWxlLm1hcmdpbkxlZnQgPSAnOHB4JztcclxuICAgICAgICBjb250ZW50RGl2LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgY29udGVudERpdi5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbic7XHJcblxyXG4gICAgICAgIGNvbnN0IG1haW5MaW5lID0gY29udGVudERpdi5jcmVhdGVEaXYoeyBzdHlsZTogJ2Rpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogNnB4OycgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gW1x1NEZFRVx1NTkwRF0gXHU3OUZCXHU5NjY0XHU0RTg2XHU1MzlGXHU2NzA5XHU3Njg0IGlzVGFza05vdGVTdWJ0YXNrIFx1NTZGRVx1NjgwN1x1OTAzQlx1OEY5MVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHRleHRTcGFuID0gbWFpbkxpbmUuY3JlYXRlU3Bhbih7IHRleHQ6IGl0ZW0udGV4dCwgY2xzOiAnZGwtdG9kby10ZXh0JyB9KTtcclxuICAgICAgICBpZiAoaXRlbS5jb21wbGV0ZWQpIHRleHRTcGFuLmFkZENsYXNzKCdpcy1jb21wbGV0ZWQnKTtcclxuXHJcbiAgICAgICAgaWYgKGl0ZW0ucHJpb3JpdHkpIHtcclxuICAgICAgICAgICAgY29uc3QgYmFkZ2UgPSBtYWluTGluZS5jcmVhdGVTcGFuKCdkbC1wcmlvcml0eS1iYWRnZScpO1xyXG4gICAgICAgICAgICBiYWRnZS5zZXRUZXh0KGl0ZW0ucHJpb3JpdHkudG9VcHBlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIGJhZGdlLnNldEF0dHJpYnV0ZSgnZGF0YS1wcmlvcml0eScsIGl0ZW0ucHJpb3JpdHkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbWV0YUxpbmUgPSBjb250ZW50RGl2LmNyZWF0ZURpdignZGwtdG9kby1tZXRhLWxpbmUnKTtcclxuICAgICAgICBjb25zdCBtZXRhUGFydHMgPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoaXRlbS5kdWVEYXRlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzT3ZlcmR1ZSA9IG5ldyBEYXRlKGl0ZW0uZHVlRGF0ZSkgPCBuZXcgRGF0ZSgpICYmICFpdGVtLmNvbXBsZXRlZDtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZVNwYW4gPSBgPHNwYW4gY2xhc3M9XCIke2lzT3ZlcmR1ZSA/ICdkbC1kYXRlLW92ZXJkdWUnIDogJyd9XCI+XHVEODNEXHVEQ0M1ICR7aXRlbS5kdWVEYXRlfTwvc3Bhbj5gO1xyXG4gICAgICAgICAgICBtZXRhUGFydHMucHVzaChkYXRlU3Bhbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb25maWcuZ3JvdXBCeSAhPT0gJ2ZpbGUnKSB7XHJcbiAgICAgICAgICAgIG1ldGFQYXJ0cy5wdXNoKGBcdUQ4M0RcdURDQzQgJHtpdGVtLmZpbGUuYmFzZW5hbWV9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1ldGFMaW5lLmlubmVySFRNTCA9IG1ldGFQYXJ0cy5qb2luKCcgXHUwMEI3ICcpO1xyXG5cclxuICAgICAgICBjb25zdCBsaW5rQnRuID0gcm93LmNyZWF0ZVNwYW4oJ2RsLWljb24tYnRuIGRsLXRvZG8tbGluaycpO1xyXG4gICAgICAgIHNldEljb24obGlua0J0biwgJ2V4dGVybmFsLWxpbmsnKTtcclxuICAgICAgICBsaW5rQnRuLnN0eWxlLm9wYWNpdHkgPSAnMCc7XHJcbiAgICAgICAgcm93Lm9ubW91c2VlbnRlciA9ICgpID0+IGxpbmtCdG4uc3R5bGUub3BhY2l0eSA9ICcxJztcclxuICAgICAgICByb3cub25tb3VzZWxlYXZlID0gKCkgPT4gbGlua0J0bi5zdHlsZS5vcGFjaXR5ID0gJzAnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxpbmtCdG4ub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKS5vcGVuRmlsZShpdGVtLmZpbGUsIHsgZVN0YXRlOiB7IGxpbmU6IGl0ZW0ubGluZSB9IH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IHVpL3dpZGdldHMvTWFya2Rvd25XaWRnZXQudHMgPT09XHJcbmltcG9ydCB7IEFwcCwgTWFya2Rvd25SZW5kZXJlciwgQ29tcG9uZW50LCBURmlsZSwgTm90aWNlLCBzZXRJY29uLCBNZW51IH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBCYXNlV2lkZ2V0IH0gZnJvbSAnLi9CYXNlV2lkZ2V0JztcclxuaW1wb3J0IHsgTWFya2Rvd25XaWRnZXQgYXMgSU1hcmtkb3duV2lkZ2V0IH0gZnJvbSAnLi4vLi4vY29yZS90eXBlcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgTWFya2Rvd25XaWRnZXQgZXh0ZW5kcyBCYXNlV2lkZ2V0IHtcclxuICAgIHByaXZhdGUgYXBwOiBBcHA7XHJcbiAgICBwcml2YXRlIGNvbXBvbmVudDogQ29tcG9uZW50O1xyXG4gICAgcHJpdmF0ZSBmaWxlOiBURmlsZSB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHdpZGdldDogSU1hcmtkb3duV2lkZ2V0LCBcclxuICAgICAgICBhcHA6IEFwcCxcclxuICAgICAgICBjb21wb25lbnQ6IENvbXBvbmVudCxcclxuICAgICAgICBvbkRlbGV0ZTogKCkgPT4gdm9pZCwgXHJcbiAgICAgICAgb25FZGl0OiAoKSA9PiB2b2lkLFxyXG4gICAgICAgIG9uTW92ZTogKCkgPT4gdm9pZFxyXG4gICAgKSB7XHJcbiAgICAgICAgc3VwZXIod2lkZ2V0LCBvbkRlbGV0ZSwgb25FZGl0LCBvbk1vdmUpO1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gY29tcG9uZW50O1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJGaWxlV2F0Y2hlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVnaXN0ZXJGaWxlV2F0Y2hlcigpIHtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudC5yZWdpc3RlckV2ZW50KFxyXG4gICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5vbignbW9kaWZ5JywgKGZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHcgPSB0aGlzLndpZGdldCBhcyBJTWFya2Rvd25XaWRnZXQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUucGF0aCA9PT0gdy5maWxlUGF0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3Lm1vZGUgPT09ICdwcmV2aWV3Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNvbnRlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNvbXBvbmVudC5yZWdpc3RlckV2ZW50KFxyXG4gICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5vbigncmVuYW1lJywgKGZpbGUsIG9sZFBhdGgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHcgPSB0aGlzLndpZGdldCBhcyBJTWFya2Rvd25XaWRnZXQ7XHJcbiAgICAgICAgICAgICAgICBpZiAob2xkUGF0aCA9PT0gdy5maWxlUGF0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHcuZmlsZVBhdGggPSBmaWxlLnBhdGg7IFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ29udGVudCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlbmRlckhlYWRlcigpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBoZWFkZXIgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVEaXYoJ2RsLXdpZGdldC1oZWFkZXInKTtcclxuICAgICAgICBoZWFkZXIuY3JlYXRlU3Bhbih7IGNsczogJ2RsLXdpZGdldC10aXRsZScsIHRleHQ6IHRoaXMud2lkZ2V0LnRpdGxlIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjb250cm9scyA9IGhlYWRlci5jcmVhdGVEaXYoJ2RsLXdpZGdldC1jb250cm9scycpO1xyXG5cclxuICAgICAgICBjb25zdCBvcGVuQnRuID0gY29udHJvbHMuY3JlYXRlU3BhbignZGwtaWNvbi1idG4nKTtcclxuICAgICAgICBzZXRJY29uKG9wZW5CdG4sICdleHRlcm5hbC1saW5rJyk7XHJcbiAgICAgICAgb3BlbkJ0bi50aXRsZSA9ICdcdTYyNTNcdTVGMDBcdTdCMTRcdThCQjAnO1xyXG4gICAgICAgIG9wZW5CdG4ub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbGUpIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKS5vcGVuRmlsZSh0aGlzLmZpbGUpO1xyXG4gICAgICAgICAgICBlbHNlIG5ldyBOb3RpY2UoJ1x1NjcyQVx1NjI3RVx1NTIzMFx1NjU4N1x1NEVGNicpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHRvZ2dsZUJ0biA9IGNvbnRyb2xzLmNyZWF0ZVNwYW4oJ2RsLWljb24tYnRuJyk7XHJcbiAgICAgICAgY29uc3QgaXNFZGl0ID0gKHRoaXMud2lkZ2V0IGFzIElNYXJrZG93bldpZGdldCkubW9kZSA9PT0gJ2VkaXQnO1xyXG4gICAgICAgIHNldEljb24odG9nZ2xlQnRuLCBpc0VkaXQgPyAnZXllJyA6ICdwZW5jaWwnKTtcclxuICAgICAgICB0b2dnbGVCdG4udGl0bGUgPSBpc0VkaXQgPyAnXHU1MjA3XHU2MzYyXHU5ODg0XHU4OUM4JyA6ICdcdTVGRUJcdTkwMUZcdTdGMTZcdThGOTEnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRvZ2dsZUJ0bi5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgY29uc3QgdyA9IHRoaXMud2lkZ2V0IGFzIElNYXJrZG93bldpZGdldDtcclxuICAgICAgICAgICAgdy5tb2RlID0gdy5tb2RlID09PSAnZWRpdCcgPyAncHJldmlldycgOiAnZWRpdCc7XHJcbiAgICAgICAgICAgIHNldEljb24odG9nZ2xlQnRuLCB3Lm1vZGUgPT09ICdlZGl0JyA/ICdleWUnIDogJ3BlbmNpbCcpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckNvbnRlbnQoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBtZW51QnRuID0gY29udHJvbHMuY3JlYXRlU3BhbignZGwtaWNvbi1idG4nKTtcclxuICAgICAgICBzZXRJY29uKG1lbnVCdG4sICdtb3JlLXZlcnRpY2FsJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbWVudUJ0bi5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XHJcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4gaXRlbS5zZXRUaXRsZSgnXHU5MTREXHU3RjZFJykuc2V0SWNvbignc2V0dGluZ3MnKS5vbkNsaWNrKCgpID0+IHRoaXMub25FZGl0KCkpKTtcclxuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiBpdGVtLnNldFRpdGxlKCdcdTc5RkJcdTUyQTgnKS5zZXRJY29uKCdhcnJvdy1yaWdodC1jaXJjbGUnKS5vbkNsaWNrKCgpID0+IHRoaXMub25Nb3ZlKCkpKTtcclxuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiBpdGVtLnNldFRpdGxlKCdcdTUyMjBcdTk2NjQnKS5zZXRJY29uKCd0cmFzaCcpLnNldFdhcm5pbmcodHJ1ZSkub25DbGljaygoKSA9PiB0aGlzLm9uRGVsZXRlKCkpKTtcclxuICAgICAgICAgICAgbWVudS5zaG93QXRQb3NpdGlvbih7IHg6IGUuY2xpZW50WCwgeTogZS5jbGllbnRZIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHJlbmRlckNvbnRlbnQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgLy8gW0ZpeCA0XSBcdTY4MzhcdTVGQzNcdTRGRUVcdTU5MERcdUZGMUFcdTc4NkVcdTRGRERcdTVCQjlcdTU2NjhcdTZFMDVcdTdBN0FcdUZGMENcdTk2MzJcdTZCNjJcdTkxQ0RcdTU5MERcdTZFMzJcdTY3RDNcclxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIHRoaXMuY29udGVudEVsLmFkZENsYXNzKCdkbC1tYXJrZG93bi13aWRnZXQtY29udGFpbmVyJyk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1kV2lkZ2V0ID0gdGhpcy53aWRnZXQgYXMgSU1hcmtkb3duV2lkZ2V0O1xyXG4gICAgICAgIGlmICghbWRXaWRnZXQuZmlsZVBhdGgpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgdGV4dDogJ1x1NjcyQVx1OTAwOVx1NjJFOVx1NjU4N1x1NEVGNicsIGNsczogJ2RsLW5vLWRhdGEnIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBhYnN0cmFjdEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobWRXaWRnZXQuZmlsZVBhdGgpO1xyXG4gICAgICAgIGlmICghKGFic3RyYWN0RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyB0ZXh0OiAnXHU2NTg3XHU0RUY2XHU0RTBEXHU1QjU4XHU1NzI4JywgY2xzOiAnZGwtZXJyb3ItbXNnJyB9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmZpbGUgPSBhYnN0cmFjdEZpbGU7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKHRoaXMuZmlsZSk7XHJcblxyXG4gICAgICAgIGlmIChtZFdpZGdldC5tb2RlID09PSAncHJldmlldycpIHtcclxuICAgICAgICAgICAgY29uc3QgcHJldmlld0NvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdignZGwtbWFya2Rvd24tcHJldmlldyBtYXJrZG93bi1wcmV2aWV3LXZpZXcnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAsXHJcbiAgICAgICAgICAgICAgICBjb250ZW50LFxyXG4gICAgICAgICAgICAgICAgcHJldmlld0NvbnRhaW5lcixcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlsZS5wYXRoLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KCdkbC1tYXJrZG93bi1lZGl0b3Itd3JhcHBlcicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgaW5mbyA9IHdyYXBwZXIuY3JlYXRlRGl2KHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAnXHVEODNEXHVEQ0ExIFx1NUZFQlx1OTAxRlx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRiAoXHU3RUFGXHU2NTg3XHU2NzJDKScsXHJcbiAgICAgICAgICAgICAgICBzdHlsZTogJ2ZvbnQtc2l6ZTogMC44ZW07IGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsgcGFkZGluZzogNXB4IDEwcHg7IGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTsnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdGV4dGFyZWEgPSB3cmFwcGVyLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHsgXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdkbC1tYXJrZG93bi1lZGl0b3InLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogY29udGVudCBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0ZXh0YXJlYS5vbmJsdXIgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5maWxlICYmIHRleHRhcmVhLnZhbHVlICE9PSBjb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KHRoaXMuZmlsZSwgdGV4dGFyZWEudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1N0IxNFx1OEJCMFx1NURGMlx1NEZERFx1NUI1OCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogdWkvd2lkZ2V0cy9XaWRnZXRGYWN0b3J5LnRzID09PVxyXG5pbXBvcnQgeyBBcHAsIENvbXBvbmVudCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgV2lkZ2V0IH0gZnJvbSAnLi4vLi4vY29yZS90eXBlcyc7XHJcbmltcG9ydCB7IERhdGFFbmdpbmUgfSBmcm9tICcuLi8uLi9jb3JlL0RhdGFFbmdpbmUnO1xyXG5pbXBvcnQgeyBTZXR0aW5nc01hbmFnZXIgfSBmcm9tICcuLi8uLi9jb3JlL1NldHRpbmdzTWFuYWdlcic7IC8vIFtcdTY1QjBcdTU4OUVdXHJcbmltcG9ydCB7IENoYXJ0V2lkZ2V0IH0gZnJvbSAnLi9DaGFydFdpZGdldCc7XHJcbmltcG9ydCB7IExpc3RXaWRnZXQgfSBmcm9tICcuL0xpc3RXaWRnZXQnOyBcclxuaW1wb3J0IHsgVG9kb1dpZGdldCB9IGZyb20gJy4vVG9kb1dpZGdldCc7XHJcbmltcG9ydCB7IE1hcmtkb3duV2lkZ2V0IH0gZnJvbSAnLi9NYXJrZG93bldpZGdldCc7XHJcblxyXG5leHBvcnQgY2xhc3MgV2lkZ2V0RmFjdG9yeSB7XHJcbiAgICBwcml2YXRlIGFwcDogQXBwO1xyXG4gICAgcHJpdmF0ZSBjb21wb25lbnQ6IENvbXBvbmVudDsgXHJcbiAgICBwcml2YXRlIGRhdGFFbmdpbmU6IERhdGFFbmdpbmU7XHJcbiAgICBwcml2YXRlIHNldHRpbmdzTWFuYWdlcjogU2V0dGluZ3NNYW5hZ2VyOyAvLyBbXHU2NUIwXHU1ODlFXVxyXG4gICAgcHJpdmF0ZSBvbkRlbGV0ZTogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIG9uRWRpdDogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIG9uTW92ZTogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgYXBwOiBBcHAsXHJcbiAgICAgICAgY29tcG9uZW50OiBDb21wb25lbnQsXHJcbiAgICAgICAgZGF0YUVuZ2luZTogRGF0YUVuZ2luZSwgXHJcbiAgICAgICAgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXIsIC8vIFtcdTY1QjBcdTU4OUVdXHJcbiAgICAgICAgb25EZWxldGU6IChpZDogc3RyaW5nKSA9PiB2b2lkLFxyXG4gICAgICAgIG9uRWRpdDogKGlkOiBzdHJpbmcpID0+IHZvaWQsXHJcbiAgICAgICAgb25Nb3ZlOiAoaWQ6IHN0cmluZykgPT4gdm9pZFxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XHJcbiAgICAgICAgdGhpcy5kYXRhRW5naW5lID0gZGF0YUVuZ2luZTtcclxuICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlciA9IHNldHRpbmdzTWFuYWdlcjsgLy8gW1x1NjVCMFx1NTg5RV1cclxuICAgICAgICB0aGlzLm9uRGVsZXRlID0gb25EZWxldGU7XHJcbiAgICAgICAgdGhpcy5vbkVkaXQgPSBvbkVkaXQ7XHJcbiAgICAgICAgdGhpcy5vbk1vdmUgPSBvbk1vdmU7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlKHdpZGdldDogV2lkZ2V0KTogYW55IHtcclxuICAgICAgICBjb25zdCBkZWxldGVIYW5kbGVyID0gKCkgPT4gdGhpcy5vbkRlbGV0ZSh3aWRnZXQuaWQpO1xyXG4gICAgICAgIGNvbnN0IGVkaXRIYW5kbGVyID0gKCkgPT4gdGhpcy5vbkVkaXQod2lkZ2V0LmlkKTtcclxuICAgICAgICBjb25zdCBtb3ZlSGFuZGxlciA9ICgpID0+IHRoaXMub25Nb3ZlKHdpZGdldC5pZCk7XHJcblxyXG4gICAgICAgIHN3aXRjaCAod2lkZ2V0LnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnY2hhcnQnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGFydFdpZGdldCh3aWRnZXQgYXMgYW55LCB0aGlzLmFwcCwgdGhpcy5kYXRhRW5naW5lLCBkZWxldGVIYW5kbGVyLCBlZGl0SGFuZGxlciwgbW92ZUhhbmRsZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY2FzZSAnbGlzdCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpc3RXaWRnZXQod2lkZ2V0IGFzIGFueSwgdGhpcy5hcHAsIGRlbGV0ZUhhbmRsZXIsIGVkaXRIYW5kbGVyLCBtb3ZlSGFuZGxlcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjYXNlICd0b2RvJzpcclxuICAgICAgICAgICAgICAgIC8vIFtcdTRGRUVcdTU5MERdIFx1NEYyMFx1OTAxMiBzZXR0aW5nc01hbmFnZXJcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVG9kb1dpZGdldCh3aWRnZXQgYXMgYW55LCB0aGlzLmFwcCwgdGhpcy5zZXR0aW5nc01hbmFnZXIsIGRlbGV0ZUhhbmRsZXIsIGVkaXRIYW5kbGVyLCBtb3ZlSGFuZGxlcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjYXNlICdtYXJrZG93bic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1hcmtkb3duV2lkZ2V0KHdpZGdldCBhcyBhbnksIHRoaXMuYXBwLCB0aGlzLmNvbXBvbmVudCwgZGVsZXRlSGFuZGxlciwgZWRpdEhhbmRsZXIsIG1vdmVIYW5kbGVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcjogKHBhcmVudDogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gcGFyZW50LmNyZWF0ZURpdignZGwtd2lkZ2V0LWNhcmQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGl2LmNyZWF0ZURpdignZGwtd2lkZ2V0LWhlYWRlcicpLnNldFRleHQod2lkZ2V0LnRpdGxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGl2LmNyZWF0ZURpdignZGwtd2lkZ2V0LWNvbnRlbnQnKS5zZXRUZXh0KGBVbmtub3duIHdpZGdldCB0eXBlOiAke3dpZGdldC50eXBlfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwgIi8vID09PSBGSUxFOiB1aS9tb2RhbHMvTW92ZVdpZGdldE1vZGFsLnRzID09PVxyXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBEYXNoYm9hcmQgfSBmcm9tICcuLi8uLi9jb3JlL2NyX2RlZl90eXBlX21haW4nO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1vdmVXaWRnZXRNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHByaXZhdGUgZGFzaGJvYXJkczogRGFzaGJvYXJkW107XHJcbiAgICBwcml2YXRlIGN1cnJlbnREYXNoYm9hcmRJZDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBvbkNob29zZTogKHRhcmdldERhc2hib2FyZElkOiBzdHJpbmcpID0+IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGRhc2hib2FyZHM6IERhc2hib2FyZFtdLCBjdXJyZW50RGFzaGJvYXJkSWQ6IHN0cmluZywgb25DaG9vc2U6IChpZDogc3RyaW5nKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLmRhc2hib2FyZHMgPSBkYXNoYm9hcmRzO1xyXG4gICAgICAgIHRoaXMuY3VycmVudERhc2hib2FyZElkID0gY3VycmVudERhc2hib2FyZElkO1xyXG4gICAgICAgIHRoaXMub25DaG9vc2UgPSBvbkNob29zZTtcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1NzlGQlx1NTJBOFx1N0VDNFx1NEVGNlx1NTIzMC4uLicgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1NjM5Mlx1OTY2NFx1NUY1M1x1NTI0RFx1NzcwQlx1Njc3RlxyXG4gICAgICAgIGNvbnN0IHRhcmdldHMgPSB0aGlzLmRhc2hib2FyZHMuZmlsdGVyKGQgPT4gZC5pZCAhPT0gdGhpcy5jdXJyZW50RGFzaGJvYXJkSWQpO1xyXG5cclxuICAgICAgICBpZiAodGFyZ2V0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZURpdih7IHRleHQ6ICdcdTZDQTFcdTY3MDlcdTUxNzZcdTRFRDZcdTc3MEJcdTY3N0ZcdTUzRUZcdTRGOUJcdTc5RkJcdTUyQThcdTMwMDInLCBzdHlsZTogJ2NvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsgZm9udC1zdHlsZTogaXRhbGljOycgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGxpc3QgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XHJcbiAgICAgICAgbGlzdC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgIGxpc3Quc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nO1xyXG4gICAgICAgIGxpc3Quc3R5bGUuZ2FwID0gJzhweCc7XHJcblxyXG4gICAgICAgIHRhcmdldHMuZm9yRWFjaChkID0+IHtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcobGlzdClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKGQubmFtZSlcclxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oYnRuID0+IGJ0blxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdTkwMDlcdTYyRTknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkNob29zZShkLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IHVpL0RpZ2l0YWxMaWZlU2V0dGluZ1RhYi50cyA9PT1cclxuaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRGlnaXRhbExpZmVQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IEZpbGVTdWdnZXN0LCBGb2xkZXJTdWdnZXN0IH0gZnJvbSAnLi9jb21wb25lbnRzL1N1Z2dlc3RlcnMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIERpZ2l0YWxMaWZlU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG4gICAgcGx1Z2luOiBEaWdpdGFsTGlmZVBsdWdpbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBEaWdpdGFsTGlmZVBsdWdpbikge1xyXG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5KCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcclxuICAgICAgICBcclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdTY1NzBcdTVCNTdcdTRFQkFcdTc1MUYgKERpZ2l0YWwgTGlmZSkgXHU4QkJFXHU3RjZFJyB9KTtcclxuXHJcbiAgICAgICAgLy8gLS0tIFRhc2sgTWFuYWdlbWVudCAoR2xvYmFsKSAtLS1cclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdTI3MDUgXHU0RUZCXHU1MkExXHU3QkExXHU3NDA2IChHbG9iYWwpJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB0YXNrU2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZ3MoKS50YXNrTWFuYWdlbWVudDtcclxuXHJcbiAgICAgICAgY29uc3QgaW5ib3hTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdTYyNDBcdTY3MDlcdTIwMUNcdTVGRUJcdTkwMUZcdTYzNTVcdTgzQjdcdTIwMURcdTc2ODRcdTRFRkJcdTUyQTFcdTVDMDZcdTlFRDhcdThCQTRcdThGRkRcdTUyQTBcdTUyMzBcdTZCNjRcdTY1ODdcdTRFRjYnKTtcclxuICAgICAgICB0aGlzLmFkZEljb25Ub1NldHRpbmcoaW5ib3hTZXR0aW5nLCAnZG93bmxvYWQtY2xvdWQnLCAnXHU2NTM2XHU5NkM2XHU3QkIxXHU4REVGXHU1Rjg0IChJbmJveCknKTtcclxuICAgICAgICBpbmJveFNldHRpbmcuYWRkVGV4dCh0ZXh0ID0+IHtcclxuICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSh0YXNrU2V0dGluZ3MuY2FwdHVyZUluYm94UGF0aClcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignMDAuSW5ib3gvVGFza3MubWQnKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhc2tTZXR0aW5ncy5jYXB0dXJlSW5ib3hQYXRoID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2V0dGluZ3NNYW5hZ2VyLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5ldyBGaWxlU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgYXJjaGl2ZVNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1NUI4Q1x1NjIxMFx1NzY4NFx1NEVGQlx1NTJBMVx1NUMwNlx1NEVFNVx1ODg2OFx1NjgzQ1x1NUY2Mlx1NUYwRlx1NUY1Mlx1Njg2M1x1NTIzMFx1NkI2NFx1NjU4N1x1NEVGNicpO1xyXG4gICAgICAgIHRoaXMuYWRkSWNvblRvU2V0dGluZyhhcmNoaXZlU2V0dGluZywgJ2FyY2hpdmUnLCAnXHU1RjUyXHU2ODYzXHU4REVGXHU1Rjg0IChBcmNoaXZlKScpO1xyXG4gICAgICAgIGFyY2hpdmVTZXR0aW5nLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgIHRleHQuc2V0VmFsdWUodGFza1NldHRpbmdzLmFyY2hpdmVQYXRoKVxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCc5OS5BcmNoaXZlL0RvbmUubWQnKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhc2tTZXR0aW5ncy5hcmNoaXZlUGF0aCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNldHRpbmdzTWFuYWdlci5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBuZXcgRmlsZVN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGF0dHJTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdTUzMDVcdTU0MkJcdTZCNjRcdTVDNUVcdTYwMjdcdTc2ODRcdTdCMTRcdThCQjBcdTVDMDZcdTg4QUJcdTg5QzZcdTRFM0FcdTIwMUNcdTRFRkJcdTUyQTFcdTdCMTRcdThCQjBcdTIwMURcdUZGMENcdTc3MEJcdTY3N0ZcdTVDMDZcdTZERjFcdTUxNjVcdTg5RTNcdTY3OTBcdTUxNzZcdTVCNTBcdTRFRkJcdTUyQTEnKTtcclxuICAgICAgICB0aGlzLmFkZEljb25Ub1NldHRpbmcoYXR0clNldHRpbmcsICd0YWcnLCAnXHU0RUZCXHU1MkExXHU3QjE0XHU4QkIwXHU2ODA3XHU4QkM2Jyk7XHJcbiAgICAgICAgYXR0clNldHRpbmcuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgLnNldFZhbHVlKHRhc2tTZXR0aW5ncy50YXNrTm90ZUF0dHJpYnV0ZSlcclxuICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCd0eXBlPXRhc2snKVxyXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0YXNrU2V0dGluZ3MudGFza05vdGVBdHRyaWJ1dGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNldHRpbmdzTWFuYWdlci5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBjb25zdCBhdXRvU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU1NzI4XHU3NzBCXHU2NzdGXHU0RTJEXHU3MEI5XHU1MUZCXHU1QjhDXHU2MjEwXHU2NUY2XHVGRjBDXHU4MUVBXHU1MkE4XHU1RjUyXHU2ODYzXHU4QkU1XHU0RUZCXHU1MkExJyk7XHJcbiAgICAgICAgdGhpcy5hZGRJY29uVG9TZXR0aW5nKGF1dG9TZXR0aW5nLCAnemFwJywgJ1x1ODFFQVx1NTJBOFx1NUY1Mlx1Njg2MycpO1xyXG4gICAgICAgIGF1dG9TZXR0aW5nLmFkZFRvZ2dsZSh0ID0+IHRcclxuICAgICAgICAgICAgLnNldFZhbHVlKHRhc2tTZXR0aW5ncy5hdXRvQXJjaGl2ZSlcclxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0YXNrU2V0dGluZ3MuYXV0b0FyY2hpdmUgPSB2O1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2V0dGluZ3NNYW5hZ2VyLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhcHR1cmVTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdTRGRUVcdTY1MzlcdTRFRkJcdTYxMEZcdTdCMTRcdThCQjBcdTY1RjZcdUZGMENcdTgxRUFcdTUyQThcdThCQzZcdTUyMkJcdTVFNzZcdTVDMDZcdTY3MkFcdTVCOENcdTYyMTBcdTc2ODRcdTRFRkJcdTUyQTFcdTc5RkJcdTUyQThcdTUyMzBcdTY1MzZcdTk2QzZcdTdCQjEgKFx1NjY3QVx1ODBGRFx1NTQwOFx1NUU3NiknKTtcclxuICAgICAgICB0aGlzLmFkZEljb25Ub1NldHRpbmcoY2FwdHVyZVNldHRpbmcsICdtYWduZXQnLCAnXHU4MUVBXHU1MkE4XHU2MzU1XHU4M0I3Jyk7XHJcbiAgICAgICAgY2FwdHVyZVNldHRpbmcuYWRkVG9nZ2xlKHQgPT4gdFxyXG4gICAgICAgICAgICAuc2V0VmFsdWUodGFza1NldHRpbmdzLmF1dG9DYXB0dXJlKVxyXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHYpID0+IHtcclxuICAgICAgICAgICAgICAgIHRhc2tTZXR0aW5ncy5hdXRvQ2FwdHVyZSA9IHY7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zZXR0aW5nc01hbmFnZXIuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gLS0tIE5vdGUgQ3JlYXRpb24gLS0tXHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2hyJyk7XHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0REIFx1N0IxNFx1OEJCMFx1NTIxQlx1NUVGQScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgdG1wbFNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0RGVzYygnXHU2QTIxXHU2NzdGXHU2NTg3XHU0RUY2XHU3NkVFXHU1RjU1Jyk7XHJcbiAgICAgICAgdGhpcy5hZGRJY29uVG9TZXR0aW5nKHRtcGxTZXR0aW5nLCAnbGF5b3V0LXRlbXBsYXRlJywgJ1x1NkEyMVx1Njc3Rlx1OERFRlx1NUY4NCcpO1xyXG4gICAgICAgIHRtcGxTZXR0aW5nLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmdzKCkubm90ZUNyZWF0b3IudGVtcGxhdGVQYXRoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5ncygpLm5vdGVDcmVhdG9yLnRlbXBsYXRlUGF0aCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNldHRpbmdzTWFuYWdlci5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBuZXcgRm9sZGVyU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gLS0tIEZvcm11bGEgLS0tXHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2hyJyk7XHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVEODNFXHVEREVFIFx1NjU3MFx1NjM2RVx1NURFNVx1NTE3NycgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoJ1x1NTQyRlx1NzUyOFx1NTE2Q1x1NUYwRlx1OEJBMVx1N0I5NycpLmFkZFRvZ2dsZSh0ID0+IHRcclxuICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5ncygpLmZvcm11bGEuaXNIaWRpbmdFbmFibGVkKVxyXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdiA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZ3MoKS5mb3JtdWxhLmlzSGlkaW5nRW5hYmxlZCA9IHY7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zZXR0aW5nc01hbmFnZXIuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkZEljb25Ub1NldHRpbmcoc2V0dGluZzogU2V0dGluZywgaWNvbklkOiBzdHJpbmcsIG5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZnJhZy5jcmVhdGVEaXYoKTtcclxuICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsgY29udGFpbmVyLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcclxuICAgICAgICBjb25zdCBpY29uU3BhbiA9IGNvbnRhaW5lci5jcmVhdGVTcGFuKCk7XHJcbiAgICAgICAgc2V0SWNvbihpY29uU3BhbiwgaWNvbklkKTtcclxuICAgICAgICBpY29uU3Bhbi5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOyBpY29uU3Bhbi5zdHlsZS5tYXJnaW5SaWdodCA9ICc1cHgnO1xyXG4gICAgICAgIGNvbnRhaW5lci5jcmVhdGVTcGFuKHsgdGV4dDogbmFtZSB9KTtcclxuICAgICAgICBzZXR0aW5nLnNldE5hbWUoZnJhZyk7XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IHVpL21vZGFscy9Qcm9wZXJ0eVZpc2liaWxpdHlNb2RhbC50cyA9PT1cclxuaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZywgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IFNldHRpbmdzTWFuYWdlciB9IGZyb20gJy4uLy4uL2NvcmUvY3JfbWFuX3NldF9zdG9yZSc7XHJcbmltcG9ydCB7IEZvcm11bGFNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vY29yZS9Gb3JtdWxhTWFuYWdlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvcGVydHlWaXNpYmlsaXR5TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBwcml2YXRlIHNldHRpbmdzTWFuYWdlcjogU2V0dGluZ3NNYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBmb3JtdWxhTWFuYWdlcjogRm9ybXVsYU1hbmFnZXI7XHJcbiAgICBwcml2YXRlIGZpbGU6IFRGaWxlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBzZXR0aW5nc01hbmFnZXI6IFNldHRpbmdzTWFuYWdlciwgZm9ybXVsYU1hbmFnZXI6IEZvcm11bGFNYW5hZ2VyLCBmaWxlOiBURmlsZSkge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIgPSBzZXR0aW5nc01hbmFnZXI7XHJcbiAgICAgICAgdGhpcy5mb3JtdWxhTWFuYWdlciA9IGZvcm11bGFNYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMuZmlsZSA9IGZpbGU7XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBgXHU3QkExXHU3NDA2XHU1QzVFXHU2MDI3XHU1M0VGXHU4OUMxXHU2MDI3OiAke3RoaXMuZmlsZS5iYXNlbmFtZX1gIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRoaXMuZmlsZSk7XHJcbiAgICAgICAgY29uc3QgZm0gPSBjYWNoZSA/IGNhY2hlLmZyb250bWF0dGVyIDoge307XHJcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGZtIHx8IHt9KS5maWx0ZXIoayA9PiBrICE9PSAncG9zaXRpb24nKTtcclxuXHJcbiAgICAgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnXHU1RjUzXHU1MjREXHU3QjE0XHU4QkIwXHU2NUUwIEZyb250bWF0dGVyIFx1NUM1RVx1NjAyNycsIGNsczogJ2RsLW5vLWRhdGEnIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmdzKCkuZm9ybXVsYTtcclxuICAgICAgICBjb25zdCBoaWRkZW5MaXN0ID0gc2V0dGluZ3MuaGlkZGVuUHJvcGVydGllcyB8fCBbXTtcclxuXHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KCk7XHJcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLm1heEhlaWdodCA9ICc0MDBweCc7XHJcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLm92ZXJmbG93WSA9ICdhdXRvJztcclxuXHJcbiAgICAgICAga2V5cy5mb3JFYWNoKGsgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBrTG93ID0gay50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBpc0hpZGRlbiA9IGhpZGRlbkxpc3QuaW5jbHVkZXMoa0xvdyk7XHJcblxyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXIpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShrKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoaXNIaWRkZW4gPyAnXHU1RjUzXHU1MjREXHU3MkI2XHU2MDAxOiBcdTk2OTBcdTg1Q0YnIDogJ1x1NUY1M1x1NTI0RFx1NzJCNlx1NjAwMTogXHU2NjNFXHU3OTNBJylcclxuICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUodCA9PiB0XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKGlzSGlkZGVuKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U2V0dGluZ3MgPSB0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IFNldChjdXJyZW50U2V0dGluZ3MuZm9ybXVsYS5oaWRkZW5Qcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2KSBzLmFkZChrTG93KTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugcy5kZWxldGUoa0xvdyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2V0dGluZ3MuZm9ybXVsYS5oaWRkZW5Qcm9wZXJ0aWVzID0gQXJyYXkuZnJvbShzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTVCOUVcdTY1RjZcdTc1MUZcdTY1NDggQ1NTXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybXVsYU1hbmFnZXIudXBkYXRlSGlkZGVuUHJvcGVydGllc0NTUygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1MjM3XHU2NUIwIFVJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25PcGVuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogdWkvbW9kYWxzL0NzdkltcG9ydE1vZGFsLnRzID09PVxyXG5pbXBvcnQgeyBBcHAsIEZ1enp5U3VnZ2VzdE1vZGFsLCBNb2RhbCwgU2V0dGluZywgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgY2xhc3MgQ3N2U2VsZWN0aW9uTW9kYWwgZXh0ZW5kcyBGdXp6eVN1Z2dlc3RNb2RhbDxURmlsZT4ge1xyXG4gICAgcHJpdmF0ZSBvbkNob29zZTogKGZpbGU6IFRGaWxlKSA9PiB2b2lkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvbkNob29zZTogKGZpbGU6IFRGaWxlKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLm9uQ2hvb3NlID0gb25DaG9vc2U7XHJcbiAgICAgICAgdGhpcy5zZXRQbGFjZWhvbGRlcignXHU5MDA5XHU2MkU5IENTViBcdTY1ODdcdTRFRjYuLi4nKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJdGVtcygpOiBURmlsZVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKS5maWx0ZXIoZiA9PiBmLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpID09PSAnY3N2Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SXRlbVRleHQoaXRlbTogVEZpbGUpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBpdGVtLnBhdGg7XHJcbiAgICB9XHJcblxyXG4gICAgb25DaG9vc2VJdGVtKGl0ZW06IFRGaWxlLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5vbkNob29zZShpdGVtKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbHVtblNlbGVjdGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcHJpdmF0ZSBoZWFkZXJzOiBzdHJpbmdbXTtcclxuICAgIHByaXZhdGUgb25TdWJtaXQ6IChpbmRpY2VzOiBudW1iZXJbXSkgPT4gdm9pZDtcclxuICAgIHByaXZhdGUgc2VsZWN0ZWRJbmRpY2VzOiBTZXQ8bnVtYmVyPjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgaGVhZGVyczogc3RyaW5nW10sIG9uU3VibWl0OiAoaW5kaWNlczogbnVtYmVyW10pID0+IHZvaWQpIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgICAgICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRpY2VzID0gbmV3IFNldChoZWFkZXJzLm1hcCgoXywgaSkgPT4gaSkpOyAvLyBcdTlFRDhcdThCQTRcdTUxNjhcdTkwMDlcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1OTAwOVx1NjJFOVx1ODk4MVx1NUJGQ1x1NTE2NVx1NzY4NFx1NTIxNycgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGxpc3RDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnZGwtY3N2LWNvbHVtbi1saXN0JyB9KTtcclxuICAgICAgICBsaXN0Q29udGFpbmVyLnN0eWxlLm1heEhlaWdodCA9ICczMDBweCc7XHJcbiAgICAgICAgbGlzdENvbnRhaW5lci5zdHlsZS5vdmVyZmxvd1kgPSAnYXV0byc7XHJcbiAgICAgICAgbGlzdENvbnRhaW5lci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjBweCc7XHJcbiAgICAgICAgbGlzdENvbnRhaW5lci5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XHJcbiAgICAgICAgbGlzdENvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gJzEwcHgnO1xyXG5cclxuICAgICAgICB0aGlzLmhlYWRlcnMuZm9yRWFjaCgoaGVhZGVyLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhsaXN0Q29udGFpbmVyKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoaGVhZGVyIHx8IGBDb2x1bW4gJHtpbmRleCArIDF9YClcclxuICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkgdGhpcy5zZWxlY3RlZEluZGljZXMuYWRkKGluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB0aGlzLnNlbGVjdGVkSW5kaWNlcy5kZWxldGUoaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ0biA9PiBidG5cclxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdTYzRDJcdTUxNjVcdTg4NjhcdTY4M0MnKVxyXG4gICAgICAgICAgICAgICAgLnNldEN0YSgpXHJcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc29ydGVkSW5kaWNlcyA9IEFycmF5LmZyb20odGhpcy5zZWxlY3RlZEluZGljZXMpLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU3VibWl0KHNvcnRlZEluZGljZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn0iLCAiLy8gPT09IEZJTEU6IGNvcmUvdXRpbHMvQ3N2UGFyc2VyLnRzID09PVxyXG5leHBvcnQgY2xhc3MgQ3N2UGFyc2VyIHtcclxuICAgIHN0YXRpYyBjb252ZXJ0VG9NYXJrZG93bihjc3ZDb250ZW50OiBzdHJpbmcsIHNlbGVjdGVkSW5kaWNlczogbnVtYmVyW10pOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHJvd3MgPSB0aGlzLnBhcnNlQ3N2KGNzdkNvbnRlbnQpO1xyXG4gICAgICAgIGlmIChyb3dzLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcnO1xyXG4gICAgICAgIGlmICghc2VsZWN0ZWRJbmRpY2VzIHx8IHNlbGVjdGVkSW5kaWNlcy5sZW5ndGggPT09IDApIHJldHVybiB0aGlzLmdlbmVyYXRlVGFibGUocm93cyk7XHJcbiAgICAgICAgY29uc3QgZmlsdGVyZWRSb3dzID0gcm93cy5tYXAocm93ID0+IHJvdy5maWx0ZXIoKF8sIGluZGV4KSA9PiBzZWxlY3RlZEluZGljZXMuaW5jbHVkZXMoaW5kZXgpKSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVUYWJsZShmaWx0ZXJlZFJvd3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRIZWFkZXJzKGNzdkNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcclxuICAgICAgICBjb25zdCByb3dzID0gdGhpcy5wYXJzZUNzdihjc3ZDb250ZW50KTtcclxuICAgICAgICByZXR1cm4gcm93cy5sZW5ndGggPiAwID8gcm93c1swXSA6IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwYXJzZUNzdih0ZXh0OiBzdHJpbmcpOiBzdHJpbmdbXVtdIHtcclxuICAgICAgICBjb25zdCByb3dzOiBzdHJpbmdbXVtdID0gW107XHJcbiAgICAgICAgbGV0IGN1cnJlbnRSb3c6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgbGV0IGN1cnJlbnRWYWx1ZSA9ICcnO1xyXG4gICAgICAgIGxldCBpblF1b3RlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjaGFyID0gdGV4dFtpXTtcclxuICAgICAgICAgICAgY29uc3QgbmV4dENoYXIgPSB0ZXh0W2kgKyAxXTtcclxuICAgICAgICAgICAgaWYgKGNoYXIgPT09ICdcIicpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpblF1b3RlICYmIG5leHRDaGFyID09PSAnXCInKSB7IGN1cnJlbnRWYWx1ZSArPSAnXCInOyBpKys7IH0gZWxzZSB7IGluUXVvdGUgPSAhaW5RdW90ZTsgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoYXIgPT09ICcsJyAmJiAhaW5RdW90ZSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFJvdy5wdXNoKGN1cnJlbnRWYWx1ZSk7IGN1cnJlbnRWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKChjaGFyID09PSAnXFxyJyB8fCBjaGFyID09PSAnXFxuJykgJiYgIWluUXVvdGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjaGFyID09PSAnXFxyJyAmJiBuZXh0Q2hhciA9PT0gJ1xcbicpIGkrKztcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRSb3cucHVzaChjdXJyZW50VmFsdWUpOyByb3dzLnB1c2goY3VycmVudFJvdyk7IGN1cnJlbnRSb3cgPSBbXTsgY3VycmVudFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7IGN1cnJlbnRWYWx1ZSArPSBjaGFyOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjdXJyZW50VmFsdWUgfHwgY3VycmVudFJvdy5sZW5ndGggPiAwKSB7IGN1cnJlbnRSb3cucHVzaChjdXJyZW50VmFsdWUpOyByb3dzLnB1c2goY3VycmVudFJvdyk7IH1cclxuICAgICAgICByZXR1cm4gcm93cy5maWx0ZXIociA9PiByLmxlbmd0aCA+IDAgJiYgKHIubGVuZ3RoID4gMSB8fCByWzBdICE9PSAnJykpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZW5lcmF0ZVRhYmxlKHJvd3M6IHN0cmluZ1tdW10pOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChyb3dzLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcnO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IHJvd3NbMF07XHJcbiAgICAgICAgY29uc3QgYm9keSA9IHJvd3Muc2xpY2UoMSk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gYHwgJHtoZWFkZXIubWFwKGNlbGwgPT4gdGhpcy5lc2NhcGVNYXJrZG93bihjZWxsKSkuam9pbignIHwgJyl9IHxgO1xyXG4gICAgICAgIGNvbnN0IHNlcGFyYXRvclJvdyA9IGB8ICR7aGVhZGVyLm1hcCgoKSA9PiAnLS0tJykuam9pbignIHwgJyl9IHxgO1xyXG4gICAgICAgIGNvbnN0IGJvZHlSb3dzID0gYm9keS5tYXAocm93ID0+IGB8ICR7cm93Lm1hcChjZWxsID0+IHRoaXMuZXNjYXBlTWFya2Rvd24oY2VsbCkpLmpvaW4oJyB8ICcpfSB8YCkuam9pbignXFxuJyk7XHJcbiAgICAgICAgcmV0dXJuIGAke2hlYWRlclJvd31cXG4ke3NlcGFyYXRvclJvd31cXG4ke2JvZHlSb3dzfWA7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGVzY2FwZU1hcmtkb3duKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKCF0ZXh0KSByZXR1cm4gJyc7XHJcbiAgICAgICAgcmV0dXJuIHRleHQucmVwbGFjZSgvXFx8L2csICdcXFxcfCcpLnJlcGxhY2UoL1xcbi9nLCAnPGJyPicpO1xyXG4gICAgfVxyXG59IiwgIi8vID09PSBGSUxFOiB1aS9tb2RhbHMvUXVpY2tUYXNrTW9kYWwudHMgPT09XHJcbmltcG9ydCB7IEFwcCwgTW9kYWwsIFNldHRpbmcsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgRGF0ZVBhcnNlciB9IGZyb20gJy4uLy4uL2NvcmUvdXRpbHMvRGF0ZVBhcnNlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgUXVpY2tUYXNrTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBwcml2YXRlIG9uU3VibWl0OiAocmVzdWx0OiBzdHJpbmcpID0+IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG9uU3VibWl0OiAocmVzdWx0OiBzdHJpbmcpID0+IHZvaWQpIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1NUZFQlx1OTAxRlx1NTIxQlx1NUVGQVx1NEVGQlx1NTJBMScgfSk7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZURpdih7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHU1M0MyXHU2NTcwOiAtUCBbXHU0RjE4XHU1MTQ4XHU3RUE3XSAtRCBbXHU2NUU1XHU2NzFGXSAtcCBbXHU5ODc5XHU3NkVFXHU1NDBEXScsIFxyXG4gICAgICAgICAgICBzdHlsZTogJ2NvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsgZm9udC1zaXplOiAwLjhlbTsgbWFyZ2luLWJvdHRvbTogMTBweDsnIFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBpbnB1dENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcclxuICAgICAgICBpbnB1dENvbnRhaW5lci5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICBpbnB1dENvbnRhaW5lci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMTVweCc7XHJcblxyXG4gICAgICAgIGNvbnN0IGlucHV0ID0gaW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0JywgeyBcclxuICAgICAgICAgICAgdHlwZTogJ3RleHQnLCBcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdcdTRGOEJcdTU5ODI6IFx1NTE5OVx1NEVFM1x1NzgwMSAtUCBcdTlBRDggLUQgXHU0RUNBXHU1OTI5IC1wIFx1NjU3MFx1NUI1N1x1NEVCQVx1NzUxRidcclxuICAgICAgICB9KTtcclxuICAgICAgICBpbnB1dC5zdHlsZS53aWR0aCA9ICcxMDAlJzsgXHJcbiAgICAgICAgaW5wdXQuc3R5bGUuYm94U2l6aW5nID0gJ2JvcmRlci1ib3gnO1xyXG4gICAgICAgIGlucHV0LmZvY3VzKCk7XHJcblxyXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VBbmRTdWJtaXQoaW5wdXQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidG4gPT4gYnRuXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHU1MjFCXHU1RUZBJylcclxuICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2VBbmRTdWJtaXQoaW5wdXQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhcnNlQW5kU3VibWl0KHJhdzogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKCFyYXcudHJpbSgpKSByZXR1cm47XHJcblxyXG4gICAgICAgIGxldCBwcmlvcml0eSA9ICcnO1xyXG4gICAgICAgIGxldCB0ZXh0ID0gcmF3O1xyXG4gICAgICAgIGNvbnN0IHBNYXRjaCA9IHRleHQubWF0Y2goLy1QXFxzKyhcdTlBRDh8XHU0RTJEfFx1NEY0RXxoaWdofG1lZGl1bXxsb3cpL2kpO1xyXG4gICAgICAgIGlmIChwTWF0Y2gpIHtcclxuICAgICAgICAgICAgY29uc3QgcFZhbCA9IHBNYXRjaFsxXS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICBpZiAoWydcdTlBRDgnLCAnaGlnaCddLmluY2x1ZGVzKHBWYWwpKSBwcmlvcml0eSA9ICdcdUQ4M0RcdUREM0EnO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChbJ1x1NEUyRCcsICdtZWRpdW0nXS5pbmNsdWRlcyhwVmFsKSkgcHJpb3JpdHkgPSAnXHUyM0VCJztcclxuICAgICAgICAgICAgZWxzZSBpZiAoWydcdTRGNEUnLCAnbG93J10uaW5jbHVkZXMocFZhbCkpIHByaW9yaXR5ID0gJ1x1RDgzRFx1REQzRCc7XHJcbiAgICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UocE1hdGNoWzBdLCAnJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgZGF0ZVN0ciA9ICcnO1xyXG4gICAgICAgIGNvbnN0IGRNYXRjaCA9IHRleHQubWF0Y2goLy1EXFxzKyhcXFMrKS9pKTtcclxuICAgICAgICBpZiAoZE1hdGNoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGUgPSBEYXRlUGFyc2VyLnBhcnNlKGRNYXRjaFsxXSk7XHJcbiAgICAgICAgICAgIGlmIChwYXJzZWREYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlU3RyID0gYFx1RDgzRFx1RENDNSAke3BhcnNlZERhdGV9YDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NjVFMFx1NkNENVx1OEJDNlx1NTIyQlx1NjVFNVx1NjcxRjogJHtkTWF0Y2hbMV19YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShkTWF0Y2hbMF0sICcnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFtcdTY1QjBcdTU4OUVdIFx1OTg3OVx1NzZFRVx1NTQwRFx1NzlGMFx1NTNDMlx1NjU3MCAtcFxyXG4gICAgICAgIGxldCBwcm9qZWN0U3RyID0gJyc7XHJcbiAgICAgICAgY29uc3QgcHJvak1hdGNoID0gdGV4dC5tYXRjaCgvLXBcXHMrKFxcUyspL2kpO1xyXG4gICAgICAgIGlmIChwcm9qTWF0Y2gpIHtcclxuICAgICAgICAgICAgcHJvamVjdFN0ciA9IGAgW1ske3Byb2pNYXRjaFsxXX1dXWA7XHJcbiAgICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UocHJvak1hdGNoWzBdLCAnJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjbGVhbkNvbnRlbnQgPSB0ZXh0LnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCk7XHJcbiAgICAgICAgY29uc3QgdGFza0xpbmUgPSBgLSBbIF0gJHtjbGVhbkNvbnRlbnR9JHtwcm9qZWN0U3RyfSAke3ByaW9yaXR5fSAke2RhdGVTdHJ9YC50cmltKCk7XHJcblxyXG4gICAgICAgIHRoaXMub25TdWJtaXQodGFza0xpbmUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufSIsICIvLyA9PT0gRklMRTogY29yZS91dGlscy9EYXRlUGFyc2VyLnRzID09PVxyXG5pbXBvcnQgeyBtb21lbnQgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgY2xhc3MgRGF0ZVBhcnNlciB7XHJcbiAgICBzdGF0aWMgcGFyc2UoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbW9tZW50KCk7XHJcbiAgICAgICAgY29uc3QgdGV4dCA9IGlucHV0LnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICBpZiAodGV4dCA9PT0gJ1x1NEVDQVx1NTkyOScgfHwgdGV4dCA9PT0gJ3RvZGF5JyB8fCB0ZXh0ID09PSAndGQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0b2RheS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRleHQgPT09ICdcdTY2MEVcdTU5MjknIHx8IHRleHQgPT09ICd0b21vcnJvdycgfHwgdGV4dCA9PT0gJ3RtJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdG9kYXkuYWRkKDEsICdkJykuZm9ybWF0KCdZWVlZLU1NLUREJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0ZXh0ID09PSAnXHU1NDBFXHU1OTI5Jykge1xyXG4gICAgICAgICAgICByZXR1cm4gdG9kYXkuYWRkKDIsICdkJykuZm9ybWF0KCdZWVlZLU1NLUREJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB3ZWVrTWFwOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge1xyXG4gICAgICAgICAgICAnXHU1NDY4XHU0RTAwJzogMSwgJ1x1NjYxRlx1NjcxRlx1NEUwMCc6IDEsICdtb24nOiAxLFxyXG4gICAgICAgICAgICAnXHU1NDY4XHU0RThDJzogMiwgJ1x1NjYxRlx1NjcxRlx1NEU4Qyc6IDIsICd0dWUnOiAyLFxyXG4gICAgICAgICAgICAnXHU1NDY4XHU0RTA5JzogMywgJ1x1NjYxRlx1NjcxRlx1NEUwOSc6IDMsICd3ZWQnOiAzLFxyXG4gICAgICAgICAgICAnXHU1NDY4XHU1NkRCJzogNCwgJ1x1NjYxRlx1NjcxRlx1NTZEQic6IDQsICd0aHUnOiA0LFxyXG4gICAgICAgICAgICAnXHU1NDY4XHU0RTk0JzogNSwgJ1x1NjYxRlx1NjcxRlx1NEU5NCc6IDUsICdmcmknOiA1LFxyXG4gICAgICAgICAgICAnXHU1NDY4XHU1MTZEJzogNiwgJ1x1NjYxRlx1NjcxRlx1NTE2RCc6IDYsICdzYXQnOiA2LFxyXG4gICAgICAgICAgICAnXHU1NDY4XHU2NUU1JzogMCwgJ1x1NjYxRlx1NjcxRlx1NjVFNSc6IDAsICdzdW4nOiAwLCAnXHU1OTI5JzogMFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFx1NTkwNFx1NzQwNiBcIlx1NTQ2OFhcIiAvIFwiXHU0RTBCXHU1NDY4WFwiXHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gd2Vla01hcCkge1xyXG4gICAgICAgICAgICBpZiAodGV4dC5lbmRzV2l0aChrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0RGF5ID0gd2Vla01hcFtrZXldO1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnREYXkgPSB0b2RheS5kYXkoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IGRpZmYgPSB0YXJnZXREYXkgLSBjdXJyZW50RGF5O1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpZmYgPD0gMCkgZGlmZiArPSA3OyAvLyBcdTlFRDhcdThCQTRcdTY2MkZcIlx1NEUwQlx1NEUwMFx1NEUyQVwiXHU1NDY4WFxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0ZXh0LnN0YXJ0c1dpdGgoJ1x1NEUwQlx1NTQ2OCcpIHx8IHRleHQuc3RhcnRzV2l0aCgnbmV4dCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlmZiArPSA3O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9kYXkuYWRkKGRpZmYsICdkJykuZm9ybWF0KCdZWVlZLU1NLUREJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE1hcmtkb3duVmlldywgZGVib3VuY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBTZWFyY2hTZXJ2aWNlLCBTZWFyY2hSZXN1bHQgfSBmcm9tICcuL1NlYXJjaFNlcnZpY2UnO1xuXG5leHBvcnQgY2xhc3MgU2VhcmNoTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBpbnB1dCE6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBsaXN0ITogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBwcmV2aWV3ITogSFRNTEVsZW1lbnQ7XG5cbiAgICBwcml2YXRlIHJlc3VsdHM6IFNlYXJjaFJlc3VsdFtdID0gW107XG4gICAgcHJpdmF0ZSBwaW5uZWQgPSBuZXcgTWFwPHN0cmluZywgU2VhcmNoUmVzdWx0PigpO1xuXG4gICAgcHJpdmF0ZSBzZXJ2aWNlOiBTZWFyY2hTZXJ2aWNlO1xuICAgIHByaXZhdGUgZGVib3VuY2VkOiAocTogc3RyaW5nKSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gbmV3IFNlYXJjaFNlcnZpY2UoYXBwKTtcbiAgICAgICAgdGhpcy5kZWJvdW5jZWQgPSBkZWJvdW5jZSh0aGlzLnNlYXJjaC5iaW5kKHRoaXMpLCAzMDAsIHRydWUpO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgZWwgPSB0aGlzLmNvbnRlbnRFbDtcbiAgICAgICAgZWwuZW1wdHkoKTtcbiAgICAgICAgZWwuc3R5bGUubWF4V2lkdGggPSAnOTAwcHgnO1xuICAgICAgICBlbC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nOyAvLyBcdUQ4M0RcdUREMTEgXHU5NjMyXHU2QjYyXHU2NTc0XHU0RjUzXHU2RURBXHU1MkE4XG5cbiAgICAgICAgZWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHU2NDFDXHU3RDIyJyB9KTtcblxuICAgICAgICB0aGlzLmlucHV0ID0gZWwuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdcdTY1MkZcdTYzMDEgQU5EIC8gT1IgLyBcdTZCNjNcdTUyMTkgKC9yZWdleC8pJ1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbnB1dC5zdHlsZS53aWR0aCA9ICcxMDAlJztcblxuICAgICAgICBjb25zdCBtYWluID0gZWwuY3JlYXRlRGl2KCk7XG4gICAgICAgIG1haW4uc3R5bGUuZGlzcGxheSA9ICdncmlkJztcbiAgICAgICAgbWFpbi5zdHlsZS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gJzFmciAyZnInO1xuICAgICAgICBtYWluLnN0eWxlLmhlaWdodCA9ICc0NTBweCc7XG4gICAgICAgIG1haW4uc3R5bGUuZ2FwID0gJzEycHgnO1xuXG4gICAgICAgIC8qIC0tLS0tLS0tLS0gXHU1REU2XHU0RkE3XHU1MjE3XHU4ODY4IC0tLS0tLS0tLS0gKi9cbiAgICAgICAgdGhpcy5saXN0ID0gbWFpbi5jcmVhdGVEaXYoKTtcbiAgICAgICAgdGhpcy5saXN0LnN0eWxlLm92ZXJmbG93WSA9ICdhdXRvJztcbiAgICAgICAgdGhpcy5saXN0LnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpJztcblxuICAgICAgICAvKiAtLS0tLS0tLS0tIFx1NTNGM1x1NEZBN1x1OTg4NFx1ODlDOFx1RkYwOFx1NzJFQ1x1N0FDQlx1NkVEQVx1NTJBOFx1RkYwOSAtLS0tLS0tLS0tICovXG4gICAgICAgIHRoaXMucHJldmlldyA9IG1haW4uY3JlYXRlRGl2KCk7XG4gICAgICAgIHRoaXMucHJldmlldy5zdHlsZS5vdmVyZmxvd1kgPSAnYXV0byc7XG4gICAgICAgIHRoaXMucHJldmlldy5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XG4gICAgICAgIHRoaXMucHJldmlldy5zdHlsZS5wYWRkaW5nID0gJzEycHgnO1xuXG4gICAgICAgIHRoaXMuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PlxuICAgICAgICAgICAgdGhpcy5kZWJvdW5jZWQodGhpcy5pbnB1dC52YWx1ZS50cmltKCkpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBzZWFyY2gocTogc3RyaW5nKSB7XG4gICAgICAgIGlmICghcSkgcmV0dXJuO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuc2VydmljZS5wZXJmb3JtU2VhcmNoKHEsIHBhcnRpYWwgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRzID0gdGhpcy5tZXJnZVBpbm5lZChwYXJ0aWFsKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTGlzdCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1lcmdlUGlubmVkKGxpc3Q6IFNlYXJjaFJlc3VsdFtdKSB7XG4gICAgICAgIGNvbnN0IG1hcCA9IG5ldyBNYXA8c3RyaW5nLCBTZWFyY2hSZXN1bHQ+KCk7XG4gICAgICAgIHRoaXMucGlubmVkLmZvckVhY2godiA9PiBtYXAuc2V0KHYucGF0aCwgdikpO1xuICAgICAgICBsaXN0LmZvckVhY2godiA9PiB7XG4gICAgICAgICAgICBpZiAoIW1hcC5oYXModi5wYXRoKSkgbWFwLnNldCh2LnBhdGgsIHYpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShtYXAudmFsdWVzKCkpLnNvcnQoXG4gICAgICAgICAgICAoYSwgYikgPT4gTnVtYmVyKGIucGlubmVkKSAtIE51bWJlcihhLnBpbm5lZCkgfHwgYi5zY29yZSAtIGEuc2NvcmVcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckxpc3QoKSB7XG4gICAgICAgIHRoaXMubGlzdC5lbXB0eSgpO1xuXG4gICAgICAgIHRoaXMucmVzdWx0cy5mb3JFYWNoKHIgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMubGlzdC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgIGl0ZW0uc3R5bGUucGFkZGluZyA9ICc2cHgnO1xuICAgICAgICAgICAgaXRlbS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG5cbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gaXRlbS5jcmVhdGVEaXYoeyB0ZXh0OiByLmZpbGUubmFtZSB9KTtcbiAgICAgICAgICAgIHRpdGxlLnN0eWxlLmZvbnRXZWlnaHQgPSAnNjAwJztcblxuICAgICAgICAgICAgY29uc3QgcGluID0gaXRlbS5jcmVhdGVTcGFuKHsgdGV4dDogci5waW5uZWQgPyAnXHVEODNEXHVEQ0NDJyA6ICdcdUQ4M0RcdURDQ0QnIH0pO1xuICAgICAgICAgICAgcGluLnN0eWxlLmZsb2F0ID0gJ3JpZ2h0JztcbiAgICAgICAgICAgIHBpbi5vbmNsaWNrID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICByLnBpbm5lZCA9ICFyLnBpbm5lZDtcbiAgICAgICAgICAgICAgICByLnBpbm5lZFxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMucGlubmVkLnNldChyLnBhdGgsIHIpXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5waW5uZWQuZGVsZXRlKHIucGF0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJMaXN0KCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpdGVtLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNob3dQcmV2aWV3KHIpO1xuICAgICAgICAgICAgaXRlbS5vbmRibGNsaWNrID0gKCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5BdChyLmZpbGUucGF0aCwgci5jb250ZW50TWF0Y2hlc1swXT8ubGluZU51bWJlciA/PyAxKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyogLS0tLS0tLS0tLSBcdTUzRjNcdTRGQTdcdTRFMEFcdTRFMEJcdTY1ODcgKyBcdTUxNzNcdTk1MkVcdThCQ0RcdTlBRDhcdTRFQUUgLS0tLS0tLS0tLSAqL1xuICAgIHByaXZhdGUgc2hvd1ByZXZpZXcocjogU2VhcmNoUmVzdWx0KSB7XG4gICAgICAgIHRoaXMucHJldmlldy5lbXB0eSgpO1xuICAgICAgICB0aGlzLnByZXZpZXcuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiByLmZpbGUubmFtZSB9KTtcblxuICAgICAgICBpZiAoIXIuY29udGVudE1hdGNoZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZpZXcuY3JlYXRlRGl2KHsgdGV4dDogJ1x1NEVDNVx1NjU4N1x1NEVGNlx1NTQwRFx1NTQ3RFx1NEUyRCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBxID0gdGhpcy5pbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICAgIGxldCByZWc6IFJlZ0V4cCB8IG51bGwgPSBudWxsO1xuXG4gICAgICAgIGlmIChxLnN0YXJ0c1dpdGgoJy8nKSAmJiBxLmVuZHNXaXRoKCcvJykpIHtcbiAgICAgICAgICAgIHJlZyA9IG5ldyBSZWdFeHAocS5zbGljZSgxLCAtMSksICdnaScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcGFydHMgPSBxLnNwbGl0KC9cXHMrfFxcfC8pLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgICAgIHJlZyA9IG5ldyBSZWdFeHAoYCgke3BhcnRzLmpvaW4oJ3wnKX0pYCwgJ2dpJyk7XG4gICAgICAgIH1cblxuICAgICAgICByLmNvbnRlbnRNYXRjaGVzLmZvckVhY2gobSA9PiB7XG4gICAgICAgICAgICBjb25zdCBibG9jayA9IHRoaXMucHJldmlldy5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgIGJsb2NrLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxMHB4JztcbiAgICAgICAgICAgIGJsb2NrLnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpJztcbiAgICAgICAgICAgIGJsb2NrLnN0eWxlLnBhZGRpbmcgPSAnNnB4JztcblxuICAgICAgICAgICAgbS5jb250ZXh0LmZvckVhY2goKGxpbmUsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gYmxvY2suY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0gcmVnID8gbGluZS5yZXBsYWNlKHJlZywgJzxtYXJrPiQxPC9tYXJrPicpIDogbGluZTtcblxuICAgICAgICAgICAgICAgIGlmIChpZHggPT09IE1hdGguZmxvb3IobS5jb250ZXh0Lmxlbmd0aCAvIDIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYmxvY2sub25jbGljayA9ICgpID0+IHRoaXMub3BlbkF0KHIuZmlsZS5wYXRoLCBtLmxpbmVOdW1iZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9wZW5BdChwYXRoOiBzdHJpbmcsIGxpbmU6IG51bWJlcikge1xuICAgICAgICBjb25zdCBsZWFmID0gYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChwYXRoLCAnJywgdHJ1ZSk7XG4gICAgICAgIGlmIChsZWFmPy52aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSB7XG4gICAgICAgICAgICBjb25zdCBlZCA9IGxlYWYudmlldy5lZGl0b3I7XG4gICAgICAgICAgICBlZC5zZXRDdXJzb3IoeyBsaW5lOiBsaW5lIC0gMSwgY2g6IDAgfSk7XG4gICAgICAgICAgICBlZC5zY3JvbGxJbnRvVmlldyh7IGxpbmU6IGxpbmUgLSAxLCBjaDogMCB9LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGludGVyZmFjZSBDb250ZW50TWF0Y2gge1xuICAgIGxpbmVOdW1iZXI6IG51bWJlcjtcbiAgICBjb250ZXh0OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWFyY2hSZXN1bHQge1xuICAgIGZpbGU6IFRGaWxlO1xuICAgIHBhdGg6IHN0cmluZztcbiAgICBzY29yZTogbnVtYmVyO1xuXG4gICAgbWF0Y2hlZEluRmlsZU5hbWU6IGJvb2xlYW47XG4gICAgbWF0Y2hlZEluQ29udGVudDogYm9vbGVhbjtcbiAgICBjb250ZW50TWF0Y2hlczogQ29udGVudE1hdGNoW107XG5cbiAgICBwaW5uZWQ/OiBib29sZWFuO1xufVxuXG50eXBlIE1hdGNoZXIgPSAodGV4dDogc3RyaW5nKSA9PiBib29sZWFuO1xuXG5leHBvcnQgY2xhc3MgU2VhcmNoU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhcHA6IEFwcCkge31cblxuICAgIC8qIC0tLS0tLS0tLS0gXHU2N0U1XHU4QkUyXHU4OUUzXHU2NzkwIC0tLS0tLS0tLS0gKi9cbiAgICBwcml2YXRlIGJ1aWxkTWF0Y2hlcihxdWVyeTogc3RyaW5nKTogTWF0Y2hlciB7XG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkudHJpbSgpO1xuXG4gICAgICAgIC8vIFx1NkI2M1x1NTIxOVxuICAgICAgICBpZiAocXVlcnkuc3RhcnRzV2l0aCgnLycpICYmIHF1ZXJ5LmVuZHNXaXRoKCcvJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlZyA9IG5ldyBSZWdFeHAocXVlcnkuc2xpY2UoMSwgLTEpLCAnaScpO1xuICAgICAgICAgICAgcmV0dXJuIHRleHQgPT4gcmVnLnRlc3QodGV4dCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBPUlxuICAgICAgICBpZiAocXVlcnkuaW5jbHVkZXMoJ3wnKSkge1xuICAgICAgICAgICAgY29uc3QgcGFydHMgPSBxdWVyeS5zcGxpdCgnfCcpLm1hcChzID0+IHMudHJpbSgpLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgcmV0dXJuIHRleHQgPT4gcGFydHMuc29tZShwID0+IHRleHQuaW5jbHVkZXMocCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQU5EXG4gICAgICAgIGNvbnN0IHBhcnRzID0gcXVlcnkudG9Mb3dlckNhc2UoKS5zcGxpdCgvXFxzKy8pO1xuICAgICAgICByZXR1cm4gdGV4dCA9PiBwYXJ0cy5ldmVyeShwID0+IHRleHQuaW5jbHVkZXMocCkpO1xuICAgIH1cblxuICAgIGFzeW5jIHBlcmZvcm1TZWFyY2goXG4gICAgICAgIHF1ZXJ5OiBzdHJpbmcsXG4gICAgICAgIG9uUGFydGlhbD86IChyOiBTZWFyY2hSZXN1bHRbXSkgPT4gdm9pZFxuICAgICk6IFByb21pc2U8U2VhcmNoUmVzdWx0W10+IHtcblxuICAgICAgICBpZiAocXVlcnkubGVuZ3RoIDwgMikgcmV0dXJuIFtdO1xuXG4gICAgICAgIGNvbnN0IG1hdGNoZXIgPSB0aGlzLmJ1aWxkTWF0Y2hlcihxdWVyeSk7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBjb25zdCByZXN1bHRzID0gbmV3IE1hcDxzdHJpbmcsIFNlYXJjaFJlc3VsdD4oKTtcblxuICAgICAgICAvKiAtLS0tLS0tLS0tIFx1NjU4N1x1NEVGNlx1NTQwRFx1NjQxQ1x1N0QyMiAtLS0tLS0tLS0tICovXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGZpbGUuYmFzZW5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBmaWxlLnBhdGgudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAgICAgaWYgKG1hdGNoZXIobmFtZSkgfHwgbWF0Y2hlcihwYXRoKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdHMuc2V0KGZpbGUucGF0aCwge1xuICAgICAgICAgICAgICAgICAgICBmaWxlLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHNjb3JlOiA4MCxcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZEluRmlsZU5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZWRJbkNvbnRlbnQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50TWF0Y2hlczogW11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG9uUGFydGlhbD8uKEFycmF5LmZyb20ocmVzdWx0cy52YWx1ZXMoKSkpO1xuXG4gICAgICAgIC8qIC0tLS0tLS0tLS0gXHU2QjYzXHU2NTg3XHU2NDFDXHU3RDIyXHVGRjA4SWRsZVx1RkYwOSAtLS0tLS0tLS0tICovXG4gICAgICAgIGNvbnN0IENPTlRFWFQgPSAyO1xuICAgICAgICBjb25zdCBNQVhfTUFUQ0ggPSA1O1xuICAgICAgICBsZXQgaW5kZXggPSAwO1xuXG4gICAgICAgIGNvbnN0IGlkbGUgPVxuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RJZGxlQ2FsbGJhY2sgPz9cbiAgICAgICAgICAgICgoY2I6IGFueSkgPT4gc2V0VGltZW91dCgoKSA9PiBjYih7IHRpbWVSZW1haW5pbmc6ICgpID0+IDEwIH0pLCAxNikpO1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHdvcmsgPSBhc3luYyAoZGVhZGxpbmU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHdoaWxlIChkZWFkbGluZS50aW1lUmVtYWluaW5nKCkgPiAwICYmIGluZGV4IDwgZmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBmaWxlc1tpbmRleCsrXTtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlLnN0YXQuc2l6ZSA+IDEwMjQgKiAxMDI0KSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xcbicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlczogQ29udGVudE1hdGNoW10gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzY29yZSA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoICYmIG1hdGNoZXMubGVuZ3RoIDwgTUFYX01BVENIOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcihsaW5lc1tpXS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IE1hdGgubWF4KDAsIGkgLSBDT05URVhUKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kID0gTWF0aC5taW4obGluZXMubGVuZ3RoLCBpICsgQ09OVEVYVCArIDEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lTnVtYmVyOiBpICsgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxpbmVzLnNsaWNlKHN0YXJ0LCBlbmQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlICs9IDMwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoL14jezEsNn1cXHMvLnRlc3QobGluZXNbaV0pKSBzY29yZSArPSAyMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gcmVzdWx0cy5nZXQoZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcubWF0Y2hlZEluQ29udGVudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLmNvbnRlbnRNYXRjaGVzLnB1c2goLi4ubWF0Y2hlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLnNjb3JlICs9IHNjb3JlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuc2V0KGZpbGUucGF0aCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZEluRmlsZU5hbWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZEluQ29udGVudDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRNYXRjaGVzOiBtYXRjaGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCB7fVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG9uUGFydGlhbD8uKEFycmF5LmZyb20ocmVzdWx0cy52YWx1ZXMoKSkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgZmlsZXMubGVuZ3RoKSBpZGxlKHdvcmspO1xuICAgICAgICAgICAgICAgIGVsc2UgcmVzb2x2ZShBcnJheS5mcm9tKHJlc3VsdHMudmFsdWVzKCkpKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlkbGUod29yayk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7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QzdCLFlBQU0sS0FBSyxhQUFhLEVBQUUsTUFBTSx3QkFBd0IsUUFBUSxLQUFLLENBQUM7QUFBQSxJQUMxRTtBQUNBLFFBQUksTUFBTTtBQUFFLGdCQUFVLFdBQVcsSUFBSTtBQUFBLElBQUc7QUFBQSxFQUM1QztBQUNKOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAidmFsIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImxhYmVsIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJtYXgiLCAiX2EiLCAiX2IiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIldpZGdldENvbmZpZ01vZGFsIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgInBhcnRzIl0KfQo=
